{"version":3,"file":"chunk-node_modules_scroll-anchoring_dist_scroll-anchoring_esm_js-app_components_notifications_notif-fce33d-xxxxxxxxxxxx.js","mappings":"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","sources":["node_modules/scroll-anchoring/dist/scroll-anchoring.esm.js","app/assets/modules/github/notifications/v2/notification-shelf-referrer-params.ts","app/components/notifications/notification-shelf-watcher-element.ts","node_modules/@github/details-dialog-element/dist/index.js","node_modules/@github/hydro-analytics-client/dist/analytics-client.js","node_modules/@github/hydro-analytics-client/dist/request-context.js","node_modules/@github/hydro-analytics-client/dist/meta-helpers.js"],"sourcesContent":["function preserveAnchorNodePosition(document, callback) {\n  return preservePosition(findAnchorNode(document), callback);\n}\nfunction preservePosition(anchorNode, callback) {\n  var node = anchorNode;\n\n  if (!node) {\n    return Promise.resolve(callback());\n  }\n\n  var documentElement = node.ownerDocument.documentElement;\n\n  function computeAncestorBoundingRects(element) {\n    var rects = [];\n\n    while (element) {\n      var _element$getBoundingC = element.getBoundingClientRect(),\n          top = _element$getBoundingC.top,\n          left = _element$getBoundingC.left;\n\n      rects.push({\n        element: element,\n        top: top,\n        left: left\n      });\n      element = element.parentElement;\n    }\n\n    return rects;\n  }\n\n  function firstAttachedBoundingRect(rects) {\n    for (var i = 0; i < rects.length; i++) {\n      var rect = rects[i];\n\n      if (documentElement.contains(rect.element)) {\n        return rect;\n      }\n    }\n  }\n\n  var origBoundingRects = computeAncestorBoundingRects(node);\n  return Promise.resolve(callback()).then(function (result) {\n    var origBoundingRect = firstAttachedBoundingRect(origBoundingRects);\n\n    if (origBoundingRect) {\n      node = origBoundingRect.element;\n      var origTop = origBoundingRect.top;\n      var origLeft = origBoundingRect.left;\n\n      var _node$getBoundingClie = node.getBoundingClientRect(),\n          top = _node$getBoundingClie.top,\n          left = _node$getBoundingClie.left;\n\n      cumulativeScrollBy(node, left - origLeft, top - origTop);\n    }\n\n    return result;\n  });\n}\nfunction findAnchorNode(document) {\n  if (document.activeElement !== document.body) {\n    return document.activeElement;\n  }\n\n  var hoverElements = document.querySelectorAll(':hover');\n  var len = hoverElements.length;\n\n  if (len) {\n    return hoverElements[len - 1];\n  }\n}\n\nfunction cumulativeScrollBy(element, x, y) {\n  var document = element.ownerDocument;\n  var window = document.defaultView;\n\n  function scrollOffsets(element) {\n    if (element.offsetParent) {\n      return {\n        top: element.scrollTop,\n        left: element.scrollLeft\n      };\n    } else {\n      return {\n        top: window.pageYOffset,\n        left: window.pageXOffset\n      };\n    }\n  }\n\n  function scrollBy(element, x, y) {\n    if (x === 0 && y === 0) {\n      return [0, 0];\n    }\n\n    var origScroll = scrollOffsets(element);\n    var top = origScroll.top + y;\n    var left = origScroll.left + x;\n\n    if (element === document || element === window || element === document.documentElement || element === document.body) {\n      document.defaultView.scrollTo(left, top);\n    } else {\n      element.scrollTop = top;\n      element.scrollLeft = left;\n    }\n\n    var newScroll = scrollOffsets(element);\n    return [newScroll.left - origScroll.left, newScroll.top - origScroll.top];\n  }\n\n  function overflowParent(el) {\n    var element = el;\n\n    if (!element.offsetParent || element === document.body) {\n      return;\n    }\n\n    while (element !== document.body) {\n      if (element.parentElement) {\n        element = element.parentElement;\n      } else {\n        return;\n      }\n\n      var _window$getComputedSt = window.getComputedStyle(element),\n          position = _window$getComputedSt.position,\n          overflowY = _window$getComputedSt.overflowY,\n          overflowX = _window$getComputedSt.overflowX;\n\n      if (position === 'fixed' || overflowY === 'auto' || overflowX === 'auto' || overflowY === 'scroll' || overflowX === 'scroll') {\n        break;\n      }\n    }\n\n    return element;\n  }\n\n  var container = overflowParent(element);\n  var cumulativeX = 0;\n  var cumulativeY = 0;\n\n  while (container) {\n    var scrolled = scrollBy(container, x - cumulativeX, y - cumulativeY);\n    cumulativeX += scrolled[0];\n    cumulativeY += scrolled[1];\n\n    if (cumulativeX === x && cumulativeY === y) {\n      break;\n    }\n\n    container = overflowParent(container);\n  }\n}\n\nexport { preserveAnchorNodePosition, preservePosition, findAnchorNode };\n","import {getItem, removeItem, setItem} from '@github-ui/safe-storage/session-storage'\n\ntype ShelfReferrerParams = {\n  notification_referrer_id?: string\n  notifications_before?: string\n  notifications_after?: string\n  notifications_query?: string\n}\n\nconst shelfParams: Array<keyof ShelfReferrerParams> = [\n  'notification_referrer_id',\n  'notifications_before',\n  'notifications_after',\n  'notifications_query',\n]\n\nconst sessionStorageKey = 'notification_shelf'\n\n/*\n * Stores url params for the shelf in session storage if present, and returns\n * search params without any shelf params.\n */\nexport function storeAndStripShelfParams(\n  searchParams: URLSearchParams,\n  pathname: string | null = null,\n): URLSearchParams | null {\n  if (searchParams.has('notification_referrer_id')) {\n    storeShelfParams(searchParams, pathname)\n    return deleteShelfParams(searchParams)\n  }\n  return null\n}\n\n/*\n * Loads the shelf params from sessionStorage if they are there and they match\n * the current pull request page, clear them otherwise.\n */\nexport function getStoredShelfParamsForCurrentPage(pathname: string | null = null): ShelfReferrerParams | null {\n  // If the current page is not a pull request, then the stored data will\n  // not match, so clear it and move on.\n  const currentPullRequestPathname = getCurrentPullRequestPathname(pathname)\n  if (!currentPullRequestPathname) {\n    removeItem(sessionStorageKey)\n    return null\n  }\n\n  try {\n    const str = getItem(sessionStorageKey)\n    if (!str) return null\n\n    const stored = JSON.parse(str)\n    if (!stored || !stored.pathname) throw new Error('Must have a pathname')\n\n    if (stored.pathname !== currentPullRequestPathname) {\n      throw new Error('Stored pathname does not match current pathname.')\n    }\n\n    const result: ShelfReferrerParams = {}\n\n    for (const key of shelfParams) {\n      result[key] = stored[key]\n    }\n\n    return result\n  } catch (e) {\n    removeItem(sessionStorageKey)\n    return null\n  }\n}\n\nfunction storeShelfParams(searchParams: URLSearchParams, pathname: string | null) {\n  const pullRequestPathname = getCurrentPullRequestPathname(pathname)\n  if (!pullRequestPathname) return\n\n  const params: {[key: string]: string} = {\n    pathname: pullRequestPathname,\n  }\n\n  for (const key of shelfParams) {\n    const value = searchParams.get(key)\n    if (value) params[key] = value\n  }\n\n  setItem(sessionStorageKey, JSON.stringify(params))\n}\n\nfunction deleteShelfParams(searchParams: URLSearchParams): URLSearchParams {\n  for (const key of shelfParams) {\n    searchParams.delete(key)\n  }\n  return searchParams\n}\n\n/*\n * Returns the base pathname of the current page if it's a pull request.\n *\n * `/github/github/pull/123/files` -> `/github/github/pull/123`\n */\nfunction getCurrentPullRequestPathname(pathname: string | null): string | null {\n  pathname = pathname || window.location.pathname\n  const pullRequestPathnameRegex = /^(\\/[^/]+\\/[^/]+\\/pull\\/[^/]+)/\n  const match = pathname.match(pullRequestPathnameRegex)\n  if (!match) return null\n\n  return match[0]\n}\n","import {attr, controller} from '@github/catalyst'\nimport {updateContent} from '../../assets/modules/github/updatable-content'\nimport {getStoredShelfParamsForCurrentPage} from '../../assets/modules/github/notifications/v2/notification-shelf-referrer-params'\n\n/**\n * NotificationShelfWatcherElement\n * This element will load the notification top shelf bar asynchronously to reduce the page dependency with notifications clusters\n * It will also listen to channel updates to update the form. This is done because some notifications are marked as read asynchronously\n * which means the form might not have the latest data on first load\n */\n@controller\nexport class NotificationShelfWatcherElement extends HTMLElement {\n  @attr baseUrl: string\n  @attr refreshDelay = 500 // ms\n\n  src: string | void\n  timeout: ReturnType<typeof setTimeout> | void\n\n  connectedCallback() {\n    this.preload()\n    this.update()\n    this.addEventListener('socket:message', this.update.bind(this))\n  }\n\n  preload() {\n    this.src = this.preloadSrc()\n  }\n\n  preloadSrc(): string {\n    const src = this.getAttribute('src')\n    if (src && src !== '') {\n      const link = this.ownerDocument.createElement('a')\n      link.href = src\n      return link.href\n    }\n\n    // Try to load the src from the storage\n    // This is useful for when the page is reloaded and it doesn't have the notification_referrer_id in the URL\n    // anymore because it was removed on first load\n    if (!this.baseUrl) {\n      return ''\n    }\n\n    const params = getStoredShelfParamsForCurrentPage()\n    if (!params) {\n      return ''\n    }\n\n    const shelfURL = new URL(this.baseUrl, window.location.origin)\n    const searchParams = new URLSearchParams(shelfURL.search)\n\n    for (const [key, value] of Object.entries(params)) {\n      if (typeof value === 'string') {\n        searchParams.set(key, value)\n      }\n    }\n    shelfURL.search = searchParams.toString()\n\n    return shelfURL.toString()\n  }\n\n  async update() {\n    if (this.timeout) {\n      clearTimeout(this.timeout)\n    }\n\n    if (!this.src || this.src === '') {\n      return\n    }\n\n    const el = this.placeholder()\n    if (!el) {\n      return\n    }\n\n    const isInitial = el.hasAttribute('data-initial')\n\n    el.setAttribute('data-url', this.src)\n    await updateContent(el)\n\n    if (isInitial) {\n      this.refresh()\n    }\n  }\n\n  placeholder(): HTMLElement | null {\n    return document.querySelector<HTMLElement>(\"[data-target='notification-shelf-watcher.placeholder']\")\n  }\n\n  refresh() {\n    const el = this.placeholder()\n    if (!el) {\n      return\n    }\n\n    const inner = el.querySelector(\"[data-notification-status='unread']\")\n\n    // First time loading and the content is shown as unread. This could be because the\n    // `mark_as_read` action in the controller was delayed. Try to fetch it again.\n    if (inner) {\n      this.timeout = setTimeout(() => this.update(), this.refreshDelay)\n    }\n  }\n}\n","const CLOSE_ATTR = 'data-close-dialog';\nconst CLOSE_SELECTOR = `[${CLOSE_ATTR}]`;\nfunction autofocus(el) {\n    let autofocusElement = Array.from(el.querySelectorAll('[autofocus]')).filter(focusable)[0];\n    if (!autofocusElement) {\n        autofocusElement = el;\n        el.setAttribute('tabindex', '-1');\n    }\n    autofocusElement.focus();\n}\nfunction keydown(event) {\n    const details = event.currentTarget;\n    if (!(details instanceof Element))\n        return;\n    if (event.key === 'Escape' || event.key === 'Esc') {\n        toggleDetails(details, false);\n        event.stopPropagation();\n    }\n    else if (event.key === 'Tab') {\n        restrictTabBehavior(event);\n    }\n}\nfunction focusable(el) {\n    return el.tabIndex >= 0 && !el.disabled && visible(el);\n}\nfunction visible(el) {\n    return (!el.hidden &&\n        (!el.type || el.type !== 'hidden') &&\n        (el.offsetWidth > 0 || el.offsetHeight > 0));\n}\nfunction restrictTabBehavior(event) {\n    if (!(event.currentTarget instanceof Element))\n        return;\n    const dialog = event.currentTarget.querySelector('details-dialog');\n    if (!dialog)\n        return;\n    event.preventDefault();\n    const elements = Array.from(dialog.querySelectorAll('*')).filter(focusable);\n    if (elements.length === 0)\n        return;\n    const movement = event.shiftKey ? -1 : 1;\n    const root = dialog.getRootNode();\n    const currentFocus = dialog.contains(root.activeElement) ? root.activeElement : null;\n    let targetIndex = movement === -1 ? -1 : 0;\n    if (currentFocus instanceof HTMLElement) {\n        const currentIndex = elements.indexOf(currentFocus);\n        if (currentIndex !== -1) {\n            targetIndex = currentIndex + movement;\n        }\n    }\n    if (targetIndex < 0) {\n        targetIndex = elements.length - 1;\n    }\n    else {\n        targetIndex = targetIndex % elements.length;\n    }\n    elements[targetIndex].focus();\n}\nfunction allowClosingDialog(details) {\n    const dialog = details.querySelector('details-dialog');\n    if (!(dialog instanceof DetailsDialogElement))\n        return true;\n    return dialog.dispatchEvent(new CustomEvent('details-dialog-close', {\n        bubbles: true,\n        cancelable: true\n    }));\n}\nfunction onSummaryClick(event) {\n    if (!(event.currentTarget instanceof Element))\n        return;\n    const details = event.currentTarget.closest('details');\n    if (!details || !details.hasAttribute('open'))\n        return;\n    if (!allowClosingDialog(details)) {\n        event.preventDefault();\n        event.stopPropagation();\n    }\n}\nfunction toggle(event) {\n    const details = event.currentTarget;\n    if (!(details instanceof Element))\n        return;\n    const dialog = details.querySelector('details-dialog');\n    if (!(dialog instanceof DetailsDialogElement))\n        return;\n    if (details.hasAttribute('open')) {\n        const root = 'getRootNode' in dialog ? dialog.getRootNode() : document;\n        if (root.activeElement instanceof HTMLElement) {\n            initialized.set(dialog, { details, activeElement: root.activeElement });\n        }\n        autofocus(dialog);\n        details.addEventListener('keydown', keydown);\n    }\n    else {\n        for (const form of dialog.querySelectorAll('form')) {\n            form.reset();\n        }\n        const focusElement = findFocusElement(details, dialog);\n        if (focusElement)\n            focusElement.focus();\n        details.removeEventListener('keydown', keydown);\n    }\n}\nfunction findFocusElement(details, dialog) {\n    const state = initialized.get(dialog);\n    if (state && state.activeElement instanceof HTMLElement) {\n        return state.activeElement;\n    }\n    else {\n        return details.querySelector('summary');\n    }\n}\nfunction toggleDetails(details, open) {\n    if (open === details.hasAttribute('open'))\n        return;\n    if (open) {\n        details.setAttribute('open', '');\n    }\n    else if (allowClosingDialog(details)) {\n        details.removeAttribute('open');\n    }\n}\nfunction loadIncludeFragment(event) {\n    const details = event.currentTarget;\n    if (!(details instanceof Element))\n        return;\n    const dialog = details.querySelector('details-dialog');\n    if (!(dialog instanceof DetailsDialogElement))\n        return;\n    const loader = dialog.querySelector('include-fragment:not([src])');\n    if (!loader)\n        return;\n    const src = dialog.src;\n    if (src === null)\n        return;\n    loader.addEventListener('loadend', () => {\n        if (details.hasAttribute('open'))\n            autofocus(dialog);\n    });\n    loader.setAttribute('src', src);\n    removeIncludeFragmentEventListeners(details);\n}\nfunction updateIncludeFragmentEventListeners(details, src, preload) {\n    removeIncludeFragmentEventListeners(details);\n    if (src) {\n        details.addEventListener('toggle', loadIncludeFragment, { once: true });\n    }\n    if (src && preload) {\n        details.addEventListener('mouseover', loadIncludeFragment, { once: true });\n    }\n}\nfunction removeIncludeFragmentEventListeners(details) {\n    details.removeEventListener('toggle', loadIncludeFragment);\n    details.removeEventListener('mouseover', loadIncludeFragment);\n}\nconst initialized = new WeakMap();\nclass DetailsDialogElement extends HTMLElement {\n    static get CLOSE_ATTR() {\n        return CLOSE_ATTR;\n    }\n    static get CLOSE_SELECTOR() {\n        return CLOSE_SELECTOR;\n    }\n    constructor() {\n        super();\n        initialized.set(this, { details: null, activeElement: null });\n        this.addEventListener('click', function ({ target }) {\n            if (!(target instanceof Element))\n                return;\n            const details = target.closest('details');\n            if (details && target.closest(CLOSE_SELECTOR)) {\n                toggleDetails(details, false);\n            }\n        });\n    }\n    get src() {\n        return this.getAttribute('src');\n    }\n    set src(value) {\n        this.setAttribute('src', value || '');\n    }\n    get preload() {\n        return this.hasAttribute('preload');\n    }\n    set preload(value) {\n        value ? this.setAttribute('preload', '') : this.removeAttribute('preload');\n    }\n    connectedCallback() {\n        this.setAttribute('role', 'dialog');\n        this.setAttribute('aria-modal', 'true');\n        const state = initialized.get(this);\n        if (!state)\n            return;\n        const details = this.parentElement;\n        if (!details)\n            return;\n        const summary = details.querySelector('summary');\n        if (summary) {\n            if (!summary.hasAttribute('role'))\n                summary.setAttribute('role', 'button');\n            summary.addEventListener('click', onSummaryClick, { capture: true });\n        }\n        details.addEventListener('toggle', toggle);\n        state.details = details;\n        updateIncludeFragmentEventListeners(details, this.src, this.preload);\n    }\n    disconnectedCallback() {\n        const state = initialized.get(this);\n        if (!state)\n            return;\n        const { details } = state;\n        if (!details)\n            return;\n        details.removeEventListener('toggle', toggle);\n        removeIncludeFragmentEventListeners(details);\n        const summary = details.querySelector('summary');\n        if (summary) {\n            summary.removeEventListener('click', onSummaryClick, { capture: true });\n        }\n        state.details = null;\n    }\n    toggle(open) {\n        const state = initialized.get(this);\n        if (!state)\n            return;\n        const { details } = state;\n        if (!details)\n            return;\n        toggleDetails(details, open);\n    }\n    static get observedAttributes() {\n        return ['src', 'preload'];\n    }\n    attributeChangedCallback() {\n        const state = initialized.get(this);\n        if (!state)\n            return;\n        const { details } = state;\n        if (!details)\n            return;\n        updateIncludeFragmentEventListeners(details, this.src, this.preload);\n    }\n}\nexport default DetailsDialogElement;\nif (!window.customElements.get('details-dialog')) {\n    window.DetailsDialogElement = DetailsDialogElement;\n    window.customElements.define('details-dialog', DetailsDialogElement);\n}\n","import { getRequestContext } from './request-context.js';\nimport { getOrCreateClientId } from './client-id.js';\nexport class AnalyticsClient {\n    constructor(options) {\n        this.options = options;\n    }\n    get collectorUrl() {\n        return this.options.collectorUrl;\n    }\n    get clientId() {\n        if (this.options.clientId) {\n            return this.options.clientId;\n        }\n        return getOrCreateClientId();\n    }\n    createEvent(context) {\n        return {\n            page: location.href,\n            title: document.title,\n            context: {\n                ...this.options.baseContext,\n                ...context\n            }\n        };\n    }\n    sendPageView(context) {\n        const pageView = this.createEvent(context);\n        this.send({ page_views: [pageView] });\n    }\n    sendEvent(type, context) {\n        const event = {\n            ...this.createEvent(context),\n            type\n        };\n        this.send({ events: [event] });\n    }\n    send({ page_views, events }) {\n        const payload = {\n            client_id: this.clientId,\n            page_views,\n            events,\n            request_context: getRequestContext()\n        };\n        const body = JSON.stringify(payload);\n        try {\n            if (navigator.sendBeacon) {\n                navigator.sendBeacon(this.collectorUrl, body);\n                return;\n            }\n        }\n        catch {\n        }\n        fetch(this.collectorUrl, {\n            method: 'POST',\n            cache: 'no-cache',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body,\n            keepalive: false\n        });\n    }\n}\n","function getReferrer() {\n    let referrer;\n    try {\n        referrer = window.top.document.referrer;\n    }\n    catch (error) {\n        if (window.parent) {\n            try {\n                referrer = window.parent.document.referrer;\n            }\n            catch (_) {\n            }\n        }\n    }\n    if (referrer === '') {\n        referrer = document.referrer;\n    }\n    return referrer;\n}\nfunction getScreenResolution() {\n    try {\n        return `${screen.width}x${screen.height}`;\n    }\n    catch (error) {\n        return 'unknown';\n    }\n}\nfunction getBrowserResolution() {\n    let height = 0;\n    let width = 0;\n    try {\n        if (typeof window.innerWidth === 'number') {\n            width = window.innerWidth;\n            height = window.innerHeight;\n        }\n        else if (document.documentElement != null && document.documentElement.clientWidth != null) {\n            width = document.documentElement.clientWidth;\n            height = document.documentElement.clientHeight;\n        }\n        else if (document.body != null && document.body.clientWidth != null) {\n            width = document.body.clientWidth;\n            height = document.body.clientHeight;\n        }\n        return `${width}x${height}`;\n    }\n    catch (error) {\n        return 'unknown';\n    }\n}\nfunction getBrowserLanguages() {\n    if (navigator.languages) {\n        return navigator.languages.join(',');\n    }\n    else {\n        return navigator.language || '';\n    }\n}\nexport function getRequestContext() {\n    return {\n        referrer: getReferrer(),\n        user_agent: navigator.userAgent,\n        screen_resolution: getScreenResolution(),\n        browser_resolution: getBrowserResolution(),\n        browser_languages: getBrowserLanguages(),\n        pixel_ratio: window.devicePixelRatio,\n        timestamp: Date.now(),\n        tz_seconds: new Date().getTimezoneOffset() * -60\n    };\n}\n","export function getOptionsFromMeta(prefix = 'ha') {\n    let collectorUrl;\n    const baseContext = {};\n    const metaTags = document.head.querySelectorAll(`meta[name^=\"${prefix}-\"]`);\n    for (const meta of Array.from(metaTags)) {\n        const { name: originalName, content } = meta;\n        const name = originalName.replace(`${prefix}-`, '').replace(/-/g, '_');\n        if (name === 'url') {\n            collectorUrl = content;\n        }\n        else {\n            baseContext[name] = content;\n        }\n    }\n    if (!collectorUrl) {\n        throw new Error(`AnalyticsClient ${prefix}-url meta tag not found`);\n    }\n    return {\n        collectorUrl,\n        ...(Object.keys(baseContext).length > 0 ? { baseContext } : {})\n    };\n}\n"],"names":["preserveAnchorNodePosition","document","callback","preservePosition","findAnchorNode","activeElement","body","hoverElements","querySelectorAll","len","length","anchorNode","node","Promise","resolve","documentElement","ownerDocument","origBoundingRects","computeAncestorBoundingRects","element","rects","_element$getBoundingC","getBoundingClientRect","top","left","push","parentElement","then","result","origBoundingRect","firstAttachedBoundingRect","i","rect","contains","origTop","origLeft","_node$getBoundingClie","cumulativeScrollBy","x","y","window","defaultView","scrollOffsets","offsetParent","scrollTop","scrollLeft","pageYOffset","pageXOffset","overflowParent","el","_window$getComputedSt","getComputedStyle","position","overflowY","overflowX","container","cumulativeX","cumulativeY","scrolled","scrollBy","origScroll","scrollTo","newScroll","shelfParams","sessionStorageKey","storeAndStripShelfParams","searchParams","pathname","has","storeShelfParams","pullRequestPathname","getCurrentPullRequestPathname","params","key","value","get","setItem","JSON","stringify","deleteShelfParams","delete","getStoredShelfParamsForCurrentPage","currentPullRequestPathname","removeItem","str","getItem","stored","parse","e","location","match","NotificationShelfWatcherElement","HTMLElement","connectedCallback","preload","update","addEventListener","bind","src","preloadSrc","getAttribute","link","createElement","href","baseUrl","shelfURL","URL","origin","URLSearchParams","search","Object","entries","set","toString","timeout","clearTimeout","placeholder","isInitial","hasAttribute","setAttribute","updateContent","refresh","querySelector","inner","setTimeout","refreshDelay","attr","controller","CLOSE_ATTR","CLOSE_SELECTOR","autofocus","autofocusElement","Array","from","filter","focusable","focus","keydown","event","details","currentTarget","Element","toggleDetails","stopPropagation","restrictTabBehavior","dialog","preventDefault","elements","movement","shiftKey","root","getRootNode","currentFocus","targetIndex","currentIndex","indexOf","tabIndex","disabled","hidden","type","offsetWidth","offsetHeight","allowClosingDialog","DetailsDialogElement","dispatchEvent","CustomEvent","bubbles","cancelable","onSummaryClick","closest","toggle","initialized","form","reset","focusElement","findFocusElement","state","removeEventListener","open","removeAttribute","loadIncludeFragment","loader","removeIncludeFragmentEventListeners","updateIncludeFragmentEventListeners","once","WeakMap","constructor","target","summary","capture","disconnectedCallback","observedAttributes","attributeChangedCallback","customElements","define","AnalyticsClient","options","collectorUrl","clientId","createEvent","context","page","title","baseContext","sendPageView","pageView","send","page_views","sendEvent","events","payload","client_id","request_context","referrer","getReferrer","error","parent","_","user_agent","navigator","userAgent","screen_resolution","getScreenResolution","screen","width","height","browser_resolution","getBrowserResolution","innerWidth","innerHeight","clientWidth","clientHeight","browser_languages","languages","join","language","pixel_ratio","devicePixelRatio","timestamp","Date","now","tz_seconds","getTimezoneOffset","sendBeacon","fetch","method","cache","headers","keepalive","getOptionsFromMeta","prefix","metaTags","head","meta","name","originalName","content","replace","keys"],"sourceRoot":""}