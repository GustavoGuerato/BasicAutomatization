{"version":3,"file":"behaviors-xxxxxxxxxxxx.js","mappings":"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","sources":["app/assets/modules/github/behaviors/autosearch-form.ts","app/assets/modules/github/behaviors/favicon.ts","app/assets/modules/github/behaviors/hovercards.ts","app/assets/modules/github/behaviors/hydro-stats.ts","app/assets/modules/github/behaviors/quote-selection.ts","app/assets/modules/github/alive/idle-state.ts","ui/packages/turbo/frame.ts","app/assets/modules/github/png-scanner.ts","app/assets/modules/github/upload/attachment-upload.ts","app/assets/modules/github/upload/batch.ts","app/assets/modules/github/behaviors/sudo-credential-options.ts","app/assets/modules/github/behaviors/ajax-loading.ts","app/assets/modules/github/behaviors/ajax-pagination.ts","app/assets/modules/github/behaviors/console-debug.ts","app/assets/modules/github/behaviors/analytics-events.ts","app/assets/modules/github/behaviors/animated-image.ts","app/assets/modules/github/behaviors/autocheck.ts","app/assets/modules/github/behaviors/autocomplete.ts","app/assets/modules/github/behaviors/autoselect.ts","app/assets/modules/github/behaviors/autosubmit.ts","app/assets/modules/github/behaviors/avatar-reset-text.ts","app/assets/modules/github/behaviors/billing-addons.ts","app/assets/modules/github/repositories/blob-header.ts","app/assets/modules/github/behaviors/blob-csv.ts","app/assets/modules/github/behaviors/branch-protection-integration-select.ts","app/assets/modules/github/behaviors/bulk-actions.ts","app/assets/modules/github/behaviors/bundle-download-stats.ts","app/assets/modules/github/behaviors/buttons.ts","app/assets/modules/github/behaviors/check-all.ts","app/assets/modules/github/behaviors/clear-data-on-logout.ts","app/assets/modules/github/behaviors/clipboard-copy.ts","app/assets/modules/github/behaviors/code-nav.ts","app/assets/modules/github/behaviors/commenting/ajax.ts","app/assets/modules/github/behaviors/commenting/close.ts","app/assets/modules/github/behaviors/commenting/focus.ts","app/assets/modules/github/image-dimensions.ts","app/assets/modules/github/behaviors/commenting/caret-placement.ts","app/assets/modules/github/behaviors/commenting/markdown.ts","app/assets/modules/github/behaviors/commenting/preview.ts","app/assets/modules/github/behaviors/commenting/reaction-suggestion.ts","app/assets/modules/github/behaviors/commits.ts","app/assets/modules/github/behaviors/company-name-input.ts","app/assets/modules/github/behaviors/company-owned.ts","app/assets/modules/github/behaviors/details-menu.ts","app/assets/modules/github/behaviors/dialog-helpers.ts","app/assets/modules/github/behaviors/disable-with.ts","app/assets/modules/github/behaviors/feature-preview-indicator.ts","app/assets/modules/github/upload/batch-upload.ts","app/assets/modules/github/behaviors/feature-preview-trigger.ts","app/assets/modules/github/behaviors/file-attachment.ts","app/assets/modules/github/filter-list.ts","app/assets/modules/github/behaviors/filter-input.ts","app/assets/modules/github/filter-sort-list.ts","app/assets/modules/github/substring-memory-filter-list.ts","app/assets/modules/github/labels-typeahead-filter-list.ts","app/assets/modules/github/behaviors/filterable.ts","app/assets/modules/github/behaviors/fixed-offset-fragment-navigation-observer.ts","app/assets/modules/github/behaviors/flash.ts","app/assets/modules/github/flash.ts","app/assets/modules/github/behaviors/flash-observer.ts","app/assets/modules/github/behaviors/focus-delay.ts","app/assets/modules/github/behaviors/form-toggle.ts","app/assets/modules/github/behaviors/fuzzy-list.ts","app/assets/modules/github/behaviors/hooks.ts","app/assets/modules/github/behaviors/gfm.ts","ui/packages/hotkey/observer.ts","app/assets/modules/github/behaviors/hotkey-map.ts","app/assets/modules/github/behaviors/timing-stats.ts","app/assets/modules/github/behaviors/hpc.ts","app/assets/modules/github/behaviors/image-metric-tracking.ts","app/assets/modules/github/behaviors/hydro-analytics-pageview.ts","app/assets/modules/github/behaviors/hydro-analytics-tracking.ts","app/assets/modules/github/behaviors/hydro-click-tracking.ts","app/assets/modules/github/behaviors/immediate-updates.ts","app/assets/modules/github/behaviors/indeterminate.ts","app/assets/modules/github/behaviors/jump-to-loader.ts","app/assets/modules/github/behaviors/keyboard-shortcuts.ts","app/assets/modules/github/behaviors/length-limited-input-with-warning.ts","app/assets/modules/github/behaviors/member-search-filter.ts","app/assets/modules/github/behaviors/notice.ts","app/assets/modules/github/behaviors/open-in-github-dev.ts","app/assets/modules/github/behaviors/permalink.ts","app/assets/modules/github/behaviors/permission-menu-form.ts","app/assets/modules/github/behaviors/turbo-timing.ts","app/assets/modules/github/behaviors/print-popup.ts","app/assets/modules/github/behaviors/poll-include-fragment.ts","app/assets/modules/github/behaviors/quick-submit.ts","app/assets/modules/github/behaviors/reactions.ts","app/assets/modules/github/behaviors/report-long-tasks.ts","app/assets/modules/github/behaviors/remote-form.ts","app/assets/modules/github/behaviors/removed-contents.ts","app/assets/modules/github/behaviors/replace-remote-form.ts","app/assets/modules/github/behaviors/responsive-markdown-toolbar.ts","app/assets/modules/github/behaviors/saved-replies.ts","app/assets/modules/github/behaviors/scanning.ts","app/assets/modules/github/notifications/v2/notification-shelf-helpers.ts","app/assets/modules/github/behaviors/site-notifications.ts","app/assets/modules/github/behaviors/site-search.ts","app/assets/modules/github/behaviors/size-to-fit.ts","app/assets/modules/github/behaviors/smooth-scroll-anchor.ts","app/assets/modules/github/behaviors/snippet-clipboard-copy.ts","app/assets/modules/github/behaviors/social.ts","app/assets/modules/github/behaviors/socket-channel.ts","app/assets/modules/github/behaviors/stale-session.ts","app/assets/modules/github/behaviors/sso-auto-replay.ts","app/assets/modules/github/behaviors/statuses.ts","app/assets/modules/github/behaviors/sudo-required.ts","app/assets/modules/github/behaviors/suggesters/emoji-suggester.ts","app/assets/modules/github/behaviors/suggesters/issue-suggester.ts","app/assets/modules/github/behaviors/suggesters/mention-suggester.ts","app/assets/modules/github/behaviors/survey.ts","app/assets/modules/github/behaviors/sync-details-text.ts","app/assets/modules/github/behaviors/tab-container.ts","app/assets/modules/github/behaviors/team-members.ts","app/assets/modules/github/behaviors/timeline/marker.ts","app/assets/modules/github/behaviors/timeline/progressive.ts","app/assets/modules/github/behaviors/register-service-worker.ts","app/assets/modules/github/behaviors/targetable-elements.ts","app/assets/modules/github/behaviors/timeline/timeline-accessibility.ts","app/assets/modules/github/behaviors/toggler.ts","ui/packages/turbo/setup.ts","ui/packages/turbo/history.ts","ui/packages/turbo/progress-bar.ts","ui/packages/turbo/cache.ts","ui/packages/turbo/events.ts","ui/packages/turbo/soft-nav.ts","app/assets/modules/github/behaviors/tz-cookie.ts","app/assets/modules/github/timezone.ts","app/assets/modules/github/behaviors/unread-comments.ts","app/assets/modules/github/behaviors/unread-item-counter.ts","app/assets/modules/github/behaviors/updatable-content-stale-object.ts","app/assets/modules/github/behaviors/updatable-content-observer.ts","app/assets/modules/github/behaviors/upload-avatar.ts","app/assets/modules/github/behaviors/user-content.ts","app/assets/modules/github/behaviors/user-status-loader.ts","app/assets/modules/github/behaviors/user-lists.ts","app/assets/modules/github/behaviors/warn-unsaved-changes.ts","app/assets/modules/github/behaviors/will-transition-once.ts","app/assets/modules/github/issues/issue-link.ts","app/assets/modules/github/issues/labels.ts","app/assets/modules/github/notifications/configure-thread-subscription-dialog.ts","app/assets/modules/github/issues/sidebar-widget.ts","app/assets/modules/github/issues/sidebar-memex-input.ts","app/assets/modules/github/issues/sidebar.ts","app/assets/modules/github/memex/search.ts","app/assets/modules/behaviors.ts","app/assets/modules/github/behaviors/batch-deferred-content/batch-loader.ts","app/assets/modules/github/behaviors/batch-deferred-content.ts","app/assets/modules/github/behaviors/button-outline.ts","app/assets/modules/github/behaviors/characters-remaining.ts","app/assets/modules/github/behaviors/confirm.ts","app/assets/modules/github/behaviors/details-element.ts","app/assets/modules/github/behaviors/document-dropzone.ts","app/assets/modules/github/behaviors/encrypt.ts","app/assets/modules/github/behaviors/responsive-underlinenav.ts","app/assets/modules/github/behaviors/session-resume.ts","app/assets/modules/github/behaviors/side-navigation.ts","app/assets/modules/github/behaviors/tag-input.ts","app/assets/modules/github/behaviors/user-select-contain-polyfill.ts","app/assets/modules/github/blob-anchor.ts","app/assets/modules/github/code-editor.ts","app/assets/modules/github/filter-sort.ts","app/assets/modules/github/iterables.ts","app/assets/modules/github/fuzzy-filter.ts","app/assets/modules/github/fuzzy-list-element.ts","app/assets/modules/github/hydro-tracking.ts","app/assets/modules/github/jump-to/ranking.ts","app/assets/modules/github/jump-to/page-views.ts","app/assets/modules/github/notifications/v2/notification-shelf-referrer-params.ts","app/assets/modules/github/notifications/v2/update-notification-states.ts","app/assets/modules/github/range.ts","app/assets/modules/github/session-resume-helpers.ts","app/assets/modules/github/sessions/github-mobile-two-factor.ts","app/assets/modules/github/sessions/two-factor.ts","app/assets/modules/github/throttled-input.ts","app/assets/modules/github/visible.ts","ui/packages/alive/alive.ts","ui/packages/alive/session.ts","ui/packages/trusted-types-policies/alive.ts","ui/packages/allow-user-content-scrolling/allow-user-content-scrolling.ts","ui/packages/code-mirror/emit-to-codemirror.ts","ui/packages/document-metadata/document-metadata.ts","ui/packages/eventloop-tasks/eventloop-tasks.ts","ui/packages/is-hash-navigation/is-hash-navigation.ts","ui/packages/trusted-types-policies/jtml.ts","ui/packages/jtml-shimmed/jtml-shimmed.ts","ui/packages/sudo/sudo.ts","ui/packages/text/text.ts","ui/packages/trusted-types-policies/turbo.ts","ui/packages/turbo/utils.ts","ui/packages/webauthn-get-element/webauthn-get-element.ts","ui/packages/webauthn-support-level/webauthn-support-level.ts"],"sourcesContent":["// Autosearch form\n//\n// Automatically replaces the contents of a container against a search field\n// in the search form.\n//\n// Note: Using `data-throttled-autosubmit` means that the form will autosubmit\n// on input with a bit of throttle so that we don't send unnessesary requests\n// to the server. See `app/assets/modules/github/behaviors/autosubmit.js`.\n//\n// Markup:\n//\n// `data-autosearch-results-container` - The ID of the container to update with results\n//\n// <form action=\"/search\" data-autosearch-results-container=\"search-results\">\n//   <input type=\"search\" placeholder=\"Find something\" data-throttled-autosubmit>\n//   <div id=\"search-results\">\n//     This content will get replaced when the input changes\n//   </div>\n// </form>\n//\nimport {announceFromElement} from '@github-ui/aria-live'\nimport {combineGetFormSearchParams} from '@github-ui/form-utils'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {parseHTML} from '@github-ui/parse-html'\nimport {replaceState} from '../history'\n\nlet previousController: AbortController | null = null\nlet resultsTimeout: ReturnType<typeof setTimeout> | undefined\nconst NO_DELAY = 0\nconst SCREEN_READER_DELAY = 500\non('submit', '[data-autosearch-results-container]', async function (event) {\n  const form = event.currentTarget\n  if (!(form instanceof HTMLFormElement)) return\n  event.preventDefault()\n\n  previousController?.abort()\n  form.classList.add('is-sending')\n  const url = new URL(form.action, window.location.origin)\n  const method = form.method\n  const formData = new FormData(form)\n  const serialized = combineGetFormSearchParams(url, formData)\n  let body = null\n  if (method === 'get') {\n    url.search = serialized\n  } else {\n    body = formData\n  }\n  const {signal} = (previousController = new AbortController())\n  const request = new Request(url.toString(), {\n    method,\n    body,\n    signal,\n    headers: {Accept: 'text/html', 'X-Requested-With': 'XMLHttpRequest'},\n  })\n  let response: Response | null = null\n  try {\n    response = await fetch(request)\n  } catch {\n    // Ignore network errors\n  }\n  form.classList.remove('is-sending')\n  if (!response || !response.ok || signal.aborted) return\n  const id = form.getAttribute('data-autosearch-results-container')\n  const resultsContainer = id ? document.getElementById(id) : null\n  if (resultsContainer) {\n    const oldHeight = resultsContainer.style.height\n    resultsContainer.style.height = getComputedStyle(resultsContainer).height\n    resultsContainer.textContent = ''\n    if (resultsTimeout !== undefined) clearTimeout(resultsTimeout)\n    const delayResults = resultsContainer.hasAttribute('data-delay-results')\n    const results = await response.text()\n\n    // The screenreader will try to find an element with [data-autosearch-results] attributes to read.\n    // Otherwise it will fallback to the first element from the response.\n    const resultsContent =\n      parseHTML(document, results).querySelector('[data-autosearch-results]') ||\n      parseHTML(document, results).firstElementChild\n\n    resultsTimeout = setTimeout(\n      () => {\n        resultsContainer.appendChild(parseHTML(document, results))\n        announceFromElement(resultsContent as HTMLElement)\n        requestAnimationFrame(() => {\n          resultsContainer.style.height = oldHeight\n        })\n      },\n      delayResults ? SCREEN_READER_DELAY : NO_DELAY,\n    )\n  }\n  replaceState(null, '', `?${serialized}`)\n})\n","// Favicon manager\n//\n// Manages light and dark favicon variations, and handles status,\n// showing a , check, or pending dot over depending on the page status\n\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {SOFT_NAV_STATE} from '@github-ui/soft-nav'\n\nlet oldHref: string\n\nfunction updateFavicon(newHref?: string, colorScheme?: string) {\n  const favicon = document.querySelector<HTMLLinkElement>('.js-site-favicon[type=\"image/svg+xml\"]')\n  const faviconFallback = document.querySelector<HTMLLinkElement>('.js-site-favicon[type=\"image/png\"]')\n\n  if (!colorScheme) colorScheme = 'light'\n  const colorSchemeSuffix = colorScheme === 'light' ? '' : '-dark'\n\n  if (favicon && faviconFallback) {\n    if (oldHref == null) {\n      oldHref = favicon.href\n    }\n\n    if (newHref) {\n      newHref = newHref.substr(0, newHref.lastIndexOf('.'))\n      newHref = `${newHref}${colorSchemeSuffix}.svg`\n      favicon.href = newHref\n\n      const newFallbackHref = favicon.href.substr(0, favicon.href.lastIndexOf('.'))\n      faviconFallback.href = `${newFallbackHref}.png`\n    } else {\n      const n = favicon.href.indexOf('-dark.svg')\n      const newFaviconName = favicon.href.substr(0, n !== -1 ? n : favicon.href.lastIndexOf('.'))\n\n      favicon.href = `${newFaviconName}${colorSchemeSuffix}.svg`\n      faviconFallback.href = `${newFaviconName}${colorSchemeSuffix}.png`\n    }\n  }\n}\n\nfunction prefersDarkColorScheme() {\n  return window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches\n}\n\nfunction resetIcon() {\n  if (oldHref != null) updateFavicon(oldHref, prefersDarkColorScheme() ? 'dark' : 'light')\n}\n\nfunction updateDarkFavicon() {\n  if (prefersDarkColorScheme()) {\n    updateFavicon(undefined, 'dark')\n  }\n}\n\nobserve('[data-favicon-override]', {\n  add(el) {\n    const href = el.getAttribute('data-favicon-override')!\n\n    // allow `remove` for the old element to fire first\n    setTimeout(() => updateFavicon(href, prefersDarkColorScheme() ? 'dark' : 'light'))\n  },\n  remove() {\n    resetIcon()\n  },\n})\n\nupdateDarkFavicon()\n\ndocument.addEventListener(SOFT_NAV_STATE.SUCCESS, updateDarkFavicon)\n\nwindow.matchMedia('(prefers-color-scheme: dark)').addListener(() => {\n  updateFavicon(undefined, prefersDarkColorScheme() ? 'dark' : 'light')\n})\n","import {compose, fromEvent} from '@github-ui/subscription'\nimport {fetchSafeDocumentFragment} from '@github-ui/fetch-utils'\nimport memoize from '@github/memoize'\nimport {announceFromElement} from '@github-ui/aria-live'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {trackView} from '../hydro-tracking'\n\ntype Position = {\n  containerTop: number\n  containerLeft: number\n  contentClassSuffix: string\n}\n\n// The card content. Moved around the page to where the current hover is\nlet cardContentContainer = document.querySelector('.js-hovercard-content')\nobserve('.js-hovercard-content', el => {\n  cardContentContainer = el\n})\n\nconst cachedFetchSafeDocumentFragment = memoize(fetchSafeDocumentFragment)\n\nlet currentTarget: Element | null | undefined\n\nlet activatingElement: Element | null = null\n\nlet deactivateTimer: number | null\n\nlet focusIn = false\nlet mouseOver = false\n\n// Mouse position for when links wrap lines\nlet mouseX = 0\n\nconst caretDistanceFromTarget = 12\n\n// For calculating position of the card when it hangs to the left\n// NOTE: These need to stay in sync with certain CSS rules in order to keep the\n// caret pointing at the target.\n//\n// caret distance from edge of card\nconst caretPaddingX = 24\nconst caretMarginY = 7\nconst caretPaddingY = caretPaddingX - caretMarginY\n\nconst caretHeight = 16\n\n// The amount of extra time given to move into the content\nconst deactivateTimeout = 100\n\n// The minimum time before opening the hovercard via mouseover\nconst activateTimeout = 250\n\n// Get the content class of a given selector.\n// (Prefixes the selector with `Popover-message--`).\nfunction contentClass(suffix: string): string {\n  const contentClassPrefix = 'Popover-message--'\n  return contentClassPrefix + suffix\n}\n\n// Track a load of the hovercard in octolytics if it stays for > 500ms.\nfunction trackLoad(cardContentBody: HTMLElement) {\n  setTimeout(() => {\n    if (document.body && document.body.contains(cardContentBody)) {\n      const trackingElement = cardContentBody.querySelector('[data-hydro-view]')\n      if (trackingElement instanceof HTMLElement) {\n        trackView(trackingElement)\n      }\n    }\n  }, 500)\n}\n\nfunction hideCard() {\n  if (!(cardContentContainer instanceof HTMLElement)) return\n\n  cardContentContainer.style.display = 'none'\n  cardContentContainer.children[0]!.textContent = ''\n  cardContentContainer.removeAttribute('data-hovercard-target-url')\n\n  activatingElement = null\n  currentTarget = null\n}\n\nfunction selectRectNearestMouse(target: Element): ClientRect {\n  const rects = target.getClientRects()\n  let foundRect = rects[0] || target.getBoundingClientRect() || {top: 0, left: 0, height: 0, width: 0}\n\n  if (rects.length > 0) {\n    for (const rect of rects) {\n      if (rect.left < mouseX && rect.right > mouseX) {\n        foundRect = rect\n        break\n      }\n    }\n  }\n\n  return foundRect\n}\n\nfunction calculatePositions(target: Element): Position {\n  const {width: contentWidth, height: contentHeight} = cardContentContainer!.getBoundingClientRect()\n  const {left: targetX, top: targetY, height: targetHeight, width: targetWidth} = selectRectNearestMouse(target)\n\n  const roomAbove = targetY > contentHeight\n  const hangLeft = target.classList.contains('js-hovercard-left')\n\n  if (hangLeft) {\n    // If there is room, show hovercard above hover position. Else, show it below\n    const left = targetX - contentWidth - caretDistanceFromTarget\n    const targetCenterY = targetY + targetHeight / 2\n    const top = roomAbove\n      ? targetCenterY - contentHeight + caretPaddingY + caretHeight / 2\n      : targetCenterY - caretPaddingY - caretHeight / 2\n\n    return {\n      containerTop: top,\n      containerLeft: left,\n      contentClassSuffix: roomAbove ? 'right-bottom' : 'right-top',\n    }\n  } else {\n    const roomRight = window.innerWidth - targetX > contentWidth\n    const targetCenterX = targetX + targetWidth / 2\n    const left = roomRight ? targetCenterX - caretPaddingX : targetCenterX - contentWidth + caretPaddingX\n    const top = roomAbove\n      ? targetY - contentHeight - caretDistanceFromTarget\n      : targetY + targetHeight + caretDistanceFromTarget\n\n    const contentClassSuffix = roomAbove\n      ? roomRight\n        ? 'bottom-left'\n        : 'bottom-right'\n      : roomRight\n        ? 'top-left'\n        : 'top-right'\n    return {containerTop: top, containerLeft: left, contentClassSuffix}\n  }\n}\n\nfunction positionCard(target: Element, cardContent: Element) {\n  if (!(cardContentContainer instanceof HTMLElement)) return\n\n  // Hide container, reset popover styles\n  cardContentContainer.style.visibility = 'hidden'\n  cardContentContainer.style.display = 'block'\n  cardContent.classList.remove(\n    contentClass('bottom-left'),\n    contentClass('bottom-right'),\n    contentClass('right-top'),\n    contentClass('right-bottom'),\n    contentClass('top-left'),\n    contentClass('top-right'),\n  )\n\n  const {containerTop, containerLeft, contentClassSuffix} = calculatePositions(target)\n\n  // Add the class for correct caret location\n  cardContent.classList.add(contentClass(contentClassSuffix))\n\n  // Position the popover & inner message correctly\n  cardContentContainer.style.top = `${containerTop + window.pageYOffset}px`\n  cardContentContainer.style.left = `${containerLeft + window.pageXOffset}px`\n\n  // Set z-index override\n  setZIndexOverride(target, cardContentContainer)\n\n  // After positioning correctly, show the popover again\n  cardContentContainer.style.visibility = ''\n}\n\nfunction showCard(fragment: DocumentFragment, target: Element) {\n  if (!(cardContentContainer instanceof HTMLElement)) return\n\n  const cardContent = cardContentContainer.children[0]!\n\n  cardContent.textContent = ''\n\n  const cardContentBody = document.createElement('div')\n  for (const child of fragment.children) {\n    cardContentBody.appendChild(child.cloneNode(true))\n  }\n\n  cardContent.appendChild(cardContentBody)\n\n  positionCard(target, cardContent)\n  trackLoad(cardContentBody)\n  announceFromElement(cardContentBody)\n\n  cardContentContainer.style.display = 'block'\n  cardContentContainer.setAttribute('data-hovercard-target-url', target.getAttribute('data-hovercard-url') || '')\n}\n\nfunction determineEnclosingSubject(target: Element): string | null {\n  const tag = target.closest('[data-hovercard-subject-tag]')\n  if (tag) return tag.getAttribute('data-hovercard-subject-tag')\n  // Fall back to page context\n  const meta = document.head && document.head.querySelector('meta[name=\"hovercard-subject-tag\"]')\n  if (meta) return meta.getAttribute('content')\n  return null\n}\n\nfunction hovercardUrlFromTarget(target: Element): string {\n  const baseHovercardUrl = target.getAttribute('data-hovercard-url')\n\n  if (baseHovercardUrl) {\n    const subjectTag = determineEnclosingSubject(target)\n    if (subjectTag) {\n      const url = new URL(baseHovercardUrl, window.location.origin)\n      const params = new URLSearchParams(url.search.slice(1))\n      params.append('subject', subjectTag)\n      params.append('current_path', window.location.pathname + window.location.search)\n      url.search = params.toString()\n      return url.toString()\n    }\n\n    return baseHovercardUrl\n  }\n\n  return ''\n}\n\n// Determine if a hovercard is enabled for this type of element.\n//\n// Return boolean will be `true` if this link element has hovercard\n// attributes and the link's particular kind of hovercard is enabled for the\n// viewer and that part of the page.\nfunction hovercardsAreEnabledForType(target: Element): boolean {\n  const hovercardType = target.getAttribute('data-hovercard-type')\n\n  if (hovercardType === 'pull_request' || hovercardType === 'issue') {\n    return !!target.closest('[data-issue-and-pr-hovercards-enabled]')\n  }\n\n  if (hovercardType === 'team') {\n    return !!target.closest('[data-team-hovercards-enabled]')\n  }\n\n  if (hovercardType === 'repository') {\n    return !!target.closest('[data-repository-hovercards-enabled]')\n  }\n\n  if (hovercardType === 'commit') {\n    return !!target.closest('[data-commit-hovercards-enabled]')\n  }\n\n  if (hovercardType === 'project') {\n    return !!target.closest('[data-project-hovercards-enabled]')\n  }\n\n  if (hovercardType === 'discussion') {\n    return !!target.closest('[data-discussion-hovercards-enabled]')\n  }\n\n  if (hovercardType === 'acv_badge') {\n    return !!target.closest('[data-acv-badge-hovercards-enabled]')\n  }\n\n  if (hovercardType === 'sponsors_listing') {\n    return !!target.closest('[data-sponsors-listing-hovercards-enabled]')\n  }\n\n  // User and organization hovercards are enabled everywhere\n  return true\n}\n\n// When mousing over a hovercard target, load the data and show the card.\nasync function activateFn(event: Event, minimumTimeout?: number): Promise<void> {\n  // Don't show hovercards on touch devices. Prevents mobile Safari users\n  // from needing to double tap links with hovercards.\n  // https://humanwhocodes.com/blog/2012/07/05/ios-has-a-hover-problem/\n  const touchDevice = 'ontouchstart' in document\n  if (touchDevice) return\n\n  const target = event.currentTarget\n\n  if (event instanceof MouseEvent) {\n    mouseX = event.clientX\n  }\n\n  if (!(target instanceof Element)) return\n  if (currentTarget === target) return\n  if (target.closest('.js-hovercard-content')) return\n\n  // Don't actually show issue or PR hovercards unless the link has an ancestor\n  // element with data-issue-and-pr-hovercards-enabled\n  if (!hovercardsAreEnabledForType(target)) return\n\n  hideCard()\n\n  // Set the current target as the one we're currently hovering on\n  currentTarget = target\n  activatingElement = document.activeElement\n\n  const hovercardUrl = hovercardUrlFromTarget(target)\n\n  let fragment: DocumentFragment | null | undefined\n  try {\n    const forcedDelay = new Promise(r => window.setTimeout(r, minimumTimeout, 0))\n    await forcedDelay\n\n    // for some reason, currentTarget gets set to null when\n    // we call the setTimeout and we are focused on the button\n    if (!currentTarget && event.type === 'focusin') {\n      currentTarget = event.target as Element\n    }\n    if (target === currentTarget) {\n      fragment = await cachedFetchSafeDocumentFragment(document, hovercardUrl)\n    }\n  } catch (err) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    const response: Response = err.response\n    if (response && response.status === 404) {\n      // eslint-disable-next-line i18n-text/no-en\n      const notAvailableMessage = 'Hovercard is unavailable'\n      target.setAttribute('aria-label', notAvailableMessage)\n      target.classList.add('tooltipped', 'tooltipped-ne')\n    } else if (response && response.status === 410) {\n      const data: {[key: string]: string} = await response.clone().json()\n      target.setAttribute('aria-label', data.message!)\n      target.classList.add('tooltipped', 'tooltipped-ne')\n    }\n    return\n  }\n\n  // Ensure that the target is still the active one\n  if (target === currentTarget && fragment) {\n    showCard(fragment, target)\n\n    if (event instanceof KeyboardEvent && cardContentContainer instanceof HTMLElement) {\n      cardContentContainer.focus()\n    }\n  }\n}\n\n// Load the data but don't show until at least `activateTimeout` Only used when\n// loading via mouseover.\nfunction activateWithTimeoutFn(event: Event) {\n  activateFn(event, activateTimeout)\n}\n\n// When leaving a hovercard, deactivate unless we're moving to another child.\n// This allows the user to hover into the content area without dismissing.\nfunction deactivateFn(event: Event) {\n  if (!currentTarget) return\n\n  if (event instanceof MouseEvent && event.relatedTarget instanceof HTMLElement) {\n    const relatedTarget = event.relatedTarget\n    if (relatedTarget.closest('.js-hovercard-content') || relatedTarget.closest('[data-hovercard-url]')) {\n      return\n    }\n  } else if (event instanceof KeyboardEvent && activatingElement instanceof HTMLElement) {\n    // Return focus to where it was before the card was opened\n    activatingElement.focus()\n  }\n\n  hideCard()\n}\n\n// Deactivate after 250 ms unless the deactivate timer is canceled as a result\n// of the user entering the hovercard content area.\nfunction deactivateWithTimeoutFn(event: Event) {\n  const targetWas = currentTarget\n\n  deactivateTimer = window.setTimeout(() => {\n    if (currentTarget === targetWas) deactivateFn(event)\n  }, deactivateTimeout)\n}\n\n// Triggered when a key is pressed while either a container is focused, or\n// while inside of an open hovercard.\nfunction keyupFn(event: Event) {\n  // TODO: Refactor to use data-hotkey\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n  if (!(event instanceof KeyboardEvent)) return\n  switch (event.key) {\n    case 'Escape':\n      deactivateFn(event)\n  }\n  /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n}\n\n// Cancel the deactivation timer since the user is inside the content now\nfunction cancelDeactivation() {\n  if (deactivateTimer) clearTimeout(deactivateTimer)\n}\nif (cardContentContainer) {\n  // show if focused or moused over, only hide when both are false.\n  observe('[data-hovercard-url]', {\n    subscribe: el =>\n      compose(\n        fromEvent(el, 'mouseover', onMouseOver),\n        fromEvent(el, 'focusin', onFocusIn),\n        fromEvent(el, 'mouseleave', onMouseLeave),\n        fromEvent(el, 'focusout', onFocusOut),\n        fromEvent(el, 'keyup', keyupFn),\n      ),\n  })\n\n  observe('[data-hovercard-url]', {\n    remove(el) {\n      // Hide the card if we're removing the element that triggered it\n      if (currentTarget === el) hideCard()\n    },\n  })\n\n  observe('.js-hovercard-content', {\n    subscribe: el =>\n      compose(\n        fromEvent(el, 'mouseover', onContentsMouseOver),\n        fromEvent(el, 'focusin', onContentsFocusIn),\n        fromEvent(el, 'mouseleave', onMouseLeave),\n        fromEvent(el, 'focusout', onFocusOut),\n        fromEvent(el, 'keyup', keyupFn),\n      ),\n  })\n\n  // eslint-disable-next-line delegated-events/global-on\n  on('menu:activated', 'details', hideCard)\n\n  // hide the card when a turbo completes a new visit\n  window.addEventListener('turbo:load', hideCard)\n\n  window.addEventListener('statechange', hideCard)\n\n  // FF bug where the target can get focus, then be removed from the DOM\n  // and this doesn't trigger a focusOut event. In this case, focus moved to the window\n  // so we can handle it here.\n  window.addEventListener('focusin', onFocusOut)\n}\n\nfunction onFocusIn(event: Event) {\n  focusIn = true\n  activateFn(event, 0)\n}\n\nfunction onFocusOut(event: Event) {\n  focusIn = false\n  if (!mouseOver) {\n    deactivateFn(event)\n  }\n}\n\nfunction onMouseLeave(event: Event) {\n  mouseOver = false\n  if (!focusIn) {\n    deactivateWithTimeoutFn(event)\n  }\n}\n\nfunction onMouseOver(event: Event) {\n  mouseOver = true\n  activateWithTimeoutFn(event)\n}\n\nfunction onContentsMouseOver() {\n  mouseOver = true\n  cancelDeactivation()\n}\n\nfunction onContentsFocusIn() {\n  focusIn = true\n  cancelDeactivation()\n}\n\nfunction setZIndexOverride(target: Element, container: HTMLElement) {\n  const zIndex = target.getAttribute('data-hovercard-z-index-override')\n  if (zIndex) {\n    container.style.zIndex = zIndex\n  } else {\n    // Reset to initial z-index from Popover\n    container.style.zIndex = '100'\n  }\n}\n","import {sendEvent} from '@github-ui/hydro-analytics'\nimport {loaded} from '@github-ui/document-ready'\n\nconst vitalsToHydro = ['fcp', 'lcp', 'fid', 'inp', 'cls', 'hpc', 'ttfb'] as const\n\ninterface HydroStat {\n  react?: boolean\n  reactApp?: string | null\n  reactPartials?: string[]\n  hpcMechanism?: PlatformBrowserSoftNavigationMechanism\n  ssr?: boolean\n  hpcSoft?: boolean\n  hpc?: string\n  ttfb?: string\n  fcp?: string\n  lcp?: string\n  fid?: string\n  inp?: string\n  cls?: string\n}\n\nlet queued: HydroStat | undefined\n\n/**\n * Batched report of vital to hydro\n */\nexport function sendStatToHydro(stat: PlatformBrowserPerformanceWebVitalTiming) {\n  let hydroStat: HydroStat | undefined\n\n  if (!document.querySelector('[data-hydrostats=\"publish\"]')) return\n\n  for (const vital of vitalsToHydro) {\n    if (stat[vital] !== undefined && stat[vital]! < 60_000) {\n      if (!hydroStat) {\n        const reactApp = document.querySelector('react-app')\n        hydroStat = queueStat()\n        hydroStat.react = !!reactApp\n        hydroStat.reactApp = reactApp?.getAttribute('app-name')\n        // Convert to Set and back to Array to remove duplicates.\n        hydroStat.reactPartials = [\n          ...new Set(\n            Array.from(document.querySelectorAll('react-partial')).map(\n              partial => partial.getAttribute('partial-name') || '',\n            ),\n          ),\n        ]\n        hydroStat.ssr = stat.ssr\n      }\n      hydroStat[vital] = stat[vital]!.toPrecision(6)\n      if (vital === 'hpc') {\n        hydroStat.hpcMechanism = stat.mechanism\n        hydroStat.hpcSoft = stat.soft\n      }\n      break\n    }\n  }\n}\n\n/**\n * Create a new stat object and schedule it to be sent to hydro\n */\nfunction queueStat(): HydroStat {\n  if (!queued) {\n    queued = {}\n    scheduleSend()\n  }\n  return queued\n}\n\n/**\n * Schedule a send to hydro\n */\nasync function scheduleSend() {\n  await loaded\n  // eslint-disable-next-line compat/compat\n  window.requestIdleCallback(send)\n}\n\n/**\n * Send the queued event to hydro\n */\nfunction send() {\n  sendEvent('web-vital', queued as Record<string, string | number | boolean | null | undefined>)\n  queued = undefined\n}\n","import {MarkdownQuote, Quote} from '@github/quote-selection'\nimport {debounce} from '@github/mini-throttle'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport visible from '../visible'\n\nlet activeSelection: SelectionContext | null\n\n// Hide the \"Quote reply\" button on threads where there is no textarea to quote\n// text into. This prevents it from showing up on locked threads.\nobserve('.js-comment-quote-reply', function (button) {\n  ;(button as HTMLElement).hidden =\n    button\n      .closest('.js-quote-selection-container')\n      ?.querySelector('.js-inline-comment-form-container textarea, .js-new-comment-form textarea') == null\n})\n\nfunction isHighlightContainer(el: Element): boolean {\n  return el.nodeName === 'DIV' && el.classList.contains('highlight')\n}\n\nfunction hasContent(node: Node): boolean {\n  return node.nodeName === 'IMG' || node.firstChild != null\n}\n\nconst filters: {[key: string]: (arg0: HTMLElement) => string | HTMLElement} = {\n  PRE(el) {\n    const parent = el.parentElement\n    if (parent && isHighlightContainer(parent)) {\n      const match = parent.className.match(/highlight-source-(\\S+)/)\n      const flavor = match ? match[1] : ''\n      const text = (el.textContent || '').replace(/\\n+$/, '')\n      el.textContent = `\\`\\`\\`${flavor}\\n${text}\\n\\`\\`\\``\n      el.append('\\n\\n')\n    }\n    return el\n  },\n  A(el) {\n    const text = el.textContent || ''\n    if (el.classList.contains('user-mention') || el.classList.contains('team-mention')) {\n      return text\n    } else if (el.classList.contains('issue-link') && /^#\\d+$/.test(text)) {\n      return text\n    } else {\n      return el\n    }\n  },\n  IMG(el) {\n    const alt = el.getAttribute('alt')\n    if (alt && el.classList.contains('emoji')) {\n      return alt\n    } else {\n      return el\n    }\n  },\n  DIV(el) {\n    if (el.classList.contains('js-suggested-changes-blob')) {\n      // skip quoting suggested changes widget\n      el.remove()\n    } else if (el.classList.contains('blob-wrapper-embedded')) {\n      // handle embedded blob snippets\n      const container = el.parentElement!\n      const link = container.querySelector<HTMLAnchorElement>('a[href]')!\n      const p = document.createElement('p')\n      p.textContent = link.href\n      container.replaceWith(p)\n    } else if (el.classList.contains('js-render-enrichment-target')) {\n      // handle embedded special rendering like mermaid charts\n      const container = el.closest('.js-render-needs-enrichment')!\n      const blockType = container.getAttribute('data-type')\n      const blockContent = el.getAttribute('data-plain')!\n\n      // set the codeblock markdown representation as the content of a pre block so that newlines\n      // are correctly interpreted. Then replace the current element with the pre-wrapped codeblock\n      const pre = document.createElement('pre')\n      pre.textContent = `\\`\\`\\`${blockType}\\n${blockContent}\\`\\`\\``\n      return pre\n    }\n    return el\n  },\n}\n\nfunction insertMarkdownSyntax(root: DocumentFragment): void {\n  const nodeIterator = document.createNodeIterator(root, NodeFilter.SHOW_ELEMENT, {\n    acceptNode(node) {\n      if (node.nodeName in filters && hasContent(node)) {\n        return NodeFilter.FILTER_ACCEPT\n      } else {\n        return NodeFilter.FILTER_SKIP\n      }\n    },\n  })\n  const results: HTMLElement[] = []\n  let node = nodeIterator.nextNode()\n\n  while (node) {\n    if (node instanceof HTMLElement) {\n      results.push(node)\n    }\n    node = nodeIterator.nextNode()\n  }\n\n  // process deepest matches first\n  results.reverse()\n\n  for (const el of results) {\n    el.replaceWith(filters[el.nodeName]!(el))\n  }\n}\n\non('click', '.js-comment-quote-reply', function ({isTrusted, currentTarget}) {\n  let target = currentTarget as Element\n  let quote = new Quote()\n\n  if (!isTrusted) {\n    // User pressed `r`\n    if (quote.range.collapsed) {\n      // Nothing is selected\n      return\n    }\n    if (quote.range.startContainer.parentElement === null) {\n      // No reasonable place to insert the quote\n      return\n    }\n    target = quote.range.startContainer.parentElement\n  }\n\n  const container = target.closest<HTMLElement>('.js-comment')!\n  const commentBody = container.querySelector<HTMLElement>('.js-comment-body')!\n  const commentBodyClone = container.querySelector<HTMLElement>('.js-comment-body')!.cloneNode(true)\n  const quoteSelectionContainer = container.closest('.js-quote-selection-container')!\n\n  // Remove elements that contain meta info and should not be present in the quoted text\n  const ignorableElements = commentBody.querySelectorAll('button.js-convert-to-issue-button, span.js-clear')\n  for (const el of ignorableElements) {\n    el.remove()\n  }\n\n  if (quoteSelectionContainer.hasAttribute('data-quote-markdown')) {\n    quote = new MarkdownQuote(\n      quoteSelectionContainer.getAttribute('data-quote-markdown') || '',\n      (fragment: DocumentFragment) => {\n        const parent = quote.range.startContainer.parentElement\n        const codeBlock = parent && parent.closest('pre')\n        if (codeBlock instanceof HTMLElement) {\n          const pp = codeBlock.parentElement\n          if (pp && isHighlightContainer(pp)) {\n            const div = document.createElement('div')\n            div.className = pp.className\n            div.appendChild(fragment)\n            fragment.appendChild(div)\n          }\n        }\n        insertMarkdownSyntax(fragment)\n      },\n    )\n  }\n\n  // If the user has selected text before clicking the dropdown, use that as the quote.\n  // (Workaround for Safari clearing the selection just before <details> is opened).\n  if (\n    activeSelection &&\n    commentBody.contains(activeSelection.anchorNode) &&\n    !activeSelection.range.collapsed &&\n    activeSelection.range.toString().trim() !== '' // remove whitespace only selections\n  ) {\n    quote.range = activeSelection.range\n  } else if (quote.range.collapsed || quote.range.toString().trim() === '') {\n    quote.select(commentBody)\n  }\n\n  if (quote.closest('.js-quote-selection-container') !== quoteSelectionContainer) return\n\n  // Capture the current range incase elements switch focus\n  const range = quote.range\n\n  quoteSelectionContainer.dispatchEvent(\n    new CustomEvent('quote-selection', {\n      bubbles: true,\n      detail: quote,\n    }),\n  )\n\n  // Replace the range for elements that changed focus\n  quote.range = range\n\n  for (const textarea of Array.from(quoteSelectionContainer.querySelectorAll('textarea')).reverse()) {\n    if (visible(textarea) && !textarea.closest('tracking-block')) {\n      quote.insert(textarea)\n      break\n    }\n  }\n\n  // Restore the HTML to it's initial form. The ignorable elements had to be removed\n  // So that the quote lib would not include then into the selection\n  container.querySelector<HTMLElement>('.js-comment-body')!.replaceWith(commentBodyClone)\n})\n\ntype SelectionContext = {\n  anchorNode: Node | null\n  range: Range\n}\n\n// Workaround for Safari clearing the selection just before a <details> element\n// was activated: persist the previous selection and use its range when quoting.\nlet previousSelection: SelectionContext | null\n\ndocument.addEventListener(\n  'selectionchange',\n  debounce(function () {\n    const selection = window.getSelection()!\n    let range\n    try {\n      range = selection.getRangeAt(0)\n    } catch {\n      previousSelection = null\n      return\n    }\n    previousSelection = {\n      anchorNode: selection.anchorNode,\n      range,\n    }\n  }, 100),\n)\ndocument.addEventListener(\n  'toggle',\n  () => {\n    activeSelection = previousSelection\n  },\n  {capture: true},\n)\n","import {ssrSafeDocument} from '@github-ui/ssr-utils'\nimport {Subscription} from '@github-ui/subscription'\n\ntype IdleListener = (isIdle: boolean) => unknown\n\nconst idleListeners: IdleListener[] = []\nconst DEBOUNCE_UNTIL_IDLE = 30000\nconst DEBOUNCE_UNTIL_ACTIVE = 0 // If active, we want to send immediately\nlet idle = ssrSafeDocument?.hidden || false // if the page is hidden on load, consider it idle immediately\nlet visibilityDebounceTimeout: ReturnType<typeof setTimeout> | undefined\n\nexport function addIdleStateListener(listener: IdleListener) {\n  listener(idle)\n  idleListeners.push(listener)\n\n  return new Subscription(() => {\n    const index = idleListeners.indexOf(listener)\n    if (index !== -1) {\n      idleListeners.splice(index, 1)\n    }\n  })\n}\n\n;(() => {\n  // listen for visibility change events, which trigger the wait period for idle changes\n  ssrSafeDocument?.addEventListener('visibilitychange', () => {\n    const pageIsHidden = ssrSafeDocument?.hidden || false\n\n    if (visibilityDebounceTimeout !== undefined) {\n      // we were waiting to send an idle change, cancel the previous timeout and queue a new one\n      clearTimeout(visibilityDebounceTimeout)\n    }\n\n    // When page visibility changes, wait a little bit before marking as idle in case visibility comes back\n    const debouncePeriod = pageIsHidden ? DEBOUNCE_UNTIL_IDLE : DEBOUNCE_UNTIL_ACTIVE\n\n    visibilityDebounceTimeout = setTimeout(() => {\n      if (pageIsHidden === idle) {\n        // idle hasn't changed, don't call any listeners\n        return\n      }\n\n      idle = pageIsHidden\n      visibilityDebounceTimeout = undefined\n\n      // send current idle state to all listeners\n      for (const idleListener of idleListeners) {\n        idleListener(idle)\n      }\n    }, debouncePeriod)\n  })\n})()\n","import type {TurboFrameClickEvent} from '@github/turbo'\nimport {SOFT_NAV_STATE, startSoftNav, updateFrame} from '@github-ui/soft-nav'\nimport {getCachedNode, setCachedNode} from './cache'\nimport {\n  addNewScripts,\n  addNewStylesheets,\n  getTurboCacheNodes,\n  getChangedTrackedKeys,\n  replaceElements,\n  waitForStylesheets,\n  dispatchTurboReload,\n  isTurboFrame,\n  isSameRepo,\n  isSameProfile,\n} from './utils'\nimport isHashNavigation from '@github-ui/is-hash-navigation'\nimport {setTitle} from '@github-ui/document-metadata'\nimport {turboPolicy} from '@github-ui/trusted-types-policies/turbo'\nimport {ssrSafeWindow, ssrSafeDocument} from '@github-ui/ssr-utils'\n\ninterface FetchResponse {\n  response: Response\n  responseHTML: Promise<string>\n  location: Location\n}\n\nlet frameNavigation = false\nlet fetchResponse: FetchResponse | null\n\nconst navigatingBetweenDifferentEntities = (event: TurboFrameClickEvent) => {\n  if (!(event.target instanceof HTMLElement)) return\n\n  const frameContainer = event.target.closest('[data-turbo-frame]')\n  const repoContainer = event.target.closest('#js-repo-pjax-container')\n  const url = new URL(event.detail.url, window.location.origin)\n  const userProfileContainer = event.target.closest('#user-profile-frame')\n\n  return (\n    // Don't frame navigate if going to a different repo, since the frame will not\n    // load the new repo's header.\n    (repoContainer && frameContainer && !isSameRepo(url.pathname, location.pathname)) ||\n    // Don't frame navigate if going to a different user profile, since the frame\n    // will not load the new user's side panel information.\n    (userProfileContainer && !isSameProfile(url.pathname, location.pathname))\n  )\n}\n\nssrSafeDocument?.addEventListener('turbo:frame-click', function (event) {\n  if (!(event.target instanceof HTMLElement)) return\n  if (!(event instanceof CustomEvent)) return\n\n  // https://github.com/hotwired/turbo/issues/539\n  // If we are doing a hash navigation, we want to prevent Turbo from performing a visit\n  // so it won't mess with focus styles.\n  if (isHashNavigation(location.href, event.detail.url)) {\n    event.preventDefault()\n    return\n  }\n\n  if (navigatingBetweenDifferentEntities(event)) {\n    dispatchTurboReload('repo_mismatch')\n    event.target.removeAttribute('data-turbo-frame')\n    event.preventDefault()\n  }\n\n  // Here is where Turbo frame navigation starts.\n  if (!event.defaultPrevented) {\n    startSoftNav('turbo.frame')\n  }\n})\n\nssrSafeDocument?.addEventListener('turbo:before-fetch-response', event => {\n  fetchResponse = (event as CustomEvent).detail.fetchResponse\n  if (isTurboFrame(event.target)) setCachedNode(window.location.href, getTurboCacheNodes(document))\n})\n\n// Before rendering the new page (frame), we need to make sure the body is ready with\n// all the classes necessary. We do that by replacing the current body's classes with\n// classes that come from the `turbo-body-classes` meta tag.\n// We also are ready to add new scripts and stylesheets to the head, since that won't be\n// modified by the frame render.\n// We don't update the title here because it will be overridden by the frame.\n// We also don't update transients because it will mess with the B/F cache.\nssrSafeDocument?.addEventListener('turbo:before-frame-render', async event => {\n  // preventDefault MUST be the first thing in this event, otherwise rendering will NOT be paused.\n  event.preventDefault()\n\n  const {resume, newFrame} = (event as CustomEvent).detail\n\n  frameNavigation = true\n\n  if (!fetchResponse) return\n\n  const responseHTML = await fetchResponse.responseHTML\n  const responseLocation = fetchResponse.location\n\n  const trustedHTML = turboPolicy.createHTML(responseHTML, fetchResponse.response)\n  const parsedHTML = new DOMParser().parseFromString(trustedHTML, 'text/html')\n  fetchResponse = null\n\n  const sourceFrame = event.target as HTMLElement\n  const targetFrames = parsedHTML.querySelectorAll<HTMLElement>('turbo-frame')\n  const matchingFrame = [...targetFrames].find(frame => frame.id === sourceFrame?.id)\n  const changedKeys = getChangedTrackedKeys(parsedHTML)\n\n  // if the frames or tracked elements don't match, force a reload to the destination page otherwise\n  // the user will get an empty page or a page with the wrong assets.\n  if (!matchingFrame || changedKeys.length > 0) {\n    dispatchTurboReload(`tracked_element_mismatch-${changedKeys.join('-')}`)\n    window.location = responseLocation\n    return\n  }\n\n  setCachedNode(responseLocation.href, getTurboCacheNodes(parsedHTML))\n\n  addNewStylesheets(parsedHTML)\n  addNewScripts(parsedHTML)\n  replaceElements(parsedHTML)\n  replaceFrameClasses(sourceFrame, matchingFrame)\n\n  // We have to treat stylesheets as a blocking resource, so we wait for them to be loaded before continuing\n  // the frame render.\n  await waitForStylesheets()\n\n  resume()\n\n  if (shouldScrollToTop(newFrame)) {\n    window.scrollTo(0, 0)\n  }\n\n  // If we replace classes too early there may be some jitter when navigating to/from full-width pages.\n  replaceBodyClassesFromRequest(parsedHTML)\n})\n\nssrSafeWindow?.addEventListener('popstate', () => {\n  // When going back/forward, we need to restore elements that were replaced by us outside of the frame.\n  // popstate runs before turbo actually restores the page, so we have to wait for the next load to guarantee\n  // that our restoration is done after turbo's.\n  document.addEventListener(\n    'turbo:load',\n    () => {\n      const elements = getCachedNode()?.replacedElements || []\n\n      replaceElements(document, elements)\n    },\n    {once: true},\n  )\n})\n\n// At this point, Turbo finished updating things from its snapshot, so we can manually\n// updates whatever is necessary from the navigation.\nssrSafeDocument?.addEventListener(SOFT_NAV_STATE.SUCCESS, () => {\n  // This is a safeguard for back/forwards navigation. If the user clicks those buttons.\n  // Turbo will NOT trigger `turbo:before-fetch-response`, which would make the `body` stale.\n  // Since we are restoring a page from the cache, `turboPageNodes` will be populated, so it\n  // will know what are the `body` classes to restore.\n  replaceBodyClassesFromCachedNodes()\n\n  if (!frameNavigation) return\n\n  frameNavigation = false\n  replaceTitle()\n  replaceTransientTags()\n  updateFrame()\n})\n\nconst replaceBodyClassesFromRequest = (html: Document) => {\n  const classes = html.querySelector<HTMLMetaElement>('meta[name=turbo-body-classes]')?.content\n\n  if (!classes) return\n\n  document.body.setAttribute('class', classes)\n  document.querySelector('[data-turbo-body]')?.setAttribute('class', classes)\n}\n\nconst replaceBodyClassesFromCachedNodes = () => {\n  // If the navigation is a full-page reload, `turboPageNodes` will be reset\n  // and this will be a noop.\n  const classes = getCachedNode()?.bodyClasses\n\n  if (!classes) return\n\n  document.body.setAttribute('class', classes)\n  document.querySelector('[data-turbo-body]')?.setAttribute('class', classes)\n}\n\nconst replaceTitle = () => {\n  const title = getCachedNode()?.title\n\n  if (title) {\n    setTitle(title)\n  }\n}\n\n// Replace all `data-turbo-transient` elements\nconst replaceTransientTags = () => {\n  const cached = getCachedNode()?.transients\n  if (!cached) return\n\n  for (const el of document.querySelectorAll('head [data-turbo-transient]')) {\n    el.remove()\n  }\n\n  for (const el of cached) {\n    // title, scripts and stylesheets have their own logic to be added\n    // so here we'll only deal with the rest of the transient elements\n    // This is just a safeguard in case someone adds `data-turbo-transient`\n    // to one of those elements.\n    if (!el.matches('title, script, link[rel=stylesheet]')) {\n      el.setAttribute('data-turbo-transient', '')\n      document.head.append(el)\n    }\n  }\n}\n\nconst replaceFrameClasses = (oldFrame: HTMLElement | undefined, newFrame: HTMLElement) => {\n  if (!oldFrame) return\n\n  oldFrame.className = newFrame.className\n}\n\nconst shouldScrollToTop = (frame: HTMLElement) =>\n  frame.getAttribute('data-turbo-skip-scroll') !== 'true' && frame.getAttribute('data-turbo-action') === 'advance'\n","// Scan an ArrayBuffer as PNG, yielding each chunk along the way.\n//\n// Example:\n//\n//   scanner = new PNGScanner buffer\n//   scanner.scan (chunkType, chunkLength) ->\n//     if chunkType is \"IHDR\"\n//       imageWidth = @readLong()\n//       imageHeight = @readLong()\n//\n// The callback will get called for each PNG chunk as described in\n// http://www.w3.org/TR/PNG/#11Chunks. During the callback, the scanner will be\n// positioned on the start of chunk's data portion, where individual values are\n// accessible with:\n//\n// - readChar(): reads 1-byte value (uint8)\n// - readShort(): reads 2-byte value (uint16)\n// - readLong(): reads 4-byte value (uint32)\n// - readString(length): reads <length> ASCII characters as a string\n// - advance(bytes): skips <bytes> bytes forward\n//\n// Scanning will end if the callback returns `false` at any point.\n\nconst PNG_HEADER = 0x89504e47\nconst CRC_WIDTH = 4\n\nexport default class PNGScanner {\n  dataview: DataView\n  pos: number\n\n  static fromFile(file: Blob): Promise<PNGScanner> {\n    return new Promise(function (resolve, reject) {\n      const reader = new FileReader()\n      reader.onload = function () {\n        resolve(new PNGScanner(reader.result as ArrayBuffer))\n      }\n      reader.onerror = function () {\n        reject(reader.error)\n      }\n      reader.readAsArrayBuffer(file)\n    })\n  }\n\n  constructor(buffer: ArrayBuffer) {\n    this.dataview = new DataView(buffer)\n    this.pos = 0\n  }\n\n  advance(bytes: number) {\n    this.pos += bytes\n  }\n\n  readInt(bytes: 1 | 2 | 4) {\n    /* eslint-disable-next-line @typescript-eslint/no-this-alias */\n    const self = this\n\n    // I want the do { } syntax *so* bad.\n    const value = (function () {\n      switch (bytes) {\n        case 1:\n          return self.dataview.getUint8(self.pos)\n        case 2:\n          return self.dataview.getUint16(self.pos)\n        case 4:\n          return self.dataview.getUint32(self.pos)\n        default:\n          // I shouldn't need this, but flow can't figure out that all values of bytes are handled by the above switch\n          throw new Error('bytes parameter must be 1, 2 or 4')\n      }\n    })()\n    this.advance(bytes)\n    return value\n  }\n\n  readChar() {\n    return this.readInt(1)\n  }\n\n  readShort() {\n    return this.readInt(2)\n  }\n\n  readLong() {\n    return this.readInt(4)\n  }\n\n  readString(length: number): string {\n    const buf = []\n    for (let i = 0; i < length; i++) {\n      buf.push(String.fromCharCode(this.readChar()))\n    }\n    return buf.join('')\n  }\n\n  scan(fn: (this: PNGScanner, type: string, len: number) => boolean) {\n    if (this.readLong() !== PNG_HEADER) {\n      throw new Error('invalid PNG')\n    }\n\n    this.advance(4)\n\n    for (;;) {\n      const len = this.readLong()\n      const type = this.readString(4)\n      const resumeAt = this.pos + len + CRC_WIDTH\n      if (fn.call(this, type, len) === false || type === 'IEND') {\n        break\n      }\n      this.pos = resumeAt\n    }\n  }\n}\n","import type {Attachment} from '@github/file-attachment-element'\nimport {sendStats} from '@github-ui/stats'\n\nexport type UploadError = {\n  status: number\n  body: string\n}\n\n// 204 No Content\ntype S3ResponseData = Record<string, unknown>\n\n// 201 Created\ntype EnterpriseResponseData = {\n  id: number\n  href: string\n}\n\ntype UploadResponseData = EnterpriseResponseData | S3ResponseData\n\ntype S3UploadPolicy = {\n  asset_upload_url: string\n  asset_upload_authenticity_token: string\n  upload_authenticity_token: string\n  upload_url: string\n  form: Record<string, string>\n  header: Record<string, string>\n  same_origin: boolean\n  asset: {\n    id: number\n    href: string\n    name: string\n  }\n}\n\ntype EnterpriseUploadPolicy = {\n  upload_authenticity_token: string\n  upload_url: string\n  form: {[key: string]: string}\n  header: Record<string, string>\n  same_origin: boolean\n  asset: {\n    name: string\n  }\n}\n\nexport type UploadPolicyData = S3UploadPolicy | EnterpriseUploadPolicy\n\nexport type AttachmentUploadDelegate = {\n  attachmentUploadDidStart(attachment: Attachment, policy: UploadPolicyData): void\n  attachmentUploadDidProgress(attachment: Attachment, percent: number): void\n  attachmentUploadDidComplete(attachment: Attachment, policy: UploadPolicyData, data: UploadResponseData): void\n  attachmentUploadDidError(attachment: Attachment, error: UploadError): void\n}\n\nexport default class AttachmentUpload {\n  attachment: Attachment\n  policy: UploadPolicyData\n\n  constructor(attachment: Attachment, policy: UploadPolicyData) {\n    this.attachment = attachment\n    this.policy = policy\n  }\n\n  async process(delegate: AttachmentUploadDelegate): Promise<void> {\n    const startTime = window.performance.now()\n    const headers = new Headers(this.policy.header || {})\n\n    const xhr = new XMLHttpRequest()\n    xhr.open('POST', this.policy.upload_url, true)\n\n    for (const [key, value] of headers) {\n      xhr.setRequestHeader(key, value)\n    }\n\n    xhr.onloadstart = () => {\n      delegate.attachmentUploadDidStart(this.attachment, this.policy)\n    }\n\n    xhr.upload.onprogress = e => {\n      if (e.lengthComputable) {\n        const percent = Math.round((e.loaded / e.total) * 100)\n        delegate.attachmentUploadDidProgress(this.attachment, percent)\n      }\n    }\n\n    await send(xhr, uploadForm(this.attachment, this.policy))\n\n    if (xhr.status === 204) {\n      markComplete(this.policy)\n      delegate.attachmentUploadDidComplete(this.attachment, this.policy, {})\n    } else if (xhr.status === 201) {\n      markComplete(this.policy)\n      delegate.attachmentUploadDidComplete(this.attachment, this.policy, JSON.parse(xhr.responseText))\n    } else {\n      delegate.attachmentUploadDidError(this.attachment, {status: xhr.status, body: xhr.responseText})\n    }\n\n    const endTime = window.performance.now()\n    const timeDiff = endTime - startTime\n    const uploadTiming: PlatformBrowserPerformanceUploadTiming = {\n      duration: timeDiff,\n      size: this.attachment?.file?.size,\n      fileType: this.attachment?.file?.type,\n      success: xhr.status === 204 || xhr.status === 201,\n    }\n    sendStats({uploadTiming}, true)\n  }\n}\n\nfunction send(xhr: XMLHttpRequest, body: FormData): Promise<XMLHttpRequest> {\n  return new Promise((resolve, reject) => {\n    xhr.onload = () => resolve(xhr)\n    xhr.onerror = reject\n    xhr.send(body)\n  })\n}\n\nfunction uploadForm(attachment: Attachment, policy: UploadPolicyData): FormData {\n  const form = new FormData()\n  if (policy.same_origin) {\n    // eslint-disable-next-line github/authenticity-token\n    form.append('authenticity_token', policy.upload_authenticity_token)\n  }\n  for (const key in policy.form) {\n    form.append(key, policy.form[key]!)\n  }\n  form.append('file', attachment.file)\n  return form\n}\n\nfunction markComplete(policy: UploadPolicyData) {\n  /* eslint-disable-next-line @typescript-eslint/ban-ts-comment */\n  // @ts-ignore\n  const url = typeof policy.asset_upload_url === 'string' ? policy.asset_upload_url : null\n  const token =\n    /* eslint-disable-next-line @typescript-eslint/ban-ts-comment */\n    // @ts-ignore\n    typeof policy.asset_upload_authenticity_token == 'string' ? policy.asset_upload_authenticity_token : null\n\n  if (!(url && token)) return\n\n  const form = new FormData()\n  // eslint-disable-next-line github/authenticity-token\n  form.append('authenticity_token', token)\n\n  fetch(url, {\n    method: 'PUT',\n    body: form,\n    credentials: 'same-origin',\n    headers: {\n      Accept: 'application/json',\n      'X-Requested-With': 'XMLHttpRequest',\n    },\n  })\n}\n","import type {Attachment} from '@github/file-attachment-element'\n\n// A collection of files to be uploaded together. A batch reports progress of\n// the collection rather than each individual file.\nexport default class Batch {\n  attachments: Attachment[]\n  size: number\n  total: number\n  failedAttachments: Attachment[]\n\n  constructor(attachments: Attachment[]) {\n    this.attachments = attachments\n    this.failedAttachments = []\n\n    // How many total files to upload.\n    this.size = this.attachments.length\n\n    // How many total bytes to upload.\n    this.total = sum(this.attachments, a => a.file.size)\n  }\n\n  // The completion percentage of the batch as a whole.\n  //\n  // Returns a Number between 0 and 100.\n  percent(): number {\n    const bytes = (a: Attachment) => (a.file.size * a.percent) / 100\n    const total = sum(this.attachments, bytes)\n    return Math.round((total / this.total) * 100)\n  }\n\n  uploaded(): number {\n    const value = (a: Attachment) => (a.isSaved() ? 1 : 0)\n    return sum(this.attachments, value)\n  }\n\n  // The completion state of the batch.\n  //\n  // Returns true when all files have been uploaded.\n  isFinished(): boolean {\n    return this.attachments.every(attachment => this.failedAttachments.includes(attachment) || attachment.isSaved())\n  }\n\n  // Mark an attachment as failed in this batch\n  setAttachmentAsFailed(attachment: Attachment) {\n    if (this.attachments.includes(attachment) && !this.failedAttachments.includes(attachment)) {\n      this.failedAttachments.push(attachment)\n    }\n  }\n}\n\nfunction sum<T>(items: T[], map: (item: T) => number): number {\n  return items.reduce((total, item) => total + map(item), 0)\n}\n","import {attr, controller, target} from '@github/catalyst'\nimport type {WebauthnGetElement} from '@github-ui/webauthn-get-element'\nimport {State} from '@github-ui/webauthn-get-element'\nimport {\n  initializeMobileAuthRequestStatusPoll,\n  hidePromptAndShowErrorMessage as showGitHubMobileErrorState,\n  resetPrompt as resetGitHubMobilePrompt,\n} from '../sessions/github-mobile-two-factor'\nimport {supported} from '@github/webauthn-json/browser-ponyfill'\nimport {smsSending, smsSuccess} from '../sessions/two-factor'\nimport {requestSubmit} from '@github-ui/form-utils'\n\nenum SudoCredentialOptionsElementState {\n  WebAuthn = 'webauthn',\n  Password = 'password',\n  GitHubMobile = 'github_mobile',\n  TotpApp = 'app',\n  TotpSms = 'sms',\n}\n\n@controller\nexport class SudoCredentialOptionsElement extends HTMLElement {\n  static attrPrefix = ''\n  @attr initialState: string\n  @attr webauthnAvailable: string\n  @attr githubMobileAvailable: string\n  @attr totpAppAvailable: string\n  @attr totpSmsAvailable: string\n  @attr githubMobilePromptUrl: string\n  @attr githubMobileGenericErrorMessage: string\n  @attr smsGenericErrorMessage: string\n  @attr genericErrorMessage: string\n  @attr totpSmsTriggerUrl: string\n\n  @target flashErrorMessageContainer: HTMLElement\n  @target flashErrorMessageText: HTMLElement\n  @target webauthnContainer: HTMLElement\n  @target githubMobileContainer: HTMLElement\n  @target githubMobileLoading: HTMLElement\n  @target githubMobileLanding: HTMLElement\n  @target totpAppContainer: HTMLElement\n  @target totpSmsContainer: HTMLElement\n  @target totpSmsLanding: HTMLElement\n  @target passwordContainer: HTMLElement\n  @target githubMobileNoChallengeMessage: HTMLElement\n  @target githubMobileChallengeMessage: HTMLElement\n  @target githubMobileChallengeValue: HTMLElement\n\n  @target webauthnNav: HTMLElement\n  @target githubMobileNav: HTMLElement\n  @target totpAppNav: HTMLElement\n  @target totpSmsNav: HTMLElement\n  @target totpSmsResendNav: HTMLElement\n  @target passwordNav: HTMLElement\n\n  @target webauthnGet: WebauthnGetElement\n  @target loginField: HTMLInputElement\n  @target passwordField: HTMLInputElement\n\n  #currentState: SudoCredentialOptionsElementState\n\n  connectedCallback() {\n    // set state explicitly on load to get evaluated webauthn warnings, etc\n    const stateKey = this.initialState as SudoCredentialOptionsElementState\n    this.#currentState = stateKey\n    this.reRenderPrompt(true)\n  }\n\n  reRenderPrompt(initialLoad = false): void {\n    this.resetPrompt()\n    try {\n      switch (this.#currentState) {\n        case SudoCredentialOptionsElementState.WebAuthn:\n          this.renderWebauthnOption()\n          break\n        case SudoCredentialOptionsElementState.GitHubMobile:\n          this.renderGitHubMobileOption(initialLoad)\n          break\n        case SudoCredentialOptionsElementState.TotpApp:\n          this.renderTotpAppOption()\n          break\n        case SudoCredentialOptionsElementState.TotpSms:\n          this.renderTotpSmsOption(initialLoad)\n          break\n        case SudoCredentialOptionsElementState.Password:\n        default:\n          this.renderPasswordOption()\n          break\n      }\n      this.reRenderNavContainer()\n    } catch (e) {\n      // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n      this.handleUnexpectedPromptError(e)\n    }\n  }\n\n  handleUnexpectedPromptError(unexpectedError: Error) {\n    let errorMessage = ''\n\n    switch (this.#currentState) {\n      case SudoCredentialOptionsElementState.GitHubMobile:\n        errorMessage = this.githubMobileGenericErrorMessage\n        break\n      case SudoCredentialOptionsElementState.TotpSms:\n        errorMessage = this.smsGenericErrorMessage\n        break\n      default:\n        errorMessage = this.genericErrorMessage\n    }\n\n    // if we have an unexpected error, show a generic error message\n    // and try the password prompt as a fallback to prevent the user from being presented with an empty prompt / no options\n    if (unexpectedError && this.#currentState !== SudoCredentialOptionsElementState.Password) {\n      this.renderPasswordOptionWithError(errorMessage)\n      throw unexpectedError // re-throw the error so we can capture any unexpected errors with failbot/sentry\n    }\n  }\n\n  renderPasswordOptionWithError(errorMessage: string): void {\n    this.showPassword()\n    this.showErrorMessage(errorMessage)\n  }\n\n  resetPrompt(): void {\n    this.hideErrorMessage()\n    if (this.isWebAuthnAvailable()) {\n      this.hideWebAuthn()\n    }\n    if (this.isGitHubMobileAvailable()) {\n      this.hideGitHubMobile()\n    }\n    if (this.isTotpAppAvailable()) {\n      this.hideTotpApp()\n    }\n    if (this.isTotpSmsAvailable()) {\n      this.hideTotpSms()\n    }\n    this.hidePassword()\n  }\n\n  hideWebAuthn() {\n    this.safeSetElementVisibility(this.webauthnContainer, false)\n    this.safeSetElementVisibility(this.webauthnNav, false)\n  }\n\n  hideGitHubMobile() {\n    this.safeSetElementVisibility(this.githubMobileContainer, false)\n    this.safeSetElementVisibility(this.githubMobileNav, false)\n    this.safeSetElementVisibility(this.githubMobileLoading, false)\n    this.safeSetElementVisibility(this.githubMobileLanding, false)\n  }\n\n  hideTotpApp() {\n    this.safeSetElementVisibility(this.totpAppContainer, false)\n    this.safeSetElementVisibility(this.totpAppNav, false)\n  }\n\n  hideTotpSms() {\n    this.safeSetElementVisibility(this.totpSmsContainer, false)\n    this.safeSetElementVisibility(this.totpSmsLanding, false)\n    this.safeSetElementVisibility(this.totpSmsNav, false)\n    this.safeSetElementVisibility(this.totpSmsResendNav, false)\n  }\n\n  hidePassword() {\n    this.safeSetElementVisibility(this.passwordContainer, false)\n    this.safeSetElementVisibility(this.passwordNav, false)\n  }\n\n  reRenderNavContainer() {\n    if (this.isWebAuthnAvailable() && this.#currentState !== SudoCredentialOptionsElementState.WebAuthn) {\n      this.safeSetElementVisibility(this.webauthnNav, true)\n    }\n    if (this.isGitHubMobileAvailable() && this.#currentState !== SudoCredentialOptionsElementState.GitHubMobile) {\n      this.safeSetElementVisibility(this.githubMobileNav, true)\n    }\n    if (this.isTotpAppAvailable() && this.#currentState !== SudoCredentialOptionsElementState.TotpApp) {\n      this.safeSetElementVisibility(this.totpAppNav, true)\n    }\n    if (this.isTotpSmsAvailable() && this.#currentState !== SudoCredentialOptionsElementState.TotpSms) {\n      this.safeSetElementVisibility(this.totpSmsNav, true)\n    }\n    if (this.#currentState !== SudoCredentialOptionsElementState.Password) {\n      this.safeSetElementVisibility(this.passwordNav, true)\n    }\n  }\n\n  renderWebauthnOption(): void {\n    this.safeSetElementVisibility(this.webauthnContainer, true)\n    this.webauthnGet?.setState(supported() ? State.Ready : State.Unsupported)\n  }\n\n  renderGitHubMobileOption(initialLoad: boolean): void {\n    try {\n      resetGitHubMobilePrompt()\n    } catch {\n      // ignore errors\n    }\n    // if it's the initial load, show the \"landing\" page that\n    // offers a button to initiate the GH mobile auth request\n    if (initialLoad) {\n      this.safeSetElementVisibility(this.githubMobileLoading, false)\n      this.safeSetElementVisibility(this.githubMobileLanding, true)\n      this.safeSetElementVisibility(this.githubMobileContainer, false)\n    } else {\n      this.safeSetElementVisibility(this.githubMobileLoading, true)\n      this.safeSetElementVisibility(this.githubMobileLanding, false)\n      this.safeSetElementVisibility(this.githubMobileContainer, false)\n      this.initiateGitHubMobileAuthRequest()\n    }\n  }\n\n  renderTotpSmsOption(initialLoad: boolean): void {\n    // if it's the initial load, show the \"landing\" page that\n    // offers a button to initiate the text message\n    if (initialLoad) {\n      this.safeSetElementVisibility(this.totpSmsLanding, true)\n      this.safeSetElementVisibility(this.totpSmsContainer, false)\n    } else {\n      this.safeSetElementVisibility(this.totpSmsLanding, false)\n      this.safeSetElementVisibility(this.totpSmsContainer, true)\n      this.initiateTotpSmsRequest()\n    }\n  }\n\n  renderTotpAppOption(): void {\n    this.safeSetElementVisibility(this.totpAppContainer, true)\n  }\n\n  renderPasswordOption(): void {\n    this.safeSetElementVisibility(this.passwordContainer, true)\n    if (this.loginField) {\n      this.loginField.focus()\n    } else {\n      this.passwordField?.focus()\n    }\n  }\n\n  hasMultipleOptions(): boolean {\n    return (\n      this.isWebAuthnAvailable() ||\n      this.isGitHubMobileAvailable() ||\n      this.isTotpAppAvailable() ||\n      this.isTotpSmsAvailable()\n    )\n  }\n\n  isWebAuthnAvailable(): boolean {\n    return this.webauthnAvailable === 'true'\n  }\n\n  isGitHubMobileAvailable(): boolean {\n    return this.githubMobileAvailable === 'true'\n  }\n\n  isTotpAppAvailable(): boolean {\n    return this.totpAppAvailable === 'true'\n  }\n\n  isTotpSmsAvailable(): boolean {\n    return this.totpSmsAvailable === 'true'\n  }\n\n  showWebauthn(): void {\n    this.#currentState = SudoCredentialOptionsElementState.WebAuthn\n    this.reRenderPrompt()\n  }\n\n  showGitHubMobile(): void {\n    this.#currentState = SudoCredentialOptionsElementState.GitHubMobile\n    this.reRenderPrompt()\n  }\n\n  showTotpApp(): void {\n    this.#currentState = SudoCredentialOptionsElementState.TotpApp\n    this.reRenderPrompt()\n  }\n\n  showTotpSms(): void {\n    this.#currentState = SudoCredentialOptionsElementState.TotpSms\n    this.reRenderPrompt()\n  }\n\n  showPassword(): void {\n    this.#currentState = SudoCredentialOptionsElementState.Password\n    this.reRenderPrompt()\n  }\n\n  githubMobileRetry(e: Event): void {\n    e.preventDefault()\n    this.showGitHubMobile()\n  }\n\n  async initiateGitHubMobileAuthRequest(): Promise<void> {\n    const url = this.githubMobilePromptUrl\n    const csrfToken = (document.getElementById('sudo-credential-options-github-mobile-csrf') as HTMLInputElement).value\n    const data = new FormData()\n    // eslint-disable-next-line github/authenticity-token\n    data.append('authenticity_token', csrfToken)\n\n    try {\n      const response = await fetch(url, {\n        method: 'POST',\n        headers: {\n          'X-Requested-With': 'XMLHttpRequest',\n        },\n        body: data,\n      })\n\n      if (!response.ok && this.#currentState === SudoCredentialOptionsElementState.GitHubMobile) {\n        this.mobileFailHandler(this.githubMobileGenericErrorMessage)\n        return\n      }\n\n      const json = await response.json()\n      const hasChallenge = !!json.challenge\n\n      this.safeSetElementVisibility(this.githubMobileNoChallengeMessage, !hasChallenge)\n      this.safeSetElementVisibility(this.githubMobileChallengeMessage, hasChallenge)\n      this.safeSetElementVisibility(this.githubMobileChallengeValue, hasChallenge)\n\n      if (hasChallenge) {\n        this.githubMobileChallengeValue.textContent = json.challenge\n      }\n\n      const el = document.getElementsByClassName('js-poll-github-mobile-sudo-authenticate')[0]!\n      initializeMobileAuthRequestStatusPoll(\n        el,\n        () => this.mobileApprovedHandler(),\n        (message: string) => this.mobileFailHandler(message),\n        () => this.mobileCancelCheck(),\n      )\n    } catch (e) {\n      if (this.#currentState === SudoCredentialOptionsElementState.GitHubMobile) {\n        this.mobileFailHandler(this.githubMobileGenericErrorMessage)\n      }\n    } finally {\n      if (this.#currentState === SudoCredentialOptionsElementState.GitHubMobile) {\n        this.safeSetElementVisibility(this.githubMobileLoading, false)\n        this.safeSetElementVisibility(this.githubMobileContainer, true)\n      }\n    }\n  }\n\n  async resendTotpSms(): Promise<void> {\n    this.hideErrorMessage()\n    // start the spinner\n    smsSending()\n    try {\n      await this.initiateTotpSmsRequest(true)\n    } catch (e) {\n      // errors are handled in the initiateTotpSmsRequest method\n    }\n    // always stop the spinner\n    document.body.classList.remove('is-sending')\n  }\n\n  async initiateTotpSmsRequest(isResend = false): Promise<void> {\n    const url = new URL(this.totpSmsTriggerUrl, window.location.origin)\n    if (isResend) {\n      url.searchParams.set('resend', 'true')\n    }\n    const csrfToken = (document.getElementById('sudo-credential-options-sms-csrf') as HTMLInputElement).value\n    const data = new FormData()\n    // eslint-disable-next-line github/authenticity-token\n    data.append('authenticity_token', csrfToken)\n\n    try {\n      const response = await fetch(url, {\n        method: 'POST',\n        headers: {\n          'X-Requested-With': 'XMLHttpRequest',\n        },\n        body: data,\n      })\n      if (!response.ok && this.#currentState === SudoCredentialOptionsElementState.TotpSms) {\n        const responseJson = await response.json()\n        this.showErrorMessage(responseJson.error)\n      } else if (this.#currentState === SudoCredentialOptionsElementState.TotpSms && isResend) {\n        smsSuccess()\n      }\n    } catch (e) {\n      if (this.#currentState === SudoCredentialOptionsElementState.TotpSms) {\n        this.showErrorMessage(this.smsGenericErrorMessage)\n      }\n    }\n    if (this.#currentState === SudoCredentialOptionsElementState.TotpSms) {\n      this.safeSetElementVisibility(this.totpSmsResendNav, true)\n    }\n  }\n\n  mobileApprovedHandler(): void {\n    if (this.#currentState === SudoCredentialOptionsElementState.GitHubMobile) {\n      const form = this.githubMobileContainer.getElementsByTagName('form')[0]!\n      requestSubmit(form)\n    }\n  }\n\n  mobileFailHandler(message: string): void {\n    if (this.#currentState === SudoCredentialOptionsElementState.GitHubMobile) {\n      this.showErrorMessage(message)\n      showGitHubMobileErrorState()\n    }\n  }\n\n  mobileCancelCheck(): boolean {\n    return this.#currentState !== SudoCredentialOptionsElementState.GitHubMobile\n  }\n\n  safeSetElementVisibility(elem: HTMLElement, visible: boolean): boolean {\n    if (elem) {\n      elem.hidden = !visible\n      return true\n    }\n    return false\n  }\n\n  showErrorMessage(message: string): void {\n    if (this.flashErrorMessageText) {\n      this.flashErrorMessageText.textContent = message\n      this.safeSetElementVisibility(this.flashErrorMessageContainer, true)\n    }\n  }\n\n  hideErrorMessage(): void {\n    if (this.flashErrorMessageText) {\n      this.flashErrorMessageText.textContent = ''\n    }\n    this.safeSetElementVisibility(this.flashErrorMessageContainer, false)\n  }\n}\n","// Global handler for AJAX loading indicators.\n//\n// Only enabled on new style `data-remote` requests.\n//\n// Examples\n//\n//   .loading-spinner { display: none; }\n//   form.loading .loading-spinner { display: block; }\n//\n\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\non('deprecatedAjaxSend', '[data-remote]', function (event) {\n  if (event.currentTarget !== event.target) {\n    return\n  }\n  if (event.defaultPrevented) {\n    return\n  }\n  event.currentTarget.classList.add('loading')\n})\n\n// Clear any errors when the request is tried again\non('deprecatedAjaxComplete', '[data-remote]', function (event) {\n  if (event.currentTarget !== event.target) {\n    return\n  }\n  event.currentTarget.classList.remove('loading')\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {fire} from 'delegated-events'\nimport {remoteForm} from '@github/remote-form'\n\n// Dashboard event stream ajax pagination\nremoteForm('form.js-ajax-pagination, .js-ajax-pagination form', async function (form, wants) {\n  const container = form.closest<HTMLElement>('.js-ajax-pagination')!\n  let response\n  try {\n    response = await wants.html()\n  } catch (err) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    if (err.response && err.response.status === 404) {\n      container.remove()\n      return\n    } else {\n      throw err\n    }\n  }\n  container.replaceWith(response.html)\n  fire(form, 'page:loaded')\n})\n","import safeStorage from '@github-ui/safe-storage'\nconst {getItem} = safeStorage('localStorage')\n\nexport function debugHydroPayload(debugKey: string, payload: string): void {\n  if (process.env.NODE_ENV === 'development') {\n    if (getItem(debugKey) === 'true') {\n      /* eslint eslint-comments/no-use: off */\n      /* eslint-disable no-console */\n      try {\n        const parsed = JSON.parse(payload)\n        const eventName = parsed?.payload?.event_name ?? parsed?.event_type\n        console.group(`[${debugKey}] ${eventName}`)\n        console.table(parsed)\n        const keys = Object.keys(parsed?.payload || {})\n        for (const key of keys) {\n          const object = parsed.payload[key]\n          if (object instanceof Object && Object.keys(object).length > 0) {\n            console.group(key)\n            console.table(object)\n            console.groupEnd()\n          }\n        }\n        console.groupEnd()\n      } catch (e) {\n        console.group(`[hydro ${debugKey}] - failed to parse payload`)\n        console.log(payload)\n        console.groupEnd()\n      }\n      /* eslint-enable no-console */\n    }\n  }\n}\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {sendEvent} from '@github-ui/hydro-analytics'\nimport {ssrSafeDocument} from '@github-ui/ssr-utils'\nimport {debugHydroPayload} from './console-debug'\nconst GENERIC_CLICK_EVENT_NAME = 'analytics.click'\n\non('click', '[data-analytics-event]', event => {\n  // marketing pages will use marketing/analytics-events.ts, instead of behaviors/analytics-events.ts\n  if (isMarketingPage()) {\n    return\n  }\n  const element = event.currentTarget\n\n  const analyticsEvent = element.getAttribute('data-analytics-event')\n  if (!analyticsEvent) return\n\n  const analyticsEventAttributes = JSON.parse(analyticsEvent)\n\n  debugHydroPayload('hydro-debug.click', `{\"event_type\": \"${GENERIC_CLICK_EVENT_NAME}\", \"payload\": ${analyticsEvent}}`)\n  sendEvent(GENERIC_CLICK_EVENT_NAME, analyticsEventAttributes)\n})\n\nfunction isMarketingPage(): boolean {\n  return !!ssrSafeDocument?.head?.querySelector<HTMLMetaElement>('meta[name=\"is_logged_out_page\"]')?.content\n}\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {sendStats} from '@github-ui/stats'\n\nconst selector = ['system', 'disabled']\n  .map(state => `html[data-a11y-animated-images=\"${state}\"] img[data-animated-image]`)\n  .join(', ')\n\nobserve(selector, el => {\n  if (!(el instanceof HTMLImageElement)) return // Element is not an image\n  // Element has a parent link but is not the direct child\n  if (el.closest('a') && !(el.parentElement instanceof HTMLAnchorElement)) return\n\n  let parent = el.parentElement\n  let link = null\n  if (parent instanceof HTMLAnchorElement) {\n    if (parent.childElementCount > 1) return // Image is not the only child of link\n    link = parent\n    link.setAttribute('data-target', 'animated-image.originalLink')\n    parent = link.parentElement\n  }\n\n  el.removeAttribute('data-animated-image')\n  el.setAttribute('data-target', 'animated-image.originalImage')\n\n  const clone = link ? link.cloneNode(true) : el.cloneNode(true)\n\n  const container = document.createElement('animated-image')\n  container.appendChild(clone)\n  parent?.replaceChild(container, link ? link : el)\n\n  sendStats({incrementKey: 'ANIMATED_IMAGE_PLAYER_WRAPPED', requestUrl: window.location.href})\n})\n","// Common behaviors associated with <auto-check>\n\nimport {announceFromElement} from '@github-ui/aria-live'\n// eslint-disable-next-line no-restricted-imports\nimport {fire} from 'delegated-events'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {validate as htmlValidate} from '../behaviors/html-validation'\n\nconst notes = new WeakMap()\n\nobserve('auto-check', function (el) {\n  if (el.classList.contains('js-prevent-default-behavior')) return\n\n  const input = el.querySelector('input')\n  if (!input) return\n\n  const container = input.closest('.form-group') || el\n  const form = input.form\n\n  let id: string | null\n  function generateId() {\n    if (!id) id = `input-check-${(Math.random() * 10000).toFixed(0)}`\n    return id\n  }\n  const ariaDescribedby = input.getAttribute('aria-describedby')\n\n  input.addEventListener('focusout:delay', () => {\n    input.setAttribute('aria-describedby', [id, ariaDescribedby].join(' '))\n  })\n\n  const note = container.querySelector('p.note')\n  if (note) {\n    if (!note.id) note.id = generateId()\n    notes.set(note, note.innerHTML)\n  }\n\n  el.addEventListener('loadstart', () => {\n    reset(input, container)\n    container.classList.add('is-loading')\n    input.classList.add('is-autocheck-loading')\n\n    validate(form)\n  })\n\n  el.addEventListener('loadend', () => {\n    container.classList.remove('is-loading')\n    input.classList.remove('is-autocheck-loading')\n  })\n\n  input.addEventListener('auto-check-success', async (event: Event) => {\n    input.classList.add('is-autocheck-successful')\n    container.classList.add('successed')\n\n    validate(form)\n\n    const {response} = (event as CustomEvent).detail\n    if (!response) return\n\n    const message = await response.text()\n    if (!message) return\n\n    if (note instanceof HTMLElement) {\n      note.innerHTML = message\n      announceFromElement(note)\n    } else {\n      const isOk = response.status === 200\n      const tagName = container.tagName === 'DL' ? 'dd' : 'div'\n      const element = document.createElement(tagName)\n      element.id = generateId()\n      element.classList.add(isOk ? 'success' : 'warning')\n      element.innerHTML = message\n      container.append(element)\n      container.classList.add(isOk ? 'successed' : 'warn')\n      announceFromElement(element)\n      if (isOk) element.hidden = document.activeElement !== input\n    }\n\n    fire(input, 'auto-check-message-updated')\n  })\n\n  input.addEventListener('auto-check-error', async event => {\n    input.classList.add('is-autocheck-errored')\n    container.classList.add('errored')\n\n    validate(form)\n\n    const {response} = (event as CustomEvent).detail\n    if (!response) return\n\n    const message = await response.text()\n\n    if (note instanceof HTMLElement) {\n      // eslint-disable-next-line i18n-text/no-en\n      note.innerHTML = message || 'Something went wrong'\n      announceFromElement(note)\n    } else {\n      const tagName = container.tagName === 'DL' ? 'dd' : 'div'\n      const error = document.createElement(tagName)\n      error.id = generateId()\n      error.classList.add('error')\n      // eslint-disable-next-line i18n-text/no-en\n      error.innerHTML = message || 'Something went wrong'\n      container.append(error)\n      announceFromElement(error)\n    }\n  })\n\n  input.addEventListener('input', () => {\n    input.removeAttribute('aria-describedby')\n    if (!input.value) reset(input, container)\n  })\n\n  input.addEventListener('blur', () => {\n    const successMessage = container.querySelector<HTMLElement>('.success')\n    if (successMessage) successMessage.hidden = true\n  })\n\n  input.addEventListener('focus', () => {\n    const successMessage = container.querySelector<HTMLElement>('.success')\n    if (successMessage) successMessage.hidden = false\n  })\n\n  form?.addEventListener('reset', () => {\n    reset(input, container)\n  })\n})\n\n// Reset the autocheck state.\nfunction reset(input: HTMLInputElement, container: Element) {\n  container.classList.remove('is-loading', 'successed', 'errored', 'warn')\n  input.classList.remove('is-autocheck-loading', 'is-autocheck-successful', 'is-autocheck-errored')\n\n  const note = container.querySelector('p.note')\n  if (note) {\n    const content = notes.get(note)\n    if (content) note.innerHTML = content\n  }\n\n  if (container.tagName === 'DL') {\n    container.querySelector('dd.error')?.remove()\n    container.querySelector('dd.warning')?.remove()\n    container.querySelector('dd.success')?.remove()\n  } else {\n    container.querySelector('div.error')?.remove()\n    container.querySelector('div.warning')?.remove()\n    container.querySelector('div.success')?.remove()\n  }\n}\n\nfunction validate(form: HTMLFormElement | null) {\n  if (!form) return\n  htmlValidate(form)\n}\n","// Common behaviors associated with <auto-complete>\n\nimport AutocompleteElement from '@github/auto-complete-element'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\n// Display spinner during query server fetch.\nobserve('auto-complete', function (el) {\n  el.addEventListener('loadstart', () => el.classList.add('is-auto-complete-loading'))\n  el.addEventListener('loadend', () => el.classList.remove('is-auto-complete-loading'))\n})\n\nobserve('auto-complete', {constructor: AutocompleteElement, initialize: toggleSubmitButton})\n\non('auto-complete-change', 'auto-complete', function (event) {\n  toggleSubmitButton(event.currentTarget as AutocompleteElement)\n})\n\n// TODO Upstream `required` attribute to <auto-complete> so it can\n// participate in data-disable-invalid form validation.\n//\n// Toggle the submit button disabled/enabled based on the completer.\nfunction toggleSubmitButton(completer: AutocompleteElement) {\n  const form = completer.closest('form')\n  if (!form) return\n  const button = form.querySelector('.js-auto-complete-button')\n  if (!(button instanceof HTMLButtonElement)) return\n  button.disabled = !completer.value\n}\n","// Click to select clone urls\n\nimport {microtask} from '@github-ui/eventloop-tasks'\nimport {onFocus} from '../onfocus'\n\nonFocus('input[data-autoselect], textarea[data-autoselect]', async function (input) {\n  await microtask()\n  ;(input as HTMLInputElement | HTMLTextAreaElement).select()\n})\n","// Form AutoSubmit Behavior\n//\n// Automatically submits form when one of its fields change.\n//\n// Examples\n//\n//   <form action=\"/subscribe\" data-autosubmit>\n//     <input type=radio name=state value=1> Subscribe\n//     <input type=radio name=state value=0> Unsubscribe\n//   </form>\n\nimport {debounce} from '@github/mini-throttle'\nimport {fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {requestSubmit} from '@github-ui/form-utils'\n\non('change', 'form[data-autosubmit]', function (event) {\n  const target = event.currentTarget\n  requestSubmit(target as HTMLFormElement)\n})\n\non('change', 'input[data-autosubmit], select[data-autosubmit]', submit)\n\n// Submit a form from a change event.\nfunction submit(event: Event) {\n  const input = event.target\n  if (!(input instanceof HTMLInputElement) && !(input instanceof HTMLSelectElement)) return\n\n  const form = input.form\n  requestSubmit(form!)\n}\n\nconst debouncedSubmit = debounce(submit, 300)\n\nobserve('input[data-throttled-autosubmit]', {\n  subscribe: el => fromEvent(el, 'input', debouncedSubmit),\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\n// Sets the text of the avatar reset button depending on whether or not the\n// user has a gravatar associated with their GitHub account.\nasync function detectGravatar(el: Element) {\n  const gravitarUrl = el.getAttribute('data-url') || ''\n  const hasGravitar = await fetchGravatarInfo(gravitarUrl)\n\n  if (hasGravitar) {\n    const gravatarText = el.getAttribute('data-gravatar-text')\n    if (gravatarText != null) {\n      el.textContent = gravatarText\n    }\n  }\n}\n\nobserve('.js-detect-gravatar', function (el) {\n  detectGravatar(el)\n})\n\n// Fetch the gravitarUrl, and check the `has_gravatar` property from the returning JSON.\nasync function fetchGravatarInfo(gravitarUrl: string): Promise<boolean> {\n  const url = gravitarUrl\n  if (!url) return false\n\n  try {\n    const response = await fetch(url, {headers: {Accept: 'application/json'}})\n    if (!response.ok) return false\n    const data = (await response.json()) as {has_gravatar: boolean}\n    return data.has_gravatar\n  } catch {\n    return false\n  }\n}\n","import {addThrottledInputEventListener} from '../throttled-input'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {replaceState} from '../history'\nimport visible from '../visible'\nimport {softNavigate} from '@github-ui/soft-navigate'\n\nconst priceSelectors = ['.unstyled-additional-seats-price-obj', '.unstyled-base-price-obj', '.unstyled-final-price-obj']\n\ninterface PriceStruct {\n  default_currency: string\n  local_currency: string\n}\n\ntype SelectorValue = PriceStruct | string | number\n\nfunction isAPriceStruct(obj: SelectorValue): obj is PriceStruct {\n  if (typeof obj === 'string') return false\n  if (typeof obj === 'number') return false\n  return 'default_currency' in obj && 'local_currency' in obj\n}\n\ninterface UserPlan {\n  free: boolean\n  is_enterprise_cloud_trial: boolean\n  seats: number\n  no_additional_seats: boolean\n  selectors: Record<string, SelectorValue>\n  url: string\n}\n\nlet previousController: AbortController | null = null\non('click', '.js-org-signup-duration-change', event => {\n  event.preventDefault()\n  const el = event.currentTarget\n  const newDuration = el.getAttribute('data-plan-duration')!\n\n  updateDurationFields(newDuration)\n  updateSeatFieldURLs(newDuration)\n  for (const seatsField of document.querySelectorAll<HTMLInputElement>('.js-seat-field')) {\n    updateTotals(seatsField)\n  }\n  toggleDurationUnitPrices()\n})\n\non('change', '.js-org-signup-duration-toggle', function ({currentTarget}) {\n  const url = new URL(currentTarget.getAttribute('data-url')!, window.location.origin)\n\n  softNavigate(url.toString())\n})\n\nasync function updateTotals(el: HTMLInputElement | HTMLSelectElement) {\n  const itemKey = el.getAttribute('data-item-name') || 'items'\n  const itemRawCount = el.value\n  const url = new URL(el.getAttribute('data-url')!, window.location.origin)\n  const params = new URLSearchParams(url.search.slice(1))\n  const itemMinimum = parseInt(el.getAttribute('data-item-minimum')!) || 0\n  const itemMaximum = parseInt(el.getAttribute('data-item-maximum')!) || 1_000_000 //1 mil is default when limit_maximum_seats_for_plan_upgrades is disabled\n  const itemCount = parseInt(el.getAttribute('data-item-count')!) || 0\n  const itemDelta = Math.max(itemMinimum, parseInt(itemRawCount) || 0)\n  const contactUs = itemDelta > itemMaximum\n\n  const downgradeButton = document.querySelector('.js-downgrade-button')\n  const downgradeDisabledMessage = document.getElementById('downgrade-disabled-message')\n  if (downgradeButton instanceof HTMLButtonElement) {\n    downgradeButton.disabled = itemDelta === itemCount\n  }\n\n  if (downgradeDisabledMessage instanceof HTMLElement && downgradeButton instanceof HTMLButtonElement) {\n    downgradeDisabledMessage.hidden = !downgradeButton.disabled\n  }\n\n  params.append(itemKey, itemDelta.toString())\n\n  const transformInput = document.querySelector('.js-transform-user')\n  if (transformInput) params.append('transform_user', '1')\n\n  url.search = params.toString()\n\n  previousController?.abort()\n  const {signal} = (previousController = new AbortController())\n  let data: UserPlan | null = null\n  try {\n    const response = await fetch(url.toString(), {signal, headers: {Accept: 'application/json'}})\n    if (!response.ok) return\n    data = (await response.json()) as UserPlan\n  } catch {\n    // ignore network errors\n  }\n  if (signal.aborted) return\n  if (!data) return\n\n  const contact = document.querySelector('.js-contact-us')\n  /* eslint-disable-next-line github/no-d-none */\n  if (contact) contact.classList.toggle('d-none', !contactUs)\n\n  const planCost = document.querySelector('.js-cost-info') as HTMLElement\n  if (planCost) planCost.hidden = contactUs\n\n  const paymentSummary = document.querySelector('.js-payment-summary')\n  /* eslint-disable-next-line github/no-d-none */\n  if (paymentSummary) paymentSummary.classList.toggle('d-none', contactUs)\n\n  const submit = document.querySelector('.js-submit-billing')\n  if (submit instanceof HTMLElement) submit.hidden = contactUs\n\n  const billing = document.querySelector('.js-billing-section')\n  if (billing) billing.classList.toggle('has-removed-contents', data.free || data.is_enterprise_cloud_trial)\n\n  const upgrade = document.querySelector('.js-upgrade-info')\n  /* eslint-disable-next-line github/no-d-none */\n  if (upgrade) upgrade.classList.toggle('d-none', itemDelta <= 0)\n\n  const downgrade = document.querySelector('.js-downgrade-info')\n  /* eslint-disable-next-line github/no-d-none */\n  if (downgrade) downgrade.classList.toggle('d-none', itemDelta >= 0)\n\n  const extraSeats = document.querySelector('.js-extra-seats-line-item')\n  /* eslint-disable-next-line github/no-d-none */\n  if (extraSeats) extraSeats.classList.toggle('d-none', data.no_additional_seats)\n\n  const seatField = document.querySelector('.js-seat-field')\n  if (seatField) updateSeatFields(itemRawCount)\n\n  const minimumSeatsTooltip = document.querySelector('.js-minimum-seats-disclaimer')\n  if (minimumSeatsTooltip) {\n    minimumSeatsTooltip.classList.toggle('tooltipped', data.seats === 5)\n    minimumSeatsTooltip.classList.toggle('tooltipped-nw', data.seats === 5)\n  }\n\n  const ref = data.selectors\n  for (const selector in ref) {\n    for (const element of document.querySelectorAll(selector)) {\n      if (isPriceSelector(selector) && isAPriceStruct(ref[selector]!)) {\n        element.textContent = ''\n        element.appendChild(priceCurrencyTag('default-currency', (<PriceStruct>ref[selector]).default_currency))\n        element.appendChild(priceCurrencyTag('local-currency', (<PriceStruct>ref[selector]).local_currency))\n      } else {\n        element.textContent = <string>ref[selector]\n      }\n    }\n  }\n\n  replaceState(history.state, '', data.url)\n}\n\nfunction isPriceSelector(selector: string): boolean {\n  return priceSelectors.includes(selector)\n}\n\nfunction priceCurrencyTag(className: string, price: string): HTMLSpanElement {\n  const span = document.createElement('span')\n  span.classList.add(className)\n  span.textContent = price\n  return span\n}\n\nfunction toggleDurationUnitPrices() {\n  for (const unitPrice of document.querySelectorAll<HTMLElement>('.js-unit-price')) {\n    unitPrice.hidden = !unitPrice.hidden\n  }\n}\n\nfunction updateDurationFields(newDuration: string) {\n  const oldDuration = newDuration === 'year' ? 'month' : 'year'\n  for (const planDurationText of document.querySelectorAll('.js-plan-duration-text')) {\n    planDurationText.textContent = newDuration\n  }\n\n  for (const planDurationAdjective of document.querySelectorAll('.unstyled-available-plan-duration-adjective')) {\n    planDurationAdjective.textContent = `${newDuration}ly`\n  }\n\n  for (const durationLink of document.querySelectorAll('.js-org-signup-duration-change')) {\n    durationLink.setAttribute('data-plan-duration', oldDuration)\n  }\n  const planDurationInput = <HTMLInputElement>document.getElementById('signup-plan-duration')\n  if (planDurationInput) {\n    planDurationInput.value = newDuration\n  }\n}\n\nfunction updateSeatFields(numberOfSeats: string) {\n  for (const el of document.querySelectorAll<HTMLInputElement>('.js-seat-field')) {\n    const maxSeatForPlan = el.getAttribute('data-item-maximum')!\n    const popover = el?.parentNode?.querySelector<HTMLElement>('.Popover')\n\n    if (maxSeatForPlan && maxSeatForPlan.length) {\n      if (parseInt(numberOfSeats, 10) > parseInt(maxSeatForPlan, 10)) {\n        el.classList.add('color-border-danger-emphasis')\n        popover?.removeAttribute('hidden')\n      } else {\n        el.classList.remove('color-border-danger-emphasis')\n        popover?.setAttribute('hidden', 'true')\n      }\n    }\n  }\n}\n\nfunction updateSeatFieldURLs(newDuration: string) {\n  for (const el of document.querySelectorAll<HTMLInputElement>('.js-seat-field')) {\n    const url = new URL(el.getAttribute('data-url')!, window.location.origin)\n    const params = new URLSearchParams(url.search.slice(1))\n    params.delete('plan_duration')\n    params.append('plan_duration', newDuration)\n    url.search = params.toString()\n    el.setAttribute('data-url', url.toString())\n  }\n}\n\nobserve('.js-addon-purchase-field', {\n  constructor: HTMLInputElement,\n  add(el) {\n    if (visible(el)) updateTotals(el)\n\n    addThrottledInputEventListener(el, function () {\n      updateTotals(el)\n    })\n  },\n})\n\nobserve('.js-addon-downgrade-field', {\n  constructor: HTMLSelectElement,\n  add(el) {\n    if (visible(el)) updateTotals(el)\n\n    el.addEventListener('change', function () {\n      updateTotals(el)\n    })\n  },\n})\n\nfunction handleOrgChange(event: Event) {\n  const addonField = document.querySelector('.js-addon-purchase-field')\n  const selectedRadio = (event.target as Element).querySelector('input:checked')\n\n  if (addonField instanceof HTMLInputElement && selectedRadio instanceof HTMLInputElement) {\n    const newUrl = selectedRadio.getAttribute('data-upgrade-url')\n\n    if (newUrl) {\n      addonField.setAttribute('data-url', newUrl)\n      addonField.value = '0'\n      updateTotals(addonField)\n    }\n  }\n}\n\non('details-menu-selected', '.js-organization-container', handleOrgChange, {capture: true})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {sendEvent} from '@github-ui/hydro-analytics'\n\n// Flip tooltip direction of child elements if an item gets .is-stuck\n// so tooltips are still visible when the user scrolls down a blob and\n// the button bar sticks to the top\nobserve('.js-blob-header.is-stuck', {\n  add(el) {\n    flipTooltip(el)\n  },\n  remove(el) {\n    flipTooltip(el, true)\n  },\n})\n\nfunction flipTooltip(element: Element, inverse = false) {\n  const pairs = {\n    'tooltipped-nw': 'tooltipped-sw',\n    'tooltipped-n': 'tooltipped-s',\n    'tooltipped-ne': 'tooltipped-se',\n  }\n\n  for (const [key, value] of Object.entries(pairs)) {\n    const from = inverse ? value : key\n    const to = inverse ? key : value\n    for (const el of element.querySelectorAll(`.${from}`)) {\n      el.classList.replace(from, to)\n    }\n  }\n}\n\non('click', '.js-blob-dropdown-click', event => {\n  const trackingData = event.currentTarget.getAttribute('data-dropdown-tracking')\n\n  if (!trackingData) return\n\n  const parsedTrackingData = JSON.parse(trackingData)\n  sendEvent(parsedTrackingData.type, parsedTrackingData.context)\n})\n","import {onInput} from '../onfocus'\n\nonInput('.js-csv-filter-field', function (event) {\n  const query = (event.target as HTMLInputElement).value.toLowerCase()\n  for (const row of document.querySelectorAll('.js-csv-data tbody tr')) {\n    if (!(row instanceof HTMLElement)) continue\n    if (!row.textContent) continue\n    row.hidden = !!query && !row.textContent.toLowerCase().includes(query)\n  }\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nfunction changeSelection(event: Event) {\n  const input = event.target as HTMLElement\n  const container = input?.closest<HTMLDetailsElement>('.js-branch-protection-integration-select')\n  const currentSelection = container?.querySelector<HTMLElement>('.js-branch-protection-integration-select-current')\n  const item = input?.closest<HTMLElement>('.js-branch-protection-integration-select-item')\n  const label = item?.querySelector<HTMLElement>('.js-branch-protection-integration-select-label')\n  if (currentSelection && label && container) {\n    currentSelection.innerHTML = label.innerHTML\n    container.open = false\n  }\n}\n\non('change', '.js-branch-protection-integration-select-input', changeSelection)\n","// Bulk actions\n//\n// Provides a way to update bulk actions buttons/menus from a fetched url\n// when check boxes are updated.\n//\n//     <div class=\"js-bulk-actions-container\" data-bulk-actions-url=\"/bulk/actions/url\" data-bulk-actions-parameter=\"member_ids\">\n//       <div class=\"js-bulk-actions\">\n//         <!-- buttons/menus to be updated -->\n//       </div>\n//\n//       <div class=\"js-bulk-actions-item\" data-bulk-actions-id=\"1\">\n//         <input type=\"checkbox\" class=\"js-bulk-actions-toggle\">\n//       </div>\n//     </div>\n//\n// If [data-bulk-actions-parameter] is not assigned, `input.js-bulk-actions-toggle`'s name and value will be used instead.\n//\n//     <div class=\"js-bulk-actions-container\" data-bulk-actions-url=\"/bulk/actions/url\">\n//       <div class=\"js-bulk-actions\">\n//         <!-- buttons/menus to be updated -->\n//       </div>\n//\n//       <input type=\"checkbox\" name=\"member_ids[]\" value=\"1\" class=\"js-bulk-actions-toggle\">\n//     </div>\n//\n\n// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\nimport {debounce} from '@github/mini-throttle'\n\n// Get the bulk-actions-url from the container.\nfunction bulkUrl(container: Element): string {\n  const url = new URL(container.getAttribute('data-bulk-actions-url')!, window.location.origin)\n  const params = new URLSearchParams(url.search.slice(1))\n  const name = container.getAttribute('data-bulk-actions-parameter')\n  const checkedItems = Array.from(container.querySelectorAll<HTMLInputElement>('.js-bulk-actions-toggle:checked'))\n  if (name) {\n    const ids = checkedItems\n      .map(el => el.closest<HTMLElement>('.js-bulk-actions-item')!.getAttribute('data-bulk-actions-id')!)\n      .sort()\n    for (const id of ids) {\n      params.append(`${name}[]`, id)\n    }\n  } else {\n    for (const input of checkedItems.sort((a, b) => (a.value > b.value ? 1 : -1))) {\n      params.append(input.name, input.value)\n    }\n  }\n\n  url.search = params.toString()\n  return url.toString()\n}\n\nlet previousController: AbortController | null = null\n// Update the bulk actions container with new HTML fetched from the server.\nasync function updateBulkActions(event: Event) {\n  const container = event.target\n  if (!(container instanceof HTMLElement)) return\n  const actionsContainer = container.querySelector<HTMLElement>('.js-bulk-actions')!\n  const isItemSelected = !!container.querySelector('.js-bulk-actions-toggle:checked')\n\n  previousController?.abort()\n  const {signal} = (previousController = new AbortController())\n  let html = ''\n  try {\n    // TODO: Drop `X-Requested-With` header once controllers are cleaned up of `request.xhr?`\n    const response = await fetch(bulkUrl(container), {signal, headers: {'X-Requested-With': 'XMLHttpRequest'}})\n    if (!response.ok) return\n    html = await response.text()\n  } catch {\n    // Ignore network errors\n  }\n  if (signal.aborted) return\n  if (!html) return\n\n  if (!isItemSelected) {\n    actionsContainer.innerHTML = html\n    toggleMembershipTabs(container)\n  } else {\n    toggleMembershipTabs(container)\n    actionsContainer.innerHTML = html\n  }\n\n  fire(container, 'bulk-actions:updated')\n}\n\n// Toggle the membership tabs based on the amount of checked bulk-actions.\nfunction toggleMembershipTabs(container: HTMLElement) {\n  const membershipTabs = document.querySelector('.js-membership-tabs')\n  if (membershipTabs) {\n    const checked = container.querySelectorAll('.js-bulk-actions-toggle:checked')\n    /* eslint-disable-next-line github/no-d-none */\n    membershipTabs.classList.toggle('d-none', checked.length > 0)\n  }\n}\n\non('change', '.js-bulk-actions-toggle', function (event) {\n  const toggle = event.currentTarget\n  const container = toggle.closest<HTMLElement>('.js-bulk-actions-container')!\n  fire(container, 'bulk-actions:update')\n})\n\non('bulk-actions:update', '.js-bulk-actions-container', debounce(updateBulkActions, 100))\n","import {loaded} from '@github-ui/document-ready'\nimport {sendStats} from '@github-ui/stats'\n\ntype Ok<T> = {kind: 'ok'; value: T | null}\ntype Err<E> = {kind: 'err'; value: E}\ntype Result<T, E> = Ok<T> | Err<E>\n\nfunction getLocalJSON<T>(key: string): Result<T, Error> {\n  try {\n    const text = window.localStorage.getItem(key)\n    return {kind: 'ok', value: text ? JSON.parse(text) : null}\n  } catch (e) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    return {kind: 'err', value: e}\n  }\n}\n\nfunction setLocalJSON<T>(key: string, value: T): Result<null, Error> {\n  try {\n    window.localStorage.setItem(key, JSON.stringify(value))\n    return {kind: 'ok', value: null}\n  } catch (e) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    return {kind: 'err', value: e}\n  }\n}\n\nfunction gatherBundleURLs() {\n  const urls: {[key: string]: string} = {}\n  for (const script of document.getElementsByTagName('script')) {\n    const match = script.src.match(/\\/([\\w-]+)-[0-9a-f]{8,}\\.js$/)\n    if (match) urls[`${match[1]}.js`] = script.src\n  }\n  for (const link of document.getElementsByTagName('link')) {\n    const match = link.href.match(/\\/([\\w-]+)-[0-9a-f]{8,}\\.css$/)\n    if (match) urls[`${match[1]}.css`] = link.href\n  }\n  return urls\n}\n\ntype Bundles = Record<string, string>\n\nfunction report() {\n  const urls = gatherBundleURLs()\n  const read = getLocalJSON<Bundles>('bundle-urls')\n  if (read.kind === 'err') {\n    setLocalJSON('bundle-urls', urls)\n    return\n  }\n  const previousURLs = read.value || {}\n  const downloadedBundles = Object.keys(urls).filter(bundle => previousURLs[bundle] !== urls[bundle])\n  if (downloadedBundles.length) {\n    const write = setLocalJSON('bundle-urls', {...previousURLs, ...urls})\n    if (write.kind === 'ok') {\n      sendStats({downloadedBundles})\n    }\n  }\n}\n\n;(async () => {\n  await loaded\n  // eslint-disable-next-line compat/compat\n  window.requestIdleCallback(report)\n})()\n","// Behaviors complementing buttons or minibuttons\n//\n// See also\n//   primer/buttons.scss\n//\n\nimport {fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nfunction cancelEvent(event: Event) {\n  event.preventDefault()\n  event.stopPropagation()\n}\n\n// Prevent minibutton click if target is disabled\nobserve('a.btn.disabled', {\n  subscribe: el => fromEvent(el, 'click', cancelEvent),\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport subscribe from '@github/check-all'\n\nobserve('.js-check-all-container', {\n  constructor: HTMLElement,\n  subscribe,\n})\n","import {deleteCookie, getCookies} from '../cookies'\n\n// This module detects a logout that has just occurred and clears browser data\n// for the origin that might contain sensitive things such as localstorage.\n\n// Set by lib/github/authentication/logout_result.rb on logout\nexport const JustLoggedOutCookieName = 'logout-was-successful'\n\nfunction clearData() {\n  for (const storage of [sessionStorage, localStorage]) {\n    try {\n      storage.clear()\n    } catch {\n      // ignore failure to clear\n    }\n  }\n}\n\nexport function clearDataIfJustLoggedOut() {\n  if (getCookies(JustLoggedOutCookieName).length > 0) {\n    clearData()\n    deleteCookie(JustLoggedOutCookieName)\n  }\n}\n\nclearDataIfJustLoggedOut()\n","import {announceFromElement} from '@github-ui/aria-live'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nconst duration = 2000\n\non('clipboard-copy', '[data-copy-feedback]', event => {\n  const clipboardCopyElement = event.currentTarget\n  const message = clipboardCopyElement.getAttribute('data-copy-feedback')!\n  const originalLabel = clipboardCopyElement.getAttribute('aria-label')\n  const direction = clipboardCopyElement.getAttribute('data-tooltip-direction') || 's'\n\n  clipboardCopyElement.setAttribute('aria-label', message)\n  clipboardCopyElement.classList.add('tooltipped', `tooltipped-${direction}`)\n  if (!(clipboardCopyElement instanceof HTMLElement)) return\n  announceFromElement(clipboardCopyElement)\n\n  setTimeout(() => {\n    if (originalLabel) {\n      clipboardCopyElement.setAttribute('aria-label', originalLabel)\n    } else {\n      clipboardCopyElement.removeAttribute('aria-label')\n    }\n    clipboardCopyElement.classList.remove('tooltipped', `tooltipped-${direction}`)\n  }, duration)\n})\n\nfunction timerCallback(currentTarget: HTMLElement) {\n  clipboardCopyElementTimers.delete(currentTarget)\n  toggleCopyButton(currentTarget)\n}\n\n// Toggle a copy button.\nfunction toggleCopyButton(button: HTMLElement) {\n  const copyIcon = button.querySelector('.js-clipboard-copy-icon')\n  const checkIcon = button.querySelector('.js-clipboard-check-icon')\n\n  button.classList.toggle('ClipboardButton--success')\n\n  if (copyIcon) {\n    /* eslint-disable-next-line github/no-d-none */\n    copyIcon.classList.toggle('d-none')\n  }\n  if (checkIcon) {\n    if (checkIcon.classList.contains('d-sm-none')) {\n      checkIcon.classList.toggle('d-sm-none')\n    } else {\n      /* eslint-disable-next-line github/no-d-none */\n      checkIcon.classList.toggle('d-none')\n    }\n  }\n}\n\nconst clipboardCopyElementTimers = new WeakMap<HTMLElement, number>()\n\non('clipboard-copy', '.js-clipboard-copy:not([data-view-component])', function ({currentTarget}) {\n  if (!(currentTarget instanceof HTMLElement)) return\n\n  const currentTimeout = clipboardCopyElementTimers.get(currentTarget)\n  if (currentTimeout) {\n    clearTimeout(currentTimeout)\n  } else {\n    toggleCopyButton(currentTarget)\n  }\n\n  clipboardCopyElementTimers.set(currentTarget, window.setTimeout(timerCallback, duration, currentTarget))\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {reportError} from '@github-ui/failbot'\n\n// When a code nav response returns precise and search-based backends,\n// we allow the user to retry their code nav query with the alternative\n// backend.  This observe block is responsible for handling the retry\n// logic,  making the async fetch request,  and updating the\n// code nav modal with the new response.\non('click', '.js-code-nav-retry', async function (event) {\n  // Ignore clicks with modifier keys\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n  if (event.altKey || event.ctrlKey || event.metaKey || event.shiftKey) return\n  /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n\n  const popover = document.querySelector<HTMLElement>('.js-tagsearch-popover')\n  if (!popover) return\n\n  const popoverContent = popover.querySelector<HTMLElement>('.js-tagsearch-popover-content')\n  if (!popoverContent) return\n\n  // Because the definitions endpoint is responsible for rendering\n  // the code nav modal's tabs and content,  a different dom element\n  // target is required for overwriting the html returned from the fetch.\n  let updateTarget: HTMLElement | null\n  const target = event.currentTarget as HTMLElement\n  const codeNavKind = target.getAttribute('data-code-nav-kind')\n  if (codeNavKind === 'definitions') {\n    updateTarget = popover.querySelector<HTMLElement>('.js-tagsearch-popover-content')\n  } else {\n    updateTarget = popover.querySelector<HTMLElement>('.js-code-nav-references')\n  }\n  if (!updateTarget) return\n\n  const retryUrl = target.getAttribute('data-code-nav-url')\n  if (!retryUrl) return\n\n  const codeNavUrl = new URL(retryUrl, window.location.origin)\n  try {\n    const response = await fetch(codeNavUrl.toString(), {\n      headers: {\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n    })\n    if (!response.ok) {\n      return\n    }\n    const html = await response.text()\n    if (!html) return\n\n    updateTarget.innerHTML = html\n  } catch {\n    return\n  }\n\n  // Because a user has to scroll to trigger this retry behavior,\n  // the code nav modal's scroll will need to be reset.\n  popoverContent.scrollTop = 0\n})\n\nobserve('.js-code-nav-container', {\n  constructor: HTMLElement,\n  subscribe(file) {\n    const repoContainer = file\n    const popover = document.querySelector('.js-tagsearch-popover') as HTMLElement\n    if (!(popover instanceof HTMLElement))\n      return {\n        unsubscribe() {\n          // Used as a no operation placeholder for unsubscribing if there is no popover.\n        },\n      }\n    const popoverContent = popover.querySelector<HTMLElement>('.js-tagsearch-popover-content')!\n    const popoverHTML = new WeakMap()\n    const wrapCache = new WeakMap()\n\n    let activeToken: Element | undefined\n\n    // initialize requires both `popover` and `activeToken` to be defined.\n    initialize()\n\n    // The code nav modal is sticky in the PR view.  When a user navigates to a location from the modal,\n    // and uses the 'back' button,  the code nav modal is still present,  and the active token (click target)\n    // retains the CSS classes added to it by the `onMouseOver()` event listener.\n    // This function ensures regardless of the user's previous navigation actions that the code nav modal is\n    // always reset to hidden on a new blob view, and any previous active token classes are removed from their elements.\n    function initialize() {\n      hidePopover()\n      for (const el of document.getElementsByClassName('pl-token')) {\n        el.classList.remove('pl-token', 'active')\n      }\n    }\n\n    async function onMouseMove(event: MouseEvent) {\n      const range = matchFromPoint(/\\w+[!?]?/g, event.clientX, event.clientY)\n      if (!range) return\n\n      const rangeElement = range.commonAncestorContainer.parentElement\n      if (!rangeElement) return\n      for (const className of rangeElement.classList) {\n        if (['pl-token', 'pl-c', 'pl-s', 'pl-k'].includes(className)) return\n      }\n\n      if (rangeElement.closest('.js-skip-tagsearch')) {\n        return\n      }\n\n      const text = range.toString()\n      if (!text || text.match(/\\n|\\s|[();&.=\",]/)) return\n\n      let didCheckText = wrapCache.get(rangeElement)\n      if (!didCheckText) {\n        didCheckText = new Set()\n        wrapCache.set(rangeElement, didCheckText)\n      }\n      if (didCheckText.has(text)) return\n      didCheckText.add(text)\n\n      const fileContainer = rangeElement.closest('.js-tagsearch-file')\n      if (!fileContainer) return\n\n      const path = fileContainer.getAttribute('data-tagsearch-path') || ''\n      let lang = fileContainer.getAttribute('data-tagsearch-lang') || ''\n\n      // Handle Ruby embedded in ERB templates\n      if (lang === 'HTML+ERB') {\n        if (rangeElement.closest('.pl-sre')) {\n          lang = 'Ruby'\n        } else {\n          return\n        }\n      }\n\n      if (file.classList.contains('js-code-block-container')) {\n        lang = getCodeBlockLanguage(rangeElement) || ''\n        // Ignore any requests where the range element is not in a code block\n        // with a supported language\n        if (!lang) return\n      }\n\n      const pos = getRowAndColumn(range)\n      const wrapper = document.createElement('span')\n      range.surroundContents(wrapper)\n      wrapper.classList.add('pl-token')\n      wrapper.addEventListener('click', async function (clickEvent: MouseEvent) {\n        // Ignore clicks with modifier keys\n        // TODO: Refactor to use data-hotkey\n        /* eslint eslint-comments/no-use: off */\n        if (clickEvent.altKey || clickEvent.ctrlKey || clickEvent.metaKey || clickEvent.shiftKey) return\n\n        if (wrapper === activeToken) {\n          hidePopover()\n        } else {\n          let html = undefined\n          html = await fetchPopoverContents(popover, text, lang, pos, path)\n          if (!html) return\n\n          addPopoverElement(wrapper, html)\n          popoverHTML.set(wrapper, html)\n\n          setActivePopover(wrapper)\n          populatePopover(wrapper)\n          showPopover()\n        }\n\n        clickEvent.preventDefault()\n      })\n    }\n\n    // Ensure popover list is reset to the top.\n    function resetScrollTop() {\n      popoverContent.scrollTop = 0\n    }\n\n    function addPopoverElement(wrapper: Element, html: string) {\n      const temp = document.createElement('span')\n      temp.innerHTML = html\n      const details = temp.firstElementChild\n      if (!details) return\n\n      const dataHydroClick = details.getAttribute('data-hydro-click')\n      const dataHydroClickHMAC = details.getAttribute('data-hydro-click-hmac')\n      if (dataHydroClickHMAC && dataHydroClick) {\n        wrapper.setAttribute('data-hydro-click', dataHydroClick)\n        wrapper.setAttribute('data-hydro-click-hmac', dataHydroClickHMAC)\n      }\n    }\n\n    function setActivePopover(token: HTMLElement) {\n      if (activeToken) activeToken.classList.remove('active')\n      activeToken = token\n      activeToken.classList.add('active')\n    }\n\n    function populatePopover(token: HTMLElement) {\n      popoverContent.innerHTML = popoverHTML.get(token) || ''\n\n      positionPopover(token)\n    }\n\n    function positionPopover(token: HTMLElement) {\n      const cRect = repoContainer.getClientRects()[0]!\n      const rects = token.getClientRects()\n      // If no rects are found return early.\n      if (rects.length === 0) return\n      const rect = rects[0]!\n      popover.style.position = 'absolute'\n      popover.style.zIndex = '3'\n      if (repoContainer.classList.contains('position-relative')) {\n        popover.style.top = `${rect.bottom - cRect.top + 7}px`\n        popover.style.left = `${rect.left - cRect.left - 10}px`\n      } else {\n        popover.style.top = `${window.scrollY + rect.bottom}px`\n        popover.style.left = `${window.scrollX + rect.left}px`\n      }\n    }\n\n    function showPopover() {\n      if (!popover.hidden) {\n        // When existing popover is active and user clicks on different symbol, we need to still reset the navigation tabs and scrollTop for the popover's new contents.\n        resetScrollTop()\n        return\n      }\n      popover.hidden = false\n\n      // Setting a scrollTop value only succeeds if the HTML element is visible.\n      resetScrollTop()\n\n      document.addEventListener('click', onDocumentClick)\n      document.addEventListener('keyup', onKeyup)\n      /* eslint-disable-next-line github/prefer-observers */\n      window.addEventListener('resize', onResize)\n    }\n\n    function hidePopover() {\n      if (popover.hidden) return\n      popover.hidden = true\n\n      if (activeToken) activeToken.classList.remove('active')\n      activeToken = undefined\n\n      document.removeEventListener('click', onDocumentClick)\n      document.removeEventListener('keyup', onKeyup)\n      window.removeEventListener('resize', onResize)\n    }\n\n    function onResize() {\n      if (!(activeToken instanceof HTMLElement)) return\n      positionPopover(activeToken)\n    }\n\n    function onDocumentClick(event: MouseEvent) {\n      const {target} = event\n      if (!(target instanceof Node)) return\n\n      if (!popover.contains(target) && !activeToken!.contains(target)) {\n        hidePopover()\n      }\n    }\n\n    function onKeyup(event: KeyboardEvent) {\n      // TODO: Refactor to use data-hotkey\n      /* eslint eslint-comments/no-use: off */\n      /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n      switch (event.key) {\n        case 'Escape':\n          hidePopover()\n          break\n      }\n      /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n    }\n\n    file.addEventListener('mousemove', onMouseMove)\n\n    return {\n      unsubscribe() {\n        file.removeEventListener('mousemove', onMouseMove)\n      },\n    }\n  },\n})\n\nasync function fetchPopoverContents(\n  popover: HTMLElement,\n  text: string,\n  lang: string,\n  pos: [number, number],\n  path: string,\n): Promise<string> {\n  const urlStr = popover.getAttribute('data-tagsearch-url')\n  if (!urlStr) return ''\n  const ref = popover.getAttribute('data-tagsearch-ref')\n  if (!ref) return ''\n  let codeNavContext = popover.getAttribute('data-tagsearch-code-nav-context')\n  if (!codeNavContext) {\n    codeNavContext = 'UNKNOWN_VIEW'\n  }\n\n  const url = new URL(urlStr, window.location.origin)\n  const params = new URLSearchParams()\n  params.set('q', text)\n  params.set('blob_path', path)\n  params.set('ref', ref)\n  params.set('language', lang)\n  params.set('row', pos[0].toString())\n  params.set('col', pos[1].toString())\n  params.set('code_nav_context', codeNavContext)\n  url.search = params.toString()\n\n  try {\n    const response = await fetch(url.toString(), {\n      headers: {\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n    })\n    if (!response.ok) {\n      return ''\n    }\n    const html = await response.text()\n\n    // Ignore responses with no definitions\n    if (/js-tagsearch-no-definitions/.test(html)) return ''\n\n    return html\n  } catch {\n    return ''\n  }\n}\n\ninterface CaretPosition {\n  offsetNode: Node\n  offset: number\n}\ndeclare global {\n  interface Document {\n    caretPositionFromPoint(x: number, y: number): CaretPosition | null\n  }\n}\n\n// Returns matching text range given screen offsets.\n//\n// Examples\n//\n//   // Find nearest word under mouse cursor\n//   matchFromPoint(/\\w+/g, event.clientX, event.clientY)\n//\n// Returns Range or null if nothing matches position.\nfunction matchFromPoint(regexp: RegExp, x: number, y: number): Range | undefined | null {\n  let textNode: Node | undefined\n  let offset: number | undefined\n\n  if (document.caretPositionFromPoint) {\n    const caret = document.caretPositionFromPoint(x, y)\n    if (caret) {\n      textNode = caret.offsetNode\n      offset = caret.offset\n    }\n  } else if (document.caretRangeFromPoint) {\n    const range = document.caretRangeFromPoint(x, y)\n    if (range) {\n      textNode = range.startContainer\n      offset = range.startOffset\n    }\n  }\n\n  if (!textNode || typeof offset !== 'number' || textNode.nodeType !== Node.TEXT_NODE) return\n\n  const text = textNode.textContent\n  const isEmpty = text?.replaceAll('\\n', '').trim() === ''\n  if (!text || isEmpty || textNode.nodeType !== Node.TEXT_NODE) {\n    return null\n  }\n  const match = findNearestMatch(text, regexp, offset)\n  if (!match) return null\n\n  const matchedRange = document.createRange()\n  matchedRange.setStart(textNode, match[1])\n  matchedRange.setEnd(textNode, match[2])\n\n  return matchedRange\n}\n\n// Find nearest match in string given a starting offset.\n//\n// Similar to String#scan, but only returns one result around the given offset.\n//\n// Examples\n//\n//   findNearestMatch(\"The quick brown fox jumps over the lazy dog\", /\\w+/g, 1)\n//   // [\"The\", 0, 3]\n//\n//   findNearestMatch(\"The quick brown fox jumps over the lazy dog\", /\\w+/g, 18)\n//   [\"fox\", 16, 19]\n//\n// Return matching string, start and end offsets. Otherwise returns null for no match.\nexport function findNearestMatch(str: string, regexp: RegExp, offset: number): [string, number, number] | null {\n  let m\n  let lastIndex = null\n  while ((m = regexp.exec(str))) {\n    // Prevent infinite loop from zero-length matches\n    if (regexp.lastIndex === lastIndex) {\n      reportError(new Error('regexp did not advance in findNearestMatch()'))\n      return null\n    }\n    lastIndex = regexp.lastIndex\n    const len = m.index + m[0].length\n    if (m.index <= offset && offset <= len) {\n      return [m[0], m.index, len]\n    }\n  }\n  return null\n}\n\n// Get the language name of the embedded code block that the given element is\n// located in. This will be used for files such as Markdown that can contain\n// nested code blocks in multiple languages.\n//\n// Return language name or null\nfunction getCodeBlockLanguage(element: Element): string | null {\n  // FIXME Use js- class or data attributes for the language lookup/mappings\n  const codeBlockElement = element.closest('.highlight')\n  if (codeBlockElement) {\n    for (const className of codeBlockElement.classList) {\n      switch (className) {\n        case 'highlight-source-go':\n          return 'Go'\n        case 'highlight-source-js':\n          return 'JavaScript'\n        case 'highlight-source-python':\n          return 'Python'\n        case 'highlight-source-ruby':\n          return 'Ruby'\n        case 'highlight-source-ts':\n          return 'TypeScript'\n      }\n    }\n  }\n\n  return null\n}\n\n// Returns a zero-indexed position of the range in utf16 code units.\nexport function getRowAndColumn(range: Range): [number, number] {\n  let node = range.startContainer\n  let offset = range.startOffset\n  let passParent = false\n  for (;;) {\n    let prev = node.previousSibling\n    while (!passParent && prev) {\n      // Diff views include additional DOM elements like comments and buttons that\n      // don't appear in the DOM for regular blob views. HTML Comment and Button nodes\n      // should not be included when calculating the offset (or column position). We only\n      // want to count text that appears in the repository, so that the resulting column position\n      // will align with the column position indexed by the code-navigation service for the symbol\n      // under the user's cursor.\n      if (!['#comment', 'BUTTON'].includes(prev.nodeName)) {\n        offset += (prev.textContent || '').length\n      }\n      prev = prev.previousSibling\n    }\n    const parent = node.parentElement\n    if (parent) {\n      if (parent.classList.contains('js-code-nav-pass')) {\n        // Compared with the standard blob view, the DOM structure in diff views is slightly different.\n        // To make sure we don't over count the offset for the clicked symbol, some DOM elements'\n        // text content should not be considered when calculating the symbol's column offset.\n        // This conditional signals to not count any additional offsets until the parent DOM\n        // element containing the symbol's line number is found.\n        passParent = true\n      } else if (parent.classList.contains('js-file-line')) {\n        const lineNumber = parent.previousElementSibling!\n        if (!lineNumber.classList.contains('js-code-nav-line-number')) {\n          throw new Error('invariant')\n        }\n        const row = parseInt(lineNumber.getAttribute('data-line-number') || '1', 10)\n        return [row - 1, offset]\n      }\n      node = parent\n    } else {\n      return [0, 0]\n    }\n  }\n}\n","// Commenting: AJAX form submission\n//\n// Markup\n//\n//     <form class=\"js-new-comment-form\">\n//       <div class=\"js-comment-form-error\" hidden>\n//       </div>\n//\n//       <textarea class=\"js-comment-field\"></textarea>\n//\n//       <button type=\"submit\">\n//         Comment\n//       </button>\n//     </form>\n//\n// Primer Validation example:\n// see: https://primer.style/css/components/forms#form-group-validation\n//\n//   <form class=\"js-new-comment-form\">\n//     <div class=\"form-group js-remove-error-state-on-click\">\n//       <textarea class=\"js-comment-field\" aria-describedby=\"body-input-validation\",\n//       </textarea>\n//\n//       <p class=\"note error js-comment-form-error\" id=\"body-input-validation\" hidden></p>\n//\n//       <button type=\"submit\">\n//         Comment\n//       </button>\n//     </div>\n//   </form>\n\n// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\nimport type {ErrorWithResponse} from '@github/remote-form'\nimport {changeValue} from '@github-ui/form-utils'\nimport {remoteForm} from '@github/remote-form'\nimport {replaceContent} from '../../updatable-content'\nimport {reportError} from '@github-ui/failbot'\n\n// Check if element is in viewport\nfunction isInViewport(el: HTMLElement) {\n  const rect = el.getBoundingClientRect()\n  return (\n    rect.top >= 0 &&\n    rect.left >= 0 &&\n    rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\n    rect.right <= (window.innerWidth || document.documentElement.clientWidth)\n  )\n}\n\n// Hide any comment errors on retry.\nfunction clearFormError(form: Element) {\n  const formError = form.querySelector('.js-comment-form-error')\n  if (formError instanceof HTMLElement) {\n    formError.hidden = true\n  }\n}\n\n// Remove error state when Primer Form Validation enabled field is clicked on\non('click', '.errored.js-remove-error-state-on-click', function ({currentTarget}) {\n  currentTarget.classList.remove('errored')\n})\n\n// Reset form after AJAX request is successful\nremoteForm('.js-new-comment-form', async function (form, wants) {\n  let response\n  clearFormError(form)\n  try {\n    response = await wants.json()\n  } catch (error) {\n    reportError(error)\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    handleFormError(form, error)\n  }\n\n  if (!response) {\n    return\n  }\n\n  form.reset()\n  for (const field of form.querySelectorAll<HTMLInputElement>('.js-resettable-field')) {\n    changeValue(field, field.getAttribute('data-reset-value') || '')\n  }\n  const writeTab = form.querySelector('.js-write-tab')\n  if (writeTab instanceof HTMLElement) {\n    const inViewPort = isInViewport(writeTab)\n    if (inViewPort) {\n      writeTab.click()\n    }\n  }\n  const ref = response.json.updateContent\n\n  for (const selector in ref) {\n    const html = ref[selector]\n    const el = document.querySelector(selector)\n    if (el instanceof HTMLElement) {\n      replaceContent(el, html)\n    } else {\n      // eslint-disable-next-line no-console\n      console.warn(`couldn't find ${selector} for immediate update`)\n    }\n  }\n\n  fire(form, 'comment:success')\n})\n\n// Show comment error if ajax request fails.\nfunction handleFormError(form: Element, error: ErrorWithResponse) {\n  // eslint-disable-next-line i18n-text/no-en\n  let message = 'There was a problem saving your comment.'\n  // eslint-disable-next-line i18n-text/no-en\n  let messageSuffix = 'Please try again.'\n  if (error.response) {\n    if (error.response.status === 422) {\n      const data = error.response.json\n      if (data.errors) {\n        if (Array.isArray(data.errors)) {\n          message += ` Your comment ${data.errors.join(', ')}.`\n        } else {\n          message = data.errors\n        }\n      }\n    } else if (error.response.status === 200) {\n      // eslint-disable-next-line i18n-text/no-en\n      messageSuffix = 'Please reload the page and try again.'\n    }\n  }\n\n  message += ` ${messageSuffix}`\n\n  const formError = form.querySelector('.js-comment-form-error')\n  if (formError instanceof HTMLElement) {\n    formError.textContent = message\n    formError.hidden = false\n\n    const formGroupValidationFormWrapper = formError.closest('div.form-group.js-remove-error-state-on-click')\n\n    if (formGroupValidationFormWrapper) {\n      formGroupValidationFormWrapper.classList.add('errored')\n    }\n  }\n}\n","// Commenting: Close button\n//\n// When comment fields also have a \"Close\" button, update the copy of the\n// button when text is present to indicate that the form will both post a\n// comment and close the discussion.\n//\n// Markup\n//\n//     <form>\n//       <textarea class=\"js-comment-field\"></textarea>\n//       <div>\n//         <button type=\"submit\">Comment</button>\n//         <button type=\"submit\" class=\"js-comment-and-button\"\n//           data-comment-text=\"Close with comment\">\n//           Close\n//         </button>\n//       </div>\n//     </form>\n\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nconst setButtonText = (button: HTMLButtonElement, hasValue: boolean) => {\n  const spanText = button.querySelector('.js-form-action-text')\n  const textTarget = spanText ? spanText : button\n  textTarget.textContent = hasValue\n    ? button.getAttribute('data-comment-text')!\n    : textTarget.getAttribute('data-default-action-text')!\n}\n\nconst createInputHandler = (button: HTMLButtonElement): ((event: Event) => void) => {\n  let previousHasValue: string\n\n  // Handle input.\n  return (event: Event) => {\n    const target = event.currentTarget\n    const newValue = (target as HTMLInputElement).value.trim()\n\n    if (newValue !== previousHasValue) {\n      previousHasValue = newValue\n      setButtonText(button, Boolean(newValue))\n    }\n  }\n}\n\nobserve('.js-comment-and-button', {\n  constructor: HTMLButtonElement,\n  initialize(button) {\n    const commentField = button.form!.querySelector<HTMLElement>('.js-comment-field')!\n    const handleInput = createInputHandler(button)\n\n    return {\n      add() {\n        commentField.addEventListener('input', handleInput)\n        commentField.addEventListener('change', handleInput)\n      },\n      remove() {\n        commentField.removeEventListener('input', handleInput)\n        commentField.removeEventListener('change', handleInput)\n      },\n    }\n  },\n})\n","// Commenting: Focus CSS hacks\n//\n// Bubbles js-comment-field focus state up to js-write-bucket.\n//\n// So we can have a focused ring around the drag and drop section.\n//\n// TODO: `focused` class should be `is-focused`\n\nimport {onFocus} from '../../onfocus'\n\n// Sync focused class.\nfunction toggleFocus(el: Element, focused: boolean) {\n  const container = el.closest('.js-write-bucket')\n  if (container) {\n    container.classList.toggle('focused', focused)\n  }\n}\n\n// Clean up focused class on blur.\nfunction blurred(event: Event) {\n  const el = event.currentTarget\n  if (el instanceof Element) {\n    toggleFocus(el, false)\n  }\n}\n\nonFocus('.js-comment-field', function (el) {\n  toggleFocus(el, true)\n  el.addEventListener('blur', blurred, {once: true})\n})\n","import PNGScanner from './png-scanner'\n\nconst METERS_PER_INCH = 0.0254\n\nexport type ImageDimensions = {\n  width: number\n  height: number\n  ppi: number\n}\n\n// Returns a Promise that resolves with an object indicating:\n//\n// - width: image width in pixels\n// - height: image height in pixels\n// - ppi: pixels-per-inch count (optional)\n//\n// Only PNG file uploads are supported at the moment. All other types will\n// resolve with an empty metadata object.\nexport default async function imageDimensions(file: File): Promise<ImageDimensions | null> {\n  if (file.type !== 'image/png') {\n    return null\n  }\n  const slice = file.slice(0, 10240, file.type)\n  const scanner = await PNGScanner.fromFile(slice)\n  const meta = {\n    width: 0,\n    height: 0,\n    ppi: 1,\n  }\n\n  scanner.scan(function (type) {\n    switch (type) {\n      case 'IHDR': {\n        /* eslint-disable-next-line @typescript-eslint/no-invalid-this */\n        meta.width = this.readLong()\n        /* eslint-disable-next-line @typescript-eslint/no-invalid-this */\n        meta.height = this.readLong()\n        return true\n      }\n      case 'pHYs': {\n        /* eslint-disable-next-line @typescript-eslint/no-invalid-this */\n        const ppuX = this.readLong()\n        /* eslint-disable-next-line @typescript-eslint/no-invalid-this */\n        const ppuY = this.readLong()\n        /* eslint-disable-next-line @typescript-eslint/no-invalid-this */\n        const unit = this.readChar()\n        let inchesRatio\n        if (unit === 1) {\n          inchesRatio = METERS_PER_INCH\n        }\n        if (inchesRatio) {\n          meta.ppi = Math.round(((ppuX + ppuY) / 2) * inchesRatio)\n        }\n        return false\n      }\n      case 'IDAT': {\n        return false\n      }\n    }\n\n    return true\n  })\n\n  return meta\n}\n","import type {CaretCoordinates} from '@koddsson/textarea-caret'\nimport getCaretCoordinates from '@koddsson/textarea-caret'\n\ntype CaretCache = Map<number, CaretPosition>\nconst inputCache = new WeakMap<HTMLElement, CaretCache>()\n\n/**\n * Bundles together the caret coordinates and the caret's\n * index within a given textarea\n */\nclass CaretPosition {\n  index: number\n  coords: CaretCoordinates\n  textArea: HTMLTextAreaElement\n\n  constructor(index: number, coords: CaretCoordinates, textArea: HTMLTextAreaElement) {\n    this.index = index\n    this.coords = coords\n    this.textArea = textArea\n  }\n\n  get top() {\n    return this.coords.top\n  }\n\n  get left() {\n    return this.coords.left\n  }\n\n  get height() {\n    return this.coords.height\n  }\n\n  currentChar(lookBack = 1) {\n    return this.textArea.value.substring(this.index - lookBack, this.index)\n  }\n  /**\n   * Compare the line of the y coordinates to the caret.\n   * Returns -1 if y is on a previous line\n   * Returns 1 if y is on a subsequent line\n   * Returns 0 if y is on the same line\n   */\n  checkLine(y: number): -1 | 0 | 1 {\n    if (y < this.coords.top) {\n      return -1\n    }\n\n    if (y > this.coords.top + this.coords.height) {\n      return 1\n    }\n\n    return 0\n  }\n\n  /**\n   * The absolute horizontal distance between the x position and the\n   * caret's x position.\n   */\n  xDistance(x: number): number {\n    return Math.abs(this.left - x)\n  }\n}\n\n/**\n * Get the cached x/y coordinates for the given caret index and textarea.\n */\nfunction fetchCaretCoords(textArea: HTMLTextAreaElement, caretIndex: number): CaretPosition {\n  let caretCache\n  if (inputCache.has(textArea)) {\n    caretCache = inputCache.get(textArea)!\n  } else {\n    caretCache = new Map()\n    inputCache.set(textArea, caretCache)\n  }\n\n  if (caretCache.has(caretIndex)) {\n    return caretCache.get(caretIndex)\n  } else {\n    // calling getCaretCoordinates(textArea, caretIndex, {debug: true})\n    // will append a div to the document showing you where `textarea-caret` thinks the caret is\n    const coords = new CaretPosition(caretIndex, getCaretCoordinates(textArea, caretIndex), textArea)\n    caretCache.set(caretIndex, coords)\n    return coords\n  }\n}\n\n/**\n * This function recursively searches for the caret index that corresponds to the given coordinates.\n * We keep track of the number of iterations purely for logging to the console during\n * this PR.\n */\nconst binaryCursorSearch = (\n  textArea: HTMLTextAreaElement,\n  lower: number,\n  upper: number,\n  mouseX: number,\n  mouseY: number,\n  iterations: number,\n): number => {\n  if (upper === lower) {\n    return upper\n  }\n\n  /**\n   * Out of our final candidates, eliminate any that aren't on the same line as the mouse position.\n   * Pick the one that's closest in the x direction.\n   *\n   * If _none_ of the candidates are on the same line, bail and arbitrarily return the upper bound\n   */\n  const bestPosition = (candidates: CaretPosition[]): number => {\n    const sameLineCandidates = candidates\n      .filter(c => c.checkLine(mouseY) === 0)\n      .sort((a, b) => (a.xDistance(mouseX) > b.xDistance(mouseX) ? 1 : -1))\n    if (sameLineCandidates.length === 0) {\n      return upper\n    } else {\n      return sameLineCandidates[0]!.index\n    }\n  }\n  // if we're down to two or three positions check them all\n  if (upper - lower === 1) {\n    const l = fetchCaretCoords(textArea, lower)\n    const u = fetchCaretCoords(textArea, upper)\n    return bestPosition([l, u])\n  }\n\n  if (upper - lower === 2) {\n    const l = fetchCaretCoords(textArea, lower)\n    const m = fetchCaretCoords(textArea, upper - 1)\n    const u = fetchCaretCoords(textArea, upper)\n\n    return bestPosition([l, m, u])\n  }\n\n  // The new midpoint is halfway between the upper and lower bounds\n  // If that ends up being the same as the upper or lower, it means we've descended\n  // all the way to the bottom of our search tree. We don't backtrack.\n  const mid = Math.floor((upper + lower) / 2)\n  if (mid === lower || mid === upper) {\n    return mid\n  }\n  const midCoords = fetchCaretCoords(textArea, mid)\n\n  // If the midpoint caret position is below the mouse coordinates, we need to search\n  // farther along in the textarea\n  if (mouseY > midCoords.top + midCoords.height) {\n    return binaryCursorSearch(textArea, mid + 1, upper, mouseX, mouseY, iterations + 1)\n  }\n\n  // If the midpoint caret position is above the mouse coordinates, we need to search\n  // behind the current midpoint in the textarea\n  if (mouseY < midCoords.top) {\n    return binaryCursorSearch(textArea, lower, mid - 1, mouseX, mouseY, iterations + 1)\n  }\n\n  // if we're within a few pixels, avoid further searching\n  const ETA = 3\n  if (midCoords.xDistance(mouseX) < ETA) {\n    return mid\n  }\n\n  // if mid is on the same line as the cursor, we need to check the x position\n  if (midCoords.left < mouseX) {\n    // if iterating further will cause us to change lines, stop here\n    if (fetchCaretCoords(textArea, mid + 1).checkLine(mouseY) !== 0) {\n      return mid\n    }\n    return binaryCursorSearch(textArea, mid + 1, upper, mouseX, mouseY, iterations + 1)\n  }\n\n  if (midCoords.left > mouseX) {\n    // if iterating further will cause us to change lines, stop here\n    if (fetchCaretCoords(textArea, mid - 1).checkLine(mouseY) !== 0) {\n      return mid\n    }\n\n    return binaryCursorSearch(textArea, lower, mid - 1, mouseX, mouseY, iterations + 1)\n  }\n\n  return mid\n}\n\n/**\n * The driver function for the binary search.\n */\nconst findCursorPosition = (textArea: HTMLTextAreaElement, x: number, y: number): number => {\n  const startIndex = 0\n  const endIndex = textArea.value.length\n  const iterations = 0\n  return binaryCursorSearch(textArea, startIndex, endIndex, x, y, iterations)\n}\n\n/**\n * Assigns the final cursor position after finding it\n */\nfunction setCursorPosition(textarea: HTMLTextAreaElement, x: number, y: number) {\n  const newPosition = findCursorPosition(textarea, x, y)\n\n  textarea.setSelectionRange(newPosition, newPosition)\n}\n\n/**\n * Sets the caret in a textarea based on a DragEvent within that textarea.\n * Unfortunately there's no html api to do that directly (x/y -> caret). This function uses an iterative\n * approach to find the caret position from the x/y coordinates of the drag event.\n *\n * Under the hood we use the [textarea-caret npm package](https://www.npmjs.com/package/textarea-caret)\n * to find the x/y coordinates of the caret based on the caret index, and feed those results into a binary search.\n *\n * We use a cache to speed up the search, which is reinitialized when the user drags over the textarea for the first time.\n */\nexport function updateCaret(textArea: HTMLTextAreaElement, dragEvent: DragEvent) {\n  const rect = textArea.getBoundingClientRect()\n  // We want to clear the cache when the user first drags an attachment into the textarea.\n  // It's better to have to recalculate too much than to have a stale cache with wrong results.\n  if (dragEvent.type === 'dragenter') {\n    inputCache.delete(textArea)\n  }\n\n  const x = dragEvent.clientX - rect.left\n  const y = dragEvent.clientY - rect.top + textArea.scrollTop\n  setCursorPosition(textArea, x, y)\n}\n","import {insertText, replaceSelection, replaceText} from '@github-ui/text'\nimport {subscribe} from '@github/paste-markdown'\nimport type {Attachment} from '@github/file-attachment-element'\nimport type {ImageDimensions} from '../../image-dimensions'\nimport {getCodeEditor} from '../../code-editor'\nimport imageDimensions from '../../image-dimensions'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {updateCaret} from './caret-placement'\nimport {emitToCodeMirror} from '@github-ui/code-mirror/emit-to-codemirror'\n\n// This is a map of all the attachments (and their placeholders) that have been succesfully uploaded\nconst uploadedItems: Map<string, string> = new Map()\n\n// In paste-markdown the subscribe function listens for all of paste event handlers and\n// returns an unsubscribe function to remove them from the element.\nobserve('.js-paste-markdown', {\n  initialize(el) {\n    let unsubscribe: () => void\n    const pasteUrlLinksAsPlainText = el.hasAttribute('data-paste-url-links-as-plain-text')\n    return {\n      add() {\n        unsubscribe = subscribe(el as HTMLElement, {\n          defaultPlainTextPaste: {urlLinks: pasteUrlLinksAsPlainText},\n        }).unsubscribe\n      },\n      remove() {\n        unsubscribe()\n      },\n    }\n  },\n})\n\nconst attachmentPlaceholders = new WeakMap<Attachment, string>()\n\n/**\n * Caches the attachment's placeholder text as it was inserted into the `<textarea>` element.\n * This is intended to make removing the placeholder later easier. The sole reason we're doing all\n * of this is because `insertText` sometimes adds a `\\n` before the inserted text, and sometimes doesn't.\n * Rather than adding more logic to figure out what happened, we memoize the result.\n *\n * This is exported so we can use it in testing\n */\nexport function cachePlaceholder(attachment: Attachment, placeholder: string) {\n  attachmentPlaceholders.set(attachment, placeholder)\n}\n\n/**\n *  Gets the cached placeholder for the attachment. Falls back to calculating the replacement text\n *  if there is no entry. The worst case outcome here is that we leave an extra newline character\n *  in the textarea.\n *\n *  This function is only exported for testing purposes\n */\nexport function getPlaceholder(attachment: Attachment): string {\n  return attachmentPlaceholders.get(attachment) || replacementText(attachment)\n}\n\n// Based off `isImage` from @github/file-attachment-element\n// Eventually, we should upstream this\nfunction isVideo(attachment: Attachment): boolean {\n  return ['video/mp4', 'video/quicktime'].includes(attachment.file.type)\n}\n\nfunction parameterizeName(name: string): string {\n  return name\n    .replace(/[[\\]\\\\\"<>&]/g, '.') // Convert unwanted chars to separator\n    .replace(/\\.{2,}/g, '.') // No more than 1 separator in a row\n    .replace(/^\\.|\\.$/gi, '') // Remove leading/trailing separator\n}\n\n// Returns an uploading status message while the file is uploading. The\n// placeholder will be replaced with a URL to the image once the upload\n// is complete.\nfunction placeholderText(attachment: Attachment): string {\n  // Video uploads do not include braces around the text\n  if (isVideo(attachment)) return `\\nUploading ${attachment.file.name}\\n`\n\n  const prefix = attachment.isImage() ? '!' : ''\n  return `${prefix}[Uploading ${attachment.file.name}]()`\n}\n\n// Strips non-word characters from a file name so it's safe to use in a\n// markdown image alt tag without needing to be escaped.\nfunction altText(name: string): string {\n  return parameterizeName(name)\n    .replace(/\\.[^.]+$/, '') // Strip file extension\n    .replace(/\\./g, ' ') // Bring back some white space\n}\n\nconst RETINA_PPI = 72 * 2\n\nfunction disableSubmit(event: CustomEvent & {currentTarget: Element}) {\n  const closestForm = (event.target as HTMLElement).closest('form')\n\n  if (closestForm) {\n    const submitButton = closestForm.querySelector<HTMLButtonElement>('.btn-primary')\n    if (submitButton) {\n      submitButton.disabled = true\n    }\n  }\n}\n\nfunction enableSubmit(event: CustomEvent & {currentTarget: Element}) {\n  const closestForm = (event.target as HTMLElement).closest('form')\n\n  if (closestForm) {\n    const submitButton = closestForm.querySelector<HTMLButtonElement>('.btn-primary')\n\n    if (submitButton) submitButton.disabled = false\n  }\n}\n\ntype CustomEventPayload = CustomEvent & {currentTarget: Element}\n\n/**\n * This function is only exported to make async testing easier\n */\nexport async function onUploadCompleted(event: CustomEventPayload) {\n  const {attachment} = event.detail\n  const target = event.currentTarget\n  let tagText\n  if (attachment.isImage()) {\n    tagText = await imageTag(attachment)\n  } else if (isVideo(attachment)) {\n    tagText = videoMarkdown(attachment)\n  } else {\n    tagText = mdLink(attachment)\n  }\n  // note at this point event.currentTarget is possibly null\n  // see https://developer.mozilla.org/en-US/docs/Web/API/Event/currentTarget\n  setValidityAndLinkText('', tagText, event, target)\n\n  // Checking if there are any pending replacements to be made\n  if (uploadedItems.size > 0) {\n    findAndReplacePlaceholders()\n  }\n}\n\nfunction mdLink(attachment: Attachment): string {\n  return `[${attachment.file.name}](${attachment.href})`\n}\n\nfunction videoMarkdown(attachment: Attachment): string {\n  return `\\n${attachment.href!}\\n`\n}\n\nasync function imageTag(attachment: Attachment): Promise<string> {\n  const dimensions = await imageSize(attachment.file)\n  const alt = altText(attachment.file.name)\n  const src = attachment.href\n  if (dimensions.ppi === RETINA_PPI) {\n    const width = Math.round(dimensions.width / 2)\n    // eslint-disable-next-line github/unescaped-html-literal\n    return `<img width=\"${width}\" alt=\"${alt}\" src=\"${src}\">`\n  }\n  return `![${alt}](${src})`\n}\n\nasync function imageSize(file: File): Promise<ImageDimensions> {\n  const empty = {width: 0, height: 0, ppi: 0}\n  try {\n    return (await imageDimensions(file)) ?? empty\n  } catch {\n    return empty\n  }\n}\n\n/**\n * When swapping out the placeholder for an image or video, we need\n * to remember to get the extra leading newline for video uploads\n */\nfunction replacementText(attachment: Attachment) {\n  const placeholder = placeholderText(attachment)\n  if (isVideo(attachment)) {\n    return `\\n${placeholder}\\n`\n  } else {\n    return `${placeholder}\\n`\n  }\n}\n\n/**\n * Make the textarea valid and remove the placeholder. The submit button will\n * get enabled outside this function.\n */\nfunction removeFailedUpload(event: CustomEventPayload) {\n  const field = event.currentTarget.querySelector<HTMLTextAreaElement>('.js-comment-field')\n  const textToRemove = getPlaceholder(event.detail.attachment)\n  if (field) {\n    // Regular editor\n    field.setCustomValidity('')\n    replaceText(field, textToRemove, '')\n  } else {\n    // CodeMirror (code editor)\n    const editor = getEditor(event.currentTarget)\n\n    if (!editor) {\n      emitToCodeMirror('upload:editor:change', event.currentTarget, {\n        state: 'failed',\n        placeholder: textToRemove,\n        replacementText: '',\n      })\n\n      return\n    }\n\n    const cursor = editor.getSearchCursor(textToRemove)\n    cursor.findNext()\n    cursor.replace('')\n  }\n}\n\n/**\n *  Updates text inserted in editor for dropped assets, be it a regular editor\n *  (textarea) or a code editor (CodeMirror) editing a Markdown file\n *\n *  If validity is 'uploading', inserts \"[Uploading asset-name](...)\" at cursor,\n *  otherwise replace that placeholder with href\n *\n *  target is only required if event.currentTarget is lost (e.g., after await)\n */\n\nfunction setValidityAndLinkText(\n  validity: 'uploading' | '',\n  tagText: string,\n  event: CustomEventPayload,\n  target?: EventTarget & Element,\n) {\n  const field = (target || event.currentTarget).querySelector<HTMLTextAreaElement>('.js-comment-field')!\n  const fileUploadLoadingText = (target || event.currentTarget).querySelector<HTMLSpanElement>(\n    '.js-file-upload-loading-text',\n  )!\n  const placeholder = placeholderText(event.detail.attachment)\n  const {batch} = event.detail\n\n  if (field) {\n    const selectedText = field.value.substring(field.selectionStart, field.selectionEnd)\n    // Regular text editor\n    if (validity === 'uploading') {\n      let insertedPlaceholder\n      if (selectedText.length) {\n        insertedPlaceholder = replaceSelection(field, selectedText, placeholder)\n      } else {\n        insertedPlaceholder = insertText(field, placeholder, {appendNewline: true})\n      }\n      // If things go wrong, the most reliable way we can remove the placeholder\n      // for an attachment is to cache it.  This is mostly so we don't have to\n      // try to figure out if `insertText` added a leading newline into the\n      // textarea\n      attachmentPlaceholders.set(event.detail.attachment, insertedPlaceholder)\n    } else {\n      if (!field.value.includes(placeholder)) {\n        // Adding a mapping from the attachement's placeholder test to the generated tag\n        // Only doing this if the placeholder isn't already in the textarea, because then\n        // it will be replaced with the tag in the normal flow\n        uploadedItems.set(placeholder, tagText)\n      }\n\n      replaceText(field, placeholder, tagText, document.activeElement === field)\n    }\n    batch.isFinished() ? enableSubmit(event) : disableSubmit(event)\n  } else {\n    // CodeMirror (code editor)\n    const editor = getEditor(target || event.currentTarget)\n\n    if (editor) {\n      if (validity === 'uploading') {\n        if (editor.getSelection().length) {\n          // replace selected text with placeholder\n          editor.replaceSelection(placeholder)\n        } else {\n          // insert placeholder at cursor\n          const cursor = editor.getCursor()\n          const toReplace = replacementText(event.detail.attachment)\n          editor.replaceRange(toReplace, cursor)\n        }\n      } else {\n        const cursor = editor.getSearchCursor(placeholder)\n        cursor.findNext()\n        cursor.replace(tagText)\n      }\n    } else {\n      emitToCodeMirror('upload:editor:change', target || event.currentTarget, {\n        state: validity === '' ? 'uploaded' : 'uploading',\n        placeholder,\n        replacementText: validity === '' ? tagText : replacementText(event.detail.attachment),\n      })\n    }\n\n    batch.isFinished() ? enableSubmit(event) : disableSubmit(event)\n  }\n  if (fileUploadLoadingText) {\n    const fileUploadMessage = fileUploadLoadingText.getAttribute('data-file-upload-message')\n    fileUploadLoadingText.textContent = `${fileUploadMessage} (${batch.uploaded() + 1}/${batch.size})`\n  }\n}\n\nfunction getEditor(target: Element) {\n  const codeEditorElement = target.querySelector<HTMLTextAreaElement>('.js-code-editor')\n\n  if (!codeEditorElement) return\n\n  const codeEditor = getCodeEditor(codeEditorElement)\n\n  if (!codeEditor) return\n\n  return codeEditor.editor\n}\n\non('upload:setup', '.js-upload-markdown-image', function (event) {\n  setValidityAndLinkText('uploading', '', event)\n})\n\non('upload:complete', '.js-upload-markdown-image', onUploadCompleted)\n\non('upload:error', '.js-upload-markdown-image', function (event) {\n  removeFailedUpload(event)\n  const {batch} = event.detail\n  batch.isFinished() ? enableSubmit(event) : disableSubmit(event)\n})\n\nfunction updateCursor(event: DragEvent) {\n  // The file-attachment-element bubbles up dragover and dragenter events after preventing their default\n  // behavior. We want to manually position the cursor in the textarea so that it reflects where the user\n  // will drop the file.\n  event.stopPropagation()\n\n  const attachmentElement = event.currentTarget as HTMLElement\n\n  if (!attachmentElement) return\n\n  const textArea = attachmentElement.querySelector<HTMLTextAreaElement>('.js-comment-field')\n  if (textArea) {\n    updateCaret(textArea, event)\n  } else {\n    const editor = getEditor(attachmentElement)\n\n    emitToCodeMirror('upload:editor:cursor', attachmentElement, {left: event.clientX, top: event.clientY})\n\n    if (editor) {\n      const c = editor.coordsChar({left: event.pageX, top: event.pageY})\n      editor.setCursor(c)\n      editor.focus()\n    }\n  }\n}\n\n/**\n * This function isn't used in production, it's only for keeping a fast feedback looop in dev/troubleshooting.\n * To use in dev mode, add\n * ```\n * on('click', 'textarea', debugUpdateCaret)\n * ```\n * to this file and uncomment the `console.log`\n */\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst debugUpdateCaret = (event: MouseEvent) => {\n  const textArea = event.currentTarget as HTMLTextAreaElement\n  const rect = textArea.getBoundingClientRect()\n  const x = event.clientX - rect.left\n  const y = event.clientY - rect.top + textArea.scrollTop\n  // eslint-disable-next-line no-console\n  console.log({\n    x,\n    y,\n    cursor: textArea.selectionStart,\n    t: textArea.value.substring(textArea.selectionStart - 10, textArea.selectionStart),\n  })\n  const d = new DragEvent('dragenter', {clientX: event.clientX, clientY: event.clientY})\n  updateCaret(textArea, d)\n}\n\non('dragenter', 'file-attachment', updateCursor)\n\non('dragover', 'file-attachment', updateCursor)\n\non('upload:invalid', '.js-upload-markdown-image', function (event) {\n  removeFailedUpload(event)\n  const {batch} = event.detail\n  batch.isFinished() ? enableSubmit(event) : disableSubmit(event)\n})\n\n// Checks all of the issue form textareas for placeholders that need to be replaced with tags\nfunction findAndReplacePlaceholders() {\n  const textAreas = document.querySelectorAll<HTMLTextAreaElement>('.issue-form-textarea')\n  for (const textArea of textAreas) {\n    for (const [placeholder, tagText] of uploadedItems) {\n      if (!textArea.value.includes(placeholder)) continue\n      replaceText(textArea, placeholder, tagText, document.activeElement === textArea)\n      uploadedItems.delete(placeholder)\n    }\n  }\n}\n","// Commenting: Write and Preview tabs\n//\n// Markup\n//\n//     <form class=\"js-new-comment-form\">\n//       <div class=\"js-previewable-comment-form write-selected\"\n//           data-preview-url=\"/preview\">\n//\n//         <ul>\n//           <li><a href=\"#\" class=\"js-write-tab selected\">Write</a></li>\n//           <li><a href=\"#\" class=\"js-preview-tab\">Preview</a></li>\n//         </ul>\n//\n//         <textarea class=\"js-comment-field\"></textarea>\n//\n//       </div>\n//     </form>\n//\n// TODO: Everything should be using js- prefixed classes\n// TODO: Remove all static copy\n\n// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\nimport TabContainerElement from '@github/tab-container-element'\nimport memoize from '@github/memoize'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {onKey} from '../../onfocus'\n\n// Finds the CSRF token value in a `js-data-preview-url-csrf` hidden input\n// element in the preview div. If we don't find a token for the preview\n// div, find the CSRF token value in the hidden `authenticity_token` form\n// input to be used in the parent form submission (i.e. the form that this is\n// previewing).\n//\n// Returns the CSRF token String.\nfunction token(container: Element): string {\n  const dataToken = container.querySelector('.js-data-preview-url-csrf')\n  // eslint-disable-next-line github/authenticity-token\n  const formTokenRef = container.closest<HTMLFormElement>('form')!.elements.namedItem('authenticity_token')\n  if (dataToken instanceof HTMLInputElement) {\n    return dataToken.value\n  } else if (formTokenRef instanceof HTMLInputElement) {\n    return formTokenRef.value\n  } else {\n    throw new Error('Comment preview authenticity token not found')\n  }\n}\n\n// Bidirectionally switches between \"Write\" and \"Preview\" tabs.\nfunction activateTab(tab: Element): HTMLElement {\n  const container = tab.closest<HTMLElement>('.js-previewable-comment-form')!\n  const isPreview = tab.classList.contains('js-preview-tab')\n  if (isPreview) {\n    const writeContent = container.querySelector<HTMLElement>('.js-write-bucket')!\n    const previewBody = container.querySelector<HTMLElement>('.js-preview-body')!\n    if (writeContent.clientHeight > 0) {\n      previewBody.style.minHeight = `${writeContent.clientHeight}px`\n    }\n  }\n  container.classList.toggle('preview-selected', isPreview)\n  container.classList.toggle('write-selected', !isPreview)\n  const currentSelectedTabs = container.querySelector<HTMLElement>(\n    '.tabnav-tab.selected, .tabnav-tab[aria-selected=\"true\"]',\n  )!\n  currentSelectedTabs.setAttribute('aria-selected', 'false')\n  currentSelectedTabs.classList.remove('selected')\n  tab.classList.add('selected')\n  tab.setAttribute('aria-selected', 'true')\n  const writeTab = container.querySelector<HTMLElement>('.js-write-tab')!\n  if (isPreview) {\n    writeTab.setAttribute('data-hotkey', 'Mod+Shift+P')\n  } else {\n    writeTab.removeAttribute('data-hotkey')\n  }\n  return container\n}\n\non('click', '.js-write-tab', function (event) {\n  const target = event.currentTarget\n  const commentForm = target.closest<HTMLElement>('.js-previewable-comment-form')!\n  // <tab-container> changes are handled in the `tab-container-change` event handler\n  if (commentForm instanceof TabContainerElement) {\n    setTimeout(() => {\n      commentForm.querySelector<HTMLElement>('.js-comment-field')!.focus()\n    })\n    return\n  }\n\n  const container = activateTab(target)\n  fire(commentForm, 'preview:toggle:off')\n  const pollForm = commentForm.querySelector('.js-discussion-poll-form-component')\n  if (pollForm) {\n    fire(pollForm, 'poll-preview:toggle:off')\n  }\n  setTimeout(() => {\n    container.querySelector<HTMLElement>('.js-comment-field')!.focus()\n  })\n  const toolbar = commentForm.querySelector('markdown-toolbar')\n  if (toolbar instanceof HTMLElement) {\n    toolbar.hidden = false\n  }\n})\n\non('click', '.js-preview-tab', function (event) {\n  const target = event.currentTarget\n  const commentForm = target.closest<HTMLElement>('.js-previewable-comment-form')!\n  // <tab-container> changes are handled in the `tab-container-change` event handler\n  if (commentForm instanceof TabContainerElement) return\n\n  const container = activateTab(target)\n  fire(commentForm, 'preview:toggle:on')\n\n  setTimeout(() => {\n    renderPreview(container)\n  })\n  const toolbar = commentForm.querySelector('markdown-toolbar')\n  if (toolbar instanceof HTMLElement) {\n    toolbar.hidden = true\n  }\n  event.stopPropagation()\n  event.preventDefault()\n})\n\non('tab-container-change', '.js-previewable-comment-form', function (event) {\n  const relatedTarget = event.detail.relatedTarget\n  const isPreviewPanel = relatedTarget && relatedTarget.classList.contains('js-preview-panel')\n  const container = event.currentTarget\n  const writeTab = container.querySelector<HTMLElement>('.js-write-tab')!\n\n  if (isPreviewPanel) {\n    const writeContent = container.querySelector<HTMLElement>('.js-write-bucket')!\n    const previewBody = container.querySelector<HTMLElement>('.js-preview-body')!\n    const skipSizing = previewBody.hasAttribute('data-skip-sizing')\n\n    if (!skipSizing && writeContent.clientHeight > 0) {\n      previewBody.style.minHeight = `${writeContent.clientHeight}px`\n    }\n\n    writeTab.setAttribute('data-hotkey', 'Mod+Shift+P')\n    renderPreview(container)\n    const toolbar = container.querySelector('markdown-toolbar')\n    if (toolbar instanceof HTMLElement) {\n      toolbar.hidden = true\n    }\n  } else {\n    writeTab.removeAttribute('data-hotkey')\n    const toolbar = container.querySelector('markdown-toolbar')\n    if (toolbar instanceof HTMLElement) {\n      toolbar.hidden = false\n    }\n\n    const pollForm = document.querySelector('.js-discussion-poll-form-component')\n    if (pollForm) {\n      fire(pollForm, 'poll-preview:toggle:off')\n    }\n  }\n\n  container.classList.toggle('preview-selected', isPreviewPanel)\n  container.classList.toggle('write-selected', !isPreviewPanel)\n})\n\n// Allow triggering preview rendering from outside code\n// TODO Replace event with exported module function.\non('preview:render', '.js-previewable-comment-form', function (event) {\n  const previewTab = (event.target as Element).querySelector<HTMLElement>('.js-preview-tab')!\n  const container = activateTab(previewTab)\n  setTimeout(() => {\n    renderPreview(container)\n    const toolbar = container.querySelector('markdown-toolbar')\n    if (toolbar instanceof HTMLElement) {\n      toolbar.hidden = true\n    }\n  })\n})\n\nfunction previewForm(container: Element): FormData {\n  const text = container.querySelector<HTMLTextAreaElement>('.js-comment-field')!.value\n  const path = container.querySelector<HTMLInputElement>('.js-path')?.value\n  const lineNumber = container.querySelector<HTMLInputElement>('.js-line-number')?.value\n  const startLineNumber = container.querySelector<HTMLInputElement>('.js-start-line-number')?.value\n  const side = container.querySelector<HTMLInputElement>('.js-side')?.value\n  const startSide = container.querySelector<HTMLInputElement>('.js-start-side')?.value\n  const startCommitOid = container.querySelector<HTMLInputElement>('.js-start-commit-oid')?.value\n  const endCommitOid = container.querySelector<HTMLInputElement>('.js-end-commit-oid')?.value\n  const baseCommitOid = container.querySelector<HTMLInputElement>('.js-base-commit-oid')?.value\n  const commentId = container.querySelector<HTMLInputElement>('.js-comment-id')?.value\n\n  const form = new FormData()\n  form.append('text', text)\n  // eslint-disable-next-line github/authenticity-token\n  form.append('authenticity_token', token(container))\n  if (path) form.append('path', path)\n  if (lineNumber) form.append('line_number', lineNumber)\n  if (startLineNumber) form.append('start_line_number', startLineNumber)\n  if (side) form.append('side', side)\n  if (startSide) form.append('start_side', startSide)\n  if (startCommitOid) form.append('start_commit_oid', startCommitOid)\n  if (endCommitOid) form.append('end_commit_oid', endCommitOid)\n  if (baseCommitOid) form.append('base_commit_oid', baseCommitOid)\n  if (commentId) form.append('comment_id', commentId)\n  return form\n}\n\nfunction fetchPreview(container: Element): Promise<string> {\n  const url = container.getAttribute('data-preview-url')!\n  const data = previewForm(container)\n  fire(container, 'preview:setup', {data})\n  return cachedFetch(url, data)\n}\n\nconst cachedFetch = memoize(uncachedFetch, {hash})\nlet previousController: AbortController | null = null\nasync function uncachedFetch(url: string, body: FormData): Promise<string> {\n  previousController?.abort()\n  const {signal} = (previousController = new AbortController())\n  const response = await fetch(url, {method: 'post', body, signal})\n  if (!response.ok) throw new Error('something went wrong')\n  return response.text()\n}\n\nfunction hash(url: string, body: FormData): string {\n  const params = [...body.entries()].toString()\n  return `${url}:${params}`\n}\n\nasync function renderPreview(container: Element) {\n  const commentBody = container.querySelector<HTMLElement>('.comment-body')!\n\n  // eslint-disable-next-line github/unescaped-html-literal\n  commentBody.innerHTML = '<p>Loading preview&hellip;</p>'\n  try {\n    const html = await fetchPreview(container)\n    // eslint-disable-next-line github/unescaped-html-literal\n    commentBody.innerHTML = html || '<p>Nothing to preview</p>'\n    // Alert listeners that content has been fetched and written to the dom\n    fire(container, 'preview:rendered')\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    if (error.name !== 'AbortError') {\n      // eslint-disable-next-line github/unescaped-html-literal\n      commentBody.innerHTML = '<p>Error rendering preview</p>'\n    }\n  }\n}\n\nobserve('.js-preview-tab', function (tab) {\n  tab.addEventListener('mouseenter', async () => {\n    const container = tab.closest<HTMLElement>('.js-previewable-comment-form')!\n    try {\n      await fetchPreview(container)\n    } catch (error) {\n      // Ignore fetch errors on silent prefetch\n    }\n  })\n})\n\nonKey('keydown', '.js-comment-field', function (event: KeyboardEvent) {\n  // TODO: Refactor to use data-hotkey\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n  const field = event.target as HTMLInputElement\n\n  // On Apple devices, the Meta (Cmd)+Shift plane is in lower case. So\n  // normalising the key toUpperCase is necessary\n  if ((event.ctrlKey || event.metaKey) && event.shiftKey && event.key.toUpperCase() === 'P') {\n    const container = field.closest<HTMLElement>('.js-previewable-comment-form')!\n    if (container.classList.contains('write-selected')) {\n      if (container instanceof TabContainerElement) {\n        container.querySelector<HTMLElement>('.js-preview-tab')!.click()\n      } else {\n        // eslint-disable-next-line github/no-blur\n        field.blur()\n        container.dispatchEvent(\n          new CustomEvent('preview:render', {\n            bubbles: true,\n            cancelable: false,\n          }),\n        )\n      }\n      event.preventDefault()\n      event.stopImmediatePropagation()\n    }\n  }\n  /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {onKey} from '../../onfocus'\n\n// This regex matches a comment containing only \"-1\", \"+1\", \":-\", \":-1\", \":+\", or \":+1\"\nconst plusOneMarker = /^(\\+1|-1|:\\+1?|:-1?)$/\n\n// Checks to see if a comment is a reaction like comment.\nconst isReactionLikeComment = (text: string): boolean => {\n  let matched = false\n  for (const line of text.split('\\n')) {\n    const l = line.trim()\n    if (!l || l.startsWith('>')) continue\n    // If a line has matched previously, but this one doesnt,\n    // it means the line has more than just a reaction - so return false\n    if (matched && plusOneMarker.test(l) === false) {\n      return false\n    }\n    if (!matched && plusOneMarker.test(l)) {\n      matched = true\n    }\n  }\n  return matched\n}\n\non('focusout', '#new_comment_field', function (event) {\n  const newCommentTextField = event.currentTarget\n\n  const suggestion = newCommentTextField.closest('.js-reaction-suggestion')\n  if (suggestion) {\n    clearReactionSuggestion(suggestion)\n  }\n})\n\non('focusin', '#new_comment_field', function (event) {\n  toggleReactionSuggestion(event)\n})\n\nonKey('keyup', '#new_comment_field', function (event) {\n  toggleReactionSuggestion(event)\n})\n\n// Toggle reaction suggestion.\nfunction toggleReactionSuggestion(event: Event) {\n  const eventTarget = event.target as HTMLTextAreaElement\n\n  const text = eventTarget.value\n  const reactionSuggestion = eventTarget.closest('.js-reaction-suggestion')\n\n  if (!reactionSuggestion) {\n    return\n  }\n\n  if (isReactionLikeComment(text)) {\n    reactionSuggestion.classList.remove('hide-reaction-suggestion')\n    reactionSuggestion.classList.add('reaction-suggestion')\n    const suggestionText = reactionSuggestion.getAttribute('data-reaction-markup')!\n    reactionSuggestion.setAttribute('data-reaction-suggestion-message', suggestionText)\n  } else {\n    clearReactionSuggestion(reactionSuggestion)\n  }\n}\n\n// Clear reaction suggestion.\nfunction clearReactionSuggestion(reactionSuggestion: Element) {\n  reactionSuggestion.classList.remove('reaction-suggestion')\n  reactionSuggestion.classList.add('hide-reaction-suggestion')\n  reactionSuggestion.removeAttribute('data-reaction-suggestion-message')\n}\n","import {isShortcutAllowed} from '@github-ui/hotkey/keyboard-shortcuts-helper'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\n// Support 'c' key to open commits too\non('navigation:keydown', '.js-commits-list-item', function (event) {\n  if (!isShortcutAllowed(event.detail.originalEvent)) return\n\n  if (!(event.target instanceof Element)) return\n  if (event.detail.hotkey === 'c') {\n    event.target.querySelector<HTMLElement>('.js-navigation-open')!.click()\n  }\n})\n","import {onInput} from '../onfocus'\n\nonInput('.js-company-name-input', function (event) {\n  const field = event.target as HTMLInputElement\n\n  const form = field.form!\n\n  const corpTOSLink = form.querySelector('.js-corp-tos-link')\n  const regTOSLink = form.querySelector('.js-tos-link')\n\n  if (regTOSLink) {\n    // TODO Replace with hidden attribute so aria-hidden is not required.\n    /* eslint-disable-next-line github/no-d-none */\n    regTOSLink.classList.add('d-none')\n    regTOSLink.setAttribute('aria-hidden', 'true')\n\n    if (corpTOSLink) {\n      // TODO Replace with hidden attribute so aria-hidden is not required.\n      /* eslint-disable-next-line github/no-d-none */\n      corpTOSLink.classList.remove('d-none')\n      corpTOSLink.setAttribute('aria-hidden', 'false')\n    }\n  }\n\n  const hints = form.querySelectorAll('.js-company-name-text')\n  if (hints.length === 0) {\n    return\n  }\n\n  for (const hint of hints) {\n    if (field.value) {\n      const hasWording = hint.hasAttribute('data-wording')\n\n      if (hasWording) {\n        const wording = hint.getAttribute('data-wording')!\n        hint.textContent = ` ${wording} ${field.value}`\n      } else {\n        hint.textContent = field.value\n      }\n    } else {\n      hint.textContent = ''\n    }\n  }\n})\n","import {changeValue} from '@github-ui/form-utils'\n// eslint-disable-next-line no-restricted-imports\nimport {fire} from 'delegated-events'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\n// Update the TOS statement with company name\n//   e.g. By clicking on \"Create an organization\" below, you are agreeing to the Terms of Service and the Privacy Policy on behalf of your company, GitHub, Inc.\nobserve('.js-company-owned:not(:checked)', {\n  constructor: HTMLInputElement,\n  add(el) {\n    const form = el.form!\n    const input = form.querySelector<HTMLInputElement>('.js-company-name-input')!\n    const hint = document.querySelector<HTMLElement>('.js-company-name-text')!\n    const corpTOSLink = document.querySelector<HTMLElement>('.js-corp-tos-link')!\n    const regTOSLink = document.querySelector<HTMLElement>('.js-tos-link')!\n\n    if (input) {\n      if (el.getAttribute('data-optional')) {\n        input.removeAttribute('required')\n      }\n      changeValue(input, '')\n    }\n\n    // TODO Replace with hidden attribute so aria-hidden is not required.\n    /* eslint-disable-next-line github/no-d-none */\n    regTOSLink.classList.remove('d-none')\n    regTOSLink.setAttribute('aria-hidden', 'false')\n    /* eslint-disable-next-line github/no-d-none */\n    corpTOSLink.classList.add('d-none')\n    corpTOSLink.setAttribute('aria-hidden', 'true')\n\n    if (hint) {\n      hint.textContent = ''\n    }\n  },\n})\n\nobserve('.js-company-owned:checked', {\n  constructor: HTMLInputElement,\n  add(el) {\n    const form = el.form!\n    const input = form.querySelector('.js-company-name-input')\n\n    if (input) {\n      input.setAttribute('required', '')\n      fire(input, 'focus')\n      fire(input, 'input')\n    }\n  },\n})\n\n// Make the CorpTOS the default on the \"Business Plus\" AKA Business plan\n// TODO Replace with delegated-events\nobserve('.js-company-owned-autoselect', {\n  constructor: HTMLInputElement,\n  add(field) {\n    const planChoice = field\n\n    function autoselect() {\n      if (planChoice.checked && planChoice.form) {\n        const corpTos = planChoice.form.querySelector<HTMLInputElement>('.js-company-owned')!\n        changeValue(corpTos, true)\n      }\n    }\n\n    planChoice.addEventListener('change', autoselect)\n    autoselect()\n  },\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\nimport type IncludeFragmentElement from '@github/include-fragment-element'\nimport RemoteInputElement from '@github/remote-input-element'\nimport {fromEvent} from '@github-ui/subscription'\nimport {microtask} from '@github-ui/eventloop-tasks'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {onKey} from '../onfocus'\n\n// Match deprecated .js-select-menu state classes.\nobserve('details.select-menu details-menu include-fragment', function (el) {\n  const details = el.closest('details')\n  if (!details) return\n  el.addEventListener('loadstart', function () {\n    details.classList.add('is-loading')\n    details.classList.remove('has-error')\n  })\n  el.addEventListener('error', function () {\n    details.classList.add('has-error')\n  })\n  el.addEventListener('loadend', function () {\n    details.classList.remove('is-loading')\n    const filter = details.querySelector('.js-filterable-field')\n    if (filter) fire(filter, 'filterable:change')\n  })\n})\n\n// Clear filter when menu closes.\nobserve('details details-menu .js-filterable-field', {\n  constructor: HTMLInputElement,\n  add(filter) {\n    const details = filter.closest<HTMLElement>('details')!\n    details.addEventListener('toggle', function () {\n      if (!details.hasAttribute('open')) {\n        filter.value = ''\n        fire(filter, 'filterable:change')\n      }\n    })\n  },\n})\n\n// Temporary fix for role=menu containing input\nobserve('details-menu[role=menu] [role=menu]', el => {\n  const menu = el.closest('details-menu[role]')\n  if (menu && menu !== el) menu.removeAttribute('role')\n})\n\n// Clear filter when menu closes.\nobserve('details details-menu remote-input input', {\n  constructor: HTMLInputElement,\n  add(filter) {\n    const details = filter.closest<HTMLElement>('details')!\n    details.addEventListener('toggle', function () {\n      if (!details.hasAttribute('open')) {\n        filter.value = ''\n      }\n    })\n  },\n})\n\n// On form reset fire change on input so details-menu can apply state changes.\nobserve('form details-menu', menu => {\n  const form = menu.closest<HTMLElement>('form')!\n  form.addEventListener('reset', () => {\n    setTimeout(() => resetMenus(form), 0)\n  })\n})\n\n// Re-fires the `change` event for checked radios in a details-menu form.\nfunction resetMenus(form: Element) {\n  const inputs = form.querySelectorAll('details-menu [role=menuitemradio] input[type=radio]:checked')\n  for (const input of inputs) {\n    fire(input, 'change')\n  }\n}\n\n/**\n * Auto trigger the first item on Enter when filterable field is focused.\n */\nonKey('keypress', 'details-menu .js-filterable-field, details-menu filter-input input', (event: KeyboardEvent) => {\n  // TODO: Refactor to use data-hotkey\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n  if (event.key === 'Enter') {\n    const input = event.currentTarget\n    const menu = (input as HTMLInputElement).closest<HTMLElement>('details-menu')!\n    const firstItem = menu.querySelector('[role^=\"menuitem\"]:not([hidden])')\n    if (firstItem instanceof HTMLElement && !firstItem.classList.contains('select-menu-clear-item')) firstItem.click()\n    event.preventDefault()\n  }\n  /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n})\n\n// Focus filterable field after selecting an item\non(\n  'details-menu-selected',\n  'details-menu',\n  event => {\n    const menu = event.currentTarget\n\n    const filterableField = (menu as HTMLElement).querySelector('.js-filterable-field')\n    if (filterableField instanceof HTMLInputElement && filterableField.value) filterableField.focus()\n  },\n  {capture: true},\n)\n\n// On selection, sync selectedItem.value to input[id=data-menu-input]\non(\n  'details-menu-selected',\n  '[data-menu-input]',\n  event => {\n    if (!(event.target instanceof Element)) return\n    const id = event.target.getAttribute('data-menu-input')!\n    const el = document.getElementById(id)\n    if (!(el instanceof HTMLInputElement || el instanceof HTMLTextAreaElement)) return\n    el.value = ((event as CustomEvent).detail.relatedTarget as HTMLButtonElement).value\n  },\n  {capture: true},\n)\n\n// Restore focus on the previously focused element after results have been updated\n// Otherwise return focus to input\nobserve('details-menu remote-input', {\n  constructor: RemoteInputElement,\n  initialize(el) {\n    const resultsContainer = document.getElementById(el.getAttribute('aria-owns') || '')\n    if (!resultsContainer) return\n\n    let activeElementId: string | null = null\n    el.addEventListener('load', () => {\n      if (document.activeElement && resultsContainer.contains(document.activeElement) && document.activeElement.id) {\n        activeElementId = document.activeElement.id\n      } else {\n        activeElementId = null\n      }\n    })\n\n    el.addEventListener('loadend', () => {\n      if (activeElementId) {\n        const focusEl =\n          resultsContainer.querySelector(`#${activeElementId}`) || resultsContainer.querySelector('[role^=\"menu\"]')\n        if (focusEl instanceof HTMLElement) {\n          focusEl.focus()\n        } else if (el.input) {\n          el.input.focus()\n        }\n      }\n    })\n  },\n})\n\non(\n  'details-menu-selected',\n  'details-menu[data-menu-max-options]',\n  event => {\n    const max = +event.currentTarget.getAttribute('data-menu-max-options')!\n    const checkedItems = event.currentTarget.querySelectorAll('[role=\"menuitemcheckbox\"][aria-checked=\"true\"]')\n    const atLimit = max === checkedItems.length\n    event.currentTarget.querySelector<HTMLElement>('[data-menu-max-options-warning]')!.hidden = !atLimit\n    for (const item of event.currentTarget.querySelectorAll<HTMLInputElement>('[role=\"menuitemcheckbox\"] input')) {\n      item.disabled = atLimit && !item.checked\n    }\n  },\n  {capture: true},\n)\n\n// Make js-select-menu & navigation behaviors work with detail select menus\nobserve('details > details-menu', {\n  subscribe(el) {\n    const details = el.closest<HTMLElement>('details')!\n    return fromEvent(details, 'toggle', fireMenuToggleEvent)\n  },\n})\n\n// Fire a menu:[de]activate[d] event depending on the state of the menu.\nasync function fireMenuToggleEvent({currentTarget}: Event) {\n  const details = currentTarget as HTMLElement\n  const isOpen = details.hasAttribute('open')\n\n  if (isOpen) {\n    const filterableField = details.querySelector('.js-filterable-field')\n    if (filterableField instanceof HTMLInputElement) filterableField.focus()\n  }\n\n  fire(details, isOpen ? 'menu:activate' : 'menu:deactivate')\n  await microtask()\n  fire(details, isOpen ? 'menu:activated' : 'menu:deactivated')\n}\n\nobserve('details > details-menu[preload]:not([src])', {\n  subscribe(el) {\n    return fromEvent(el.parentElement!, 'mouseover', function (event) {\n      const menu = event.currentTarget as HTMLElement\n      const loader = menu.querySelector<IncludeFragmentElement>('include-fragment[src]')\n      loader?.load()\n    })\n  },\n})\n","// Behaviors complementing dialogs\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nimport type {ModalDialogElement} from '@primer/view-components/app/components/primer/alpha/modal_dialog'\n\n// Eagerly load an <include-fragment> inside a <modal-dialog> when a user hovers on the button to click it\nobserve('button[data-show-dialog-id]', button => {\n  button?.addEventListener('mouseenter', () => {\n    const id = button.getAttribute('data-show-dialog-id')\n    const dialog = button.ownerDocument.getElementById(id!)\n    dialog?.querySelector('include-fragment[loading=lazy]')?.setAttribute('loading', 'eager')\n  })\n})\n\nobserve('summary[data-show-dialog-id]', button => {\n  button?.addEventListener('click', () => {\n    const id = button.getAttribute('data-show-dialog-id')\n    if (!id) return\n    const dialog = button.ownerDocument.getElementById(id) as ModalDialogElement\n    dialog?.show()\n  })\n})\n","// Disable\n//\n// Disables clicked buttons with text in `data-disable-with`.\n//\n// `<input type=submit>` or `<button type=submit>`\n//\n// `data-disable-with` - Message to set `<input>` value or `<button>` innerHTML to.\n//\n//     <input type=\"submit\" data-disable-with=\"Submitting...\">\n\nimport {afterRemote} from '@github/remote-form'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nconst originalText = new WeakMap()\n\n// Get button text.\nfunction getButtonText(el: Element) {\n  if (el instanceof HTMLInputElement) {\n    return el.value || 'Submit'\n  } else {\n    return el.innerHTML || ''\n  }\n}\n\nfunction getButtons(form: HTMLFormElement): Array<HTMLInputElement | HTMLButtonElement> {\n  return [\n    Array.from(form.querySelectorAll('input[type=submit][data-disable-with], button[data-disable-with]')),\n    Array.from(document.querySelectorAll(`button[data-disable-with][form=\"${form.id}\"]`)),\n  ].flat() as Array<HTMLInputElement | HTMLButtonElement>\n}\n\n// Sets a button text.\nfunction setButtonText(el: Element, text: string) {\n  if (el instanceof HTMLInputElement) {\n    el.value = text\n  } else {\n    el.innerHTML = text\n  }\n}\n\non(\n  'submit',\n  'form',\n  function (event) {\n    const form = event.currentTarget as HTMLFormElement\n    for (const button of getButtons(form)) {\n      originalText.set(button, getButtonText(button))\n      const disabledText = button.getAttribute('data-disable-with')\n      if (disabledText) {\n        setButtonText(button, disabledText)\n      }\n      button.disabled = true\n    }\n  },\n  {capture: true},\n)\n\n// Revert a form to it's previous state.\nfunction revert(form: HTMLFormElement) {\n  for (const button of getButtons(form)) {\n    const text = originalText.get(button)\n    if (text != null) {\n      setButtonText(button, text)\n      // Button doesn't have a `data-disable-invalid` property or form is valid\n      if (!button.hasAttribute('data-disable-invalid') || form.checkValidity()) {\n        // Enable the button\n        button.disabled = false\n      }\n      originalText.delete(button)\n    }\n  }\n}\n\n// Enable controls when AJAX request finishes\non('deprecatedAjaxComplete', 'form', function ({currentTarget, target}) {\n  if (currentTarget === target) {\n    revert(currentTarget as HTMLFormElement)\n  }\n})\n\nafterRemote(revert)\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('.js-feature-preview-indicator-container', container => {\n  fetchFeaturePreviewIndicator(container)\n})\n\ntype FeatureResponse = {\n  show_indicator: boolean\n}\n\n// Load the indicator status and update any indicators on the page.\nasync function fetchFeaturePreviewIndicator(container: Element) {\n  const url = container.getAttribute('data-feature-preview-indicator-src')!\n  const show = await fetchIndicator(url)\n  const indicators = container.querySelectorAll<HTMLElement>('.js-feature-preview-indicator')\n  for (const indicator of indicators) {\n    indicator.hidden = !show\n  }\n}\n\nasync function fetchIndicator(url: string): Promise<boolean> {\n  try {\n    const response = await fetch(url, {headers: {Accept: 'application/json'}})\n    if (!response.ok) return false\n    const json = (await response.json()) as FeatureResponse\n    return json.show_indicator\n  } catch {\n    return false\n  }\n}\n","import type {Attachment, default as FileAttachmentElement} from '@github/file-attachment-element'\nimport type {AttachmentUploadDelegate, UploadError, UploadPolicyData} from './attachment-upload'\n\nimport AttachmentUpload from './attachment-upload'\nimport type Batch from './batch'\n// eslint-disable-next-line no-restricted-imports\nimport {fire} from 'delegated-events'\n\nexport async function upload(batch: Batch, container: FileAttachmentElement) {\n  const delegate = createDelegate(batch, container)\n  for (const attachment of batch.attachments) {\n    const policy = await validate(batch, attachment, container)\n    if (!policy) return\n    try {\n      const uploader = new AttachmentUpload(attachment, policy)\n      await uploader.process(delegate)\n    } catch {\n      batch.setAttachmentAsFailed(attachment)\n      fire(container, 'upload:error', {batch, attachment})\n      resetState(container, 'is-failed')\n      return\n    }\n  }\n}\n\nasync function validate(batch: Batch, attachment: Attachment, container: Element): Promise<UploadPolicyData | null> {\n  const form = policyForm(attachment, container)\n  const preprocess: Array<Promise<unknown>> = []\n  fire(container, 'upload:setup', {batch, attachment, form, preprocess})\n\n  try {\n    await Promise.all(preprocess)\n    const response = await fetch(policyRequest(form, container))\n    if (response.ok) {\n      return await response.json()\n    }\n    batch.setAttachmentAsFailed(attachment)\n    fire(container, 'upload:invalid', {batch, attachment})\n    const body = await response.text()\n    const status = response.status\n    const {state, messaging} = policyErrorState({status, body}, attachment.file)\n    resetState(container, state, messaging)\n  } catch {\n    batch.setAttachmentAsFailed(attachment)\n    fire(container, 'upload:invalid', {batch, attachment})\n    resetState(container, 'is-failed')\n  }\n  return null\n}\n\nfunction policyForm(attachment: Attachment, container: Element): FormData {\n  const token = container.querySelector<HTMLInputElement>('.js-data-upload-policy-url-csrf')!.value\n  const repoId = container.getAttribute('data-upload-repository-id')\n  const subjectType = container.getAttribute('data-subject-type')\n  const subject = container.getAttribute('data-subject-param')\n  const container_type = container.getAttribute('data-upload-container-type')\n  const container_id = container.getAttribute('data-upload-container-id')\n  const file = attachment.file\n\n  const form = new FormData()\n  form.append('name', file.name)\n  form.append('size', String(file.size))\n  form.append('content_type', file.type)\n  // eslint-disable-next-line github/authenticity-token\n  form.append('authenticity_token', token)\n  if (subjectType) form.append('subject_type', subjectType)\n  if (subject) form.append('subject', subject)\n  if (repoId) {\n    form.append('repository_id', repoId)\n  }\n  if (attachment.directory) {\n    form.append('directory', attachment.directory)\n  }\n\n  if (container_type) {\n    form.append('upload_container_type', container_type)\n  }\n\n  if (container_type && container_id) {\n    form.append('upload_container_id', container_id)\n  }\n\n  return form\n}\n\nfunction policyRequest(form: FormData, container: Element): Request {\n  return new Request(container.getAttribute('data-upload-policy-url')!, {\n    method: 'POST',\n    body: form,\n    credentials: 'same-origin',\n    headers: {\n      Accept: 'application/json',\n      'X-Requested-With': 'XMLHttpRequest',\n    },\n  })\n}\n\nfunction createDelegate(batch: Batch, container: Element): AttachmentUploadDelegate {\n  return {\n    attachmentUploadDidStart(attachment, policy) {\n      attachment.saving(0)\n      resetState(container, 'is-uploading')\n      fire(container, 'upload:start', {batch, attachment, policy})\n    },\n    attachmentUploadDidProgress(attachment, percent) {\n      attachment.saving(percent)\n      fire(container, 'upload:progress', {batch, attachment})\n    },\n    attachmentUploadDidComplete(attachment, policy, result) {\n      attachment.saved(savedAttributes(result, policy))\n      fire(container, 'upload:complete', {batch, attachment})\n      if (batch.isFinished()) {\n        resetState(container, 'is-default')\n      }\n    },\n    attachmentUploadDidError(attachment, response) {\n      batch.setAttachmentAsFailed(attachment)\n      fire(container, 'upload:error', {batch, attachment})\n      const {state} = policyErrorState(response)\n      resetState(container, state)\n    },\n  }\n}\n\n// Extracts the uploaded attachment's attributes that reference the stored\n// file on the server. These can come from the upload response in the case of\n// our Enterprise Alambic file server or from the initial policy creation,\n// prior to file upload, in the case of Amazon S3 used by github.com.\nfunction savedAttributes(\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  result: any,\n  policy: UploadPolicyData,\n): {id: string | null; href: string | null; name: string | null} {\n  const id =\n    /* eslint-disable-next-line @typescript-eslint/ban-ts-comment */\n    // @ts-ignore\n    (result.id == null ? null : String(result.id)) || (policy.asset.id == null ? null : String(policy.asset.id))\n  const href =\n    (typeof result.href === 'string' ? result.href : null) ||\n    /* eslint-disable-next-line @typescript-eslint/ban-ts-comment */\n    // @ts-ignore\n    (typeof policy.asset.href === 'string' ? policy.asset.href : null)\n  return {id, href, name: policy.asset.name}\n}\n\ntype PolicyErrorMessaging = {\n  message: string\n  target: string\n}\n\ntype PolicyErrorState = {\n  state: string\n  messaging?: PolicyErrorMessaging\n}\n\n// Create a CSS class name that matches the errors coming from the policy\n// POST. The /upload/policies/* resource returns a 422 response with a JSON\n// body describing why the policy is invalid.\nfunction policyErrorState(response: UploadError, file?: File): PolicyErrorState {\n  // Amazon S3 error.\n  if (response.status === 400) {\n    return {state: 'is-bad-file'}\n  }\n\n  if (response.status !== 422) {\n    return {state: 'is-failed'}\n  }\n\n  const hash = JSON.parse(response.body)\n\n  // If we have the expected JSON response with errors key, try to find the right\n  // error message. If there's a server-side error or user got logged out, we\n  // won't have hash.errors, so skip this and return generic failure message.\n  if (!hash || !hash.errors) {\n    return {state: 'is-failed'}\n  }\n\n  for (const error of hash.errors) {\n    switch (error.field) {\n      case 'size': {\n        const size = file ? file.size : null\n        if (size != null && size === 0) {\n          return {state: 'is-empty'}\n        }\n        return {\n          state: 'is-too-big',\n          messaging: {\n            message: trimSizeErrorMessage(error.message),\n            target: '.js-upload-too-big',\n          },\n        }\n      }\n      case 'file_count':\n        return {state: 'is-too-many'}\n      case 'width':\n      case 'height':\n        return {state: 'is-bad-dimensions'}\n      case 'name':\n        if (error.code === 'already_exists') {\n          return {state: 'is-duplicate-filename'}\n        }\n        return {state: 'is-bad-file'}\n      case 'content_type':\n        return {state: 'is-bad-file'}\n      case 'uploader_id':\n        return {state: 'is-bad-permissions'}\n      case 'repository_id':\n        return {state: 'is-repository-required'}\n      case 'format':\n        return {state: 'is-bad-format'}\n    }\n  }\n  return {state: 'is-failed'}\n}\n\n/**\nDue to limitations on the server, size errors may be returned with the string\n'size ' prepended on the error message we want from the server. If the message\nstarts with `size` then chop it off with its leading space and return the error\nwe want from the server.\n\nExamples:\n\n'size Yowza that's a big file' => 'Yowza that's a big file'\n'Yowza that's a big file' => 'Yowza that's a big file'\n */\nconst trimSizeErrorMessage = (message: string) => {\n  return message.startsWith('size') ? message.substring(5) : message\n}\n\nconst possibleStates = [\n  'is-default',\n  'is-uploading',\n  'is-bad-file',\n  'is-duplicate-filename',\n  'is-too-big',\n  'is-too-many',\n  'is-hidden-file',\n  'is-failed',\n  'is-bad-dimensions',\n  'is-empty',\n  'is-bad-permissions',\n  'is-repository-required',\n  'is-bad-format',\n]\n\nexport function resetState(container: Element, state: string, messaging?: PolicyErrorMessaging) {\n  if (messaging) {\n    const {message, target} = messaging\n    const el = container.querySelector(target)\n    if (el) el.innerHTML = message\n  }\n  container.classList.remove(...possibleStates)\n  container.classList.add(state)\n}\n","// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\nimport {dialog} from '@github-ui/details-dialog'\nimport {fetchSafeDocumentFragment} from '@github-ui/fetch-utils'\nimport {remoteForm} from '@github/remote-form'\nimport {sendStats} from '@github-ui/stats'\n\n/*\n  Opens the feature preview dialog to a given feature specified by it's slug\n\n  <button data-feature-preview-trigger-url=\"<%= feature_previews_path(user_id: login, selected_slug: \"my_feature\") %>\">\n    Opt in to the feature preview for My Feature\n  </button>\n\n  You can react to a feature being enrolled/unenrolled by the user with these events:\n\n  - `feature-preview-enroll:my_feature`\n  - `feature-preview-unenroll:my_feature`\n\n  e.g.\n\n  document.addEventListener('feature-preview-enroll:my_feature', () => {\n    optInButton.hidden = true\n    optOutButton.hidden = false\n  })\n\n  document.addEventListener('feature-preview-unenroll:my_feature', () => {\n    optInButton.hidden = false\n    optOutButton.hidden = true\n  })\n*/\n\non('click', '[data-feature-preview-trigger-url]', async event => {\n  const trigger = event.currentTarget\n  const url = trigger.getAttribute('data-feature-preview-trigger-url')!\n\n  const newDialog = await dialog({\n    content: fetchSafeDocumentFragment(document, url),\n    dialogClass: 'feature-preview-dialog',\n  })\n\n  const closeDetails = trigger.getAttribute('data-feature-preview-close-details')!\n  const closeHmac = trigger.getAttribute('data-feature-preview-close-hmac')!\n\n  newDialog.addEventListener('dialog:remove', () => {\n    sendStats({hydroEventPayload: closeDetails, hydroEventHmac: closeHmac}, true)\n  })\n\n  const indicators = document.querySelectorAll<HTMLElement>('.js-feature-preview-indicator')\n  for (const indicator of indicators) {\n    indicator.hidden = true\n  }\n})\n\nremoteForm('.js-feature-preview-unenroll', async (form, wants) => {\n  await wants.text()\n  const feature = form.querySelector<HTMLInputElement>('.js-feature-preview-slug')!.value\n  fire(form, `feature-preview-unenroll:${feature}`)\n})\n\nremoteForm('.js-feature-preview-enroll', async (form, wants) => {\n  await wants.text()\n  const feature = form.querySelector<HTMLInputElement>('.js-feature-preview-slug')!.value\n  fire(form, `feature-preview-enroll:${feature}`)\n})\n","import {resetState, upload} from '../upload/batch-upload'\nimport Batch from '../upload/batch'\nimport type FileAttachmentElement from '@github/file-attachment-element'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\n// Synchronize element state with primer styles. This should be replaced with CSS.\nobserve('file-attachment[hover]', {\n  add(el) {\n    el.classList.add('dragover')\n  },\n  remove(el) {\n    el.classList.remove('dragover')\n  },\n})\n\n// Cancel empty drops after filtering out hidden dot files.\non('file-attachment-accept', 'file-attachment', function (event) {\n  const {attachments} = event.detail\n  if (attachments.length === 0) {\n    resetState(event.currentTarget, 'is-hidden-file')\n    event.preventDefault()\n  }\n})\n\n// Upload batched files after passing validation.\non('file-attachment-accepted', 'file-attachment', function (event) {\n  // CodeEditor will hide this element if it wants to handle uploads\n  const dragAndDropLabel = event.currentTarget.querySelector<HTMLElement>('.drag-and-drop')\n  if (dragAndDropLabel && dragAndDropLabel.hidden) {\n    return\n  }\n\n  const {attachments} = event.detail\n  upload(new Batch(attachments), event.currentTarget as FileAttachmentElement)\n})\n\n// Transfer click on button to hidden file input.\non('click', 'button[data-file-attachment-for]', function (event) {\n  const button = event.currentTarget as HTMLButtonElement\n  const inputId = button.getAttribute('data-file-attachment-for')\n  const input = document.querySelector<HTMLInputElement>(`input[type=file]#${inputId}`)!\n  input.click()\n})\n\nlet count = 0\n\nobserve('file-attachment', {\n  add(el) {\n    if (count++ === 0) {\n      document.addEventListener('drop', onDocumentDrop)\n      document.addEventListener('dragover', onDocumentDragover)\n    }\n    const form = el.closest('form')\n    if (form) {\n      form.addEventListener('reset', onFormReset)\n    }\n  },\n  remove(el) {\n    if (--count === 0) {\n      document.removeEventListener('drop', onDocumentDrop)\n      document.removeEventListener('dragover', onDocumentDragover)\n    }\n\n    const form = el.closest('form')\n    if (form) {\n      form.removeEventListener('reset', onFormReset)\n    }\n  },\n})\n\nfunction hasFile(transfer: DataTransfer): boolean {\n  return Array.from(transfer.types).indexOf('Files') >= 0\n}\n\n// Ignores accidental drops that miss the textarea.\nfunction onDocumentDrop(event: DragEvent) {\n  const transfer = event.dataTransfer\n  if (transfer && hasFile(transfer)) {\n    event.preventDefault()\n  }\n}\n\n// Prevent accidental drops until we're over a textarea.\nfunction onDocumentDragover(event: DragEvent) {\n  const transfer = event.dataTransfer\n  if (transfer && hasFile(transfer)) {\n    event.preventDefault()\n  }\n}\n\n// Parent form has been reset. Reset uploadable state back to default.\nfunction onFormReset({currentTarget}: Event) {\n  const container = (currentTarget as Element).querySelector<HTMLElement>('file-attachment')!\n  resetState(container, 'is-default')\n}\n","type Predicate = (el: Element, query: string) => boolean | null\ntype Options = {limit?: number | null}\n\nexport function filterList(list: Element, query: string, isVisible: Predicate, options: Options = {}): number {\n  const limit = options.limit ?? Infinity\n  let visible = 0\n  for (const item of list.children) {\n    const show = isVisible(item, query)\n    if (show == null) {\n      // ignore\n    } else if (show && visible < limit) {\n      visible++\n      toggle(item as HTMLElement, true)\n    } else {\n      toggle(item as HTMLElement, false)\n    }\n  }\n  return visible\n}\n\nfunction toggle(el: HTMLElement, show: boolean) {\n  el.style.display = show ? '' : 'none'\n  el.hidden = !show\n}\n","import FilterInputElement from '@github/filter-input-element'\nimport {announce} from '@github-ui/aria-live'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\non('filter-input-updated', 'filter-input', event => {\n  const input = (event.currentTarget as FilterInputElement).input\n  if (!(document.activeElement && document.activeElement === input)) return\n  const {count, total} = event.detail\n  // eslint-disable-next-line i18n-text/no-en\n  announce(`Found ${count} out of ${total} ${total === 1 ? 'item' : 'items'}`)\n})\n\non(\n  'toggle',\n  'details',\n  event => {\n    // Wait for the next click to ensure that focus has left input\n    setTimeout(() => resetFilter(event.target as Element), 0)\n  },\n  {capture: true},\n)\n\non(\n  'tab-container-changed',\n  'tab-container',\n  event => {\n    if (!(event.target instanceof HTMLElement)) return\n    const {relatedTarget: panel} = event.detail\n    const filterInput = event.target.querySelector('filter-input')\n    if (filterInput instanceof FilterInputElement) {\n      filterInput.setAttribute('aria-owns', panel.id)\n    }\n  },\n  {capture: true},\n)\n\nfunction resetFilter(target: Element) {\n  const filterInput = target.querySelector<FilterInputElement>('filter-input')\n  if (filterInput && !target.hasAttribute('open')) {\n    filterInput.reset()\n  }\n}\n","import type {TextScore} from './fuzzy-filter'\nimport {compare} from './fuzzy-filter'\nimport {filterSort} from './filter-sort'\n\nconst originalOrder = new WeakMap<Element, HTMLElement[]>()\n\ninterface FilterOptions {\n  limit?: number | null\n  sortKey: (item: HTMLElement) => TextScore | null | undefined\n}\n\n// Filters and sorts list element items against a text query. For use with lists that\n// are already in the DOM, not with lists of results that are changed dynamically\n// via ajax.\n//\n// Returns Number of visible items.\nexport function filterSortList(list: Element, string: string, options: FilterOptions): number {\n  const query = string.toLowerCase()\n  const limit = options.limit\n\n  let allItems = originalOrder.get(list)\n  const checkedInputBeforeFilter = list.querySelector('input[type=\"radio\"]:checked')\n  const children = Array.from(list.children)\n  if (!allItems) {\n    allItems = Array.from(list.children) as HTMLElement[]\n    originalOrder.set(list, allItems)\n  } else if (list.classList.contains('filter-sort-list-refresh')) {\n    // if we get this class, it means the items in the list might have been changed\n    // in this case, we check if there are new items to be added to the cache\n    // this is the case when creating a new label from the label picker (see app/assets/modules/github/issues/labels.ts)\n    list.classList.remove('filter-sort-list-refresh')\n    const currentItems = Array.from(list.children) as HTMLElement[]\n    for (const currentItem of currentItems) {\n      if (!allItems.includes(currentItem)) {\n        allItems.push(currentItem)\n      }\n    }\n  }\n  for (const item of children) {\n    list.removeChild(item)\n    if (item instanceof HTMLElement) item.style.display = ''\n  }\n\n  const found = query ? filterSort(allItems, options.sortKey, compare) : allItems\n  const limited = limit == null ? found : found.slice(0, limit)\n  const visible = limited.length\n  const results = document.createDocumentFragment()\n  for (const item of limited) {\n    results.appendChild(item)\n  }\n\n  // This ensures that checked input before and after filtering is the same one\n  // See https://github.com/github/github/issues/88129#issuecomment-434839397\n  let inputStateReset = false\n  if (checkedInputBeforeFilter instanceof HTMLInputElement) {\n    for (const checkedInput of results.querySelectorAll('input[type=\"radio\"]:checked')) {\n      if (checkedInput instanceof HTMLInputElement && checkedInput.value !== checkedInputBeforeFilter.value) {\n        checkedInput.checked = false\n        inputStateReset = true\n      }\n    }\n  }\n\n  list.appendChild(results)\n\n  // Dispatch a change event after render for details-menu or any other code reacting to the input state\n  if (checkedInputBeforeFilter && inputStateReset) {\n    checkedInputBeforeFilter.dispatchEvent(new Event('change', {bubbles: true}))\n  }\n\n  // hide all dividers if query.length > 0\n  const dividers = list.querySelectorAll('.js-divider')\n  for (const divider of dividers) {\n    /* eslint-disable-next-line github/no-d-none */\n    divider.classList.toggle('d-none', Boolean(query && query.trim().length > 0))\n  }\n\n  return visible\n}\n","import verifySsoSession from './sso'\n\ninterface FilterOptions {\n  limit?: number | null\n}\n\n// Only login, name & selected are attributes required on both server side and payload rendered elements.\n// IE if we construct a user element from a .js-filterable-suggested-user HTMLElement.\ninterface User {\n  id?: string\n  type?: string\n  login: string\n  name: string\n  selected: boolean\n  disabled?: boolean\n  element?: HTMLElement\n  description?: string\n  avatar?: string\n  class?: string\n  suggestion?: boolean\n}\n\ninterface Data {\n  suggestions: User[]\n  users: User[]\n}\n\ninterface TypeAheadData {\n  lastSearchResult: Data\n  lastSearchText?: string\n  cachedSuggestions: User[]\n\n  // Used to cache a user ID to a pre-existing rendered element (if they exist in multiple search results).\n  // This is needed to persist their selected state across multiple searches.\n  // Key is user.id (as a string) to the rendered element\n  userResultCache: Map<string, HTMLElement>\n}\n\n// Used to abort any previous type-ahead request if not needed\nlet abortController = new AbortController()\n\nconst typeAheadCache = new WeakMap<Element, TypeAheadData>()\nconst cache = new WeakMap<Element, Data>()\nconst currentQueryForList = new WeakMap<Element, string>()\n\nasync function getData(list: Element, queryText: string, typeAhead: boolean): Promise<Data> {\n  if (typeAhead && !typeAheadCache.has(list)) {\n    initializeTypeAheadCache(list)\n  }\n\n  const data = await fetchQueryIfNeeded(list, queryText, typeAhead)\n  const hasPreRenderedData = list.hasAttribute('data-filterable-data-pre-rendered')\n\n  if (hasPreRenderedData) {\n    data.suggestions = getPreRenderedUsers(list, typeAhead)\n  }\n\n  return data\n}\n\nasync function fetchQueryIfNeeded(list: Element, queryText: string, typeAhead: boolean): Promise<Data> {\n  const url = new URL(list.getAttribute('data-filterable-src') || '', window.location.origin)\n  if (url.pathname === '/') throw new Error('could not get data-filterable-src')\n\n  if (typeAhead) {\n    const typeAheadData = typeAheadCache.get(list)!\n    const trimmedText = queryText.trim()\n    if (typeAheadData.lastSearchText === trimmedText) return typeAheadData.lastSearchResult\n    const isInitialLoad = typeAheadData.lastSearchText === undefined\n    typeAheadData.lastSearchText = trimmedText\n\n    const inputId = list.getAttribute('data-filterable-for') || ''\n    const inputElement = document.getElementById(inputId)\n\n    // Abort any old requests (if any)\n    abortController.abort()\n    if (trimmedText === '') {\n      typeAheadData.lastSearchResult = {suggestions: [], users: []}\n    } else {\n      // Abort controller needs to be re-created, there exists one per abort.\n      abortController = new AbortController()\n      const requestHeaders = {\n        headers: {Accept: 'application/json', 'X-Requested-With': 'XMLHttpRequest'},\n        signal: abortController.signal,\n      }\n\n      const params = url.searchParams || new URLSearchParams()\n      params.set('q', queryText)\n      params.set('typeAhead', 'true')\n      url.search = params.toString()\n\n      if (!isInitialLoad) {\n        inputElement?.classList.add('is-loading')\n      }\n\n      const response = await fetch(url.toString(), requestHeaders)\n      typeAheadData.lastSearchResult = await response.json()\n    }\n\n    inputElement?.classList.remove('is-loading')\n    return typeAheadData.lastSearchResult\n  } else {\n    const requestHeaders = {headers: {Accept: 'application/json', 'X-Requested-With': 'XMLHttpRequest'}}\n    const response = await fetch(url.toString(), requestHeaders)\n    return await response.json()\n  }\n}\n\n// This function will try to find any server side rendered users through the tag `.js-filterable-suggested-user`\n// If any are found, they will be added to the API returned data.\n// This users are distinct from the 'suggestions' currently returned through the reviewers API call.\nfunction getPreRenderedUsers(list: Element, typeAhead: boolean): User[] {\n  const data = []\n  // Add all server rendered users to the `suggestions` list (if any).\n  const suggestedUsers = list.querySelectorAll<HTMLElement>('.js-filterable-suggested-user')\n\n  // If the list has been refreshed, or first time loaded, this will be non-zero, and therefore we clear the array and re-add the new items\n  if (suggestedUsers.length > 0) {\n    // Read the server-side rendered elements that need to be added to suggestions.\n    // This is a work-around to allow the server-side rendered elements to work with the filtering.\n    for (const suggestedUser of list.querySelectorAll<HTMLElement>('.js-filterable-suggested-user')) {\n      suggestedUser.classList.remove('js-filterable-suggested-user')\n\n      // Deconstruct the element into a <User> object\n      data.push({\n        name: suggestedUser.querySelector('.js-description')!.textContent!,\n        login: suggestedUser.querySelector('.js-username')!.textContent!,\n        selected: suggestedUser.getAttribute('aria-checked') === 'true',\n        element: suggestedUser,\n        suggestion: true,\n      })\n    }\n  }\n\n  // If the list has been refreshed, or first time loaded, this will be non-zero, and therefore we clear the array and re-add the new items\n  if (typeAhead) {\n    const typeAheadData = typeAheadCache.get(list)!\n    if (suggestedUsers.length > 0) {\n      typeAheadData.cachedSuggestions = data\n      typeAheadData.userResultCache.clear()\n    }\n\n    return typeAheadData.cachedSuggestions\n  }\n\n  return data\n}\n\nfunction initializeTypeAheadCache(list: Element) {\n  typeAheadCache.set(list, {\n    lastSearchResult: {suggestions: [], users: []},\n    cachedSuggestions: [],\n    userResultCache: new Map<string, HTMLElement>(),\n  })\n}\n\n// This is like `substringFilterList`, but instead of filtering down direct\n// children of a DOM element, obtain most data from a JSON payload and search\n// within that instead, only generating actual DOM elements when they are\n// \"revealed\" by matching the search term. Similarly, remove elements from the\n// DOM when they don't match a search term and they're not selected.\n//\n// Also, because elements might already exist in the DOM because of their\n// pre-selected state, merge those elements with the data coming from JSON.\nexport async function substringMemoryFilterList(\n  list: Element,\n  queryText: string,\n  options: FilterOptions,\n): Promise<number> {\n  currentQueryForList.set(list, queryText)\n\n  await verifySsoSession()\n\n  const showSuggestionsHeaderOnLoad = list.hasAttribute('data-filterable-show-suggestion-header')\n  const typeAhead = list.hasAttribute('data-filterable-type-ahead')\n\n  let data = cache.get(list)\n\n  if (!data) {\n    try {\n      data = await getData(list, queryText, typeAhead)\n      if (!typeAhead) cache.set(list, data)\n    } catch (error) {\n      // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n      if (error.name === 'AbortError') {\n        // A stale type-ahead request was aborted\n        return -1\n      } else {\n        throw error\n      }\n    }\n  }\n\n  // This logic only exists when type-ahead is disabled\n  if (!typeAhead && currentQueryForList.get(list) !== queryText) {\n    return -1\n  }\n\n  const limit = options.limit\n  const template = list.querySelector<HTMLTemplateElement>('template')!\n\n  // an index of items already rendered into DOM due to being preselected\n  const existingElements: {[key: string]: HTMLInputElement} = {}\n  for (const existing of list.querySelectorAll<HTMLInputElement>('input[type=hidden]')) {\n    existingElements[`${existing.name}${existing.value}`] = existing\n  }\n\n  // remove all non-selected items after the template element\n  let cutoffPoint = template.nextElementSibling\n  while (cutoffPoint) {\n    const el = cutoffPoint\n    cutoffPoint = el.nextElementSibling\n    if (\n      el instanceof HTMLElement &&\n      (typeAhead || el.getAttribute('aria-checked') === 'true' || el.classList.contains('select-menu-divider'))\n    ) {\n      el.hidden = true\n    } else {\n      el.remove()\n    }\n  }\n\n  let visible = 0\n\n  const queryTextEmpty = queryText.trim() === ''\n  const items = document.createDocumentFragment()\n  const suggestionsDivider = list.querySelector<HTMLElement>('.js-divider-suggestions')\n  const restDivider = list.querySelector<HTMLElement>('.js-divider-rest')\n  const typeAheadData = typeAheadCache.get(list)\n\n  function addItem(user: User) {\n    const containsQueryText = `${user.login} ${user.name}`.toLowerCase().trim().includes(queryText)\n    const matching = !(limit != null && visible >= limit) && containsQueryText\n    const shouldGenerate = matching || user.selected || user.suggestion\n    if (shouldGenerate) {\n      const item = createReviewerItem(user, template, existingElements, typeAheadData)\n      item.hidden = !matching\n      if (matching) visible++\n      items.appendChild(item)\n    }\n  }\n\n  let anyVisibleNonSelectedSuggestions = false\n\n  // We show suggestions header if we\n  // 1) Actually have suggestions, or\n  // 2) If we still want to show suggestions title (declared by the attribute), but don't ever have any suggestions\n  // (ie data.suggestions is undefined), the criteria simply becomes whether or not there is any query text.\n  if (suggestionsDivider && (data.suggestions?.length > 0 || (showSuggestionsHeaderOnLoad && data.users.length > 0))) {\n    const suggestions = data.suggestions ?? []\n    const selectedSuggestions = suggestions.filter(u => u.selected)\n    const nonSelectedSuggestions = suggestions.filter(u => !u.selected)\n\n    for (const u of selectedSuggestions) {\n      addItem(u)\n    }\n\n    // Put the suggestions after the already assigned users\n    items.appendChild(suggestionsDivider)\n    const preSuggestionsVisibleCount = visible\n    for (const u of nonSelectedSuggestions) {\n      addItem(u)\n    }\n    anyVisibleNonSelectedSuggestions = visible > preSuggestionsVisibleCount\n\n    suggestionsDivider.hidden = !anyVisibleNonSelectedSuggestions || (typeAhead && !queryTextEmpty)\n\n    // Special case where we want to force show the suggestions header even without suggestions in the payload.\n    if (showSuggestionsHeaderOnLoad && data.users.length > 0) {\n      suggestionsDivider.hidden = !queryTextEmpty\n    }\n  }\n\n  if (restDivider) {\n    items.appendChild(restDivider)\n  }\n\n  const preUsersVisibleCount = visible\n  for (const u of data.users) {\n    addItem(u)\n  }\n\n  if (restDivider) {\n    restDivider.hidden = preUsersVisibleCount === visible || !anyVisibleNonSelectedSuggestions\n  }\n\n  list.append(items)\n  return visible\n}\n\nfunction createReviewerItem(\n  user: User,\n  template: HTMLTemplateElement,\n  existingElements: Record<string, HTMLElement>,\n  typeAheadData: TypeAheadData | undefined,\n): HTMLElement {\n  if (user.element != null) {\n    return user.element\n  }\n\n  if (typeAheadData?.userResultCache.has(user.id!)) {\n    return typeAheadData.userResultCache.get(user.id!)!\n  }\n\n  const li = template.content.cloneNode(true) as HTMLElement\n  const input = li.querySelector<HTMLInputElement>('input[type=checkbox], input[type=radio]')!\n\n  if (user.type) {\n    input.name = `reviewer_${user.type}_ids[]`\n  }\n  input.value = user.id!\n\n  const inputKey = `${input.name}${user.id}`\n  let selected = user.selected\n  if (existingElements[inputKey]) {\n    selected = true\n    existingElements[inputKey]!.remove()\n    delete existingElements[inputKey]\n  }\n\n  const item = li.querySelector<HTMLElement>('[role^=menuitem]')!\n  if (selected) {\n    item.setAttribute('aria-checked', 'true')\n    input.checked = true\n  }\n\n  if (user.disabled) {\n    item.setAttribute('aria-disabled', 'true')\n  }\n\n  const login = li.querySelector('.js-username')\n  if (login) login.textContent = user.login\n  const fullName = li.querySelector('.js-description')\n  if (fullName) fullName.textContent = user.name\n  const description = li.querySelector('.js-extended-description')\n  if (description) {\n    if (user.description) {\n      description.textContent = user.description\n    } else {\n      description.remove()\n    }\n  }\n  const avatar = li.querySelector<HTMLImageElement>('.js-avatar')!\n  avatar.className = `${avatar.className} ${user.class}`\n  avatar.src = user.avatar!\n\n  user.element = item\n\n  typeAheadData?.userResultCache.set(user.id!, item)\n\n  return user.element\n}\n","import verifySsoSession from './sso'\n\ninterface FilterOptions {\n  limit?: number | null\n}\n\ninterface Label {\n  id: string\n  name: string\n  htmlName: string\n  color: string\n  selected: boolean\n  element?: HTMLElement\n  description?: string\n}\n\ninterface Data {\n  labels: Label[]\n}\n\ninterface TypeAheadData {\n  lastSearchResult: Data\n  lastSearchText?: string\n  cachedSuggestions: Label[]\n\n  // Used to cache a user ID to a pre-existing rendered element (if they exist in multiple search results).\n  // This is needed to persist their selected state across multiple searches.\n  // Key is label.id (as a string) to the rendered element\n  labelResultCache: Map<string, HTMLElement>\n}\n\n// Used to abort any previous type-ahead request if not needed\nlet abortController = new AbortController()\n\nconst typeAheadCache = new WeakMap<Element, TypeAheadData>()\nconst cache = new WeakMap<Element, Data>()\nconst currentQueryForList = new WeakMap<Element, string>()\n\n// This is like `substringFilterList`, but instead of filtering down direct\n// children of a DOM element, obtain most data from a JSON payload and search\n// within that instead, only generating actual DOM elements when they are\n// \"revealed\" by matching the search term. Similarly, remove elements from the\n// DOM when they don't match a search term and they're not selected.\n//\n// Also, because elements might already exist in the DOM because of their\n// pre-selected state, merge those elements with the data coming from JSON.\nexport async function labelsTypeaheadFilterList(\n  list: Element,\n  queryText: string,\n  options: FilterOptions,\n): Promise<number> {\n  await verifySsoSession()\n\n  currentQueryForList.set(list, queryText)\n  let data = cache.get(list)\n\n  // If we don't have data, fetch it\n  if (!data) {\n    try {\n      data = await getData(list, queryText)\n    } catch (error) {\n      // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n      if (error.name === 'AbortError') {\n        // A stale type-ahead request was aborted\n        return -1\n      } else {\n        throw error\n      }\n    }\n  }\n\n  // create an index of items already rendered into DOM - already selected items\n  const existingElements: {[key: string]: HTMLInputElement} = {}\n  for (const existing of list.querySelectorAll<HTMLInputElement>('label[aria-checked=true] > div > input[hidden]')) {\n    existingElements[`${existing.name}${existing.value}`] = existing\n  }\n\n  const template = list.querySelector<HTMLTemplateElement>('template')!\n\n  // remove all non-selected items after the template element\n  let cutoffPoint = template.nextElementSibling\n  while (cutoffPoint) {\n    const el = cutoffPoint\n    cutoffPoint = el.nextElementSibling\n    if (\n      el instanceof HTMLElement &&\n      (el.getAttribute('aria-checked') === 'true' || el.classList.contains('select-menu-divider'))\n    ) {\n      el.hidden = true\n    } else {\n      el.remove()\n    }\n  }\n\n  // create new list of items\n  const items = document.createDocumentFragment()\n  const typeAheadData = typeAheadCache.get(list)\n  const limit = options.limit\n  let visible = 0\n\n  function addItem(label: Label) {\n    const containsQueryText = `${label.name}`.toLowerCase().trim().includes(queryText.toLocaleLowerCase())\n    const matching = !(limit != null && visible >= limit) && containsQueryText\n    const shouldGenerate = matching || label.selected\n    if (shouldGenerate) {\n      const item = createLabelItem(label, template, existingElements, typeAheadData)\n      item.hidden = !matching\n      if (matching) visible++\n      items.appendChild(item)\n    }\n  }\n\n  for (const l of data.labels) {\n    addItem(l)\n  }\n\n  // add new items to DOM\n  list.append(items)\n  return visible\n}\n\nfunction initializeTypeAheadCache(list: Element) {\n  typeAheadCache.set(list, {\n    lastSearchResult: {labels: []},\n    cachedSuggestions: [],\n    labelResultCache: new Map<string, HTMLElement>(),\n  })\n}\n\nasync function getData(list: Element, queryText: string): Promise<Data> {\n  if (!typeAheadCache.has(list)) {\n    initializeTypeAheadCache(list)\n  }\n\n  const hasPreRenderedData = list.hasAttribute('data-filterable-data-pre-rendered')\n  if (hasPreRenderedData) {\n    return getPreRenderedLabels(list)\n  }\n\n  return await fetchQueryIfNeeded(list, queryText)\n}\n\n// This function will try to find any server side rendered users through the tag `.js-filterable-label`\n// If any are found, they will be added to the API returned data.\nfunction getPreRenderedLabels(list: Element): Data {\n  const data = []\n  // Add all server rendered labels to our data\n  const labels = list.querySelectorAll<HTMLElement>('.js-filterable-label')\n  list.removeAttribute('data-filterable-data-pre-rendered')\n\n  // If the list has been refreshed, or first time loaded, this will be non-zero, and therefore we clear the array and re-add the new items\n  if (labels.length > 0) {\n    // Read the server-side rendered elements that need to be added to suggestions.\n    // This is a work-around to allow the server-side rendered elements to work with the filtering.\n    for (const renderedLabel of list.querySelectorAll<HTMLElement>('.js-filterable-label')) {\n      renderedLabel.classList.remove('js-filterable-label')\n\n      // Deconstruct the element into a <Label> object\n      data.push({\n        id: renderedLabel.querySelector('input[hidden]')!.getAttribute('value') || '',\n        name: renderedLabel.querySelector('input[hidden]')!.getAttribute('data-label-name') || '',\n        htmlName: renderedLabel.querySelector('.js-label-name-html')!.textContent!,\n        description: renderedLabel.querySelector('.js-label-description')?.textContent || '',\n        color: renderedLabel.querySelector('.js-label-color')!.getAttribute('label-color') || '',\n        selected: renderedLabel.getAttribute('aria-checked') === 'true',\n        element: renderedLabel,\n      })\n    }\n  }\n\n  // If the list has been refreshed, or first time loaded, this will be non-zero, and therefore we clear the array and re-add the new items\n  const typeAheadData = typeAheadCache.get(list)!\n  if (data.length > 0) {\n    typeAheadData.cachedSuggestions = data\n    typeAheadData.lastSearchText = ''\n    typeAheadData.lastSearchResult = {labels: data}\n  }\n\n  return typeAheadData.lastSearchResult\n}\n\nasync function fetchQueryIfNeeded(list: Element, queryText: string): Promise<Data> {\n  const url = new URL(list.getAttribute('data-filterable-src') || '', window.location.origin)\n  if (url.pathname === '/') throw new Error('could not get data-filterable-src')\n\n  const typeAheadData = typeAheadCache.get(list)!\n  const trimmedText = queryText.trim()\n  if (typeAheadData.lastSearchText === trimmedText) {\n    return typeAheadData.lastSearchResult\n  }\n\n  typeAheadData.lastSearchText = trimmedText\n\n  const inputId = list.getAttribute('data-filterable-for') || ''\n  const inputElement = document.getElementById(inputId)\n\n  // Abort any old requests (if any)\n  abortController.abort()\n  // Abort controller needs to be re-created, there exists one per abort.\n  abortController = new AbortController()\n  const requestHeaders = {\n    headers: {Accept: 'application/json', 'X-Requested-With': 'XMLHttpRequest'},\n    signal: abortController.signal,\n  }\n\n  const params = url.searchParams || new URLSearchParams()\n  params.set('q', queryText)\n  params.set('typeAhead', 'true')\n  url.search = params.toString()\n\n  inputElement?.classList.add('is-loading')\n\n  const response = await fetch(url.toString(), requestHeaders)\n  typeAheadData.lastSearchResult = await response.json()\n\n  inputElement?.classList.remove('is-loading')\n  return typeAheadData.lastSearchResult\n}\n\nfunction createLabelItem(\n  label: Label,\n  template: HTMLTemplateElement,\n  existingElements: Record<string, HTMLElement>,\n  typeAheadData: TypeAheadData | undefined,\n): HTMLElement {\n  if (label.element != null) {\n    return label.element\n  }\n\n  const resultCache = typeAheadData?.labelResultCache.get(label.id)\n  if (resultCache) {\n    return resultCache\n  }\n\n  const li = template.content.cloneNode(true) as HTMLElement\n  const input = li.querySelector<HTMLInputElement>('input[type=checkbox]')!\n\n  input.value = label.id!\n  input.setAttribute('data-label-name', label.name)\n\n  const inputKey = `${input.name}${label.id}`\n  let selected = label.selected\n  if (existingElements[inputKey]) {\n    selected = true\n    existingElements[inputKey]!.remove()\n    delete existingElements[inputKey]\n  }\n\n  const item = li.querySelector<HTMLElement>('[role^=menuitem]')!\n  if (selected) {\n    item.setAttribute('aria-checked', 'true')\n    input.checked = true\n  }\n\n  const id = li.querySelector('.js-label-id')\n  if (id) id.setAttribute('data-name', label.id)\n\n  const color = li.querySelector('.js-label-color')\n  if (color) {\n    const newStyle = color.getAttribute('style')?.replace('background-color:', `background-color:#${label.color};`)\n    color.setAttribute('style', newStyle!)\n  }\n\n  const htmlName = li.querySelector('.js-label-name-html')\n  if (htmlName) htmlName.innerHTML = label.htmlName!\n\n  const labelDescription = li.querySelector('.js-label-description')\n  if (labelDescription) {\n    if (label.description) {\n      labelDescription.textContent = label.description\n    } else {\n      labelDescription.remove()\n    }\n  }\n\n  label.element = item\n  typeAheadData?.labelResultCache.set(label.id, item)\n\n  return label.element\n}\n","// Filterable Behavior\n//\n// Automatically filters and sorts a list of items against a text field.\n//\n// Markup\n//\n// * js-filterable-field  - Set on field to enable filtering.\n// * data-filterable-for  - Set to ID of input field to bind too.\n// * data-filterable-type - Filtering type. Either \"prefix\", \"substring\", \"fuzzy\", or \"fuzzy-prio\". Defaults to \"prefix\"\n// The difference between \"fuzzy\" and \"fuzzy-prio\", is the latter supports an additional attribute `data-prio-filter-value`\n// to specify a custom priority value that will be weighted more heavily when determining the score.\n//\n// <input id=\"file-filter-field\" class=\"js-filterable-field\" autocomplete=\"off\">\n//\n// <ul data-filterable-for=\"file-filter-field\" data-filterable-type=\"fuzzy\">\n//   <li>Foo</li>\n//   <li>Bar</li>\n//   <li>Baz</li>\n// </ul>\n//\n//\n// Events\n//\n// filterable:change\n//\n// * **Bubbles** Yes\n// * **Cancelable** No\n// * **Target** List container Element\n// * **Context info**\n//   * relatedTarget - Input field Element\n//\n// $('ul').on('filterable:change', function() {\n//   console.log('order changed')\n// })\n//\n\nimport {addThrottledInputEventListener, removeThrottledInputEventListener} from '../throttled-input'\n// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\nimport {announce} from '@github-ui/aria-live'\nimport {filterList} from '../filter-list'\nimport {filterSortList} from '../filter-sort-list'\nimport {fuzzyScore} from '../fuzzy-filter'\nimport {microtask} from '@github-ui/eventloop-tasks'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {substringMemoryFilterList} from '../substring-memory-filter-list'\nimport {labelsTypeaheadFilterList} from '../labels-typeahead-filter-list'\n\nobserve('.js-filterable-field', {\n  constructor: HTMLInputElement,\n  initialize(field) {\n    if (!field.autocomplete) {\n      field.autocomplete = 'off'\n    }\n\n    // A null value will default to whatever is specified within `throttled-input.ts`\n    const throttleWaitInMs = field.hasAttribute('type-ahead') ? 200 : null\n    let value = field.value\n\n    async function onInputChange(input: HTMLInputElement | HTMLTextAreaElement) {\n      if (value === input.value) return\n      value = input.value\n      await microtask()\n      fire(input, 'filterable:change')\n    }\n\n    async function onFocus() {\n      value = field.value\n      await microtask()\n      fire(field, 'filterable:change')\n    }\n\n    return {\n      add(el) {\n        el.addEventListener('focus', onFocus)\n        addThrottledInputEventListener(el, onInputChange, {wait: throttleWaitInMs})\n        if (document.activeElement === el) onFocus()\n      },\n      remove(el) {\n        el.removeEventListener('focus', onFocus)\n        removeThrottledInputEventListener(el, onInputChange)\n      },\n    }\n  },\n})\n\n// Trigger 'filterable:change' on an input after any\n// direct val() calls\non('filterable:change', '.js-filterable-field', async function (event: Event) {\n  const target = event.currentTarget as HTMLInputElement\n  const queryString = target.value.trim().toLowerCase()\n  const filterable = document.querySelectorAll(`[data-filterable-for=\"${target.id}\"]`)\n  for (const list of filterable) {\n    const visible = await filter(list, queryString)\n    if (visible === -1) return\n    if (document.activeElement && target === document.activeElement) {\n      announce(`${visible} results found.`)\n    }\n\n    list.dispatchEvent(\n      new CustomEvent('filterable:change', {\n        bubbles: true,\n        cancelable: false,\n        detail: {\n          inputField: target,\n        },\n      }),\n    )\n  }\n})\n\nfunction defaultText(content: Element): string {\n  return content.hasAttribute('data-filter-value')\n    ? content.getAttribute('data-filter-value')!.toLowerCase().trim()\n    : content.textContent!.toLowerCase().trim()\n}\n\nasync function filter(list: Element, queryString: string): Promise<number> {\n  const limit = parseInt(list.getAttribute('data-filterable-limit')!, 10) || null\n\n  let visible = 0\n  switch (list.getAttribute('data-filterable-type')) {\n    case 'fuzzy-prio': {\n      const searchQuery = queryString.toLowerCase()\n      const sortKey = (item: HTMLElement) => {\n        const prioText = item.getAttribute('data-prio-filter-value')!.toLowerCase().trim()\n        const text = item.textContent!.toLowerCase().trim()\n\n        // Increase the weighting of the score of the custom priority value\n        const prioScore = fuzzyScore(prioText, searchQuery, 0.01) * 2\n        let score = fuzzyScore(text, searchQuery, 0.01)\n        if (prioScore > score) score = prioScore\n\n        return score > 0 ? {score, text} : null\n      }\n      visible = filterSortList(list, queryString, {limit, sortKey})\n      break\n    }\n    case 'fuzzy': {\n      const searchQuery = queryString.toLowerCase()\n      const sortKey = (item: HTMLElement) => {\n        const text = defaultText(item)\n        const score = fuzzyScore(text, searchQuery)\n        return score > 0 ? {score, text} : null\n      }\n      visible = filterSortList(list, queryString, {limit, sortKey})\n      break\n    }\n    case 'substring':\n      visible = filterList(list, queryString.toLowerCase(), substring, {limit})\n      break\n    case 'substring-memory':\n      visible = await substringMemoryFilterList(list, queryString, {limit})\n      break\n    case 'labels-typeahead':\n      visible = await labelsTypeaheadFilterList(list, queryString, {limit})\n      break\n    default:\n      visible = filterList(list, queryString.toLowerCase(), prefix, {limit})\n      break\n  }\n\n  list.classList.toggle('filterable-active', queryString.length > 0)\n  list.classList.toggle('filterable-empty', visible === 0)\n\n  return visible\n}\n\nfunction prefix(el: Element, queryString: string): boolean {\n  return el.textContent!.toLowerCase().trim().startsWith(queryString)\n}\n\n// Does the text of the given element match the given query string?\n//\n// Note: you can add a `data-skip-substring-filter` attribute to exclude an\n// element from substring filtering.\n//\n// Returns Boolean or null, if element cannot be filtered\nfunction substring(el: Element, queryString: string): boolean | null {\n  if (el.hasAttribute('data-skip-substring-filter')) return null\n  if (el.classList.contains('select-menu-no-results')) return null\n  const target = el.querySelector('[data-filterable-item-text]') || el\n  return target.textContent!.toLowerCase().trim().includes(queryString)\n}\n\n// Toggle new create new item form when filter doesn't match any existing items\non('filterable:change', 'details-menu .select-menu-list', function (event) {\n  const list = event.currentTarget\n  const form = list.querySelector('.js-new-item-form')\n\n  if (form) {\n    toggleForm(list, form, event.detail.inputField.value)\n  }\n})\n\nfunction toggleForm(list: Element, form: Element, filterText: string) {\n  const show = filterText.length > 0 && !itemExists(list, filterText)\n  list.classList.toggle('is-showing-new-item-form', show)\n\n  if (!show) return\n\n  form.querySelector<HTMLElement>('.js-new-item-name')!.textContent = filterText\n\n  const item = form.querySelector('.js-new-item-value')\n  if (item instanceof HTMLInputElement || item instanceof HTMLButtonElement) {\n    item.value = filterText\n  }\n}\n\n// Detect if filtered item is already present in the list.\n//\n// container  - filterable list element\n// filterText - String value of filter field\n//\n// Returns true if item already exists, otherwise false.\nfunction itemExists(container: Element, filterText: string): boolean {\n  for (const item of container.querySelectorAll('[data-menu-button-text]')) {\n    const text = (item as HTMLElement).textContent!.toLowerCase().trim()\n    if (text === filterText.toLowerCase()) {\n      return true\n    }\n  }\n  return false\n}\n\n// Hoist empty class to parent for styling.\nobserve('tab-container .select-menu-list .filterable-empty, details-menu .select-menu-list .filterable-empty', {\n  add(el) {\n    const list = el.closest<HTMLElement>('.select-menu-list')!\n    list.classList.add('filterable-empty')\n  },\n  remove(el) {\n    const list = el.closest<HTMLElement>('.select-menu-list')!\n    list.classList.remove('filterable-empty')\n  },\n})\n","// Installs observer to account for sticky/fixed overlay offsets when navigating\n// to a fragment.\nimport {computeFixedYOffset, scrollToFragmentTarget} from '../sticky-scroll-into-view'\nimport hashChange from './hash-change'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nfunction scrollTargetIntoViewIfNeeded() {\n  const root = <HTMLHtmlElement>document.firstElementChild!\n  if (root.classList.contains('js-skip-scroll-target-into-view')) return\n\n  if (computeFixedYOffset(document)) {\n    scrollToFragmentTarget(document)\n  }\n}\n\nhashChange(scrollTargetIntoViewIfNeeded)\n\non('click', 'a[href^=\"#\"]', function (event) {\n  const {currentTarget} = event\n  if (!(currentTarget instanceof HTMLAnchorElement)) return\n\n  // this defers the execution of scrollTargetIntoViewIfNeeded until after all the click stuff happened, including after scroll\n  setTimeout(scrollTargetIntoViewIfNeeded, 0)\n})\n","import {loaded} from '@github-ui/document-ready'\n\n// Flash\n//\n// Fades out and removes flash element from the page on close.\n//\n// Markup\n//\n//     <div class=\"flash-messages\">\n//       <div class=\"flash\">\n//         <%= octicon('x', :class => 'flash-close js-flash-close') %>\n//         Flash Message\n//       </div>\n//     </div>\n//\n\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\non('click', '.js-flash-close', function (event) {\n  const container = event.currentTarget.closest('.flash-messages')\n\n  const flash = event.currentTarget.closest('.flash')\n  flash!.remove()\n\n  if (container && !container.querySelector('.flash')) {\n    container.remove()\n  }\n})\n\n/**\n * Inserts an sr-only span with a non-breaking space into the flash content.\n * The sr-only ensures there are no visual changes.\n/** */\nexport function insertNonBreakingSpace(flashAlertContent: HTMLElement) {\n  const nonBreakingSpace = document.createTextNode('\\u00A0')\n  const span = document.createElement('span')\n  span.classList.add('sr-only')\n  span.appendChild(nonBreakingSpace)\n\n  flashAlertContent.appendChild(span)\n}\n\n/**\n * Contains accessibility logic for server-rendered flash.\n * This JS ensures that the flash content with '.js-flash-alert[role=\"alert\"]' is announced.\n * See: https://github.com/github/accessibility/issues/290\n * Please consult #accessibility if you have any questions.\n */\n;(async function () {\n  await loaded\n\n  const flashAlertContent: HTMLElement | null = document.querySelector('.js-flash-alert[role=\"alert\"]')\n  if (flashAlertContent) {\n    // Delay and non-breaking space to ensure that screen readers announce this alert.\n    setTimeout(() => {\n      insertNonBreakingSpace(flashAlertContent)\n    }, 200)\n  }\n})()\n","import {deleteCookie, getCookies} from './cookies'\nimport {TemplateInstance} from '@github/template-parts'\n\nconst ALLOWED_FLASH_COOKIES = ['flash-notice', 'flash-error', 'flash-message', 'flash-warn']\n\n// Find cookies named something like \"flash-notice\" and render the\n// .js-flash-template template for them.\nexport function displayFlash(el: HTMLTemplateElement) {\n  for (const {key, value} of ALLOWED_FLASH_COOKIES.flatMap(getCookies)) {\n    deleteCookie(key)\n    let message\n    try {\n      message = atob(decodeURIComponent(value))\n    } catch {\n      continue\n    }\n    el.after(new TemplateInstance(el, {className: key, message}))\n  }\n}\n","import {displayFlash} from '../flash'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('template.js-flash-template', {\n  constructor: HTMLTemplateElement,\n  add(el) {\n    displayFlash(el)\n  },\n})\n","// Delayed Focus Events\n//\n// Provides a family cancelable focus/blur that trigger slightly later.\n// This makes it easier to build menus that only display when you are\n// focused in on a field.\n//\n// Events\n//\n// `focusin:delay`\n//\n// Fired when field is being focused for the first time. Will not fire\n// if field is blurred, and refocused in less than 200ms.\n//\n// * **Synchronicity** Sync\n// * **Bubbles** Yes\n// * **Cancelable** Yes\n// * **Target** Element that is receiving focus.\n//\n// `focusout:delay`\n//\n// Fired when field has been blurred for the first time. Won't fire if\n// the field is not refocused in under 200ms or the `focusout:delay` is\n// canceled.\n//\n// * **Synchronicity** Sync\n// * **Bubbles** Yes\n// * **Cancelable** No\n// * **Target** Element that is receiving focus.\n//\n// ```javascript\n// on('focusin:delay', function() {\n//   showAutocompletions()\n// })\n//\n// on('focusout:delay', function() {\n//   hideAutocompletions()\n// })\n// ```\n//\n\n// eslint-disable-next-line no-restricted-imports\nimport {fire} from 'delegated-events'\n\nconst focused = new WeakMap()\n\n// We use the \"focus\" and \"blur\" event in the capture phase because Firefox\n// historically had a limitation with \"focusin\" and \"focusout\" not bubbling.\ndocument.addEventListener(\n  'focus',\n  function (event: Event) {\n    const target = event.target\n    if (target instanceof Element && !focused.get(target)) {\n      fire(target, 'focusin:delay')\n      focused.set(target, true)\n    }\n  },\n  {capture: true},\n)\n\ndocument.addEventListener(\n  'blur',\n  function (event: Event) {\n    setTimeout(function () {\n      const target = event.target\n      if (target instanceof Element && target !== document.activeElement) {\n        fire(target, 'focusout:delay')\n        focused.delete(target)\n      }\n    }, 200)\n  },\n  {capture: true},\n)\n","import {announce} from '@github-ui/aria-live'\nimport {remoteForm} from '@github/remote-form'\n\nremoteForm('.js-form-toggle-target', async function (form, wants) {\n  try {\n    await wants.text()\n  } catch {\n    return\n  }\n\n  const container = form.closest<HTMLElement>('.js-form-toggle-container')!\n  container.querySelector<HTMLElement>('.js-form-toggle-target[hidden]')!.hidden = false\n  form.hidden = true\n  const feedback = form.getAttribute('data-sr-feedback') || ''\n  feedback && announce(feedback)\n})\n","import FuzzyListElement from '../fuzzy-list-element'\nimport {announce} from '@github-ui/aria-live'\nimport {fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nfunction noticeHandler(event: Event) {\n  if (!(event instanceof CustomEvent)) return\n  announce(`${event.detail} results found.`)\n}\n\nobserve('fuzzy-list', {\n  constructor: FuzzyListElement,\n  subscribe: fuzzyList => fromEvent(fuzzyList, 'fuzzy-list-sorted', noticeHandler),\n})\n","import {addThrottledInputEventListener} from '../throttled-input'\nimport {fetchSafeDocumentFragment} from '@github-ui/fetch-utils'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {remoteForm} from '@github/remote-form'\nimport type {ModalDialogElement} from '@primer/view-components/app/components/primer/alpha/modal_dialog'\n\n// Toggle verify SSL visibility for https web hook URLs\nobserve('.js-hook-url-field', {\n  constructor: HTMLInputElement,\n  add(input) {\n    function checkUrl() {\n      const form = input.form\n      if (!form) return\n      let url\n      try {\n        // eslint-disable-next-line no-restricted-syntax\n        url = new URL(input.value)\n      } catch (e) {\n        // Do nothing.\n      }\n      const invalidNotice = form.querySelector('.js-invalid-url-notice')\n      if (invalidNotice instanceof HTMLElement) {\n        invalidNotice.hidden = !!(input.value === '' || (url && /^https?:/.test(url.protocol)))\n      }\n      const insecureNotice = form.querySelector('.js-insecure-url-notice')\n      if (insecureNotice instanceof HTMLElement && url && input.value) {\n        insecureNotice.hidden = /^https:$/.test(url.protocol)\n      }\n      const sslFields = form.querySelector('.js-ssl-hook-fields')\n      if (sslFields instanceof HTMLElement) {\n        sslFields.hidden = !(url && 'https:' === url.protocol)\n      }\n    }\n\n    addThrottledInputEventListener(input, checkUrl)\n    checkUrl()\n  },\n})\n\nfunction chooseEvents(selector: string): void {\n  const events = document.querySelectorAll<HTMLInputElement>('.js-hook-event-checkbox')\n  for (const eventCheckbox of events) {\n    eventCheckbox.checked = eventCheckbox.matches(selector)\n  }\n}\n\non('change', '.js-hook-event-choice', function (event) {\n  const checkbox = event.currentTarget as HTMLInputElement\n  const customIsSelected = checkbox.checked && checkbox.value === 'custom'\n  const hookEventsField = checkbox.closest('.js-hook-events-field')\n  if (hookEventsField) hookEventsField.classList.toggle('is-custom', customIsSelected)\n\n  if (checkbox.checked) {\n    if (customIsSelected) {\n      const hookWildcardEvent = document.querySelector<HTMLInputElement>('.js-hook-wildcard-event')!\n      hookWildcardEvent.checked = false\n    } else if (checkbox.value === 'push') {\n      chooseEvents('[value=\"push\"]')\n    } else if (checkbox.value === 'all') {\n      chooseEvents('.js-hook-wildcard-event')\n    }\n  }\n})\n\n// Load more delivery logs\non('click', '.js-hook-deliveries-pagination-button', async function (event) {\n  const button = event.currentTarget as HTMLButtonElement\n  button.disabled = true\n  const wrapper = button.parentElement!\n\n  const url = button.getAttribute('data-url')!\n  wrapper.before(await fetchSafeDocumentFragment(document, url))\n  wrapper.remove()\n})\n\n// Redeliver Payload Button\nremoteForm('.js-redeliver-hook-form', async function (form, wants) {\n  let response\n  try {\n    response = await wants.html()\n  } catch (responseError) {\n    form.classList.add('failed')\n    return\n  }\n\n  // replace the whole deliveries index\n  const deliveriesDetails = document.querySelector<HTMLElement>(`.js-hook-deliveries-container`)!\n  deliveriesDetails.replaceWith(response.html)\n})\n\nfunction registerInsecureSslVerificationDialog() {\n  const dialog = document.getElementById('insecure_ssl_verification') as ModalDialogElement | null\n  const disallowInsecureRadio = document.getElementById('insecure_ssl_0') as HTMLInputElement | null\n  const allowInsecureRadio = document.getElementById('insecure_ssl_1') as HTMLInputElement | null\n\n  if (dialog && disallowInsecureRadio && allowInsecureRadio) {\n    // on radio buttons, 'change' only fires when they become checked\n    allowInsecureRadio.addEventListener('change', event => {\n      event.stopPropagation()\n      disallowInsecureRadio.checked = true\n      dialog.show()\n    })\n\n    dialog.addEventListener('close', () => {\n      allowInsecureRadio.checked = true\n    })\n  }\n}\n\nregisterInsecureSslVerificationDialog()\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\n// Behaviors related to special cases in GFM content\n// Toggles quoted email reply content\non('click', '.email-hidden-toggle', function (event) {\n  // assert nextElementSibling is .email-hidden-reply\n  const replyContainer = event.currentTarget.nextElementSibling\n  if (!(replyContainer instanceof HTMLElement)) return\n\n  replyContainer.style.display = ''\n  replyContainer.classList.toggle('expanded')\n\n  event.preventDefault()\n})\n","import {areCharacterKeyShortcutsEnabled, isNonCharacterKeyShortcut} from './keyboard-shortcuts-helper'\nimport {install, uninstall} from './hotkey'\nimport {observe} from '@github/selector-observer'\n\nexport function observeHotkey(selector: string) {\n  observe(selector, {\n    constructor: HTMLElement,\n    add(element) {\n      // Disable character key shortcuts based on user preference\n      if (areCharacterKeyShortcutsEnabled()) {\n        install(element)\n      } else {\n        const shortcut = element.getAttribute('data-hotkey')\n        if (shortcut) {\n          const validShortcuts = filterOutCharacterKeyShortcuts(shortcut)\n          if (validShortcuts.length > 0) {\n            element.setAttribute('data-hotkey', validShortcuts)\n            install(element)\n          }\n        }\n      }\n    },\n    remove(element) {\n      uninstall(element)\n    },\n  })\n}\n\n// This function keeps non-character key shortcuts and filters out character key shortcuts.\n// See `isNonCharacterKeyShortcut` for more information.\nexport function filterOutCharacterKeyShortcuts(string: string) {\n  const shortcuts = string.split(',')\n  return shortcuts\n    .filter((s: string) => {\n      return isNonCharacterKeyShortcut(s)\n    })\n    .join(',')\n}\n","import {observeHotkey} from '@github-ui/hotkey/observer'\n\n// calling this here keeps the sideffect in behaviors and out of @github-ui/hotkey\nobserveHotkey('[data-hotkey]')\n","import {onCLS, onFCP, onFID, onLCP, onTTFB, onINP} from 'web-vitals'\nimport type {Metric} from 'web-vitals'\nimport {loaded} from '@github-ui/document-ready'\nimport {wasServerRendered} from '@github-ui/ssr-utils'\nimport {sendStats} from '@github-ui/stats'\nimport type {HPCTimingEvent} from './hpc'\nimport {MECHANISM_MAPPING, getCurrentReactAppName} from '@github-ui/soft-nav'\nimport {sendStatToHydro} from './hydro-stats'\nimport {isFeatureEnabled} from '@github-ui/feature-flags'\n\ntype MetricOrHPC = Metric | HPCTimingEvent\nconst initialRenderIsSSR = wasServerRendered()\nconst initialRenderIsLazy = isReactLazyPayload()\nconst initialRenderIsAlternate = isReactAlternate()\n\ninterface NetworkInformation extends EventTarget {\n  readonly effectiveType: string\n}\n\nexport function isReactLazyPayload() {\n  return Boolean(document.querySelector('react-app[data-lazy=\"true\"]'))\n}\n\nexport function isReactAlternate() {\n  return Boolean(document.querySelector('react-app[data-alternate=\"true\"]'))\n}\n\nexport function isHeaderRedesign() {\n  return Boolean(document.querySelector('header.AppHeader'))\n}\n\nexport function hasFetchedGQL(): boolean {\n  return performance.getEntriesByType('resource').some(e => e.initiatorType === 'fetch' && e.name.includes('_graphql?'))\n}\n\nexport function hasFetchedJS(): boolean {\n  return performance.getEntriesByType('resource').some(e => e.initiatorType === 'script')\n}\n\nexport function sendVitals(metric: MetricOrHPC) {\n  const {name, value} = metric\n  const stat: PlatformBrowserPerformanceWebVitalTiming = {\n    name: window.location.href,\n    app: getCurrentReactAppName() || 'rails',\n  }\n  stat[name.toLowerCase() as Lowercase<typeof name>] = value\n\n  if (isFeatureEnabled('SAMPLE_NETWORK_CONN_TYPE')) {\n    stat.networkConnType = getConnectionType()\n  }\n\n  if (name === 'HPC') {\n    stat.soft = metric.soft\n    stat.ssr = metric.ssr\n    stat.mechanism = MECHANISM_MAPPING[metric.mechanism]\n    stat.lazy = metric.lazy\n    stat.alternate = metric.alternate\n    stat.hpcFound = metric.found\n    stat.hpcGqlFetched = metric.gqlFetched\n    stat.hpcJsFetched = metric.jsFetched\n    stat.headerRedesign = isHeaderRedesign()\n  } else {\n    stat.ssr = initialRenderIsSSR\n    stat.lazy = initialRenderIsLazy\n    stat.alternate = initialRenderIsAlternate\n  }\n\n  const syntheticTest = document.querySelector('meta[name=\"synthetic-test\"]')\n  if (syntheticTest) {\n    stat.synthetic = true\n  }\n\n  sendStats({webVitalTimings: [stat]})\n\n  sendStatToHydro(stat)\n\n  updateStaffBar(name, value)\n}\n\nfunction updateStaffBar(name: string, value: number) {\n  const staffBarContainer = document.querySelector('#staff-bar-web-vitals')\n  const metricContainer = staffBarContainer?.querySelector(`[data-metric=${name.toLowerCase()}]`)\n\n  if (!metricContainer) {\n    return\n  }\n\n  metricContainer.textContent = value.toPrecision(6)\n}\n\nfunction isTimingSuppported(): boolean {\n  return !!(window.performance && window.performance.timing && window.performance.getEntriesByType)\n}\n\nfunction getConnectionType() {\n  if ('connection' in navigator) {\n    return (navigator.connection as NetworkInformation).effectiveType\n  }\n\n  return 'N/A'\n}\n\nasync function sendTimingResults() {\n  if (!isTimingSuppported()) return\n\n  await loaded\n  await new Promise(resolve => setTimeout(resolve))\n\n  sendResourceTimings()\n  sendNavigationTimings()\n}\n\nconst sendResourceTimings = () => {\n  const resourceTimings = window.performance\n    .getEntriesByType('resource')\n\n    .map(\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      (timing: any): PlatformBrowserPerformanceNavigationTiming => ({\n        name: timing.name,\n        entryType: timing.entryType,\n        startTime: timing.startTime,\n        duration: timing.duration,\n        initiatorType: timing.initiatorType,\n        nextHopProtocol: timing.nextHopProtocol,\n        workerStart: timing.workerStart,\n\n        workerTiming: (timing.workerTiming || []).map(\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          (workerTiming: any): PlatformBrowserPerformanceWorkerTiming => ({\n            duration: workerTiming.duration,\n            startTime: workerTiming.startTime,\n            name: workerTiming.name,\n            entryType: workerTiming.entryType,\n          }),\n        ),\n\n        serverTiming: (timing.serverTiming || []).map(\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          (serverTiming: any): PlatformBrowserPerformanceServerTiming => ({\n            duration: serverTiming.duration,\n            description: serverTiming.description,\n            name: serverTiming.name,\n          }),\n        ),\n        redirectStart: timing.redirectStart,\n        redirectEnd: timing.redirectEnd,\n        fetchStart: timing.fetchStart,\n        domainLookupStart: timing.domainLookupStart,\n        domainLookupEnd: timing.domainLookupEnd,\n        connectStart: timing.connectStart,\n        connectEnd: timing.connectEnd,\n        secureConnectionStart: timing.secureConnectionStart,\n        requestStart: timing.requestStart,\n        responseStart: timing.responseStart,\n        responseEnd: timing.responseEnd,\n        transferSize: timing.transferSize,\n        encodedBodySize: timing.encodedBodySize,\n        decodedBodySize: timing.decodedBodySize,\n      }),\n    )\n\n  if (resourceTimings.length) {\n    sendStats({resourceTimings})\n  }\n}\n\nconst sendNavigationTimings = () => {\n  const navigationTimings = window.performance\n    .getEntriesByType('navigation')\n\n    .map(\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      (timing: any): PlatformBrowserPerformanceNavigationTiming => ({\n        activationStart: timing.activationStart,\n        name: timing.name,\n        entryType: timing.entryType,\n        startTime: timing.startTime,\n        duration: timing.duration,\n        initiatorType: timing.initiatorType,\n        nextHopProtocol: timing.nextHopProtocol,\n        workerStart: timing.workerStart,\n        workerTiming: (timing.workerTiming || []).map(\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          (workerTiming: any): PlatformBrowserPerformanceWorkerTiming => ({\n            duration: workerTiming.duration,\n            startTime: workerTiming.startTime,\n            name: workerTiming.name,\n            entryType: workerTiming.entryType,\n          }),\n        ),\n\n        serverTiming: (timing.serverTiming || []).map(\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          (serverTiming: any): PlatformBrowserPerformanceServerTiming => ({\n            duration: serverTiming.duration,\n            description: serverTiming.description,\n            name: serverTiming.name,\n          }),\n        ),\n        redirectStart: timing.redirectStart,\n        redirectEnd: timing.redirectEnd,\n        fetchStart: timing.fetchStart,\n        domainLookupStart: timing.domainLookupStart,\n        domainLookupEnd: timing.domainLookupEnd,\n        connectStart: timing.connectStart,\n        connectEnd: timing.connectEnd,\n        secureConnectionStart: timing.secureConnectionStart,\n        requestStart: timing.requestStart,\n        responseStart: timing.responseStart,\n        responseEnd: timing.responseEnd,\n        transferSize: timing.transferSize,\n        encodedBodySize: timing.encodedBodySize,\n        decodedBodySize: timing.decodedBodySize,\n        unloadEventStart: timing.unloadEventStart,\n        unloadEventEnd: timing.unloadEventEnd,\n        domInteractive: timing.domInteractive,\n        domContentLoadedEventStart: timing.domContentLoadedEventStart,\n        domContentLoadedEventEnd: timing.domContentLoadedEventEnd,\n        domComplete: timing.domComplete,\n        loadEventStart: timing.loadEventStart,\n        loadEventEnd: timing.loadEventEnd,\n        type: timing.type,\n        redirectCount: timing.redirectCount,\n      }),\n    )\n\n  if (navigationTimings.length) {\n    sendStats({navigationTimings})\n  }\n}\n\nsendTimingResults()\nonCLS(sendVitals)\nonFCP(sendVitals)\nonFID(sendVitals)\nonLCP(sendVitals)\nonTTFB(sendVitals)\nonINP(sendVitals)\n","import {onLCP} from 'web-vitals'\nimport {SOFT_NAV_STATE, type SoftNavMechanism} from '@github-ui/soft-nav'\nimport {wasServerRendered} from '@github-ui/ssr-utils'\nimport {hasFetchedGQL, hasFetchedJS, isReactAlternate, isReactLazyPayload, sendVitals} from './timing-stats'\n\ninterface HPCEventTarget extends EventTarget {\n  addEventListener(\n    type: 'hpc:timing',\n    listener: (event: HPCTimingEvent) => void,\n    options?: boolean | AddEventListenerOptions,\n  ): void\n  addEventListener(type: string, listener: (event: Event) => void, options?: boolean | AddEventListenerOptions): void\n}\n\nexport class HPCTimingEvent extends Event {\n  name = 'HPC' as const\n  value: number\n\n  constructor(\n    public soft: boolean,\n    public ssr: boolean,\n    public lazy: boolean,\n    public alternate: boolean,\n    public mechanism: SoftNavMechanism | 'hard',\n    public found: boolean,\n    public gqlFetched: boolean,\n    public jsFetched: boolean,\n    start: number,\n  ) {\n    super('hpc:timing')\n    this.value = performance.now() - start\n  }\n}\n\n// We use an AbortController to cleanup event listeners when we soft navigate.\nlet abortController = new AbortController()\nconst INSERTION_TIMEOUT = 10000\n\nfunction isVisible(element: HTMLElement) {\n  // Safari doesn't support `checkVisibility` yet.\n  if (typeof element.checkVisibility === 'function') return element.checkVisibility()\n\n  return Boolean(element.offsetParent || element.offsetWidth || element.offsetHeight)\n}\n\nfunction setLCPasHPC(soft: boolean, found: boolean) {\n  onLCP(({value}) => {\n    window.performance.measure('HPC', {start: 'navigationStart', end: value})\n    sendVitals({\n      name: 'HPC',\n      value,\n      soft,\n      found,\n      gqlFetched: hasFetchedGQL(),\n      jsFetched: hasFetchedJS(),\n      ssr: wasServerRendered(),\n      lazy: isReactLazyPayload(),\n      alternate: isReactAlternate(),\n      mechanism: 'hard',\n    } as HPCTimingEvent)\n  })\n}\n\n// Restart HPC measurement. This will stop any ongoing HPC calls and start a new timer.\nfunction resetHPC({soft = false, mechanism = 'hard'}: {soft: boolean; mechanism?: SoftNavMechanism | 'hard'}) {\n  abortController.abort()\n  abortController = new AbortController()\n\n  // Initialize HPC\n  const hpcStart = soft ? performance.now() : 0\n  const hpc: HPCEventTarget = new EventTarget() as HPCEventTarget\n  let tabHidden = false\n  let animationFrame: number\n  let dataHPCanimationFrame: number\n\n  // Observer to listen to ALL mutations to the DOM. We need to check all added nodes\n  // for the `data-hpc` attribue. If none are found, we keep listening until all mutations are done.\n  const hpcDOMInsertionObserver = new MutationObserver(mutations => {\n    let hasDataHPC = false\n    let visibleElement = false\n\n    // if the mutation didn't add any nodes, we don't track its HPC\n    if (mutations.every(mutation => mutation.addedNodes.length === 0)) return\n\n    for (const mutation of mutations) {\n      if (mutation.type !== 'childList') continue\n\n      for (const node of mutation.addedNodes) {\n        if (!(node instanceof Element)) continue\n\n        if (node.hasAttribute('data-hpc') || node.querySelector('[data-hpc]')) {\n          cancelAnimationFrame(animationFrame)\n          hasDataHPC = true\n          break\n        }\n\n        // we only care about visible elements\n        if (isVisible(node as HTMLElement)) {\n          cancelAnimationFrame(animationFrame)\n          visibleElement = true\n        }\n      }\n\n      if (hasDataHPC) break\n    }\n\n    if (hasDataHPC) {\n      window.performance.measure('HPC', 'navigationStart')\n      // data-hpc found, we can stop listening to mutations.\n      hpcDOMInsertionObserver.disconnect()\n      // only cancel the animation frame if the controller aborts.\n      dataHPCanimationFrame = requestAnimationFrame(() => {\n        hpc.dispatchEvent(\n          new HPCTimingEvent(\n            soft,\n            wasServerRendered(),\n            isReactLazyPayload(),\n            isReactAlternate(),\n            mechanism,\n            true,\n            hasFetchedGQL(),\n            hasFetchedJS(),\n            hpcStart,\n          ),\n        )\n      })\n    } else if (visibleElement) {\n      animationFrame = requestAnimationFrame(() => {\n        hpc.dispatchEvent(new Event('hpc:dom-insertion'))\n      })\n    }\n  })\n  hpcDOMInsertionObserver.observe(document, {childList: true, subtree: true})\n\n  // Stop listening for HPC events if the user has interacted, as interactions\n  // can cause DOM mutations, which we want to avoid capturing for HPC.\n  const listenerOpts = {capture: true, passive: true, once: true, signal: abortController.signal}\n  const stop = () => abortController.abort()\n\n  // eslint-disable-next-line github/require-passive-events\n  document.addEventListener('touchstart', stop, listenerOpts)\n  document.addEventListener('mousedown', stop, listenerOpts)\n  document.addEventListener('keydown', stop, listenerOpts)\n  document.addEventListener('pointerdown', stop, listenerOpts)\n\n  let emulatedHPCTimer: ReturnType<typeof setTimeout>\n  let insertionFound = false\n  hpc.addEventListener(\n    'hpc:dom-insertion',\n    () => {\n      insertionFound = true\n      clearTimeout(emulatedHPCTimer)\n      // Whenever we see a DOM insertion, we keep track of when it happened.\n      const event = new HPCTimingEvent(\n        soft,\n        wasServerRendered(),\n        isReactLazyPayload(),\n        isReactAlternate(),\n        mechanism,\n        false,\n        hasFetchedGQL(),\n        hasFetchedJS(),\n        hpcStart,\n      )\n\n      // If no mutations happen after the timeout, we assume that the DOM is fully loaded, so we send the\n      // last seen mutation values.\n      emulatedHPCTimer = setTimeout(() => hpc.dispatchEvent(event), INSERTION_TIMEOUT)\n    },\n    {signal: abortController.signal},\n  )\n\n  hpc.addEventListener(\n    'hpc:timing',\n    (e: HPCTimingEvent) => {\n      if (!tabHidden && e.value < 60_000) sendVitals(e)\n\n      abortController.abort()\n    },\n    {signal: abortController.signal},\n  )\n\n  // If the stop event is triggered, we want to stop listening to DOM mutations.\n  abortController.signal.addEventListener('abort', () => {\n    cancelAnimationFrame(dataHPCanimationFrame)\n    cancelAnimationFrame(animationFrame)\n    clearTimeout(emulatedHPCTimer)\n    hpcDOMInsertionObserver.disconnect()\n  })\n\n  // If the user changes tab, we don't want to send the recorded metrics since it may send garbage data.\n  document.addEventListener(\n    'visibilitychange',\n    () => {\n      tabHidden = true\n      abortController.abort()\n    },\n    {signal: abortController.signal},\n  )\n\n  if (!soft) {\n    setTimeout(() => {\n      if (!insertionFound) setLCPasHPC(soft, false)\n    }, INSERTION_TIMEOUT)\n  }\n\n  // In a hard-load, if the script is evaluated after the `data-hpc` element is rendered,\n  // we default the HPC value to LCP.\n  if (!soft && document.querySelector('[data-hpc]')) {\n    setLCPasHPC(soft, true)\n    abortController.abort()\n  }\n}\n\n// Any time we trigger a new soft navigation, we want to reset HPC.\ndocument.addEventListener(SOFT_NAV_STATE.START, ({mechanism}) => {\n  resetHPC({soft: true, mechanism})\n})\n\n// Start HPC at page load.\nresetHPC({soft: false})\n","import {sendStats} from '@github-ui/stats'\nimport {isFeatureEnabled} from '@github-ui/feature-flags'\n\ndocument.addEventListener('DOMContentLoaded', onDOMContentLoaded)\n\nasync function onDOMContentLoaded() {\n  if (isFeatureEnabled('IMAGE_METRIC_TRACKING') === false) return\n\n  const images = Array.from(document.querySelectorAll('img.js-img-time')).slice(0, 5)\n  const startTime = Date.now()\n  const stats: PlatformBrowserPerformanceTransparentRedirectTiming[] = []\n\n  await Promise.all(images.map(image => measureRedirectTiming(image, startTime, stats)))\n\n  if (stats.length > 0) sendStats({transparentRedirectTimings: stats})\n}\n\nasync function measureRedirectTiming(\n  image: Element,\n  startTime: number,\n  stats: PlatformBrowserPerformanceTransparentRedirectTiming[],\n) {\n  const LOCAL_STORAGE_PATH_REGEX =\n    /\\/assets\\/storage\\/user\\/([0-9]+)\\/files\\/([{]?[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}[}]?)/\n  const PROD_STORAGE_PATH_REGEX = /assets\\/([0-9]+)\\/([{]?[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}[}]?)/\n\n  const source = image.getAttribute('src')\n  if (!source) return\n\n  const url = new URL(source, window.location.origin)\n  const pathRegex = LOCAL_STORAGE_PATH_REGEX.test(url.pathname) ? LOCAL_STORAGE_PATH_REGEX : PROD_STORAGE_PATH_REGEX\n  const [, userID, fileGUID] = url.pathname.match(pathRegex) || []\n  if (!userID || !fileGUID) return\n\n  await fetch(`/assets/measure/${userID}/${fileGUID}`)\n\n  const duration = Date.now() - startTime\n  const stat: PlatformBrowserPerformanceTransparentRedirectTiming = {duration, fileGUID, userID}\n  stats.push(stat)\n}\n","import {loaded} from '@github-ui/document-ready'\nimport {sendPageView} from '@github-ui/hydro-analytics'\nimport {SOFT_NAV_STATE, getSoftNavMechanism} from '@github-ui/soft-nav'\n;(async function () {\n  // Turbo loads should be treated like pageloads\n  document.addEventListener(SOFT_NAV_STATE.FRAME_UPDATE, () =>\n    sendPageView({\n      turbo: 'true',\n    }),\n  )\n\n  document.addEventListener(SOFT_NAV_STATE.SUCCESS, () => {\n    if (getSoftNavMechanism() === 'turbo.frame') {\n      return\n    } else {\n      sendPageView({\n        turbo: 'true',\n      })\n    }\n  })\n\n  // Send a page view as soon as the page is loaded\n  await loaded\n  sendPageView()\n})()\n","import type {Context} from '@github/hydro-analytics-client'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {sendEvent} from '@github-ui/hydro-analytics'\n\non('click', '[data-octo-click]', function (event) {\n  const targetEl = event.currentTarget\n  if (!(targetEl instanceof HTMLElement)) {\n    return\n  }\n\n  const eventType = targetEl.getAttribute('data-octo-click') || ''\n  const context: Context = {}\n\n  if (targetEl.hasAttribute('data-ga-click')) {\n    const gaEvent = targetEl.getAttribute('data-ga-click')!\n    const parts = gaEvent.split(',')\n    context.category = parts[0]!.trim()\n    context.action = parts[1]!.trim()\n  }\n\n  if (targetEl.hasAttribute('data-octo-dimensions')) {\n    const dimensionsList = targetEl.getAttribute('data-octo-dimensions')!.split(',')\n\n    for (const dimensionPair of dimensionsList) {\n      const [key, value] = dimensionPair.split(/:(.+)/)\n      if (key) {\n        context[key] = value || ''\n      }\n    }\n  }\n  sendEvent(eventType, context)\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {sendData} from '../hydro-tracking'\nimport {debugHydroPayload} from './console-debug'\n\non('click', '[data-hydro-click]', function (event) {\n  const el = event.currentTarget\n  const payload = el.getAttribute('data-hydro-click') || ''\n  const hmac = el.getAttribute('data-hydro-click-hmac') || ''\n  const hydroClientContext = el.getAttribute('data-hydro-client-context') || ''\n  debugHydroPayload('hydro-debug.click', payload)\n  sendData(payload, hmac, hydroClientContext)\n})\n","// Handle immediate updates returned from the server on ajax success.\n//\n// See ShowPartial#render_immediate_partials\n\nimport {remoteForm} from '@github/remote-form'\nimport {replaceContent} from '../updatable-content'\n\nremoteForm('.js-immediate-updates', async function (form, wants) {\n  let updateContent\n\n  try {\n    const response = await wants.json()\n    updateContent = response.json.updateContent\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    if (error.response.json) {\n      // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n      updateContent = error.response.json.updateContent\n    }\n  }\n\n  if (updateContent) {\n    for (const selector in updateContent) {\n      const html = updateContent[selector]\n      const el = document.querySelector(selector)\n      if (el instanceof HTMLElement) {\n        replaceContent(el, html)\n      }\n    }\n  }\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('[data-indeterminate]', {\n  constructor: HTMLInputElement,\n  initialize(el) {\n    el.indeterminate = true\n  },\n})\n","import {logPageView} from '../jump-to/page-views'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nfunction load() {\n  import('../jump-to')\n}\n\nobserve('.js-jump-to-field', {\n  constructor: HTMLInputElement,\n  add(el) {\n    el.addEventListener('focusin', load, {once: true})\n    logPageView(window.location.pathname)\n  },\n})\n","import {dialog} from '@github-ui/details-dialog'\nimport {eventToHotkeyString} from '@github-ui/hotkey'\nimport {fetchSafeDocumentFragment} from '@github-ui/fetch-utils'\nimport {isFormField} from '@github-ui/form-utils'\nimport {isFeatureEnabled} from '@github-ui/feature-flags'\nimport {isShortcutAllowed} from '@github-ui/hotkey/keyboard-shortcuts-helper'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nlet shortcutModalShown = false\n\nasync function showKeyboardShortcuts() {\n  if (shortcutModalShown) return\n  shortcutModalShown = true\n\n  const metaKeyboardShortcuts = document.querySelector<HTMLMetaElement>('meta[name=github-keyboard-shortcuts]')!\n  const options = {contexts: metaKeyboardShortcuts.content}\n  const url = `/site/keyboard_shortcuts?${new URLSearchParams(options).toString()}`\n\n  const shortcutModal = await dialog({\n    content: fetchSafeDocumentFragment(document, url),\n    labelledBy: 'keyboard-shortcuts-heading',\n  })\n  shortcutModal.style.width = '800px'\n  shortcutModal.addEventListener(\n    'dialog:remove',\n    function () {\n      shortcutModalShown = false\n    },\n    {once: true},\n  )\n}\n\n// Toggles ajax request to display keyboard shortcuts.\n//\n// Add a class of `js-keyboard-shortcuts` to get this behavior on your page.\non('click', '.js-keyboard-shortcuts', showKeyboardShortcuts)\n\nif (!isFeatureEnabled('react_keyboard_shortcuts_dialog')) {\n  document.addEventListener('keydown', (event: Event) => {\n    if (!(event instanceof KeyboardEvent)) return\n    if (!isShortcutAllowed(event)) return\n\n    if (event.target instanceof Node && isFormField(event.target)) return\n    if (eventToHotkeyString(event) !== 'Shift+?') return\n    showKeyboardShortcuts()\n  })\n}\n\nobserve('.js-modifier-key', {\n  constructor: HTMLElement,\n  add(container) {\n    if (/Macintosh/.test(navigator.userAgent)) {\n      let shortcut = container.textContent\n      if (shortcut) {\n        shortcut = shortcut.replace(/ctrl/, '')\n        shortcut = shortcut.replace(/alt/, '')\n        container.textContent = shortcut\n      }\n    }\n  },\n})\n\nobserve('.js-modifier-label-key', {\n  add(container) {\n    let shortcutLabel = container.textContent?.replace(/ctrl/i, 'Ctrl')\n    if (!shortcutLabel) return\n    if (/Macintosh/.test(navigator.userAgent)) {\n      shortcutLabel = shortcutLabel.replace(/ctrl/i, 'Cmd')\n      shortcutLabel = shortcutLabel.replace(/alt/i, 'Option')\n    }\n    container.textContent = shortcutLabel\n  },\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\n// Length-limited input with warning.\n//\n// Limit the length of user input and provide a warning with a character count\n// when the user approaches the length limit.\n//\n// Three classes must be set.\n//  - js-length-limited-input.\n//  - js-length-limited-input-container.\n//  - js-length-limited-input-warning (probably also hidden by default).\n//\n// Two data attributes should be set on .js-length-limited-input:\n//  - data-warning-text, a string template for the warning message.\n//    Use `{{remaining}}` to interpolate the number of characters remaining.\n//  - data-input-max-length.\n//\n// @example\n// ```html\n//    <dd class=\"js-length-limited-input-container\">\n//      <input type=\"text\"\n//             class=\"js-length-limited-input\"\n//             data-warning-text=\"You have {{remaining}} characters remaining\"\n//             data-input-max-length=\"160\">\n//\n//      <p class=\"js-length-limited-input-warning d-none\">\n//      </p>\n//    </dd>\n// ```\nfunction displayLengthWarning(event: Event) {\n  // The user input field (<input>, <textarea>, etc)\n  const inputField = event.currentTarget\n  if (!(inputField instanceof HTMLInputElement || inputField instanceof HTMLTextAreaElement)) return\n\n  // The character limit, set in data attribute \"max-length\"\n  const maxLength = parseInt(inputField.getAttribute('data-input-max-length') || '', 10)\n\n  // The remaining length to start showing the warning for, defaults to 5\n  const warningLength = parseInt(inputField.getAttribute('data-warning-length') || '', 10) || 5\n\n  // The user input field (<input>, <textarea>, etc)\n  const inputValue = inputField.value\n\n  // New lines need to be counted as two characters. They are by the server.\n  const inputValueWithNewLinesFix = inputValue.replace(/(\\r\\n|\\n|\\r)/g, '\\r\\n')\n\n  // Characters remaining before the limit is reached\n  let remainingLength = maxLength - inputValueWithNewLinesFix.length\n\n  // HTML maxLength attribute does not count carriage returns correctly.\n  // It is also inconsistent between Chrome and Firefox\n  // and therefore can't be used bugfree without browser sniffing\n  // Creating our own maxLength implementation instead.\n  if (remainingLength <= 0) {\n    let truncatedInputValue = inputValueWithNewLinesFix.substr(0, maxLength)\n    // Trim trailing \\r so we don't truncate in the middle of a \\r\\n newline\n    if (truncatedInputValue.endsWith('\\r')) {\n      truncatedInputValue = truncatedInputValue.substr(0, maxLength - 1)\n      remainingLength = 1\n    } else {\n      remainingLength = 0\n    }\n    inputField.value = truncatedInputValue\n  }\n\n  // The warning message to display after the remaining character count\n  const warningText = inputField.getAttribute('data-warning-text')!\n\n  // The container enclosing the length-limited input field\n  const inputContainer = inputField.closest<HTMLElement>('.js-length-limited-input-container')!\n\n  // The container for the warning message\n  const warningArea = inputContainer.querySelector<HTMLElement>('.js-length-limited-input-warning')!\n\n  if (remainingLength <= warningLength) {\n    warningArea.textContent = warningText.replace(new RegExp('{{remaining}}', 'g'), `${remainingLength}`)\n    /* eslint-disable-next-line github/no-d-none */\n    warningArea.classList.remove('d-none')\n  } else {\n    warningArea.textContent = ''\n    /* eslint-disable-next-line github/no-d-none */\n    warningArea.classList.add('d-none')\n  }\n}\n\nobserve('.js-length-limited-input', {\n  add(el) {\n    el.addEventListener('input', displayLengthWarning)\n    el.addEventListener('change', displayLengthWarning)\n  },\n  remove(el) {\n    el.removeEventListener('input', displayLengthWarning)\n    el.removeEventListener('change', displayLengthWarning)\n  },\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\n\non('click', '.js-member-search-filter', function (event) {\n  event.preventDefault()\n\n  const filter = event.currentTarget.getAttribute('data-filter')!\n  const menu = event.currentTarget.closest<HTMLElement>('[data-filter-on]')!\n  const filterOn = menu.getAttribute('data-filter-on')!\n  const field = document.querySelector<HTMLInputElement>('.js-member-filter-field')!\n\n  // Remove any existing filters on the opened dropdown.\n  const currentValue = field.value\n\n  // Regex allows a-z chars, underscores & strings wrapped in single quotes (required for custom roles)\n  const regex = new RegExp(`${filterOn}:(?:[a-z]|_|((').*(')))+`)\n  const currentFilters = currentValue.toString().trim().replace(regex, '')\n\n  field.value = `${currentFilters} ${filter}`.replace(/\\s\\s/, ' ').trim()\n  field.focus()\n  fire(field, 'input')\n})\n","// Notice Behavior\n//\n// Add basic data-remote success hook for hiding notice on ajax\n// success.\n//\n// Markup\n//\n//     <div class=\"js-notice\">\n//       Hey!\n//       <a href=\"/dismiss\" class=\"js-notice-dismiss\">\n//         Dismiss\n//       </a>\n//     </div>\n//\n\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {remoteForm} from '@github/remote-form'\nimport {showGlobalError} from '../behaviors/ajax-error'\n\nremoteForm('.js-notice-dismiss', async function (form, send) {\n  await send.text()\n  const notice = form.closest<HTMLElement>('.js-notice')!\n  notice.remove()\n})\n\non('submit', '.js-notice-dismiss-remote', async function (event) {\n  const form = event.currentTarget as HTMLFormElement\n  event.preventDefault()\n  let response\n  try {\n    response = await fetch(form.action, {\n      method: form.method,\n      body: new FormData(form),\n      headers: {\n        Accept: 'application/json',\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n    })\n  } catch {\n    showGlobalError()\n    return\n  }\n  if (response && !response.ok) {\n    showGlobalError()\n  } else {\n    const notice = form.closest<HTMLElement>('.js-notice')!\n    notice.remove()\n  }\n})\n","// If the current page is openable in github.dev, do so on click.\n// This would be achievable without any custom JS by just using\n// data-hotkey except for two things:\n//  - PJAX and other replaceState-triggered location updates like\n//    the `y` hotkey need to be respected.\n//  - the editor cares about the hash of the page.\n// So we'll construct the href client-side.\n\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nfunction isVisible(el: HTMLElement) {\n  try {\n    const rect = el.getBoundingClientRect()\n    if (rect.height === 0 && rect.width === 0) {\n      return false\n    }\n    if (el.style.opacity === '0' || el.style.visibility === 'hidden') {\n      return false\n    }\n  } catch {\n    // fall through to return true below\n  }\n  return true\n}\n\non('click', '.js-github-dev-shortcut', function (event) {\n  event.preventDefault()\n  // If content exists in any visble comment field, prompt before navigating to github.dev\n  for (const el of document.querySelectorAll<HTMLTextAreaElement>('textarea.js-comment-field')) {\n    // eslint-disable-next-line i18n-text/no-en\n    if (el.value && isVisible(el) && !confirm('Are you sure you want to open github.dev?')) {\n      return\n    }\n  }\n  // Assumption: the href of the shortcut is the base URL for\n  // the serverless editor, e.g. https://github.dev/\n  const target = event.currentTarget as HTMLAnchorElement\n  target.pathname = window.location.pathname\n  target.hash = window.location.hash\n  window.location.href = target.href\n})\n\non('click', '.js-github-dev-new-tab-shortcut', function (event) {\n  // Assumption: the href of the shortcut is the base URL for\n  // the serverless editor, e.g. https://github.dev/\n  const target = event.currentTarget as HTMLAnchorElement\n  target.pathname = window.location.pathname\n  target.hash = window.location.hash\n})\n","// Append any window.location.hash changes to the permalink.\n//\n// For example, if you're viewing:\n// /github/linguist/blob/master/lib/linguist/languages.yml#L12\n//\n// You probably want the permalink to preserve the #L12, and go to:\n// /github/linguist/blob/SHA/lib/linguist/languages.yml#L12\n//\n//\n// Also update link that we want to keep in sync with the permalink change.\n//\n// For example, if you `y` a Markdown file and click the \"Display as source blob\"\n// button, probably you want its link (href) to change from:\n// /github/linguist/blob/master/README.md?plain=1\n//\n// to:\n// /github/linguist/blob/SHA/README.md?plain=1\n\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {replaceState} from '../history'\n\non('click', '.js-permalink-shortcut', function (event) {\n  const target = event.currentTarget as HTMLAnchorElement\n  try {\n    replaceState(null, '', target.href + window.location.hash)\n  } catch (error) {\n    window.location.href = target.href + window.location.hash\n  }\n  for (const element of document.querySelectorAll('.js-permalink-replaceable-link')) {\n    if (element instanceof HTMLAnchorElement) {\n      element.href = element.getAttribute('data-permalink-href')!\n    }\n  }\n  event.preventDefault()\n})\n","import {remoteForm} from '@github/remote-form'\n\nremoteForm('.js-permission-menu-form', async function (form, wants) {\n  const success = form.querySelector<HTMLElement>('.js-permission-success')!\n  const error = form.querySelector<HTMLElement>('.js-permission-error')!\n\n  success.hidden = true\n  error.hidden = true\n  form.classList.add('is-loading')\n\n  let response\n  try {\n    response = await wants.json()\n  } catch (e) {\n    // If the request errored, we'll set the error state and return.\n    form.classList.remove('is-loading')\n    error.hidden = false\n    return\n  }\n\n  form.classList.remove('is-loading')\n  success.hidden = false\n\n  const container = form.closest('.js-org-repo')\n  if (container) {\n    const data = response.json\n    container.classList.toggle('with-higher-access', data['members_with_higher_access'])\n  }\n})\n","import {microtask} from '@github-ui/eventloop-tasks'\nimport {sendStats} from '@github-ui/stats'\n\nlet lastTurboRequestUrl: string | null = null\n\n// Collect User Timing metrics so we can track time-to-load on turbo actions\nconst turboMeasure = 'last_turbo_request'\nconst turboStartMark = 'turbo_start'\nconst turboEndMark = 'turbo_end'\n\n// Mark turbo start on performance timeline and save url for last turbo request.\nfunction markTurboStart(event: Event) {\n  if (!(event instanceof CustomEvent)) return\n  if (!event.detail?.url || event.defaultPrevented) return\n\n  window.performance.mark(turboStartMark)\n  lastTurboRequestUrl = event.detail.url\n}\n\n// Mark turbo end on performance timeline and report results.\nasync function trackTurboTiming() {\n  await microtask()\n\n  if (!window.performance.getEntriesByName(turboStartMark).length) return\n\n  window.performance.mark(turboEndMark)\n  window.performance.measure(turboMeasure, turboStartMark, turboEndMark)\n  const measures = window.performance.getEntriesByName(turboMeasure)\n\n  const measure = measures.pop()\n  const duration = measure ? measure.duration : null\n  if (!duration) return\n\n  if (lastTurboRequestUrl) {\n    sendStats({\n      requestUrl: lastTurboRequestUrl,\n      turboDuration: Math.round(duration),\n    })\n  }\n  clearTurboMarks()\n}\n\n// Clear turbo marks from performance timeline.\nfunction clearTurboMarks() {\n  window.performance.clearMarks(turboStartMark)\n  window.performance.clearMarks(turboEndMark)\n  window.performance.clearMeasures(turboMeasure)\n}\n\nif ('getEntriesByName' in window.performance) {\n  document.addEventListener('turbo:before-fetch-request', markTurboStart)\n  document.addEventListener('turbo:render', trackTurboTiming)\n}\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('body.js-print-popup', () => {\n  window.print()\n  setTimeout(window.close, 1000)\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('poll-include-fragment[data-redirect-url]', function (el) {\n  const url = el.getAttribute('data-redirect-url')!\n  el.addEventListener('load', function () {\n    window.location.href = url\n  })\n})\n\nobserve('poll-include-fragment[data-reload]', function (el) {\n  el.addEventListener('load', function () {\n    window.location.reload()\n  })\n})\n","// Quick submit using -Enter or Ctrl+Enter\n//\n// When `.js-quick-submit` field is focused, -Enter or Ctrl+Enter will submit\n// the form it belongs to unless the first submit button of that form is disabled.\n\nimport {onKey} from '../onfocus'\nimport {requestSubmit} from '@github-ui/form-utils'\n\nonKey('keydown', '.js-quick-submit', function (event: KeyboardEvent) {\n  quickSubmit(event)\n})\n\nfunction quickSubmit(event: KeyboardEvent) {\n  // TODO: Refactor to use data-hotkey\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n  const field = event.target as HTMLInputElement | HTMLTextAreaElement\n\n  if ((event.ctrlKey || event.metaKey) && event.key === 'Enter') {\n    const form = field.form!\n    const button = form.querySelector('input[type=submit], button[type=submit]')\n    if (event.shiftKey) {\n      const altButton = form.querySelector('.js-quick-submit-alternative')\n      if ((altButton instanceof HTMLInputElement || altButton instanceof HTMLButtonElement) && !altButton.disabled) {\n        requestSubmit(form, altButton)\n      }\n    } else if (button instanceof HTMLInputElement || button instanceof HTMLButtonElement) {\n      if (!button.disabled) {\n        requestSubmit(form)\n      }\n    } else {\n      requestSubmit(form)\n    }\n    event.preventDefault()\n  }\n  /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n}\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {debounce} from '@github/mini-throttle'\nimport {showGlobalError} from '../behaviors/ajax-error'\nimport {parseHTML} from '@github-ui/parse-html'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nconst resizeObserver = new ResizeObserver(entries => {\n  for (const entry of entries) {\n    // The reaction buttons are 26 +/- 0.1px depending on :shrug:. If the menu overflows it'll go to 2 rows, and be closer to 52px than 26px\n    if (entry.contentRect.height > 40) {\n      hideReactionOverflow(entry.target as HTMLElement)\n    }\n  }\n})\n\nobserve('.js-reactions-container', function (el) {\n  resizeObserver.observe(el)\n})\n\nfunction hideReactionOverflow(reactionContainer: HTMLElement) {\n  const availableWidth = reactionContainer.offsetWidth * 0.7\n  const reactionButtons = reactionContainer.querySelectorAll<HTMLElement>('.js-reaction-group-button')\n  const allReactionsPopover = reactionContainer.querySelector<HTMLElement>('.js-all-reactions-popover')\n\n  let totalButtonWidth = 0\n  for (const button of reactionButtons) {\n    totalButtonWidth += button.clientWidth\n  }\n  totalButtonWidth += allReactionsPopover?.clientWidth || 0\n\n  if (availableWidth < totalButtonWidth) {\n    let remainingWidth = availableWidth\n\n    if (allReactionsPopover) {\n      allReactionsPopover.removeAttribute('hidden')\n      remainingWidth -= allReactionsPopover.offsetWidth\n    }\n\n    for (const button of reactionButtons) {\n      const buttonWidth = button.offsetWidth\n      if (buttonWidth > remainingWidth) {\n        button.setAttribute('hidden', 'hidden')\n      } else {\n        button.removeAttribute('hidden')\n      }\n      remainingWidth -= buttonWidth\n    }\n  }\n}\n\nconst debouncedPickReaction = debounce(async (e: Event) => {\n  const form = e.target as HTMLFormElement\n\n  let response\n  try {\n    response = await fetch(form.action, {\n      method: form.method,\n      headers: new Headers({\n        'X-Requested-With': 'XMLHttpRequest',\n      }),\n      body: new FormData(form),\n    })\n  } catch {\n    showGlobalError()\n  }\n  if (response && !response.ok) {\n    showGlobalError()\n  }\n\n  if (response && response.status === 200) {\n    const json = await response.json()\n\n    const comment = form.closest<HTMLElement>('.js-comment')\n    const reactionsContainer = comment?.querySelector<HTMLElement>('.js-reactions-container')\n    const reactionsHeader = comment?.querySelector<HTMLElement>('.js-comment-header-reaction-button')\n    if (json && reactionsContainer && reactionsHeader) {\n      const newReactions = parseHTML(document, json['reactions_container'].trim())\n      const newReactionButton = parseHTML(document, json['comment_header_reaction_button'].trim())\n      reactionsContainer.replaceWith(newReactions)\n      reactionsHeader.replaceWith(newReactionButton)\n    }\n    const elementToFocus = comment?.querySelector<HTMLElement>('.js-reactions-focus')\n    if (elementToFocus) elementToFocus.focus()\n  }\n}, 1000)\n\non('submit', '.js-pick-reaction', e => {\n  e.preventDefault()\n  debouncedPickReaction(e)\n})\n\nfunction showReactionContent(event: MouseEvent) {\n  const target = event.target as HTMLElement\n\n  const label = target.getAttribute('data-reaction-label')!\n  const container = target.closest<HTMLElement>('.js-add-reaction-popover')!\n  const description = container.querySelector<HTMLElement>('.js-reaction-description')!\n\n  if (!description.hasAttribute('data-default-text')) {\n    description.setAttribute('data-default-text', description.textContent || '')\n  }\n\n  description.textContent = label\n}\n\nfunction hideReactionContent(event: MouseEvent) {\n  const container = (event.target as HTMLElement).closest<HTMLElement>('.js-add-reaction-popover')!\n  const description = container.querySelector<HTMLElement>('.js-reaction-description')!\n\n  const defaultText = description.getAttribute('data-default-text')\n  if (defaultText) {\n    description.textContent = defaultText\n  }\n}\n\non(\n  'toggle',\n  '.js-reaction-popover-container',\n  function (event) {\n    const isOpen = event.currentTarget.hasAttribute('open')\n    for (const item of (event.target as Element).querySelectorAll<HTMLElement>('.js-reaction-option-item')) {\n      if (isOpen) {\n        item.addEventListener('mouseenter', showReactionContent)\n        item.addEventListener('mouseleave', hideReactionContent)\n      } else {\n        item.removeEventListener('mouseenter', showReactionContent)\n        item.removeEventListener('mouseleave', hideReactionContent)\n      }\n    }\n  },\n  {capture: true},\n)\n","import {sendStats} from '@github-ui/stats'\n\nif (PerformanceObserver && (PerformanceObserver.supportedEntryTypes || []).includes('longtask')) {\n  const observer = new PerformanceObserver(function (list) {\n    const longTasks = list.getEntries().map(({name, duration}) => ({name, duration, url: window.location.href}))\n    sendStats({longTasks})\n  })\n  observer.observe({entryTypes: ['longtask']})\n}\n","// Remote\n//\n// Implements `data-remote` for forms.\n//\n//\n// Markup\n//\n// `<form>`\n//\n// ``` definition-table\n// Attribute - Description\n//\n// `data-remote`\n//   Enables remote behavior on the element if set to anything.\n//\n// `method`\n//   Changes the method of the AJAX request. Defaults to `\"get\"`. Maps to\n//   jQuery's [type](http://api.jquery.com/jQuery.ajax/).\n//\n// `action`\n//   URL for AJAX request. Defaults to the current url. Maps to jQuery's\n//   [`url`](http://api.jquery.com/jQuery.ajax/).\n//\n// `data-type`\n//   Specify the data type of the response. Can be `\"xml\"`, `\"json\"`,\n//   `\"script\"`, or `\"html\"`. Defaults to jQuery's *\"intelligent guess\"*\n//   from the response content type. Maps to jQuery's\n//   [`dataType`](http://api.jquery.com/jQuery.ajax/).\n// ```\n//\n// ``` html\n// <form action=\"/comment\" method=\"post\" data-remote></form>\n// ```\n//\n//\n// Events\n//\n// Use delegated jQuery's global AJAX events to handle successful\n// and error states. See jQuery's [AJAX event\n// documentation](http://docs.jquery.com/Ajax_Events) for a complete\n// reference.\n//\n// `deprecatedAjaxSuccess`\n//\n// This event is only called if the request was successful (no errors from the server, no errors with the data).\n//\n// ``` definition-table\n// Property - Value\n//\n// Synchronicity  - Sync\n// Bubbles        - Yes\n// Cancelable     - No\n// Target         - `form` element with `[data-remote]`\n// ```\n//\n// `ajaxError`\n//\n// This event is only called if an error occurred with the request (you can never\n// have both an error and a success callback with a request).\n//\n// ``` definition-table\n// Property - Value\n//\n// Synchronicity  - Sync\n// Bubbles        - Yes\n// Cancelable     - No\n// Target         - `form` element with `[data-remote]`\n// Extra arguments\n//   `status` - Status response number\n//   `error` - Error message string\n//   `text` - Response text string\n// ```\n//\n// `deprecatedAjaxComplete`\n//\n// This event is called regardless of if the request was successful, or not. You\n// will always receive a complete callback, even for synchronous requests.\n//\n// ``` definition-table\n// Property - Value\n//\n// Synchronicity  - Sync\n// Bubbles        - Yes\n// Cancelable     - No\n// Target         - `form` element with `[data-remote]`\n// ```\n//\n//     on('deprecatedAjaxSend', '.new-comment', function(event) {\n//        event.currentTarget.classList.add('loading')\n//     })\n//\n//     on('deprecatedAjaxComplete', '.new-comment', function(event) {\n//        event.currentTarget.classList.remove('loading')\n//     })\n//\n//     on('deprecatedAjaxSuccess', '.new-comment', function (event) {\n//        event.currentTarget.classList.add('success')\n//     })\n//\n//     on('deprecatedAjaxError', '.new-comment', function (event) {\n//       alert(\"Something went wrong!\")\n//     })\n//\n//\n// Intercept all form submissions with data-remote and turn\n// it into a XHR request instead.\n\nimport type {Kicker, SimpleRequest, SimpleResponse} from '@github/remote-form'\nimport {afterRemote, beforeRemote, remoteForm} from '@github/remote-form'\nimport {findPersistedSubmitButtonValue, persistSubmitButtonValue} from '@github-ui/form-utils/remote-submit'\n// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\nimport verifySso from '../sso'\nimport {showGlobalError} from './ajax-error'\n\nfunction submitWithLegacyEvents(form: HTMLFormElement, send: Kicker, req: SimpleRequest) {\n  const dataType = form.getAttribute('data-type')\n  if (dataType === 'json') {\n    req.headers.set('Accept', 'application/json')\n  }\n\n  fire(form, 'deprecatedAjaxSend', {request: req})\n\n  send\n    .text()\n    /* eslint-disable-next-line github/no-then */\n    .catch(err => {\n      if (err.response) {\n        return err.response\n      } else {\n        throw err\n      }\n    })\n    /* eslint-disable-next-line github/no-then */\n    .then(\n      (response: SimpleResponse) => {\n        if (response.status < 300) {\n          fire(form, 'deprecatedAjaxSuccess')\n        } else {\n          fire(form, 'deprecatedAjaxError', {error: response.statusText, status: response.status, text: response.text})\n        }\n      },\n      err => {\n        fire(form, 'deprecatedAjaxError', {error: err.message, status: 0, text: null})\n      },\n    )\n    /* eslint-disable-next-line github/no-then */\n    .then(() => {\n      fire(form, 'deprecatedAjaxComplete')\n    })\n}\n\n// Persist submit button value for ALL forms, regardless of whether they are\n// ajax-enabled or not. The submit value is reset after either `deprecatedAjaxComplete`\n// has fired or `remoteForm` has finished processing.\non(\n  'click',\n  ['form button:not([type])', 'form button[type=submit]', 'form input[type=submit]'].join(', '),\n  function (event) {\n    const button = event.currentTarget as HTMLButtonElement | HTMLInputElement\n    const form = button.form\n    if (form && !event.defaultPrevented) {\n      persistSubmitButtonValue(button)\n    }\n  },\n)\n\nremoteForm('form[data-remote]', submitWithLegacyEvents)\n\n// Restore forms after AJAX submissions\non('deprecatedAjaxComplete', 'form', function ({currentTarget}) {\n  const el = findPersistedSubmitButtonValue(currentTarget as HTMLFormElement)\n  if (el) el.remove()\n})\n\nafterRemote(form => {\n  const button = findPersistedSubmitButtonValue(form)\n  if (button) button.remove()\n})\n\nbeforeRemote(verifySso)\n\non('click', '.js-remote-submit-button', async function (event) {\n  const button = event.currentTarget as HTMLButtonElement\n  const form = button.form as HTMLFormElement\n  event.preventDefault()\n  let response\n  try {\n    response = await fetch(form.action, {\n      method: form.method,\n      body: new FormData(form),\n      headers: {\n        Accept: 'application/json',\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n    })\n  } catch {\n    // Ignore network errors\n  }\n  if (response && !response.ok) {\n    showGlobalError()\n  }\n})\n","// Removed Contents behavior\n//\n// When \"has-removed-contents\" is added to an Element, its contents are\n// detached from the document and stored in memory. Once the class is removed,\n// the original contents are automatically reinserted into the document.\n//\n// WARNING: Adding new content to an Element while it has its contents detatch\n// has undefined behavior.\n//\n// This behavior is useful when working with form with multiple states. Using\n// d-none is only presentational and doesn't exclude the form fields from\n// being submitted or participating in validation requirements.\n\n// eslint-disable-next-line no-restricted-imports\nimport {fire} from 'delegated-events'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('.has-removed-contents', function () {\n  let contents: ChildNode[]\n  return {\n    add(parent) {\n      contents = Array.from(parent.childNodes)\n      for (const el of contents) {\n        parent.removeChild(el)\n      }\n      const form = parent.closest('form')\n      if (form) fire(form, 'change')\n    },\n    remove(parent) {\n      for (const el of contents) {\n        parent.appendChild(el)\n      }\n      const form = parent.closest('form')\n      if (form) fire(form, 'change')\n    },\n  }\n})\n","import {remoteForm} from '@github/remote-form'\n\nremoteForm('form[data-replace-remote-form]', async function (form, wants) {\n  form.classList.remove('is-error')\n  form.classList.add('is-loading')\n  try {\n    let target: Element = form\n\n    const response = await wants.html()\n    const container = form.closest('[data-replace-remote-form-target]')\n    if (container) {\n      const id = container.getAttribute('data-replace-remote-form-target')\n      target = id ? document.getElementById(id)! : container\n    }\n    target.replaceWith(response.html)\n  } catch (e) {\n    form.classList.remove('is-loading')\n    form.classList.add('is-error')\n  }\n})\n","import type MarkdownToolbarElement from '@github/markdown-toolbar-element'\nimport {dialog} from '@github-ui/details-dialog'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nconst selectionEnds = new WeakMap()\n\nfunction getTextarea(el: HTMLElement): HTMLTextAreaElement {\n  return el.closest<MarkdownToolbarElement>('markdown-toolbar')!.field!\n}\n\non('click', '.js-markdown-link-button', async function ({currentTarget}) {\n  const template = document.querySelector<HTMLTemplateElement>('.js-markdown-link-dialog')!\n  const content = template.content.cloneNode(true)\n  if (!(content instanceof DocumentFragment)) return\n\n  const dialogEl = await dialog({\n    content,\n    labelledBy: 'box-title',\n  })\n  if (!(currentTarget instanceof HTMLElement)) return\n  selectionEnds.set(dialogEl, getTextarea(currentTarget).selectionEnd)\n})\n\non('click', '.js-markdown-link-insert', ({currentTarget}) => {\n  const container = currentTarget.closest<HTMLElement>('details-dialog')!\n  const textarea = document.querySelector<HTMLTextAreaElement>(`#${currentTarget.getAttribute('data-for-textarea')!}`)!\n  const selectionEnd = selectionEnds.get(container) || 0\n\n  const href = container.querySelector<HTMLInputElement>('#js-dialog-link-href')!.value\n  const text = container.querySelector<HTMLInputElement>('#js-dialog-link-text')!.value\n  const link = `[${text}](${href}) `\n  const before = textarea.value.slice(0, selectionEnd)\n  const after = textarea.value.slice(selectionEnd)\n  textarea.value = before + link + after\n  textarea.focus()\n  textarea.selectionStart = textarea.selectionEnd = selectionEnd + link.length\n})\n","import {eventToHotkeyString} from '@github-ui/hotkey'\nimport {insertText} from '@github-ui/text'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {onKey} from '../onfocus'\nimport {ModalDialogElement} from '@primer/view-components/app/components/primer/alpha/modal_dialog'\nimport {ready} from '@github-ui/document-ready'\n\non(\n  'click',\n  '.js-saved-reply-menu.ActionListWrap',\n  function (event: Event) {\n    if (!(event.target instanceof Element)) return\n    const body = event.target\n      .closest<HTMLButtonElement>('button[role=\"menuitem\"]')\n      ?.querySelector('.js-saved-reply-body')\n\n    // Since this details-menu-select can hold options which arent saved\n    // replies, we guard to ensure that only saved replies are handled here.\n    if (!body) return\n\n    const text = (body.textContent || '').trim()\n    const container = event.target.closest<HTMLElement>('.js-previewable-comment-form')!\n\n    const comment = container.querySelector<HTMLTextAreaElement>('textarea.js-comment-field')!\n    insertText(comment, text)\n    event.target.closest('modal-dialog')?.close()\n    setTimeout(() => comment.focus(), 0)\n  },\n  {capture: true},\n)\n\non(\n  'details-menu-select',\n  '.js-saved-reply-menu',\n  function (event) {\n    if (!(event.target instanceof Element)) return\n\n    const body = event.detail.relatedTarget.querySelector('.js-saved-reply-body')\n\n    // Since this details-menu-select can hold options which arent saved\n    // replies, we guard to ensure that only saved replies are handled here.\n    if (!body) return\n\n    const text = (body.textContent || '').trim()\n    const container = event.target.closest<HTMLElement>('.js-previewable-comment-form')!\n\n    const comment = container.querySelector<HTMLTextAreaElement>('textarea.js-comment-field')!\n    insertText(comment, text)\n    setTimeout(() => comment.focus(), 0)\n  },\n  {capture: true},\n)\n\nonKey('keydown', '.js-saved-reply-shortcut-comment-field', function (event) {\n  if (eventToHotkeyString(event) === 'Control+.') {\n    const container = (event.target as Element).closest<HTMLElement>('.js-previewable-comment-form')!\n    const menu = container.querySelector<HTMLElement>('.js-saved-reply-container')!\n    if (menu instanceof ModalDialogElement) {\n      menu.show()\n    } else {\n      menu.setAttribute('open', '')\n    }\n    event.preventDefault()\n  }\n})\n\nonKey('keydown', '.js-saved-reply-filter-input', function (event: KeyboardEvent) {\n  // TODO: Refactor to use data-hotkey\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n  if (/^Control\\+[1-9]$/.test(eventToHotkeyString(event))) {\n    const container = (event.target as Element).closest<HTMLElement>('.js-saved-reply-container')!\n    const savedReplyNumber = Number(event.key)\n    const reply = container.querySelectorAll(`[role=\"menuitem\"][data-shortcut=\"${savedReplyNumber}\"]`)[0]\n    if (reply instanceof HTMLElement) {\n      reply.click()\n      event.preventDefault()\n    }\n  } else if (event.key === 'Enter') {\n    const container = (event.target as Element).closest<HTMLElement>('.js-saved-reply-container')!\n    const replies = container.querySelectorAll('[role=\"menuitem\"]')\n\n    if (replies.length > 0 && replies[0] instanceof HTMLButtonElement) {\n      replies[0].click()\n    }\n\n    event.preventDefault()\n  }\n  /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n})\n\n// ensure the filter text box receives focus after the <include-fragment> is done loading\n;(async () => {\n  await ready\n  const fragments = document.querySelectorAll('.js-saved-reply-include-fragment')\n\n  for (const fragment of fragments) {\n    // grab container before adding listener because the <include-fragment> is removed from\n    // the DOM before the load event is fired\n    const container = fragment.closest<HTMLElement>('.js-saved-reply-container')\n\n    // cannot use on() for this - the load handler is never called\n    fragment.addEventListener('load', () => {\n      if (container) {\n        const input = container.querySelector<HTMLElement>('.js-saved-reply-filter-input')\n        if (input) input.focus()\n      }\n    })\n  }\n})()\n","import type {BlobRange} from '../blob-anchor'\nimport {DOMRangeFromBlob} from '../blob-anchor'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {surroundContents} from '../range'\nimport {GetCharIndexFromBytePosition} from '@github-ui/text'\n\nfunction queryLineElement(snippet: Element, line: number) {\n  return snippet.querySelector(`#LC${line}`)\n}\n\nfunction highlightRange(blobRange: BlobRange, snippet: Element, adjustStart: boolean, adjustEnd: boolean) {\n  const range = DOMRangeFromBlob(blobRange, line => queryLineElement(snippet, line))\n  if (!range) return\n\n  if (adjustStart) {\n    const adjustedStart = GetCharIndexFromBytePosition(range.startContainer.textContent!, range.startOffset)\n    if (adjustedStart === -1) return\n    range.setStart(range.startContainer, adjustedStart)\n  }\n\n  if (adjustEnd) {\n    const adjustedEnd = GetCharIndexFromBytePosition(range.endContainer.textContent!, range.endOffset)\n    if (adjustedEnd === -1) return\n    range.setEnd(range.endContainer, adjustedEnd)\n  }\n\n  const span = document.createElement('span')\n  const highlightClasses = ['text-bold', 'hx_keyword-hl', 'rounded-2', 'd-inline-block']\n\n  span.classList.add(...highlightClasses)\n  surroundContents(range, span)\n}\n\nexport function highlightColumns(blobRange: BlobRange, snippet: Element) {\n  if (blobRange.start.line !== blobRange.end.line) {\n    // highlight first line, and adjust only the start as there may be Unicode characters\n    // preceding the start column\n    const startBlobRange = {\n      start: {line: blobRange.start.line, column: blobRange.start.column},\n      end: {line: blobRange.start.line, column: null},\n    }\n    highlightRange(startBlobRange, snippet, true, false)\n\n    for (let i = blobRange.start.line + 1; i < blobRange.end.line; i += 1) {\n      // highlight middle lines, and do not adjust anything since we're highlighting\n      // the whole line\n      const fullBlobRange = {\n        start: {line: i, column: 0},\n        end: {line: i, column: null},\n      }\n      highlightRange(fullBlobRange, snippet, false, false)\n    }\n\n    // highlight last line, and only adjust the end as there may be Unicode characters\n    // in the middle of the match\n    const endBlobRange = {\n      start: {line: blobRange.end.line, column: 0},\n      end: {line: blobRange.end.line, column: blobRange.end.column},\n    }\n    highlightRange(endBlobRange, snippet, false, true)\n  } else {\n    highlightRange(blobRange, snippet, true, true)\n  }\n}\n\nexport function parseColumnHighlightRange(snippet: Element): BlobRange | null {\n  const startLine = parseInt(snippet.getAttribute('data-start-line')!)\n  const endLine = parseInt(snippet.getAttribute('data-end-line')!)\n  const startColumn = parseInt(snippet.getAttribute('data-start-column')!)\n  // The end column is a special case, as 0 acts as a special value\n  const dataEndColumn = parseInt(snippet.getAttribute('data-end-column')!)\n\n  // Nothing to highlight if start and end lines and start and end cols are the\n  // same, as column ranges are half-open\n  if (startLine === endLine && startColumn === dataEndColumn) return null\n\n  // 0 here indicates that no end column was provided, so the highlight should\n  // continue to the end of the line.\n  // DOMRangeFromBlob will interpret null in a similar way to this.\n  const endColumn = dataEndColumn !== 0 ? dataEndColumn : null\n\n  return {\n    start: {line: startLine, column: startColumn},\n    end: {line: endLine, column: endColumn},\n  }\n}\n\nobserve('.js-highlight-code-snippet-columns', function (snippet: Element) {\n  const blobRange = parseColumnHighlightRange(snippet)\n  if (blobRange !== null) {\n    highlightColumns(blobRange, snippet)\n  }\n})\n","import {getStoredShelfParamsForCurrentPage, storeAndStripShelfParams} from './notification-shelf-referrer-params'\nimport IncludeFragmentElement from '@github/include-fragment-element'\nimport type {Kicker} from '@github/remote-form'\nimport {remoteForm} from '@github/remote-form'\nimport {updateNotificationStates} from './update-notification-states'\n\n// Perform an action and change the status of the notification shelf.\nexport async function remoteShelfActionForm() {\n  return remoteForm('.js-notification-shelf .js-notification-action form', async function (form, wants) {\n    const shouldRedirect = form.hasAttribute('data-redirect-to-inbox-on-submit')\n\n    if (shouldRedirect) {\n      await performRequest(wants)\n      const inboxButton = document.querySelector<HTMLAnchorElement>('.js-notifications-back-to-inbox')!\n\n      if (inboxButton) {\n        inboxButton.click()\n      }\n\n      return\n    }\n\n    updateNotificationStates(form, form)\n    await performRequest(wants)\n  })\n}\n\nexport function urlWithoutNotificationParameters() {\n  const searchParams = new URLSearchParams(window.location.search)\n  const cleanSearchParams = storeAndStripShelfParams(searchParams)\n\n  if (cleanSearchParams) {\n    const newUrl = new URL(window.location.href, window.location.origin)\n    newUrl.search = cleanSearchParams.toString()\n    return newUrl.toString()\n  }\n}\n\nexport function loadShelfFromStoredParams(includeFragmentEl: Element) {\n  if (!(includeFragmentEl instanceof IncludeFragmentElement)) {\n    return\n  }\n\n  const params = getStoredShelfParamsForCurrentPage()\n  if (!params) return\n\n  const baseUrl = includeFragmentEl.getAttribute('data-base-src')\n  if (!baseUrl) return\n\n  const shelfURL = new URL(baseUrl, window.location.origin)\n  const searchParams = new URLSearchParams(shelfURL.search)\n\n  for (const [key, value] of Object.entries(params)) {\n    if (typeof value === 'string') searchParams.set(key, value)\n  }\n  shelfURL.search = searchParams.toString()\n  includeFragmentEl.setAttribute('src', shelfURL.toString())\n}\n\n// Submits an AJAX request, but ignores any errors.\nasync function performRequest(wants: Kicker) {\n  try {\n    await wants.text()\n  } catch (error) {\n    // TODO show error message\n  }\n}\n","import {\n  loadShelfFromStoredParams,\n  remoteShelfActionForm,\n  urlWithoutNotificationParameters,\n} from './../notifications/v2/notification-shelf-helpers'\nimport {getStoredShelfParamsForCurrentPage} from './../notifications/v2/notification-shelf-referrer-params'\nimport {loaded} from '@github-ui/document-ready'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {replaceState} from '../history'\nimport {requestSubmit} from '@github-ui/form-utils'\nimport {SOFT_NAV_STATE} from '@github-ui/soft-nav'\n\nremoteShelfActionForm()\n\n// Remove the notification_referrer_id parameter from the url on page load and on Turbo loads\nfunction removeNotificationParams() {\n  const newUrl = urlWithoutNotificationParameters()\n  if (newUrl) replaceState(null, '', newUrl)\n}\nremoveNotificationParams()\ndocument.addEventListener(SOFT_NAV_STATE.SUCCESS, removeNotificationParams)\n\n// pass the notifications params through turbo requests so we properly show the shelf\ndocument.addEventListener('turbo:before-fetch-request', function (event) {\n  const params = getStoredShelfParamsForCurrentPage(event.detail.url.pathname)\n\n  if (params) {\n    const newParams = new URLSearchParams(event.detail.url.search)\n    for (const [key, value] of Object.entries<string>(params)) {\n      if (value) {\n        newParams.set(key, value)\n      }\n    }\n    event.detail.url.search = newParams.toString()\n  }\n})\n\nobserve('.js-notification-shelf-include-fragment', loadShelfFromStoredParams)\n\non('submit', '.js-mark-notification-form', async function (event) {\n  const form = event.currentTarget as HTMLFormElement\n  event.preventDefault()\n  try {\n    await fetch(form.action, {\n      method: form.method,\n      body: new FormData(form),\n      headers: {\n        Accept: 'application/json',\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n    })\n  } catch {\n    // Ignore network errors\n  }\n})\n\n// mark related notification as read\nasync function markNotificationAsRead() {\n  await loaded\n\n  const form = document.querySelector('.js-mark-notification-form')\n  if (form instanceof HTMLFormElement) {\n    requestSubmit(form)\n  }\n}\n\ndocument.addEventListener(SOFT_NAV_STATE.SUCCESS, markNotificationAsRead)\nmarkNotificationAsRead()\n","import {onFocus, onKey} from '../onfocus'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {install, uninstall} from '@github-ui/hotkey'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nconst MD_BREAKPOINT = 768\n\nfunction isJumpToAvailable(field: Element): boolean {\n  return !!field.closest('.js-jump-to-field')\n}\n\nfunction toggleSearchScope(field: HTMLElement, enabled: boolean) {\n  // We don't want legacy search behaviour of changing scope on backspace when using Jump To.\n  if (isJumpToAvailable(field)) {\n    return\n  }\n  const form = document.querySelector<HTMLFormElement>('.js-site-search-form')!\n  document.querySelector<HTMLElement>('.js-site-search')!.classList.toggle('scoped-search', enabled)\n\n  let url\n  let placeholder\n  if (enabled) {\n    url = form.getAttribute('data-scoped-search-url')!\n    placeholder = field.getAttribute('data-scoped-placeholder')!\n  } else {\n    url = form.getAttribute('data-unscoped-search-url')!\n    placeholder = field.getAttribute('data-unscoped-placeholder')!\n  }\n\n  form.setAttribute('action', url)\n  field.setAttribute('placeholder', placeholder)\n}\n\nfunction toggleSearchInputHotkey(element: HTMLElement, isRegularSearchInput: boolean) {\n  if (window.innerWidth < MD_BREAKPOINT) {\n    isRegularSearchInput ? uninstall(element) : install(element)\n  } else if (window.innerWidth >= MD_BREAKPOINT) {\n    isRegularSearchInput ? install(element) : uninstall(element)\n  }\n}\n\nonKey('keyup', '.js-site-search-field', function (event: KeyboardEvent) {\n  // TODO: Refactor to use data-hotkey\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n  const field = event.target as HTMLInputElement\n\n  const emptyQuery = field.value.length === 0\n  if (emptyQuery && event.key === 'Backspace' && field.classList.contains('is-clearable')) {\n    toggleSearchScope(field, false)\n  }\n  if (emptyQuery && event.key === 'Escape') {\n    toggleSearchScope(field, true)\n  }\n  field.classList.toggle('is-clearable', emptyQuery)\n  /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n})\n\nonFocus('.js-site-search-focus', function (field) {\n  const container = field.closest<HTMLElement>('.js-chromeless-input-container')!\n  container.classList.add('focus')\n\n  // Restore scope on blur\n  function blurHandler() {\n    container.classList.remove('focus')\n    if ((field as HTMLInputElement).value.length === 0 && field.classList.contains('js-site-search-field')) {\n      toggleSearchScope(field, true)\n    }\n    field.removeEventListener('blur', blurHandler)\n  }\n\n  field.addEventListener('blur', blurHandler)\n})\n\non('submit', '.js-site-search-form', function (event) {\n  if (!(event.target instanceof Element)) return\n  const input = event.target.querySelector<HTMLInputElement>('.js-site-search-type-field')!\n  input.value = new URLSearchParams(window.location.search).get('type') || ''\n})\n\nconst observer = new ResizeObserver(entries => {\n  for (const {target} of entries) {\n    const isRegularSearchInput = target.classList.contains('regular-search-input')\n    if (target.classList.contains('sm-search-input') || isRegularSearchInput) {\n      toggleSearchInputHotkey(target as HTMLElement, isRegularSearchInput)\n    }\n  }\n})\n\n// install/uninstall hotkeys on regular search input when screen size reaches medium breakpoint\nobserve('.regular-search-input', {\n  constructor: HTMLElement,\n  add(element) {\n    observer.observe(element)\n  },\n  remove(element) {\n    uninstall(element)\n    observer.unobserve(element)\n  },\n})\n\n// install/uninstall hotkeys on search input in collapsed menu when screen size reaches medium breakpoint\nobserve('.sm-search-input', {\n  constructor: HTMLElement,\n  add(element) {\n    observer.observe(element)\n  },\n  remove(element) {\n    uninstall(element)\n    observer.unobserve(element)\n  },\n})\n\non('click', '.js-toggle-appheader-search', function () {\n  const searchBar = document.querySelector<HTMLElement>('.js-global-bar-second-row')!\n\n  if (searchBar) {\n    searchBar.toggleAttribute('hidden')\n\n    if (!searchBar.getAttribute('hidden')) {\n      const searchInput = searchBar.querySelector<HTMLInputElement>('.js-site-search-focus')!\n\n      if (searchInput) {\n        searchInput.focus()\n      }\n    }\n  }\n})\n","// Size to Fit textarea behavior\n//\n// Auto sizes any textareas marked with `.js-size-to-fit` to its text\n// contents height.\n\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport subscribe from '@github/textarea-autosize'\n\nobserve('textarea.js-size-to-fit', {\n  constructor: HTMLTextAreaElement,\n  subscribe,\n})\n","/**\n * Smooth scrolling anchor.\n *\n * Have an in-page anchor link and want the page to smoothly scroll to its destination? Look no further.\n *\n * Apply the `.js-smoothscroll-anchor` on the anchor tag to trigger smooth scrolling.\n *\n * This will override the default behavior of jumping the page to the element targeted by the hash in the `href`\n * and instead smoothly scroll to it. No additional CSS is required.\n *\n * @deprecated Replace this behavior with `scroll-behavior: smooth;`\n *   https://developer.mozilla.org/en-US/docs/Web/CSS/scroll-behavior.\n *\n * @example\n * ```html\n * <a href=\"#some-id\" class=\"js-smoothscroll-anchor\">Scroll to #some-id</a>\n * <div id=\"some-id\" style=\"margin-top: 300px;\">\n *   <h3>Scroll to me</h3>\n * </div>\n * ```\n */\n\nimport {findFragmentTarget} from '../fragment-target'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\non('click', '.js-smoothscroll-anchor', function (event) {\n  const anchor = event.currentTarget\n  if (!(anchor instanceof HTMLAnchorElement)) return\n\n  const target = findFragmentTarget(document, anchor.hash)\n  if (!target && anchor.hash === '#top') {\n    // When navigating to the top of the page, reset the URL hash to clear `:target`\n    // pseudo-classes on page elements, then smooth scroll to the top of the page.\n    const top = document.querySelector('html')\n    if (top) {\n      const originalScroll = top.style.scrollBehavior\n      top.style.scrollBehavior = 'smooth'\n      window.location.hash = ''\n      top.scrollIntoView({behavior: 'smooth'})\n      top.style.scrollBehavior = originalScroll\n      event.preventDefault()\n      return\n    }\n  }\n  if (!target) return\n  ;(target as HTMLElement).focus()\n\n  const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)')\n\n  if (prefersReducedMotion && prefersReducedMotion.matches) {\n    target.scrollIntoView()\n  } else {\n    target.scrollIntoView({behavior: 'smooth'})\n  }\n\n  event.preventDefault()\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nconst hiddenTimePeriodOnScrollInMs = 1000\n\nconst abortControllers = new WeakMap()\n\nconst snippetClipboardCopyTemplate = document.querySelector<HTMLTemplateElement>('#snippet-clipboard-copy-button')\nconst snippetClipboardCopyTemplateUnpositioned = document.querySelector<HTMLTemplateElement>(\n  '#snippet-clipboard-copy-button-unpositioned',\n)\n\nasync function insertSnippetClipboardCopyButton(el: HTMLElement, signal: AbortSignal): Promise<void> {\n  const clipboardContent = el.getAttribute('data-snippet-clipboard-copy-content')\n  if (clipboardContent === null) return\n\n  // Remove this attribute so that we don't add a second button.\n  el.removeAttribute('data-snippet-clipboard-copy-content')\n\n  const useUnpositioned = !!el.closest('.js-snippet-clipboard-copy-unpositioned')\n  const template = useUnpositioned ? snippetClipboardCopyTemplateUnpositioned : snippetClipboardCopyTemplate\n\n  if (!(template instanceof HTMLTemplateElement)) return\n\n  const documentFragment = template.content.cloneNode(true) as DocumentFragment\n\n  const clonedZeroClipboardContainer = documentFragment.children[0]\n  if (!(clonedZeroClipboardContainer instanceof HTMLElement)) return\n\n  const clipboardCopyElement = clonedZeroClipboardContainer.children[0]\n  if (!(clipboardCopyElement instanceof HTMLElement)) return\n\n  clipboardCopyElement.setAttribute('value', clipboardContent)\n\n  if (!useUnpositioned) {\n    document.addEventListener(\n      'selectionchange',\n      () => {\n        const selection = document.getSelection()\n        if (selection && el.contains(selection.anchorNode)) {\n          const selectedText = selection?.toString()\n          clipboardCopyElement.style.display = selectedText.trim() === '' ? 'inherit' : 'none'\n        }\n      },\n      {signal},\n    )\n\n    const scrollableElement = el.querySelector('pre')\n    if (scrollableElement !== null) {\n      let timer: ReturnType<typeof setTimeout> | undefined\n\n      /* eslint-disable-next-line github/prefer-observers */\n      scrollableElement.addEventListener(\n        'scroll',\n        () => {\n          if (timer) clearTimeout(timer)\n\n          clipboardCopyElement.style.display = 'none'\n          timer = setTimeout(() => {\n            clipboardCopyElement.style.display = 'inherit'\n          }, hiddenTimePeriodOnScrollInMs)\n        },\n        {signal},\n      )\n    }\n  }\n\n  el.appendChild(clonedZeroClipboardContainer)\n}\n\nobserve('[data-snippet-clipboard-copy-content]', {\n  constructor: HTMLElement,\n  add(el) {\n    const abortController = new AbortController()\n    abortControllers.set(el, abortController)\n\n    insertSnippetClipboardCopyButton(el, abortController.signal)\n  },\n})\n\nobserve('.snippet-clipboard-content clipboard-copy', {\n  constructor: HTMLElement,\n  remove(el) {\n    const controller = abortControllers.get(el)\n    if (controller) {\n      controller.abort()\n    }\n  },\n})\n","// Social Buttons\n//\n// Behavior for the Watch, Fork, and Star buttons within repo nav.\n//\n// Expects the JSON response to a .js-social-form XHR request to be in this format:\n//\n// On success:\n//\n// { \"count\": \"1,234\" }\n//\n// Count is formatted with delimiters. The social count in any .js-social child of .js-social-container will be updated\n// to the new value.\n//\n// If the form is annotated with the .js-deferred-toggler-target class, the .js-toggler container will have its state\n// toggled after the successful response has arrived (and not optimistically as .js-toggler-target behaves).\n//\n// Any .js-social-updatable child of .js-social-container with a data-url will also be re-fetched and updated with new\n// content.\n//\n// The container will look for the first visible child\n// and place the focus on its submit button.\n//\n// Failure cases:\n//\n// 409 Conflict - indicates that the user needs to confirm the social action in a dialog.\n//\n// {\n//   \"confirmationDialog\": {\n//     \"templateSelector\": \"[CSS selector to find DOM element containing <template> for dialog contents]\",\n//     \"inputs\": { \"arbitraryTemplateParts\": \"...\" }\n//   }\n// }\n//\n// Any other 4xx or 5xx error will result in a generic global error being shown.\n\nimport type {SimpleResponse} from '@github/remote-form'\nimport {TemplateInstance} from '@github/template-parts'\nimport {dialog} from '@github-ui/details-dialog'\n// eslint-disable-next-line no-restricted-imports\nimport {fire} from 'delegated-events'\nimport {remoteForm} from '@github/remote-form'\nimport {showGlobalError} from './ajax-error'\nimport {updateContent} from '../updatable-content'\n\nfunction handleSocialResponse(\n  container: HTMLElement,\n  newCount: string,\n  isDeferredTogglerTarget: boolean,\n): Promise<void[]> {\n  updateSocialCounts(container, newCount)\n  if (isDeferredTogglerTarget) container.classList.toggle('on')\n\n  const updatePromises = Array.from(container.querySelectorAll<HTMLElement>('.js-social-updatable'), updateContent)\n  return Promise.all(updatePromises)\n}\n\nfunction replaceIncomingFocus(container: HTMLElement) {\n  let focusOn\n  const children = container.querySelectorAll(':scope > *')\n  for (const el of children) {\n    if (el.checkVisibility()) {\n      focusOn = el.querySelector('button[type=\"submit\"]') as HTMLElement\n    }\n  }\n  focusOn?.focus()\n}\n\nremoteForm('.js-social-form', async function (form, wants) {\n  let response: SimpleResponse\n  const container = form.closest<HTMLElement>('.js-social-container')\n  const isDeferredTogglerTarget = form.classList.contains('js-deferred-toggler-target')\n\n  try {\n    response = await wants.json()\n\n    if (container) {\n      await handleSocialResponse(container, response.json.count, isDeferredTogglerTarget)\n      replaceIncomingFocus(container)\n\n      container.dispatchEvent(new CustomEvent('social:success', {detail: response, bubbles: true}))\n    }\n  } catch (e) {\n    // 409 Conflict: the user needs to accept a confirmation dialog. Find its template and trigger it.\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    if (e.response?.status === 409 && e.response.json.confirmationDialog) {\n      // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n      const dialogPayload = e.response.json.confirmationDialog\n      const confirmationDialogTemplate = document.querySelector<HTMLTemplateElement>(dialogPayload.templateSelector)\n      const confirmCsrfToken = form.querySelector<HTMLInputElement>('.js-confirm-csrf-token')?.value\n\n      if (confirmationDialogTemplate instanceof HTMLTemplateElement && confirmCsrfToken) {\n        const content = new TemplateInstance(confirmationDialogTemplate, {\n          confirmUrl: form.action,\n          confirmCsrfToken,\n          ...(dialogPayload.inputs || {}),\n        })\n        const dialogElement = await dialog({content})\n\n        dialogElement.addEventListener('social-confirmation-form:success', async event => {\n          if (!(event instanceof CustomEvent)) return\n          if (container) await handleSocialResponse(container, event.detail.count, isDeferredTogglerTarget)\n        })\n\n        dialogElement.addEventListener('social-confirmation-form:error', () => {\n          showGlobalError()\n        })\n      }\n    } else {\n      // If the social form is also a toggler, but *not* a deferred one, it was optimistically toggled on click. Because\n      // the action failed, we need to toggle it back off here so it won't be in an incorrect state.\n      if (container && !isDeferredTogglerTarget) container.classList.toggle('on')\n\n      showGlobalError()\n    }\n  }\n})\n\nremoteForm('.js-social-confirmation-form', async function (form, wants) {\n  try {\n    const response = await wants.json()\n    fire(form, 'social-confirmation-form:success', response.json)\n  } catch {\n    fire(form, 'social-confirmation-form:error')\n  }\n})\n\nexport function updateSocialCounts(container: HTMLElement, newCount: string) {\n  for (const count of container.querySelectorAll('.js-social-count')) {\n    count.textContent = newCount\n    count.setAttribute('title', newCount)\n\n    const singularSuffix = count.getAttribute('data-singular-suffix')\n    const pluralSuffix = count.getAttribute('data-plural-suffix')\n    const suffix = newCount === '1' ? singularSuffix : pluralSuffix\n\n    if (suffix) {\n      count.setAttribute('aria-label', `${newCount} ${suffix}`)\n    }\n  }\n}\n","import {getSession, type Dispatchable} from '@github-ui/alive'\nimport type {Metadata, MetadataUpdate, Subscription} from '@github/alive-client'\nimport {IDLE_METADATA_KEY, Topic, isPresenceChannel} from '@github/alive-client'\nimport {compose, fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {taskQueue} from '@github-ui/eventloop-tasks'\nimport {addIdleStateListener} from '../alive/idle-state'\n\nfunction isPresent(value: Topic | null): value is Topic {\n  return value != null\n}\n\nfunction subscriptions(el: Element): Array<Subscription<Dispatchable>> {\n  return channels(el).map((topic: Topic) => ({subscriber: el, topic}))\n}\n\nfunction channels(el: Element): Topic[] {\n  const names = (el.getAttribute('data-channel') || '').trim().split(/\\s+/)\n  return names.map(Topic.parse).filter(isPresent)\n}\n\nasync function watchSocketChannels() {\n  const session = await getSession()\n\n  if (!session) {\n    return\n  }\n\n  type Subs = Array<Subscription<Dispatchable>>\n  const queueSubscribe = taskQueue<Subs>(subs => session.subscribe(subs.flat()))\n  const queueUnsubscribe = taskQueue<Dispatchable>(els => session.unsubscribeAll(...els))\n  const queueMetadata = taskQueue<MetadataUpdate<Dispatchable>>(updates => session.updatePresenceMetadata(updates))\n\n  observe('.js-socket-channel[data-channel]', {\n    subscribe: el => {\n      const elementSubscriptions = subscriptions(el)\n      const presenceChannels = elementSubscriptions\n        .map(subscription => subscription.topic.name)\n        .filter(channelName => isPresenceChannel(channelName))\n\n      let listenerSubscription = {\n        unsubscribe() {\n          // nothing to clean up by default.  This will be overridden if there are presence channels\n        },\n      }\n\n      if (presenceChannels.length) {\n        let latestMetadata: Metadata | undefined = undefined\n        let latestIdle: boolean | undefined\n        const queueMetadataOrIdleChange = () => {\n          const metadata: Metadata[] = []\n\n          // combine metadata and idle values\n          if (latestMetadata) {\n            metadata.push(latestMetadata)\n          }\n          if (latestIdle !== undefined) {\n            metadata.push({[IDLE_METADATA_KEY]: latestIdle ? 1 : 0})\n          }\n\n          // Send the metadata to all presence channels on this element\n          for (const channelName of presenceChannels) {\n            queueMetadata({subscriber: el, channelName, metadata})\n          }\n        }\n\n        listenerSubscription = compose(\n          // listen for metadata updates emitted on the element\n          fromEvent(el, 'socket:set-presence-metadata', (e: Event) => {\n            const {detail} = e as CustomEvent\n            latestMetadata = detail\n            queueMetadataOrIdleChange()\n          }),\n          // listen for idle changes, which will cause us to send a metadata update\n          addIdleStateListener(idle => {\n            latestIdle = idle\n            queueMetadataOrIdleChange()\n          }),\n        )\n      }\n\n      // Process normal subscriptions after setting up metadata listeners\n      // This needs to come second so that idle state is ready when we subscribe\n      queueSubscribe(elementSubscriptions)\n\n      return listenerSubscription\n    },\n    remove: el => queueUnsubscribe(el),\n  })\n}\n\nwatchSocketChannels()\n","// Detects signout/signin events via `flash[:stale_session_signedin]` and\n// notifies other browser tabs so that they can:\n//\n// 1. display the \"You signed out in another tab\" banner; and\n// 2. disable pjaxing and form submission.\n//\n// On browsers that don't support BroadcastChannel, the `logged-in`\n// localStorage key is used to send messages between tabs.\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nfunction sessionChanged(reason: string) {\n  const flash = document.querySelector<HTMLElement>('.js-stale-session-flash')!\n  const flashSignedIn = flash.querySelector<HTMLElement>('.js-stale-session-flash-signed-in')!\n  const flashSignedOut = flash.querySelector<HTMLElement>('.js-stale-session-flash-signed-out')!\n  const flashSwitched = flash.querySelector<HTMLElement>('.js-stale-session-flash-switched')!\n\n  flash.hidden = false\n  flashSignedIn.hidden = reason !== 'SIGNED_IN'\n  flashSignedOut.hidden = reason !== 'SIGNED_OUT'\n  flashSwitched.hidden = !reason?.startsWith('SWITCHED')\n\n  if (reason?.startsWith('SWITCHED:')) {\n    const switchedDetail = reason.split(':')\n    if (switchedDetail.length === 3) {\n      const from = switchedDetail[1]\n      const to = switchedDetail[2]\n      const originalUserId = flashSwitched.getAttribute('data-original-user-id')\n      if (originalUserId && originalUserId === to) {\n        flash.hidden = true\n        flashSwitched.hidden = true\n        flashSwitched.removeAttribute('data-original-user-id')\n      } else if (!originalUserId) {\n        flashSwitched.setAttribute('data-original-user-id', from || '')\n      }\n    }\n  }\n\n  window.addEventListener('popstate', function (event: PopStateEvent) {\n    if (event.state && event.state.container != null) {\n      location.reload()\n    }\n  })\n\n  document.addEventListener('submit', function (event: Event) {\n    event.preventDefault()\n  })\n}\n\nlet bc: Pick<BroadcastChannel, 'postMessage' | 'onmessage'> | null = null\nif (typeof BroadcastChannel === 'function') {\n  try {\n    bc = new BroadcastChannel('stale-session')\n    bc.onmessage = event => {\n      if (typeof event.data === 'string') sessionChanged(event.data)\n    }\n  } catch {\n    // ignore\n  }\n}\nif (!bc) {\n  let postingMessage = false\n\n  bc = {\n    postMessage(message: string) {\n      postingMessage = true\n      try {\n        window.localStorage.setItem('logged-in', message)\n      } finally {\n        postingMessage = false\n      }\n    },\n    onmessage: null,\n  }\n\n  window.addEventListener('storage', function (event) {\n    /* eslint eslint-comments/no-use: off */\n    /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n    if (!postingMessage && event.storageArea === window.localStorage && event.key === 'logged-in') {\n      try {\n        if (\n          event.newValue === 'SIGNED_IN' ||\n          event.newValue === 'SIGNED_OUT' ||\n          event.newValue?.startsWith('SWITCHED')\n        ) {\n          sessionChanged(event.newValue)\n        }\n      } finally {\n        window.localStorage.removeItem(event.key)\n      }\n    }\n    /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n  })\n}\n\nconst element = document.querySelector('.js-stale-session-flash[data-signedin]')\nif (element) {\n  const value = element.getAttribute('data-signedin') || ''\n  bc?.postMessage(value)\n}\n\nconst broadcastMsgOnSignOut = () => {\n  bc?.postMessage('false')\n}\n\nobserve('.js-loggout-form', function (el: Element) {\n  el.addEventListener('submit', broadcastMsgOnSignOut)\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {requestSubmit} from '@github-ui/form-utils'\n\nobserve('form.js-auto-replay-enforced-sso-request', {\n  constructor: HTMLFormElement,\n  initialize(el) {\n    requestSubmit(el)\n  },\n})\n","import {fetchSafeDocumentFragment} from '@github-ui/fetch-utils'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport verifySsoSession from '../sso'\n\nfunction updateStatusPosition(container: Element, menu: HTMLElement, details: Element) {\n  const containerHeight = container.getBoundingClientRect().height\n  const menuRect = menu.getBoundingClientRect()\n  const iconRect = details.getBoundingClientRect()\n  let top = iconRect.top\n  // Ensure popover stays off the bottom of the page by at least 10 pixels\n  if (top + menuRect.height + 10 >= containerHeight) {\n    top = Math.max(containerHeight - menuRect.height - 10, 0)\n  }\n  let left = iconRect.right\n  // Show popover to the left\n  if (details.closest('.js-build-status-to-the-left') != null) {\n    left = Math.max(iconRect.left - menuRect.width - 10, 0)\n  }\n  menu.style.top = `${top}px`\n  menu.style.left = `${left}px`\n  menu.style.right = 'auto'\n}\n\non(\n  'toggle',\n  '.js-build-status .js-dropdown-details',\n  function (event) {\n    const details = event.currentTarget\n    const menu = details.querySelector<HTMLElement>('.js-status-dropdown-menu')\n    if (!menu) return\n\n    function closeOnToggle() {\n      if (!details.hasAttribute('open')) closeStatusPopover()\n    }\n\n    function closeOnScroll(scrollEvent: Event) {\n      if (!menu!.contains(scrollEvent.target as Element)) closeStatusPopover()\n    }\n\n    function closeStatusPopover() {\n      details.removeAttribute('open')\n      /* eslint-disable-next-line github/no-d-none */\n      menu!.classList.add('d-none')\n      details.appendChild(menu!)\n      details.removeEventListener('toggle', closeOnToggle)\n      window.removeEventListener('scroll', closeOnScroll)\n    }\n\n    details.addEventListener('toggle', closeOnToggle)\n\n    if (menu.classList.contains('js-close-menu-on-scroll')) {\n      /* eslint-disable-next-line github/prefer-observers */\n      window.addEventListener('scroll', closeOnScroll, {capture: true})\n    }\n\n    /* eslint-disable-next-line github/no-d-none */\n    menu.classList.remove('d-none')\n    menu.querySelector<HTMLElement>('.js-details-container')!.classList.add('open')\n    if (menu.classList.contains('js-append-menu-to-body')) {\n      // Move menu to body so it can overlay on top of other elements\n      document.body.appendChild(menu)\n      updateStatusPosition(document.body, menu, details)\n    }\n  },\n  {capture: true},\n)\n\nasync function loadStatus(el: Element) {\n  const details = el.querySelector('.js-dropdown-details')\n  const menu = el.querySelector('.js-status-dropdown-menu') || el.closest('.js-status-dropdown-menu')\n\n  if (!(menu instanceof HTMLElement)) {\n    // Status does not have an associated dropdown menu\n    return\n  }\n\n  const loader = menu.querySelector('.js-status-loader')\n  if (!loader) {\n    return\n  }\n\n  const loadingArea = menu.querySelector<HTMLElement>('.js-status-loading')!\n  const errorArea = menu.querySelector<HTMLElement>('.js-status-error')!\n\n  const url = loader.getAttribute('data-contents-url')!\n\n  /* eslint-disable-next-line github/no-d-none */\n  loadingArea.classList.remove('d-none')\n  /* eslint-disable-next-line github/no-d-none */\n  errorArea.classList.add('d-none')\n\n  let html\n  try {\n    await verifySsoSession()\n    html = await fetchSafeDocumentFragment(document, url)\n  } catch (error) {\n    /* eslint-disable-next-line github/no-d-none */\n    loadingArea.classList.add('d-none')\n    /* eslint-disable-next-line github/no-d-none */\n    errorArea.classList.remove('d-none')\n  }\n\n  if (html) {\n    loader.replaceWith(html)\n    menu.querySelector<HTMLElement>('.js-details-container')!.classList.add('open')\n    if (details && menu.classList.contains('js-append-menu-to-body')) {\n      updateStatusPosition(document.body, menu, details)\n    }\n  }\n}\n\non('click', '.js-status-retry', ({currentTarget}) => {\n  loadStatus(currentTarget)\n})\n\nfunction onMouseEnter(event: Event) {\n  const currentTarget = event.currentTarget as Element\n  loadStatus(currentTarget)\n}\n\nobserve('.js-build-status', {\n  add(el) {\n    el.addEventListener('mouseenter', onMouseEnter, {once: true})\n  },\n  remove(el) {\n    el.removeEventListener('mouseenter', onMouseEnter)\n  },\n})\n","import {fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on, fire} from 'delegated-events'\nimport {requestSubmit} from '@github-ui/form-utils'\nimport sudo from '@github-ui/sudo'\n\non('click', 'button[data-sudo-required], summary[data-sudo-required]', checkSudo)\nobserve('form[data-sudo-required]', {\n  constructor: HTMLFormElement,\n  subscribe: form => fromEvent(form, 'submit', checkSudo),\n})\n\nasync function checkSudo(event: Event) {\n  const currentTarget = event.currentTarget\n  if (!(currentTarget instanceof HTMLElement)) return\n  const sudoRequired = currentTarget.getAttribute('data-sudo-required')\n  if (sudoRequired === 'false') return\n\n  event.stopPropagation()\n  event.preventDefault()\n\n  const sudoPassed = await sudo(currentTarget)\n\n  if (sudoPassed) {\n    currentTarget.removeAttribute('data-sudo-required')\n    if (currentTarget instanceof HTMLFormElement) {\n      requestSubmit(currentTarget)\n    } else {\n      currentTarget.click()\n    }\n  } else {\n    // revert the disable-with state for the button which required sudo to handle case where sudo dialog is canceled and button was still disabled.\n    const form = currentTarget.closest('form')\n    if (form) {\n      fire(form, 'deprecatedAjaxComplete')\n    }\n  }\n}\n","import {compose, fromEvent} from '@github-ui/subscription'\nimport {compare} from '../../fuzzy-filter'\nimport {fetchSafeDocumentFragment} from '@github-ui/fetch-utils'\nimport {filterSort} from '../../filter-sort'\nimport memoize from '@github/memoize'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nfunction getValue(el: Element): string | undefined | null {\n  if (el.hasAttribute('data-use-colon-emoji')) {\n    return el.getAttribute('data-value')\n  }\n\n  const emojiEl = el.firstElementChild\n  if (emojiEl && 'G-EMOJI' === emojiEl.tagName && !emojiEl.firstElementChild) {\n    return emojiEl.textContent\n  } else {\n    return el.getAttribute('data-value')\n  }\n}\n\nfunction search(items: Element[], searchQuery: string): Element[] {\n  const query = ` ${searchQuery.toLowerCase().replace(/_/g, ' ')}`\n  const key = (item: Element) => {\n    const text = item.getAttribute('data-emoji-name')!\n    const score = emojiScore(emojiText(item), query)\n    return score > 0 ? {score, text} : null\n  }\n  return filterSort(items, key, compare)\n}\n\nfunction emojiText(item: Element): string {\n  const aliases = item.getAttribute('data-text')!.trim().toLowerCase().replace(/_/g, ' ')\n  return ` ${aliases}`\n}\n\nfunction emojiScore(aliases: string, query: string): number {\n  const score = aliases.indexOf(query)\n  return score > -1 ? 1000 - score : 0\n}\n\nobserve('text-expander[data-emoji-url]', {\n  subscribe: el =>\n    compose(\n      fromEvent(el, 'text-expander-change', onchange),\n      fromEvent(el, 'text-expander-value', onvalue),\n      fromEvent(el, 'text-expander-activate', onactivate),\n    ),\n})\n\nfunction onvalue(event: Event) {\n  const detail = (event as CustomEvent).detail\n  if (detail.key !== ':') return\n  detail.value = getValue(detail.item)\n}\n\nfunction onchange(event: Event) {\n  const {key, provide, text} = (event as CustomEvent).detail\n  if (key !== ':') return\n  const menu = event.target as Element\n  const url = menu.getAttribute('data-emoji-url')!\n  provide(emojiMenu(url, text))\n}\n\nfunction onactivate(event: Event) {\n  const expander = event.target as Element\n  const popover = expander.querySelector<HTMLElement>('.emoji-suggestions[popover]')\n  if (popover) popover.showPopover()\n}\n\nasync function emojiMenu(url: string, query: string): Promise<{fragment: HTMLElement; matched: boolean}> {\n  const [list, children] = await cachedEmoji(url)\n  const results = search(children, query).slice(0, 5)\n  list.textContent = ''\n  for (const el of results) list.append(el)\n  return {fragment: list, matched: results.length > 0}\n}\n\nasync function fetchEmoji(url: string): Promise<[HTMLElement, Element[]]> {\n  const fragment = await fetchSafeDocumentFragment(document, url)\n  const root = fragment.firstElementChild as HTMLElement\n  return [root, [...root.children]]\n}\nconst cachedEmoji = memoize(fetchEmoji)\n","import {compare, fuzzyScore} from '../../fuzzy-filter'\nimport {compose, fromEvent} from '@github-ui/subscription'\nimport {html, render, unsafeHTML} from '@github-ui/jtml-shimmed'\n\nimport type TextExpanderElement from '@github/text-expander-element'\nimport {filterSort} from '../../filter-sort'\nimport memoize from '@github/memoize'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {parseHTML} from '@github-ui/parse-html'\nimport {isFeatureEnabled} from '@github-ui/feature-flags'\n\n// Structure of the JSON data returned by the suggester endpoint.\ninterface Data {\n  suggestions: SuggestionData[]\n  icons: Icons\n}\n\n// Limited subset of the JSON Data returned by the suggester that matches a user's current query prefix.\ninterface SearchResults {\n  matches: SuggestionData[]\n  icons: Icons\n}\n\ninterface SuggestionData {\n  id: number\n  number: number\n  title: string\n  type: string\n}\n\ninterface Icons {\n  [key: string]: string\n}\n\n// Maximum number of results in the intial batch of results fetched by cachedJSON. If there are exactly this many\n// results for the suggester, then the repository almost certainly has more that are not included. This should be\n// kept in sync with:\n// - `SUGGESTION_LIMIT` constant in packages/collaboration/app/models/suggester/repository_suggester.rb\n// - `SUGGESTION_LIMIT` in packages/issues/app/models/issue.rb\n// - `SUGGESTION_LIMIT` in packages/discussions/app/models/discussion.rb\nconst REFINED_QUERY_THRESHOLD = 1000\n\n// The minimum number of characters required to trigger a follow-up \"refined\" query.\nconst REFINED_QUERY_PREFIX_SIZE = 3\n\n// The number of previous \"refined\" query results to cache.\nconst REFINED_QUERY_CACHE_SIZE = 5\n\n// The maximum number of suggester results to display at once.\nconst SEARCH_RESULTS_MAX = 5\n\nfunction asText(item: SuggestionData): string {\n  return `${item.number} ${item.title.trim().toLowerCase()}`\n}\n\nfunction search(items: SuggestionData[], query: string): SuggestionData[] {\n  if (!query) return items\n  const re = new RegExp(`\\\\b${escapeRegExp(query)}`)\n  const hashedScore = /^\\d+$/.test(query)\n    ? (text: string) => issueNumberScore(text, re)\n    : (text: string) => fuzzyScore(text, query)\n  const key = (item: SuggestionData) => {\n    const text = asText(item)\n    const score = hashedScore(text)\n    return score > 0 ? {score, text} : null\n  }\n  return filterSort(items, key, compare)\n}\n\nfunction escapeRegExp(regex: string): string {\n  return regex.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')\n}\n\n// Returns a score that gets higher as the query that matches a number starting\n// on a word boundary is found earlier in the string.\nfunction issueNumberScore(text: string, query: RegExp): number {\n  const score = text.search(query)\n  if (score > -1) {\n    return 1000 - score\n  } else {\n    return 0\n  }\n}\n\n// Apply the search function to JSON data acquired from the suggester endpoint. Return a (possibly empty) subset of\n// that data that matches the user's current suggester query, up to a maximum of SEARCH_RESULTS_MAX, ordered by\n// match quality.\nfunction searchWithin(data: Data, query: string): SearchResults {\n  const matches = search(data.suggestions, query).slice(0, SEARCH_RESULTS_MAX)\n  return {matches, icons: data.icons}\n}\n\nfunction renderResults(issues: SuggestionData[], container: HTMLElement, icons: Icons, query = ''): void {\n  const itemsTemplate = (items: SuggestionData[]) => html`\n    <ul\n      role=\"listbox\"\n      class=\"suggester-container suggester suggestions list-style-none position-absolute\"\n      data-query=\"${query}\"\n    >\n      ${items.map(itemTemplate)}\n    </ul>\n  `\n\n  const itemTemplate = (item: SuggestionData) => {\n    const icon = item.type in icons ? parseHTML(document, icons[item.type]!) : ''\n    return html`\n      <li class=\"markdown-title\" role=\"option\" id=\"suggester-issue-${item.id}\" data-value=\"${item.number}\">\n        <span class=\"d-inline-block mr-1\">${icon}</span>\n        <small>#${item.number}</small> ${\n          // eslint-disable-next-line no-restricted-syntax\n          unsafeHTML(item.title)\n        }\n      </li>\n    `\n  }\n\n  render(itemsTemplate(issues), container)\n}\n\nobserve('text-expander[data-issue-url]', {\n  subscribe: el => {\n    const subscriptions = [\n      fromEvent(el, 'text-expander-change', onchange),\n      fromEvent(el, 'text-expander-value', onvalue),\n      fromEvent(el, 'keydown', onkeydown),\n      fromEvent(el, 'click', onclick),\n    ]\n\n    return compose(...subscriptions)\n  },\n})\n\nfunction onvalue(event: Event) {\n  const detail = (event as CustomEvent).detail\n  if (detail.key !== '#') return\n  const value = detail.item.getAttribute('data-value')!\n  detail.value = `#${value}`\n}\n\nfunction onchange(event: Event) {\n  const {key, provide, text} = (event as CustomEvent).detail\n  if (key !== '#') return\n  if (text === '#') {\n    hideSuggestions(event.target)\n    return\n  }\n\n  const menu = event.target as Element\n  const url = menu.getAttribute('data-issue-url')!\n  provide(issueMenu(url, text, menu))\n}\n\nfunction hideSuggestions(target: EventTarget | null) {\n  if (!target) return\n\n  const textExpander = (target as HTMLElement).closest('text-expander') as TextExpanderElement\n  if (textExpander) {\n    textExpander.dismiss()\n  }\n}\n\nfunction onclick(event: Event) {\n  hideSuggestions(event.target)\n}\n\nfunction onkeydown(event: Event) {\n  const specialKeys = ['ArrowRight', 'ArrowLeft']\n  const {key} = event as KeyboardEvent\n  if (specialKeys.indexOf(key) < 0) return\n\n  hideSuggestions(event.target)\n}\n\nasync function issueMenu(\n  url: string,\n  query: string,\n  menu: Element,\n): Promise<{fragment: HTMLElement; matched: boolean}> {\n  const searchResults = await queryResults(url, query, menu)\n\n  const list = document.createElement('div')\n  renderResults(searchResults.matches, list, searchResults.icons, query)\n  const root = list.firstElementChild as HTMLElement\n  return {fragment: root, matched: searchResults.matches.length > 0}\n}\n\n// Track which query prefixes have already triggered refined query requests, but have not returned results yet.\nconst queriesInProgress = new Set<string>()\n\n// Cache the most recent REFINED_QUERY_CACHE_SIZE refined query results, keyed by query prefix.\nconst queryCache = new Map<string, Data>()\n\n// Identify the most appropriate collection of suggester data given the current query and return promise that resolves\n// to SearchResults containing the result of applying the query to that data.\n//\n// If the query is shorter than REFINED_QUERY_PREFIX_SIZE, use cached data of the most recently updated 1k issues,\n// pull requests, and discussions for this repository.\n//\n// If the query is at least REFINED_QUERY_PREFIX_SIZE characters long and the query's prefix does not currently have\n// cached data available, trigger a refined query request if one is not already running, then search within the cached\n// data of the most recently updated 1k as an interim. When the refined query request's response arrives, the menu\n// will be replaced if the active query still has this prefix.\n//\n// If the query is at least REFINED_QUERY_PREFIX_SIZE characters long and the query's prefix has cached data\n// available, use those cached data to construct the search results.\nasync function queryResults(url: string, query: string, menu: Element | null): Promise<SearchResults> {\n  const basicResults = await cachedJSON<Data>(url)\n  const basicSearchResults = searchWithin(basicResults, query)\n\n  if (query.length < REFINED_QUERY_PREFIX_SIZE || basicResults.suggestions.length < REFINED_QUERY_THRESHOLD) {\n    return basicSearchResults\n  }\n\n  let prefix = query.slice(0, REFINED_QUERY_PREFIX_SIZE)\n\n  // Elastic Search does not support partial match on an Integer field\n  // as a workaround for number queries we will query for every size\n  if (isFeatureEnabled('REPOSITORY_SUGGESTER_ELASTIC_SEARCH') && Number.isFinite(Number(query))) {\n    prefix = query\n  }\n\n  const refinedResults = queryCache.get(prefix)\n  if (refinedResults) {\n    return searchWithin(refinedResults, query)\n  }\n\n  if (!queriesInProgress.has(prefix)) {\n    queriesInProgress.add(prefix)\n    const refinedPromise = refinedQuery(url, prefix, menu)\n    if (basicSearchResults.matches.length === 0) {\n      const deferredRefinedResults = await refinedPromise\n      return searchWithin(deferredRefinedResults, query)\n    }\n  }\n\n  return searchWithin(basicResults, query)\n}\n\n// Query dotcom for a list of suggestion results that match the given query prefix. This appends a `?q=` query\n// parameter to the normal issue suggestions URL.\n//\n// When the response arrives, updates queryCache with the new results. If a non-null `menu` element is provided and\n// the current suggestions menu within it is still showing results for a query with the same prefix, the menu's\n// options will be updated live to show suggestions from the refined query results, instead. Any active selection\n// within the menu will be preserved in the new menu contents.\nasync function refinedQuery(url: string, prefix: string, menu: Element | null): Promise<Data> {\n  const refinedQueryUrl = new URL(url, window.location.origin)\n  refinedQueryUrl.searchParams.set('q', prefix)\n\n  const data: Data = await jsonRequest(refinedQueryUrl.toString())\n\n  queryCache.set(prefix, data)\n  queriesInProgress.delete(prefix)\n\n  // Evict cached query results, oldest first, to bring us down to the cache limit.\n  if (queryCache.size > REFINED_QUERY_CACHE_SIZE) {\n    const overage = queryCache.size - REFINED_QUERY_CACHE_SIZE\n    const oldestKeys = Array.from(queryCache.keys()).slice(0, overage)\n    for (const key of oldestKeys) {\n      queryCache.delete(key)\n    }\n  }\n\n  // Replace live suggestions if still visible, preserving any active selection\n  const liveSuggestions = menu?.querySelector<HTMLElement>('ul.suggestions')\n  const liveQuery = liveSuggestions?.getAttribute('data-query')\n\n  if (liveSuggestions && liveQuery?.startsWith(prefix)) {\n    const selectedID = menu?.querySelector<Element>('[aria-activedescendant]')?.getAttribute('aria-activedescendant')\n\n    const list = document.createElement('div')\n    const results = searchWithin(data, liveQuery)\n    renderResults(results.matches, list, results.icons)\n    if (selectedID) {\n      for (const selectedElement of list.querySelectorAll(`#${selectedID}`)) {\n        selectedElement.setAttribute('aria-selected', 'true')\n      }\n    }\n\n    const root = list.firstElementChild as HTMLElement\n    liveSuggestions.replaceChildren(...root.children)\n  }\n\n  return data\n}\n\nasync function jsonRequest<T>(url: RequestInfo): Promise<T> {\n  const response = await self.fetch(url, {\n    headers: {\n      'X-Requested-With': 'XMLHttpRequest',\n      Accept: 'application/json',\n    },\n  })\n  if (!response.ok) {\n    const responseError = new Error()\n    const statusText = response.statusText ? ` ${response.statusText}` : ''\n    responseError.message = `HTTP ${response.status}${statusText}`\n    throw responseError\n  }\n  return response.json()\n}\n\nconst cachedJSON = memoize(jsonRequest)\n","import {compose, fromEvent} from '@github-ui/subscription'\nimport {html, render} from '@github-ui/jtml-shimmed'\nimport {compare} from '../../fuzzy-filter'\nimport {filterSort} from '../../filter-sort'\nimport memoize from '@github/memoize'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\ninterface UserData {\n  login: string\n  type: string\n  id: string\n  name: string\n  description: string\n  participant?: boolean\n}\n\nfunction asText(item: UserData): string {\n  return item.description\n    ? `${item.name} ${item.description}`.trim().toLowerCase() // team\n    : `${item.login} ${item.name}`.trim().toLowerCase() // user\n}\n\nfunction search(items: UserData[], query: string): UserData[] {\n  if (!query) return items\n  const scorer = fuzzyScorer(query)\n  const key = (item: UserData) => {\n    const text = asText(item)\n    const score = scorer(text, item.participant)\n    return score > 0 ? {score, text} : null\n  }\n  return filterSort(items, key, compare)\n}\n\nfunction renderResults(usersAndTeams: UserData[], container: HTMLElement): void {\n  const itemsTemplate = (items: UserData[]) => html`\n    <ul role=\"listbox\" class=\"suggester-container suggester suggestions list-style-none position-absolute\">\n      ${items.map(itemTemplate)}\n    </ul>\n  `\n\n  const itemTemplate = (item: UserData) => {\n    const name = item.type === 'user' ? item.login : item.name\n    const desc = item.type === 'user' ? item.name : item.description\n    return html`\n      <li role=\"option\" id=\"suggester-${item.id}-${item.type}-${name}\" data-value=\"${name}\">\n        <span>${name}</span>\n        <small>${desc}</small>\n      </li>\n    `\n  }\n\n  render(itemsTemplate(usersAndTeams), container)\n}\n\nfunction fuzzyScorer(query: string): (text: string, participant?: boolean) => number {\n  if (!query) return () => 2.0\n  const queryChars = query.toLowerCase().split('')\n  return (text: string, participant?: boolean): number => {\n    if (!text) return 0.0\n    const match = shortestMatch(text, queryChars)\n    if (!match) return 0.0\n    const value = query.length / (match[1] as number)\n    const score = value / ((match[0] as number) / 2 + 1)\n    if (participant) return score + 1\n    return score\n  }\n}\n\n// Get the shortest match (least distance between start and end index) for all\n// the query characters in the given text.\n//\n// Returns an array in format [firstIndex, matchLength, [matchIndexes]]\nfunction shortestMatch(text: string, queryChars: string[]): Array<number | number[]> | null {\n  let indexes\n  let j\n  let len\n  let match\n  const starts = allIndexesOf(text, queryChars[0]!)\n  if (starts.length === 0) {\n    return null\n  }\n  if (queryChars.length === 1) {\n    return [starts[0]!, 1, []]\n  }\n  match = null\n  for (j = 0, len = starts.length; j < len; j++) {\n    const start = starts[j]!\n    if (!(indexes = indexesOfChars(text, queryChars, start + 1))) {\n      continue\n    }\n    const length = indexes[indexes.length - 1]! - start\n    if (!match || length < (match[1] as number)) {\n      match = [start, length, indexes]\n    }\n  }\n  return match\n}\n\n// Find all indexes of character inside a string.\nfunction allIndexesOf(string: string, char: string) {\n  let index = 0\n  const results1 = []\n  while ((index = string.indexOf(char, index)) > -1) {\n    results1.push(index++)\n  }\n  return results1\n}\n\n// Find all indexes of characters of query string in order.\nfunction indexesOfChars(string: string, chars: string[], startingIndex: number): number[] | undefined {\n  let index = startingIndex\n  const indexes = []\n  for (let i = 1; i < chars.length; i += 1) {\n    index = string.indexOf(chars[i]!, index)\n    if (index === -1) return\n    indexes.push(index++)\n  }\n  return indexes\n}\n\nobserve('text-expander[data-mention-url]', {\n  subscribe: el =>\n    compose(fromEvent(el, 'text-expander-change', onchange), fromEvent(el, 'text-expander-value', onvalue)),\n})\n\nfunction onvalue(event: Event) {\n  const detail = (event as CustomEvent).detail\n  if (detail.key !== '@') return\n  const login = detail.item.getAttribute('data-value')!\n  detail.value = `@${login}`\n}\n\nfunction onchange(event: Event) {\n  const {key, provide, text} = (event as CustomEvent).detail\n  if (key !== '@') return\n  // do not allow multi-word mentions\n  if (text?.split(' ').length > 1) return\n  const menu = event.target as Element\n  const url = menu.getAttribute('data-mention-url')!\n  provide(mentionMenu(url, text))\n}\n\nasync function mentionMenu(url: string, query: string): Promise<{fragment: HTMLElement; matched: boolean}> {\n  const data: UserData[] = await cachedJSON(url)\n  const list = document.createElement('div')\n  const results = search(data, query).slice(0, 5)\n  renderResults(results, list)\n  const root = list.firstElementChild as HTMLElement\n  return {fragment: root, matched: results.length > 0}\n}\n\nconst cachedJSON = memoize(async function <T>(url: RequestInfo): Promise<T> {\n  const response = await self.fetch(url, {\n    headers: {\n      'X-Requested-With': 'XMLHttpRequest',\n      Accept: 'application/json',\n    },\n  })\n  if (!response.ok) {\n    const responseError = new Error()\n    const statusText = response.statusText ? ` ${response.statusText}` : ''\n    responseError.message = `HTTP ${response.status}${statusText}`\n    throw responseError\n  }\n  return response.json()\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\non('change', 'input.js-survey-contact-checkbox', function (event: Event) {\n  const currentTarget = event.currentTarget as HTMLInputElement\n  const question = currentTarget.closest<HTMLElement>('.js-survey-question-form')!\n  const hiddenInput = question.querySelector<HTMLElement>('.js-survey-contact-checkbox-hidden')!\n  if (currentTarget.checked) {\n    hiddenInput.setAttribute('disabled', 'true')\n  } else {\n    hiddenInput.removeAttribute('disabled')\n  }\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\non(\n  'details-menu-selected',\n  '.js-sync-select-menu-text',\n  function (event) {\n    const button = document.querySelector<HTMLElement>('.js-sync-select-menu-button')!\n    const text = (event.detail.relatedTarget as Element).querySelector<HTMLElement>(\n      'span[data-menu-button-text]',\n    )!.textContent\n    button.textContent = text\n    button.focus()\n  },\n  {capture: true},\n)\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\non('click', 'tab-container [role=\"tab\"]', function (event) {\n  const {currentTarget} = event\n\n  const menu = currentTarget.closest<HTMLElement>('tab-container')!\n  const filter = menu.querySelector('.js-filterable-field, [data-filter-placeholder-input]')\n  if (filter instanceof HTMLInputElement) {\n    const placeholder = currentTarget.getAttribute('data-filter-placeholder')\n    if (placeholder) {\n      filter.setAttribute('placeholder', placeholder)\n    }\n    filter.focus()\n  }\n})\n\non('tab-container-changed', 'tab-container', function (event) {\n  const panel = event.detail.relatedTarget\n  const url = panel.getAttribute('data-fragment-url')\n  const includeFragment = panel.querySelector('include-fragment')\n  if (url && includeFragment && !includeFragment.hasAttribute('src')) {\n    includeFragment.src = url\n  }\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\n// Load team members to display in the mention's tooltip from the server on hover.\nasync function members(event: Event) {\n  const target = event.currentTarget as HTMLElement\n  if (teamHovercardEnabled(target)) {\n    target.classList.remove('tooltipped')\n    return\n  }\n  const url = target.getAttribute('data-url')\n  if (!url) return\n\n  const response = await fetch(url, {headers: {Accept: 'application/json'}})\n  if (!response.ok) return\n  const data = (await response.json()) as {total: number; members: string[]}\n\n  const id = target.getAttribute('data-id')!\n  const mentions = document.querySelectorAll(`.js-team-mention[data-id='${id}']`)\n  for (const el of mentions) {\n    el.removeAttribute('data-url')\n  }\n\n  try {\n    if (data.total === 0) {\n      // eslint-disable-next-line i18n-text/no-en\n      data.members.push('This team has no members')\n    } else if (data.total > data.members.length) {\n      data.members.push(`${data.total - data.members.length} more`)\n    }\n    tip(mentions, sentence(data.members))\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    const status = error.response ? error.response.status : 500\n    const message = target.getAttribute(status === 404 ? 'data-permission-text' : 'data-error-text')!\n    tip(mentions, message)\n  }\n}\n\n// Add a tooltip to the elements. Adds the text just before the tooltip classes so\n// the tooltip appears fully formed on mouse hover.\nfunction tip(elements: NodeList, text: string): void {\n  for (const el of elements) {\n    if (!(el instanceof HTMLElement)) continue\n    el.setAttribute('aria-label', text)\n    el.classList.add('tooltipped', 'tooltipped-s', 'tooltipped-multiline')\n  }\n}\n\n// Comma separate a list of strings with `and` at the end, like\n// Rails' to_sentence.\nfunction sentence(xs: string[]): string {\n  if ('ListFormat' in Intl) {\n    const lists = new Intl.ListFormat()\n    return lists.format(xs)\n  }\n\n  if (xs.length === 0) {\n    return ''\n  } else if (xs.length === 1) {\n    return xs[0]!\n  } else if (xs.length === 2) {\n    return xs.join(' and ')\n  } else {\n    const last = xs[xs.length - 1]\n    return xs.slice(0, -1).concat(`and ${last}`).join(', ')\n  }\n}\n\nfunction teamHovercardEnabled(element: HTMLElement): boolean {\n  return !!element.getAttribute('data-hovercard-url') && !!element.closest('[data-team-hovercards-enabled]')\n}\n\nobserve('.js-team-mention', function (el) {\n  el.addEventListener('mouseenter', members)\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {remoteForm} from '@github/remote-form'\n\ninterface Request {\n  url: string\n  headers: Headers\n}\n\nfunction getTimelineLastModified(): string | null {\n  const marker = document.querySelector('.js-timeline-marker')\n  return marker != null ? marker.getAttribute('data-last-modified') : null\n}\n\n// Add the X-Timeline-Last-Modified header to the request based on the\n// the last modified time from the timeline marker element.\nfunction addTimelineLastModifiedHeader(request: Request) {\n  if (isCrossDomain(request)) {\n    return\n  }\n\n  const lastModified = getTimelineLastModified()\n  if (lastModified) {\n    request.headers.set('X-Timeline-Last-Modified', lastModified)\n  }\n}\n\nfunction isCrossDomain(request: Request): boolean {\n  let requestURL\n  try {\n    // eslint-disable-next-line no-restricted-syntax\n    requestURL = new URL(request.url)\n  } catch (urlError) {\n    return true\n  }\n  return requestURL.host !== window.location.host\n}\n\nremoteForm('.js-needs-timeline-marker-header', function (form, wants, request) {\n  addTimelineLastModifiedHeader(request)\n})\n\non('deprecatedAjaxSend', '[data-remote]', function (event) {\n  const {request} = event.detail\n  addTimelineLastModifiedHeader(request)\n})\n","import {isDetailsTargetExpanded, toggleDetailsTarget} from '../details'\nimport {fetchSafeDocumentFragment} from '@github-ui/fetch-utils'\nimport hashChange from '../hash-change'\nimport {loadDeferredContent} from '../include-fragment'\nimport {scrollIntoView} from '../../sticky-scroll-into-view'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nconst SCROLL_WAIT_MEDIA_TIMEOUT = 5000\nconst COMMENT_IMAGE = '.js-comment-body img'\nconst COMMENT_VIDEO = '.js-comment-body video'\n\nhashChange(function () {\n  focusOrLoadElement()\n})\n\nobserve('.js-timeline-progressive-focus-container', scrollToFocusTimelineEvent)\n\nwindow.addEventListener('sticky-header-rendered', () => {\n  scrollToFocusTimelineEvent()\n})\n\nfunction scrollToFocusTimelineEvent() {\n  const anchor = urlAnchor()\n  if (!anchor) return\n\n  const pullTimeline = document.querySelector<HTMLElement>('.js-pull-discussion-timeline')\n  if (pullTimeline) return\n\n  const target = document.getElementById(anchor)\n\n  if (target) {\n    focusElement(target)\n  }\n}\n\nfunction focusOrLoadElement(shouldLoadElement = true): void {\n  const anchor = urlAnchor()\n  if (!anchor) return\n\n  const target = document.getElementById(anchor)\n  if (target) {\n    focusElement(target)\n  } else {\n    if (loadComments(anchor)) return\n\n    const loader = document.querySelector<HTMLElement>('#js-timeline-progressive-loader')\n\n    if (loader && shouldLoadElement) {\n      loadElement(anchor, loader)\n    }\n  }\n}\n\nfunction loadComments(anchor: string): boolean {\n  return (\n    loadResolvedComments(anchor) ||\n    loadHiddenComments(anchor, '.js-thread-hidden-comment-ids') ||\n    loadHiddenComments(anchor, '.js-review-hidden-comment-ids')\n  )\n}\n\nfunction loadResolvedComments(anchor: string): boolean {\n  const commentContainer = findCommentContainer(anchor, '.js-comment-container')\n  if (!commentContainer) return false\n\n  loadDeferredContent(commentContainer)\n  return true\n}\n\nfunction loadHiddenComments(anchor: string, selector: string): boolean {\n  const commentContainer = findCommentContainer(anchor, selector)\n  if (!commentContainer) return false\n\n  commentContainer.addEventListener('page:loaded', function () {\n    focusOrLoadElement()\n  })\n  commentContainer.querySelector<HTMLButtonElement>('button[type=submit]')!.click()\n  return true\n}\n\nfunction findCommentContainer(anchor: string, selector: string): Element | null {\n  const commentContainers = document.querySelectorAll(selector)\n\n  for (const commentContainer of commentContainers) {\n    const threadCommentIds = commentContainer.getAttribute('data-hidden-comment-ids')\n\n    if (threadCommentIds) {\n      const commentIds = threadCommentIds.split(',')\n      const anchorCommentId = anchor.match(/\\d+/g)?.[0]\n\n      if (anchorCommentId && commentIds.includes(anchorCommentId)) {\n        return commentContainer\n      }\n    }\n  }\n  return null\n}\n\nobserve('.js-inline-comments-container', function (container) {\n  const anchor = urlAnchor()\n  if (!anchor) return\n\n  const target = document.getElementById(anchor)\n\n  if (target && container.contains(target)) {\n    focusElement(target)\n  }\n})\n\n// adds support for deep-link loading discussion comments when the comment thread is nested\nobserve('#js-discussions-timeline-anchor-loader', {\n  constructor: HTMLElement,\n  add: element => {\n    const existingProgressiveLoader = document.querySelector('#js-timeline-progressive-loader')\n    if (existingProgressiveLoader) return\n\n    const anchor = urlAnchor()\n    if (!anchor) return\n\n    const target = document.getElementById(anchor)\n    if (!target) {\n      loadElement(anchor, element)\n    }\n  },\n})\n\n// resolves when comment body videos have loaded enough data to render the preview image\nasync function videosReady(): Promise<unknown> {\n  const videos: NodeListOf<HTMLVideoElement> = document.querySelectorAll(COMMENT_VIDEO)\n  const videoLoads = Array.from(videos).map(v => {\n    return new Promise<HTMLVideoElement>(resolve => {\n      if (v.readyState >= v.HAVE_METADATA) {\n        resolve(v)\n      } else {\n        // don't wait forever :)\n        const timeout = setTimeout(() => resolve(v), SCROLL_WAIT_MEDIA_TIMEOUT)\n        const done = () => {\n          clearTimeout(timeout)\n          resolve(v)\n        }\n        v.addEventListener('loadeddata', () => {\n          if (v.readyState >= v.HAVE_METADATA) done()\n        })\n        v.addEventListener('error', () => done())\n      }\n    })\n  })\n  return Promise.all(videoLoads)\n}\n\n// resolves when comment body images are loaded\nasync function imagesReady(): Promise<unknown> {\n  const images: NodeListOf<HTMLImageElement> = document.querySelectorAll(COMMENT_IMAGE)\n  const imageLoads = Array.from(images).map(i => {\n    new Promise<HTMLImageElement>(resolve => {\n      if (i.complete) {\n        resolve(i)\n      } else {\n        const timeout = setTimeout(() => resolve(i), SCROLL_WAIT_MEDIA_TIMEOUT)\n        const done = () => {\n          clearTimeout(timeout)\n          resolve(i)\n        }\n        i.addEventListener('load', () => done())\n        i.addEventListener('error', () => done())\n      }\n    })\n  })\n  return Promise.all(imageLoads)\n}\n\nasync function mediaLoaded(): Promise<unknown> {\n  return Promise.all([videosReady(), imagesReady()])\n}\n\nasync function focusElement(element: HTMLElement): Promise<void> {\n  await mediaLoaded()\n  expandDetailsIfPresent(element)\n  const link = element.querySelector<HTMLElement>(`[href='#${element.id}']`)\n\n  scrollIntoView(element)\n  if (link) {\n    const oldValue = link.getAttribute('data-turbo')\n    link.setAttribute('data-turbo', 'false')\n    link.click()\n    if (oldValue === null) {\n      link.removeAttribute('data-turbo')\n    } else {\n      link.setAttribute('data-turbo', oldValue)\n    }\n  }\n}\n\nasync function loadElement(anchor: string, loader: HTMLElement): Promise<void> {\n  if (!loader) return\n\n  const path = loader.getAttribute('data-timeline-item-src')\n  if (!path) return\n\n  const url = new URL(path, window.location.origin)\n  const params = new URLSearchParams(url.search.slice(1))\n  params.append('anchor', anchor)\n  url.search = params.toString()\n\n  let html\n  try {\n    html = await fetchSafeDocumentFragment(document, url.toString())\n  } catch (err) {\n    return\n  }\n\n  const newTimelineItem = html.querySelector('.js-timeline-item')\n  if (!newTimelineItem) return\n\n  const gid = newTimelineItem.getAttribute('data-gid')\n  if (!gid) return\n\n  const currentTimelineItem = document.querySelector(`.js-timeline-item[data-gid='${gid}']`)\n\n  if (currentTimelineItem) {\n    currentTimelineItem.replaceWith(newTimelineItem)\n\n    focusOrLoadElement(false)\n  } else {\n    const container = document.getElementById('js-progressive-timeline-item-container')\n    if (container) container.replaceWith(html)\n    focusOrLoadElement(false)\n  }\n}\n\nfunction expandDetailsIfPresent(element: HTMLElement): void {\n  const detailsContainer = element.closest<HTMLElement>('details, .js-details-container')\n  if (!detailsContainer) return\n  if (detailsContainer.nodeName === 'DETAILS') {\n    detailsContainer.setAttribute('open', 'open')\n  } else if (!isDetailsTargetExpanded(detailsContainer)) {\n    toggleDetailsTarget(detailsContainer)\n  }\n}\n\nfunction urlAnchor(): string {\n  return window.location.hash.slice(1)\n}\n","import {ready} from '@github-ui/document-ready'\n;(async function () {\n  if ('serviceWorker' in navigator) {\n    await ready\n    const serviceWorkerPath = document.querySelector<HTMLLinkElement>('link[rel=\"service-worker-src\"]')?.href\n    if (serviceWorkerPath) {\n      navigator.serviceWorker.register(serviceWorkerPath, {scope: '/'})\n    } else {\n      await unregisterAllServiceWorkers()\n    }\n  }\n})()\n\nasync function unregisterAllServiceWorkers() {\n  let registrations: readonly ServiceWorkerRegistration[] = []\n  try {\n    registrations = await navigator.serviceWorker.getRegistrations()\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    if (error.name === 'SecurityError') return\n  }\n\n  for (const registration of registrations) {\n    registration.unregister()\n  }\n}\n","import {preservePosition} from 'scroll-anchoring'\nimport {replaceState} from '../history'\n\ndocument.addEventListener('keydown', (event: KeyboardEvent) => {\n  // TODO: Refactor to use data-hotkey\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n  if (event.key !== 'Escape') return\n  if (event.target !== document.body) return\n\n  const element = document.querySelector('.js-targetable-element:target')\n  if (!element) return\n\n  preservePosition(element, () => {\n    // Clear the `:target` element\n    window.location.hash = ''\n    // Clear the hash part of the URL\n    replaceState(window.history.state, '', window.location.pathname + window.location.search)\n  })\n  /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n})\n\ndocument.addEventListener('click', (event: MouseEvent) => {\n  // Return early if there is no highlighted element\n  const highlightedElement = document.querySelector('.js-targetable-element:target')\n  if (!highlightedElement) return\n\n  // Don't mess with the URL if we clicked on a link\n  if (event.target instanceof HTMLAnchorElement) return\n\n  // Don't do anything if the user clicked on the already highlighted element\n  if (!(event.target instanceof HTMLElement)) return\n  if (highlightedElement.contains(event.target)) return\n\n  preservePosition(highlightedElement, () => {\n    // Clear the `:target` element\n    window.location.hash = ''\n    // Clear the hash part of the URL\n    replaceState(window.history.state, '', window.location.pathname + window.location.search)\n  })\n})\n","import {announceFromElement} from '@github-ui/aria-live'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('.js-discussion', announceTimelineEvents)\n\nfunction announceTimelineEvents() {\n  let existingTimelineItems: WeakSet<Element> = new WeakSet()\n  setExistingTimelineItems()\n\n  document.addEventListener('turbo:load', setExistingTimelineItems)\n\n  observe('.js-timeline-item', el => {\n    if (!(el instanceof HTMLElement)) return\n    if (existingTimelineItems.has(el)) return\n\n    announceFromElement(el)\n  })\n\n  function setExistingTimelineItems() {\n    existingTimelineItems = new WeakSet(document.querySelectorAll('.js-timeline-item'))\n  }\n}\n","// Toggler Behavior\n//\n// target    - Element with a \".js-toggler-target\" class name, clicking\n//             triggers toggle.\n// container - Element with a \".js-toggler-container\" class name,\n//             contains one or more targets.\n//\n// The toggle state is defined as \"off\" or \"on\". A \".on\" class name is\n// added to the container when the state is \"on\". \".on\" is removed if\n// the state is \"off\".\n//\n// Some extra AJAX states are available if any target makes use of\n// `data-remote`.\n//\n// loading - Added to the container before the request is sent and\n//           after it finishes.\n// success - Added to the container after a successful response\n//           returns.\n// error   - Added to the container after any bad responses.\n//\n// Examples\n//\n//   .starring-container .unstarred { display: block; }\n//   .starring-container.on .unstarred { display: none; }\n//   .starring-container .starred { display: none; }\n//   .starring-container.on .starred { display: block; }\n//\n//   <div class=\"js-toggler-container starring-container\">\n//     <button type=\"button\" href=\"#\" class=\"starred js-toggler-target\">Unstar repository</button>\n//     <button type=\"button\" class=\"unstarred js-toggler-target\">Star repository</button>\n//   </div>\n//\n\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {remoteForm} from '@github/remote-form'\n\non('click', '.js-toggler-container .js-toggler-target', function (event) {\n  // Ignore right-click events.\n  if (event.button !== 0) return\n\n  const container = event.currentTarget.closest('.js-toggler-container')\n  if (container) container.classList.toggle('on')\n})\n\nremoteForm('.js-toggler-container', async (form, wants) => {\n  form.classList.remove('success', 'error')\n  form.classList.add('loading')\n\n  try {\n    await wants.text()\n    form.classList.add('success')\n  } catch (responseError) {\n    form.classList.add('error')\n  } finally {\n    form.classList.remove('loading')\n  }\n})\n","import {PageRenderer, session, setCSPTrustedTypesPolicy, setProgressBarDelay} from '@github/turbo'\nimport {formatKeyToError} from './utils'\nimport {turboPolicy} from '@github-ui/trusted-types-policies/turbo'\n\ninterface HeadSnapshot {\n  detailsByOuterHTML: {\n    [outerHTML: string]: {\n      tracked: boolean\n      elements: Element[]\n    }\n  }\n}\n\nsetCSPTrustedTypesPolicy(turboPolicy)\nsetProgressBarDelay(0)\n\nsession.isVisitable = () => true\n\n// get the reason why a Turbo request had to be reloaded so we can report metrics\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nconst originalTrackedElementsAreIdentical = Object.getOwnPropertyDescriptor(PageRenderer.prototype, 'reloadReason').get!\nObject.defineProperty(PageRenderer.prototype, 'reloadReason', {\n  get() {\n    const reloadReason = originalTrackedElementsAreIdentical.call(this)\n\n    if (reloadReason.reason !== 'tracked_element_mismatch') {\n      return reloadReason\n    }\n\n    const currentTracked = Object.fromEntries(getSnapshotSignatures(this.currentHeadSnapshot))\n    const changedKeys = []\n\n    for (const [key, value] of getSnapshotSignatures(this.newHeadSnapshot)) {\n      if (currentTracked[key] !== value) {\n        changedKeys.push(formatKeyToError(key))\n      }\n    }\n\n    return {\n      reason: `tracked_element_mismatch-${changedKeys.join('-')}`,\n    }\n  },\n})\n\nfunction* getSnapshotSignatures(snapshot: HeadSnapshot): IterableIterator<[string, string]> {\n  for (const detail of Object.values(snapshot.detailsByOuterHTML)) {\n    if (detail.tracked) {\n      for (const element of detail.elements) {\n        if (element instanceof HTMLMetaElement && element.getAttribute('http-equiv')) {\n          yield [element.getAttribute('http-equiv') || '', element.getAttribute('content') || '']\n        }\n      }\n    }\n  }\n}\n","import {navigator} from '@github/turbo'\n\ntype State = Record<string, unknown> & {\n  turbo?: {restorationIdentifier: string}\n  skipTurbo?: boolean\n  usr?: {skipTurbo: boolean}\n  turboCount?: number\n}\n\n// keep Turbo's history up to date with the browser's in case code calls native history API's directly\nconst patchHistoryApi = (name: 'replaceState' | 'pushState') => {\n  const oldHistory = history[name]\n\n  history[name] = function (this: History, state?: State, unused?: string, url?: string | URL | null) {\n    const skipTurbo = state?.skipTurbo || state?.usr?.skipTurbo\n\n    // we need to merge the state from turbo with the state given to pushState in case others are adding data to the state\n    function oldHistoryWithMergedState(\n      this: History,\n      turboState: State,\n      turboUnused: string,\n      turboUrl?: string | URL | null,\n    ) {\n      const currentTurboCount = history.state?.turboCount || 0\n      // Only turbo navs have the `turbo` key when pushing state.\n      const turboCount = name === 'pushState' && state?.turbo ? currentTurboCount + 1 : currentTurboCount\n      const mergedState = skipTurbo ? {...state, skipTurbo: true} : {...state, ...turboState, turboCount}\n      oldHistory.call(this, mergedState, turboUnused, turboUrl)\n    }\n\n    navigator.history.update(\n      oldHistoryWithMergedState,\n      new URL(url || location.href, location.href),\n      state?.turbo?.restorationIdentifier,\n    )\n  }\n}\n\npatchHistoryApi('replaceState')\npatchHistoryApi('pushState')\n","import {session} from '@github/turbo'\n\ninterface ProgressBar {\n  setValue(n: number): void\n  hide(): void\n  show(): void\n}\n\ninterface BrowserAdapter {\n  progressBar: ProgressBar\n}\n\nconst adapter = session.adapter as typeof session.adapter & BrowserAdapter\n\n// Start the ProgressBar at the top of the page.\nexport const beginProgressBar = () => {\n  adapter.progressBar.setValue(0)\n  adapter.progressBar.show()\n}\n\n// Complete the ProgressBar at the top of the page.\nexport const completeProgressBar = () => {\n  adapter.progressBar.setValue(1)\n  adapter.progressBar.hide()\n}\n","import {ready} from '@github-ui/document-ready'\nimport {type CacheNode, getDocumentAttributes, getTurboCacheNodes} from './utils'\n\nconst turboPageNodes: Map<string, CacheNode> = new Map()\nconst turboDocumentAttributes: Map<string, Attr[]> = new Map()\n\nexport const getCachedNode = () => turboPageNodes.get(document.location.href)\nexport const setCachedNode = (url: string, node: CacheNode) => turboPageNodes.set(url, node)\nexport const setDocumentAttributesCache = () =>\n  turboDocumentAttributes.set(document.location.href, getDocumentAttributes())\nexport const getCachedAttributes = () => turboDocumentAttributes.get(document.location.href)\n;(async () => {\n  await ready\n  setCachedNode(document.location.href, getTurboCacheNodes(document))\n  setDocumentAttributesCache()\n})()\n","import {observe} from '@github/selector-observer'\nimport {isTurboFrame, waitForStylesheets, dispatchTurboReload, replaceElementAttributes, copyScriptTag} from './utils'\nimport {beginProgressBar, completeProgressBar} from './progress-bar'\nimport isHashNavigation from '@github-ui/is-hash-navigation'\nimport {getCachedAttributes, setDocumentAttributesCache} from './cache'\nimport {startSoftNav} from '@github-ui/soft-nav'\nimport {ssrSafeWindow, ssrSafeDocument} from '@github-ui/ssr-utils'\nimport {turboPolicy} from '@github-ui/trusted-types-policies/turbo'\n\nlet responseFailed = false\nlet errorDocument: Document | null = null\n\nif (ssrSafeWindow) {\n  // We want to make sure that links inside a `data-turbo-frame` container also have the data attribute.\n  observe('[data-turbo-frame]', {\n    constructor: HTMLElement,\n    add(el) {\n      if (el.tagName === 'A' || el.getAttribute('data-turbo-frame') === '') return\n\n      for (const link of el.querySelectorAll('a:not([data-turbo-frame])')) {\n        link.setAttribute('data-turbo-frame', el.getAttribute('data-turbo-frame') || '')\n      }\n    },\n  })\n}\n\nssrSafeDocument?.addEventListener('turbo:click', function (event) {\n  if (!(event.target instanceof HTMLElement)) return\n  if (!(event instanceof CustomEvent)) return\n\n  // https://github.com/hotwired/turbo/issues/539\n  // If we are doing a hash navigation, we want to prevent Turbo from performing a visit\n  // so it won't mess with focus styles.\n  if (isHashNavigation(location.href, event.detail.url)) {\n    event.preventDefault()\n    // return early so we don't start a soft-nav\n    return\n  }\n\n  // Here is where ALL non-frame Turbo navigation starts. We start by emitting the `soft-nav:start` event with the correct `turbo` mechanism.\n  if (!event.defaultPrevented) {\n    startSoftNav('turbo')\n  }\n})\n\n// Emulate `onbeforeunload` event handler for Turbo navigations to\n// support warning a user about losing unsaved content\nssrSafeDocument?.addEventListener('turbo:before-fetch-request', function (event) {\n  const unloadMessage = window.onbeforeunload?.(event)\n\n  if (unloadMessage) {\n    const navigate = confirm(unloadMessage)\n    if (navigate) {\n      window.onbeforeunload = null\n    } else {\n      event.preventDefault()\n      completeProgressBar()\n    }\n  }\n})\n\nssrSafeDocument?.addEventListener('turbo:before-fetch-request', event => {\n  if (event.defaultPrevented) return\n\n  const frame = event.target as Element\n  if (isTurboFrame(frame)) {\n    beginProgressBar()\n  }\n\n  // attach a Turbo specific header for visit requests so the server can track Turbo usage\n  if (frame?.tagName === 'HTML') {\n    const ev = event as CustomEvent\n    ev.detail.fetchOptions.headers['Turbo-Visit'] = 'true'\n  }\n})\n\ntype FetchRequest = {\n  readonly delegate: FetchRequestDelegate\n}\ninterface FetchRequestDelegate {\n  requestErrored(request: FetchRequest, error: Error): void\n}\ntype FrameElement = {\n  readonly delegate: FrameElementDelegate\n}\ntype FrameElementDelegate = unknown\n\n// TODO: turbo upstream will emit this event eventually https://github.com/hotwired/turbo/pull/640\n// and we can remove the types above\nconst frame = ssrSafeDocument?.createElement('turbo-frame') as unknown as FrameElement\nconst controllerPrototype = Object.getPrototypeOf(frame.delegate)\nconst originalRequestErrored = controllerPrototype.requestErrored\ncontrollerPrototype.requestErrored = function (request: FetchRequest, error: Error) {\n  this.element.dispatchEvent(\n    new CustomEvent('turbo:fetch-error', {\n      bubbles: true,\n      detail: {request, error},\n    }),\n  )\n  return originalRequestErrored.apply(this, request, error)\n}\n\n// when a frame fetch request errors due to a network error\n// we reload the page to prevent hanging the progress bar indefinitely\nssrSafeDocument?.addEventListener('turbo:fetch-error', event => {\n  // we don't want to reload the page due to an error on a form\n  // since we might throw away the users work or submit the form again\n  // other handling would be needed for this use case\n  if (event.target instanceof HTMLFormElement) {\n    return\n  }\n\n  const fetchRequest = (event as CustomEvent).detail.request\n\n  window.location = fetchRequest.location\n  event.preventDefault()\n})\n\nssrSafeDocument?.addEventListener('turbo:before-fetch-response', async event => {\n  const fetchResponse = (event as CustomEvent).detail.fetchResponse\n\n  responseFailed = fetchResponse.statusCode >= 500\n  // Turbo is misbehaving when we Drive to our 404 page, so we\n  // can force a reload if the response is 404 and prevent Turbo\n  // from continuing.\n  if (fetchResponse.statusCode === 404) {\n    dispatchTurboReload(fetchResponse.statusCode)\n    window.location = fetchResponse.location\n    event.preventDefault()\n  }\n\n  // Here we want to ensure that every time we navigate away from a page using Turbo, we set a restorationIdentifier.\n  // We have to do this because React removes the identifier to avoid an unwanted request when doing client-side navigations.\n  // But, since we are Turboing away from a page (React or not), we need to ensure that the identifier is present, so when we\n  // back navigate, the page will be refetched.\n  history.replaceState({...history.state, skipTurbo: false}, '', location.href)\n\n  if (responseFailed) {\n    const responseHTML = await fetchResponse.responseHTML\n    const trustedHTML = turboPolicy.createHTML(responseHTML, fetchResponse.response)\n    errorDocument = new DOMParser().parseFromString(trustedHTML, 'text/html')\n  }\n})\n\nssrSafeDocument?.addEventListener('turbo:frame-render', event => {\n  if (isTurboFrame(event.target)) {\n    completeProgressBar()\n  }\n})\n\n// copy over new attributes on <html> to the existing page\nssrSafeDocument?.addEventListener('turbo:before-render', async event => {\n  if (!(event instanceof CustomEvent)) return\n\n  event.preventDefault()\n\n  event.detail.render = customDriveRender\n\n  await waitForStylesheets()\n\n  event.detail.resume(true)\n\n  // Update <html> attributes\n  replaceElementAttributes(document.documentElement, event.detail.newBody.ownerDocument.documentElement)\n  setDocumentAttributesCache()\n})\n\nconst nextEventLoopTick = () =>\n  new Promise<void>(resolve => {\n    setTimeout(() => resolve(), 0)\n  })\n\nconst customDriveRender = async (currentBody: HTMLBodyElement, newBody: HTMLBodyElement) => {\n  await nextEventLoopTick()\n\n  if (responseFailed && errorDocument) {\n    document.documentElement.replaceWith(errorDocument.documentElement)\n    for (const script of document.querySelectorAll('script')) {\n      const newScript = copyScriptTag(script)\n      if (newScript) script.replaceWith(newScript)\n    }\n    return\n  }\n\n  const currentTurboBody = currentBody.querySelector('[data-turbo-body]')\n  const newTurboBody = newBody.querySelector('[data-turbo-body]')\n\n  if (currentTurboBody && newTurboBody) {\n    replaceElementAttributes(currentBody, newBody)\n    currentTurboBody.replaceWith(newTurboBody)\n  } else {\n    dispatchTurboReload('missing_turbo_body')\n    window.location.reload()\n  }\n}\n\nssrSafeWindow?.addEventListener('popstate', () => {\n  const currentDocument = document.documentElement\n  const cachedAttributes = getCachedAttributes()\n\n  if (!cachedAttributes) return\n\n  for (const attr of currentDocument.attributes) {\n    if (!cachedAttributes.find(cached => cached.nodeName === attr.nodeName)) {\n      currentDocument.removeAttribute(attr.nodeName)\n    }\n  }\n\n  for (const attr of cachedAttributes) {\n    if (currentDocument.getAttribute(attr.nodeName) !== attr.nodeValue) {\n      currentDocument.setAttribute(attr.nodeName, attr.nodeValue!)\n    }\n  }\n})\n","import {\n  endSoftNav,\n  failSoftNav,\n  initSoftNav,\n  succeedSoftNav,\n  SOFT_NAV_STATE,\n  renderedSoftNav,\n  hasSoftNavFailure,\n  inSoftNav,\n  setSoftNavFailReason,\n  setSoftNavMechanism,\n} from '@github-ui/soft-nav'\nimport {setDocumentAttributesCache} from './cache'\nimport {markTurboHasLoaded} from './utils'\nimport {beginProgressBar, completeProgressBar} from './progress-bar'\nimport {ssrSafeDocument} from '@github-ui/ssr-utils'\n\n// In case this event is triggered, it means we are in a Frame navigation, so we update the mechanism (if needed).\nssrSafeDocument?.addEventListener('turbo:frame-load', () => {\n  // When going to a React page, there is a chance that the soft-nav end event finishes before the frame-load event.\n  // In that case, we don't want to start a new soft-nav event here, so we'll skip this if the soft-nav has already ended.\n  if (inSoftNav()) setSoftNavMechanism('turbo.frame')\n  // When navigating using frames, we either render here, or wait for the react-app to render.\n  renderedSoftNav({skipIfGoingToReactApp: true, allowedMechanisms: ['turbo.frame']})\n})\n\n// Turbo navigations should end here, unless we are navigating to a React app. In that case, React itself will\n// end the navigation, since Turbo doesn't know when React is done rendering.\nssrSafeDocument?.addEventListener('turbo:load', event => {\n  markTurboHasLoaded()\n  const isHardLoad = Object.keys((event as CustomEvent).detail.timing).length === 0\n\n  if (inSoftNav() && !isHardLoad && !hasSoftNavFailure()) {\n    // When navigating using drive, we either render here, or wait for the react-app to render.\n    renderedSoftNav({skipIfGoingToReactApp: true, allowedMechanisms: ['turbo']})\n    // If going to a react app, we let React succeed the soft-nav.\n    succeedSoftNav({skipIfGoingToReactApp: true, allowedMechanisms: ['turbo', 'turbo.frame']})\n  } else if (isHardLoad && (hasSoftNavFailure() || inSoftNav())) {\n    // If going to a react app, we let React fail the soft-nav.\n    failSoftNav({skipIfGoingToReactApp: true, allowedMechanisms: ['turbo', 'turbo.frame']})\n  } else if (isHardLoad) {\n    initSoftNav()\n  }\n})\n\nssrSafeDocument?.addEventListener('beforeunload', () => endSoftNav())\n\n// Set the failure reason when we get a reload\nssrSafeDocument?.addEventListener('turbo:reload', function (event) {\n  if (!(event instanceof CustomEvent)) return\n\n  setSoftNavFailReason(event.detail.reason)\n})\n\nssrSafeDocument?.addEventListener(SOFT_NAV_STATE.END, setDocumentAttributesCache)\n\nssrSafeDocument?.addEventListener(SOFT_NAV_STATE.PROGRESS_BAR.START, beginProgressBar)\nssrSafeDocument?.addEventListener(SOFT_NAV_STATE.PROGRESS_BAR.END, completeProgressBar)\n","import {setCookie} from '../cookies'\nimport timezone from '../timezone'\n\n// eslint-disable-next-line compat/compat\nwindow.requestIdleCallback(() => {\n  const value = timezone()\n  if (value) {\n    setCookie('tz', encodeURIComponent(value))\n  }\n})\n","export default function timezone(): string | void {\n  if ('Intl' in window) {\n    try {\n      const format = new window.Intl.DateTimeFormat()\n      return format.resolvedOptions().timeZone\n    } catch {\n      // ignore\n    }\n  }\n}\n","import {fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {requestSubmit} from '@github-ui/form-utils'\n\nlet unreadCount = 0\n\nfunction markThreadAsRead() {\n  if (!document.hasFocus()) return\n  const form = document.querySelector('.js-timeline-marker-form')\n  if (form && form instanceof HTMLFormElement) requestSubmit(form)\n}\n\nconst observer =\n  'IntersectionObserver' in window\n    ? new IntersectionObserver(\n        function (entries) {\n          for (const entry of entries) {\n            if (entry.isIntersecting) {\n              clearUnread(entry.target)\n            }\n          }\n        },\n        {\n          root: null,\n          rootMargin: '0px',\n          threshold: 1.0,\n        },\n      )\n    : null\n\nobserve('.js-unread-item', {\n  constructor: HTMLElement,\n  add(el) {\n    unreadCount++\n    if (observer) {\n      observer.observe(el)\n    }\n  },\n  remove(el) {\n    unreadCount--\n    if (observer) {\n      observer.unobserve(el)\n    }\n    if (unreadCount === 0) {\n      markThreadAsRead()\n    }\n  },\n})\n\nfunction clearUnread(el: Element) {\n  el.classList.remove('js-unread-item', 'unread-item')\n}\n\n// Mark any unread comments as read if the user has marked the thread as read\n// in another tab or remotely via email notification.\nobserve('.js-discussion[data-channel-target]', {\n  subscribe: el =>\n    fromEvent(el, 'socket:message', function (event: Event) {\n      const target = event.target as Element\n      const data = (event as CustomEvent).detail.data\n      if (target.getAttribute('data-channel-target') === data.gid) {\n        for (const item of document.querySelectorAll('.js-unread-item')) {\n          clearUnread(item)\n        }\n      }\n    }),\n})\n","// Unread Item Counter\n//\n// Keeps count of how many unread items are present throughout the page. The\n// count is reflected in the page title automatically.\n//\n// To increase or decrease the page title counter, it's as simple as adding or\n// removing the `.js-unread-item` class from an element. The counter is reset and\n// the page title is cleared when there are no more elements with the\n// `.js-unread-item` class present.\n//\n// Markup\n//\n// ``` html\n// <div class=\"comment js-comment js-unread-item\">\n//   :metal:\n// </div>\n// ```\n//\n\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nlet unreadCounter = 0\nconst titleRe = /^\\(\\d+\\)\\s+/\n\nfunction updateTitle() {\n  const prefix = unreadCounter ? `(${unreadCounter}) ` : ''\n  if (document.title.match(titleRe)) {\n    document.title = document.title.replace(titleRe, prefix)\n  } else {\n    document.title = `${prefix}${document.title}`\n  }\n}\n\nobserve('.js-unread-item', {\n  add() {\n    unreadCounter++\n    updateTitle()\n  },\n  remove() {\n    unreadCounter--\n    updateTitle()\n  },\n})\n","import {registerStaleRecords, replaceContent} from '../updatable-content'\nimport {ready} from '@github-ui/document-ready'\nimport {replaceState} from '../history'\n\nasync function reapplyPreviouslyUpdatedContent() {\n  if (!history.state || !history.state.staleRecords) return\n  await ready\n  for (const url in history.state.staleRecords) {\n    for (const urlTarget of document.querySelectorAll(\n      `.js-updatable-content [data-url='${url}'], .js-updatable-content[data-url='${url}']`,\n    )) {\n      const data = history.state.staleRecords[url]\n      if (urlTarget instanceof HTMLElement) replaceContent(urlTarget, data, true)\n    }\n  }\n  replaceState(null, '', location.href)\n}\n\nwindow.addEventListener('pagehide', registerStaleRecords)\n\ntry {\n  reapplyPreviouslyUpdatedContent()\n} catch {\n  // ignore\n}\n","//\n// Updatable Content\n//\n// Markup\n//\n//     <div class=\"js-socket-channel js-updatable-content\"\n//          data-channel=\"pull:123\"\n//          data-url=\"/pull/123?partial=commits\">\n//     </div>\n//\n\nimport {fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {updateContent} from '../updatable-content'\n\nobserve('.js-socket-channel.js-updatable-content', {\n  subscribe: el =>\n    fromEvent(el, 'socket:message', function (event: Event) {\n      const {gid, wait} = (event as CustomEvent).detail.data\n      const container = event.target as HTMLElement\n      const target = gid ? findByGid(container, gid) : container\n      if (target) setTimeout(updateContent, wait || 0, target)\n    }),\n})\n\nfunction findByGid(root: HTMLElement, gid: string): HTMLElement | null {\n  if (root.getAttribute('data-gid') === gid) return root\n  for (const el of root.querySelectorAll<HTMLElement>(`[data-url][data-gid]`)) {\n    if (el.getAttribute('data-gid') === gid) {\n      return el\n    }\n  }\n  return null\n}\n","import {dialog} from '@github-ui/details-dialog'\nimport {fetchSafeDocumentFragment} from '@github-ui/fetch-utils'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\non('upload:setup', '.js-upload-avatar-image', function (event) {\n  const {form} = event.detail\n  const orgId = event.currentTarget.getAttribute('data-alambic-organization')\n  const ownerType = event.currentTarget.getAttribute('data-alambic-owner-type')\n  const ownerId = event.currentTarget.getAttribute('data-alambic-owner-id')\n  if (orgId) {\n    form.append('organization_id', orgId)\n  }\n  if (ownerType) {\n    form.append('owner_type', ownerType)\n  }\n  if (ownerId) {\n    form.append('owner_id', ownerId)\n  }\n})\n\non('upload:complete', '.js-upload-avatar-image', function (event) {\n  const {attachment} = event.detail\n  const url = `/settings/avatars/${attachment.id}`\n  dialog({content: fetchSafeDocumentFragment(document, url), detailsClass: 'upload-avatar-details'})\n})\n\non('dialog:remove', '.upload-avatar-details', async function (element) {\n  const cropForm = element.currentTarget.querySelector('#avatar-crop-form')!\n  const id = cropForm.getAttribute('data-alambic-avatar-id')!\n  const url = `/settings/avatars/${id}?op=destroy`\n\n  const csrfToken = element.currentTarget.querySelector('.js-avatar-post-csrf')!.getAttribute('value')!\n\n  const request = new Request(url, {\n    method: 'POST',\n    headers: {\n      'Scoped-CSRF-Token': csrfToken,\n      'X-Requested-With': 'XMLHttpRequest',\n    },\n  })\n\n  await self.fetch(request)\n})\n","// Support linking to named anchors in user content\n//\n// Named elements in user content are prefixed with \"user-content-\" to prevent\n// DOM clobbering. This allows users to link to the unprefixed named anchors by\n// listening for hashchange and, when when no elements with an ID or name of the\n// given hash exist, looks for an element with a prefixed name.\n//\n// See https://github.com/github/github/issues/23103 for more information.\n\nimport {decodeFragmentValue, findElementByFragmentName} from '../fragment-target'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {ready} from '@github-ui/document-ready'\nimport {scrollIntoView} from '../sticky-scroll-into-view'\nimport {getUserContentScrolling} from '@github-ui/allow-user-content-scrolling'\n\nfunction hashchange() {\n  if (!getUserContentScrolling()) {\n    return\n  }\n\n  if (document.querySelector(':target')) {\n    return\n  }\n  const hash = decodeFragmentValue(location.hash)\n\n  // Auto-generated wiki ToCs prefix the hash with \"user-content-\". This allows users to link to the unprefixed named\n  // by clicking the markdown header  or by copying the link from the ToC.\n  const normalizedHash = hash.startsWith('user-content-') ? hash : `user-content-${hash}`\n\n  // Check for an element with the given hash as is to support links from auto-generated wiki ToCs, if not found,\n  // check for an element with the hash in lowercase to support markdown links i.e. [text](url).\n  const target =\n    findElementByFragmentName(document, normalizedHash) ??\n    findElementByFragmentName(document, normalizedHash.toLowerCase())\n\n  if (target) {\n    scrollIntoView(target)\n  }\n}\n\n// Scroll to anchor when clicked on page.\nwindow.addEventListener('hashchange', hashchange)\n\n// Scroll to anchor on turbo navigation\ndocument.addEventListener('turbo:load', hashchange)\n\n// Scroll to anchor on page load.\n;(async function () {\n  await ready\n  hashchange()\n})()\n\n// Scroll to anchor when clicking on a link that has the exact same fragment\n// identifier as already present in the URL. This won't trigger `hashchange`,\n// so we need to scroll manually.\non('click', 'a[href]', function (event) {\n  const {currentTarget} = event\n  if (!(currentTarget instanceof HTMLAnchorElement)) return\n\n  if (currentTarget.href === location.href && location.hash.length > 1) {\n    setTimeout(function () {\n      if (!event.defaultPrevented) hashchange()\n    })\n  }\n})\n","import {fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nasync function load() {\n  await import('../user-status-submit')\n}\n\nobserve('.js-user-status-container, .js-load-user-status-submit', {\n  subscribe: el => fromEvent(el, 'click', load, {once: true}),\n})\n","// User list dialogs\n//\n// Handle user list creation, deletion, and editing.\n\n// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\nimport type {SimpleResponse} from '@github/remote-form'\nimport {TemplateInstance} from '@github/template-parts'\nimport {dialog} from '@github-ui/details-dialog'\nimport {hasDirtyFields} from '../has-interactions'\nimport {onInput} from '../onfocus'\nimport {parseHTML} from '@github-ui/parse-html'\nimport {remoteForm} from '@github/remote-form'\nimport {requestSubmit} from '@github-ui/form-utils'\nimport {showGlobalError} from './ajax-error'\nimport {updateContent} from '../updatable-content'\nimport {updateSocialCounts} from './social'\n\n// Communicate a generic error, not associated with a specific attribute, to the user. This is used if the\n// server does something unexpected, like returning a 500 error or reporting an unrecognized attribute.\nfunction setFlashError(form: HTMLFormElement, message?: string) {\n  const flash = form.querySelector<HTMLElement>('.js-user-list-base')\n  if (flash) {\n    flash.textContent = message || flash.getAttribute('data-generic-message')\n    flash.hidden = false\n  }\n}\n\n// Clear any validation errors from the form. If a specific formGroup is provided, only clear errors from that\n// group. Otherwise, clear errors from all groups. In either case, flash errors should be cleared as well.\nfunction resetValidation(form: HTMLFormElement, formGroup?: HTMLElement) {\n  const container = formGroup || form\n  const notes = container.querySelectorAll<HTMLElement>('.js-user-list-error')\n  for (const note of notes) {\n    note.hidden = true\n  }\n\n  const groups = formGroup ? [formGroup] : form.querySelectorAll<HTMLElement>('.errored.js-user-list-input-container')\n  for (const group of groups) {\n    group.classList.remove('errored')\n  }\n\n  const flash = form.querySelector<HTMLElement>('.js-user-list-base')\n  if (flash) {\n    flash.hidden = true\n  }\n}\n\n// Wire up remote form submission. Clear preexisting validation errors from the form, submit it with XHR, and interpret\n// the server's response. On success, reload the page. On failure, attempt to interpret the response as validation\n// errors and display them next to the appropriate inputs.\nremoteForm('.js-user-list-form', async function (form, wants) {\n  resetValidation(form)\n\n  const submitButton = form.querySelector<HTMLButtonElement>('[data-submitting-message]')\n  const originalButtonText = submitButton?.textContent\n  if (submitButton) {\n    // We can't use data-disable-with here because the button is re-enabled immediately after the response is received,\n    // but before we have a chance to handle it and redirect or swap out the form contents. This results in a\n    // disorienting jitter.\n    submitButton.textContent = submitButton.getAttribute('data-submitting-message')\n    submitButton.disabled = true\n  }\n\n  for (const input of form.querySelectorAll<HTMLInputElement>('.js-user-list-input')) {\n    input.disabled = true\n  }\n\n  try {\n    const response = await wants.html()\n\n    // Let a containing element determine how to handle the response.\n    fire(form, 'user-list-form:success', response.html)\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    if (error.response?.status === 422) {\n      // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n      form.replaceWith(error.response.html)\n    } else {\n      setFlashError(form)\n\n      if (submitButton) {\n        if (originalButtonText) submitButton.textContent = originalButtonText\n        submitButton.disabled = false\n      }\n\n      for (const input of form.querySelectorAll<HTMLInputElement>('.js-user-list-input')) {\n        input.disabled = false\n      }\n    }\n  }\n})\n\non('user-list-form:success', '.js-follow-list', event => {\n  const responseBody = event.detail\n  const targetUrlElement =\n    responseBody instanceof DocumentFragment ? responseBody.querySelector<HTMLAnchorElement>('.js-target-url') : null\n  if (targetUrlElement?.href) {\n    location.href = targetUrlElement.href\n  } else {\n    location.reload()\n  }\n})\n\n// Dismiss a validation error from a form input when you start changing it.\nfunction clearErrorsFromInput(event: Event) {\n  if (!(event.currentTarget instanceof HTMLElement)) {\n    return\n  }\n\n  const form = event.currentTarget.closest<HTMLFormElement>('.js-user-list-form')\n  const formGroup = event.currentTarget.closest<HTMLElement>('.js-user-list-input-container')\n  if (form && formGroup) {\n    resetValidation(form, formGroup)\n  }\n}\n\nonInput('.js-user-list-form input', clearErrorsFromInput)\nonInput('.js-user-list-form textarea', clearErrorsFromInput)\n\n// Unhide the .note element containing the validation error reported by <auto-check> when there's an error to show.\non('auto-check-error', '.js-user-list-form input', function (event) {\n  const formGroup = event.currentTarget.closest<HTMLElement>('.js-user-list-input-container')\n  const note = formGroup?.querySelector<HTMLElement>('.js-user-list-error')\n  if (note) {\n    note.hidden = false\n  }\n})\n\n// Star button UserList menu\n\n// Given a collection of UserList menu root elements, construct a map grouping them by the repository ID each\n// corresponds to.\nfunction groupRootsByRepositoryId(roots: Iterable<HTMLElement>): Map<string, HTMLElement[]> {\n  const rootsByRepositoryId = new Map<string, HTMLElement[]>()\n  for (const root of roots) {\n    const repositoryId = root\n      .querySelector<HTMLInputElement>('.js-user-lists-create-trigger')\n      ?.getAttribute('data-repository-id')\n    if (repositoryId) {\n      const existingRoots = rootsByRepositoryId.get(repositoryId)\n      if (existingRoots) {\n        existingRoots.push(root)\n      } else {\n        rootsByRepositoryId.set(repositoryId, [root])\n      }\n    }\n  }\n  return rootsByRepositoryId\n}\n\n// Perform a POST request to the batch-render endpoint to render a collection of UserList menus corresponding to the\n// repositories. Asynchronously returns a Map<repository ID> => rendered HTML generated for that repository.\n//\n// Rejects its promise on network errors, but returns an empty map on server errors.\nasync function requestMenuBatchRender(\n  batchUpdateUrl: string,\n  csrfToken: string,\n  repositoryIds: Iterable<string>,\n): Promise<Map<string, DocumentFragment>> {\n  const postData = new FormData()\n\n  // eslint-disable-next-line github/authenticity-token\n  postData.set('authenticity_token', csrfToken)\n  for (const repositoryId of repositoryIds) {\n    postData.append('repository_ids[]', repositoryId)\n  }\n\n  const response = await fetch(batchUpdateUrl, {\n    method: 'POST',\n    body: postData,\n    headers: {\n      Accept: 'application/json',\n      'X-Requested-With': 'XMLHttpRequest',\n    },\n  })\n\n  const updatedMenuContents = new Map<string, DocumentFragment>()\n  if (response.ok) {\n    const json = await response.json()\n    for (const key in json) {\n      updatedMenuContents.set(key, parseHTML(document, json[key]))\n    }\n  }\n  return updatedMenuContents\n}\n\n// Replace the contents of UserList menus in the DOM with the updated, rendered HTML generated for each by the batch\n// render endpoint.\nfunction replaceUserListMenuRoots(\n  renderedMenuContents: Map<string, DocumentFragment>,\n  rootsByRepositoryId: Map<string, HTMLElement[]>,\n) {\n  for (const [repositoryId, updatedMenu] of renderedMenuContents.entries()) {\n    const matchingRoots = rootsByRepositoryId.get(repositoryId) || []\n    for (const root of matchingRoots) {\n      root.replaceWith(matchingRoots.length === 1 ? updatedMenu : updatedMenu.cloneNode(true))\n    }\n  }\n}\n\n// Perform a single request to replace all UserList menus currently present in the DOM with updated versions from the\n// server.\n//\n// Expects a response in form of:\n//\n// {\n//   \"<repo id 0>\": \"<div> <!-- markup for menu for repo 0 --></div>\",\n//   \"<repo id 1>\": \"<div> <!-- markup for menu for repo 1 --></div>\",\n//   \"<repo id 2>\": \"<div> <!-- markup for menu for repo 2 --></div>\"\n// }\nasync function updateAllUserListMenus() {\n  const roots = document.querySelectorAll<HTMLElement>('.js-user-list-menu-content-root')\n  if (roots.length === 0) return\n\n  const batchUpdateUrl = roots[0]!.getAttribute('data-batch-update-url')\n  if (!batchUpdateUrl) return\n\n  const csrfToken = roots[0]!.querySelector<HTMLInputElement>('.js-user-list-batch-update-csrf')?.value\n  if (!csrfToken) return\n\n  const rootsByRepositoryId = groupRootsByRepositoryId(roots)\n  const repositoryIds = rootsByRepositoryId.keys()\n  const renderedMenuContents = await requestMenuBatchRender(batchUpdateUrl, csrfToken, repositoryIds)\n  if (renderedMenuContents.size > 0) {\n    replaceUserListMenuRoots(renderedMenuContents, rootsByRepositoryId)\n  }\n}\n\nfunction requestUserListMenuFormSubmit(form: HTMLFormElement) {\n  const promise = new Promise<void>((resolve, reject) => {\n    form.addEventListener('user-list-menu-form:success', () => resolve())\n    form.addEventListener('user-list-menu-form:error', error => reject(error))\n  })\n  requestSubmit(form)\n  return promise\n}\n\nfunction submitUserListFormOnToggle(event: Event) {\n  const detailsElement = event.target\n  if (!(detailsElement instanceof HTMLDetailsElement)) return\n  if (detailsElement.hasAttribute('open')) return\n\n  const form = detailsElement.querySelector<HTMLFormElement>('.js-user-list-menu-form')\n  if (form && hasDirtyFields(form)) requestSubmit(form)\n\n  const triggerText = detailsElement.querySelector('.js-user-list-create-trigger-text')\n  if (triggerText) triggerText.textContent = ''\n}\n\non('toggle', '.js-user-list-menu', submitUserListFormOnToggle, {capture: true})\n\nonInput('.js-user-lists-menu-filter', (event: Event) => {\n  const target = event.currentTarget as HTMLInputElement\n  const value = target.value.trim()\n  const root = target.closest('.js-user-list-menu-content-root')\n  const triggerText = root?.querySelector('.js-user-list-create-trigger-text')\n\n  if (!triggerText) return\n  triggerText.textContent = value ? `\"${value}\"` : ''\n})\n\nremoteForm('.js-user-list-menu-form', async function (form, wants) {\n  let response: SimpleResponse\n  try {\n    response = await wants.json()\n  } catch (error) {\n    showGlobalError()\n    fire(form, 'user-list-menu-form:error', error)\n    return\n  }\n\n  // Update the star button state and counts if necessary.\n  // We only update the star count if the repo was just starred. Otherwise the count could jump every time you dismiss\n  // the menu, which would be jarring.\n  if (response.json.didStar) {\n    const togglerContainer = form.closest<HTMLElement>('.js-toggler-container')\n    if (togglerContainer) togglerContainer.classList.add('on')\n\n    const starCount = response.json.starCount\n    if (starCount) {\n      const socialContainer = form.closest<HTMLElement>('.js-social-container')\n      if (socialContainer) updateSocialCounts(socialContainer, starCount)\n    }\n  }\n\n  const menuContentRoot = form.closest<HTMLElement>('.js-user-list-menu-content-root[data-update-after-submit]')\n  if (menuContentRoot) {\n    // Reset checkbox state before potentially calling updateContent() to avoid the checkboxes being detected as \"dirty\"\n    // and terminating the update. They'll be checked in the updated content, assuming the repo was in fact added\n    // successfully.\n    for (const input of form.querySelectorAll<HTMLInputElement>('.js-user-list-menu-item')) {\n      input.checked = input.defaultChecked\n    }\n  }\n\n  if (response.json.didCreate) {\n    // There's a new UserList to include in the menus now. Let's batch-update them all.\n    await updateAllUserListMenus()\n  } else if (menuContentRoot) {\n    // Otherwise, only update our local menu.\n    await updateContent(menuContentRoot)\n  }\n\n  fire(form, 'user-list-menu-form:success')\n})\n\n// Delete dialog\n\non('click', '.js-user-list-delete-confirmation-trigger', event => {\n  const {currentTarget} = event\n  const templateID = currentTarget.getAttribute('data-template-id')\n  if (!templateID) return\n\n  const template = document.getElementById(templateID)\n  if (!template || !(template instanceof HTMLTemplateElement)) return\n\n  const editDialog = currentTarget.closest<HTMLDetailsElement>('.js-edit-user-list-dialog')\n  if (editDialog) {\n    editDialog.open = false\n  }\n  const content = template.content.cloneNode(true)\n  const labelledBy = template.getAttribute('data-labelledby')!\n\n  dialog({content, labelledBy})\n})\n\n// Create dialog\n\non('click', '.js-user-lists-create-trigger', async function (event) {\n  const {currentTarget} = event\n  const template = document.querySelector<HTMLTemplateElement>('.js-user-list-create-dialog-template')\n  const repositoryId = event.currentTarget.getAttribute('data-repository-id')\n  const userListMenuRoot = currentTarget.closest<HTMLElement>('.js-user-list-menu-content-root')\n  const filter = userListMenuRoot?.querySelector<HTMLInputElement>('.js-user-lists-menu-filter')\n  const placeholderName = filter?.value.trim()\n\n  if (!template || !(template instanceof HTMLTemplateElement) || !repositoryId) {\n    // No template rendered on the page, or malformed button markup.\n    // Disable the button as something marginally better than silently doing nothing.\n    if (currentTarget instanceof HTMLButtonElement) {\n      currentTarget.disabled = true\n    }\n    return\n  }\n\n  const label = template.getAttribute('data-label')!\n\n  // Submit the form first if there are any dirty fields.\n  if (userListMenuRoot && hasDirtyFields(userListMenuRoot)) {\n    const userListMenuForm = userListMenuRoot.querySelector<HTMLFormElement>('.js-user-list-menu-form')\n    if (userListMenuForm) await requestUserListMenuFormSubmit(userListMenuForm)\n  }\n\n  const content = new TemplateInstance(template, {repositoryId, placeholderName})\n  const dialogElement = await dialog({content, label})\n\n  dialogElement.addEventListener('user-list-form:success', async formEvent => {\n    const payload = (formEvent as CustomEvent).detail\n    if (!(payload instanceof DocumentFragment)) return\n\n    // Update the star button.\n    const urlTargetElement = payload.querySelector('.js-target-url')\n\n    const didStar = urlTargetElement?.getAttribute('data-did-star') === 'true'\n    if (!didStar) return\n\n    const togglerContainer = currentTarget.closest<HTMLElement>('.js-toggler-container')\n    if (togglerContainer) togglerContainer.classList.add('on')\n\n    const starCount = urlTargetElement?.getAttribute('data-star-count')\n    if (starCount) {\n      const socialContainer = currentTarget.closest<HTMLElement>('.js-social-container')\n      if (socialContainer) updateSocialCounts(socialContainer, starCount)\n    }\n\n    // Update all currently loaded user list menu contents to include the created list.\n    await updateAllUserListMenus()\n\n    // Then, dismiss the dialog.\n    const detailsElement = dialogElement.closest<HTMLDetailsElement>('details')\n    if (detailsElement) detailsElement.open = false\n  })\n})\n","import {hasDirtyFields} from '../has-interactions'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\n// Add the 'data-warn-unsaved-changes' attribute to any form/container element\n// and it will be monitored for changes. If the user attempts to\n// navigate away from the page without first saving their changes, an alert\n// will warn them.\nobserve('[data-warn-unsaved-changes]', {\n  add(container) {\n    container.addEventListener('input', prepareUnsavedChangesWarning)\n    container.addEventListener('change', prepareUnsavedChangesWarning)\n    container.addEventListener('submit', disableSaveChangesReminder)\n\n    const dialog = container.closest('details-dialog')\n    if (dialog) {\n      dialog.closest<HTMLElement>('details')!.addEventListener('toggle', disableSaveChangesReminderOnClosedDialogs)\n      dialog.addEventListener('details-dialog-close', promptOnDialogClosing)\n    }\n  },\n  remove(container) {\n    container.removeEventListener('input', prepareUnsavedChangesWarning)\n    container.removeEventListener('change', prepareUnsavedChangesWarning)\n    container.removeEventListener('submit', disableSaveChangesReminder)\n\n    const dialog = container.closest('details-dialog')\n    if (dialog) {\n      dialog.closest<HTMLElement>('details')!.removeEventListener('toggle', disableSaveChangesReminderOnClosedDialogs)\n      dialog.removeEventListener('details-dialog-close', promptOnDialogClosing)\n      disableSaveChangesReminder()\n    }\n  },\n})\n\nfunction prepareUnsavedChangesWarning(event: Event) {\n  const currentTarget = event.currentTarget as Element\n\n  if (hasDirtyFields(currentTarget)) {\n    enableSaveChangesReminder(currentTarget)\n  } else {\n    disableSaveChangesReminder()\n  }\n}\n\nfunction enableSaveChangesReminder(container: Element) {\n  // This message is ignored by most browsers.\n  // eslint-disable-next-line i18n-text/no-en\n  const message = container.getAttribute('data-warn-unsaved-changes') || 'Changes you made may not be saved.'\n\n  window.onbeforeunload = function (event: BeforeUnloadEvent): string {\n    event.returnValue = message\n    return message\n  }\n}\n\nfunction disableSaveChangesReminder() {\n  window.onbeforeunload = null\n}\n\nfunction disableSaveChangesReminderOnClosedDialogs({currentTarget}: Event) {\n  if (!(currentTarget as Element).hasAttribute('open')) {\n    disableSaveChangesReminder()\n  }\n}\n\nfunction promptOnDialogClosing(event: Event) {\n  const dialog = event.currentTarget as Element\n  const details = dialog.closest('details[open]')\n  if (!details) {\n    return\n  }\n\n  let confirmed = true\n  const confirmationForms = dialog.querySelectorAll<HTMLFormElement>('form[data-warn-unsaved-changes]')\n  for (const form of confirmationForms) {\n    if (hasDirtyFields(form)) {\n      const message = form.getAttribute('data-warn-unsaved-changes')!\n      confirmed = confirm(message)\n      break\n    }\n  }\n\n  if (!confirmed) {\n    event.preventDefault()\n  }\n}\n","// Perform CSS transition once\n//\n// Examples\n//\n//   .foo.will-transition-once {\n//     transition: color ...;\n//   }\n//\n//   .foo.is-successful {\n//     background: green;\n//   }\n//\n\nimport {fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('.will-transition-once', {\n  constructor: HTMLElement,\n  subscribe: el => fromEvent(el, 'transitionend', onTransitionEnd),\n})\n\nfunction onTransitionEnd(event: Event) {\n  const target = event.target as Element\n  target.classList.remove('will-transition-once')\n}\n","import {fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\n// Load issue/PR/discussion references to display the title for the tooltip from the server on hover.\n// If hovercards are enabled for the referenced type on this part of the DOM,\n// this behavior is bypassed in favor of the hovercard.\nasync function issueLabel(event: Event) {\n  const currentTarget = event.currentTarget as HTMLElement\n  const url = currentTarget.getAttribute('data-url')\n  if (!url || isHovercardEnabled(currentTarget)) {\n    return\n  }\n\n  const id = currentTarget.getAttribute('data-id') || ''\n  const text = currentTarget.textContent\n  const elements = document.querySelectorAll(`.js-issue-link[data-id='${id}']`)\n\n  for (const el of elements) {\n    el.removeAttribute('data-url')\n  }\n\n  try {\n    const titleUrl = `${url}/title`\n    const response = await fetch(titleUrl, {\n      headers: {\n        'X-Requested-With': 'XMLHttpRequest',\n        Accept: 'application/json',\n      },\n    })\n    if (!response.ok) {\n      const responseError = new Error()\n      const statusText = response.statusText ? ` ${response.statusText}` : ''\n      responseError.message = `HTTP ${response.status}${statusText}`\n      throw responseError\n    }\n    const data = await response.json()\n    setLabel(elements, `${text}, ${data.title}`)\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    const status = (error.response != null ? error.response.status : undefined) || 500\n\n    const message = (() => {\n      switch (status) {\n        case 404:\n          return currentTarget.getAttribute('data-permission-text')\n        default:\n          return currentTarget.getAttribute('data-error-text')\n      }\n    })()\n\n    setLabel(elements, message || '')\n  }\n}\n\nfunction setLabel(elements: NodeList, text: string) {\n  for (const el of elements) {\n    if (!(el instanceof HTMLElement)) continue\n    el.classList.add('tooltipped', 'tooltipped-ne')\n    el.setAttribute('aria-label', text)\n  }\n}\n\nfunction isHovercardEnabled(element: HTMLElement): boolean {\n  const hovercardType = element.getAttribute('data-hovercard-type')\n  switch (hovercardType) {\n    case 'issue':\n    case 'pull_request':\n      return !!element.closest('[data-issue-and-pr-hovercards-enabled]')\n    case 'discussion':\n      return !!element.closest('[data-discussion-hovercards-enabled]')\n    default:\n      return false\n  }\n}\n\nobserve('.js-issue-link', {\n  subscribe: el => fromEvent(el, 'mouseenter', issueLabel),\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\nimport {onFocus, onInput, onKey} from '../onfocus'\nimport {resetCharactersRemainingCounts, updateInputRemainingCharacters} from '../behaviors/characters-remaining'\nimport type {RGB} from 'color-convert/conversions'\nimport {changeValue} from '@github-ui/form-utils'\nimport convert from 'color-convert'\nimport {debounce} from '@github/mini-throttle'\nimport {dialog} from '@github-ui/details-dialog'\nimport {fetchSafeDocumentFragment} from '@github-ui/fetch-utils'\nimport {getUtf8StringLength} from '@github-ui/text'\nimport {remoteForm} from '@github/remote-form'\nimport {toggleDetailsTarget} from '../behaviors/details'\n\nfunction randomRGBColor(): RGB {\n  return [\n    Math.floor(Math.random() * (255 - 0) + 0),\n    Math.floor(Math.random() * (255 - 0) + 0),\n    Math.floor(Math.random() * (255 - 0) + 0),\n  ]\n}\n\n// Given a button element and a hex color code, this will style the button and\n// the octicon within it based on the given color.\nfunction setColorSwatch(colorButton: HTMLButtonElement, rgb: RGB) {\n  const hsl = convert.rgb.hsl(rgb)\n  colorButton.style.setProperty('--label-r', rgb[0].toString())\n  colorButton.style.setProperty('--label-g', rgb[1].toString())\n  colorButton.style.setProperty('--label-b', rgb[2].toString())\n\n  colorButton.style.setProperty('--label-h', hsl[0].toString())\n  colorButton.style.setProperty('--label-s', hsl[1].toString())\n  colorButton.style.setProperty('--label-l', hsl[2].toString())\n}\n\n// Fill the color input field in the 'new label' modal when a button is clicked.\n// Sets the color of the button that acts as the preview of the chosen color.\nfunction setInputColorFromButton(clickedButton: HTMLButtonElement, rgb: RGB) {\n  // eslint-disable-next-line github/no-blur\n  clickedButton.blur()\n\n  const container = clickedButton.closest<HTMLElement>('form')!\n\n  const colorInput = container.querySelector<HTMLInputElement>('.js-new-label-color-input')!\n  changeValue(colorInput, `#${convert.rgb.hex(rgb)}`)\n\n  const colorButton = container.querySelector<HTMLButtonElement>('.js-new-label-color')!\n  setColorSwatch(colorButton, rgb)\n}\n\nfunction addErrorToField(errorEl: HTMLElement, errorMessage: string) {\n  const container = errorEl.closest<HTMLElement>('.js-label-error-container')!\n  container.classList.add('errored')\n  errorEl.textContent = errorMessage\n  errorEl.hidden = false\n}\n\nfunction removeErrorFromField(errorEl: HTMLElement) {\n  const container = errorEl.closest<HTMLElement>('.js-label-error-container')!\n  container.classList.remove('errored')\n  errorEl.hidden = true\n}\n\nfunction showOrHideLabelError(errorSelector: string, form: HTMLFormElement, errorMessages?: string[] | null) {\n  const errorEl = form.querySelector<HTMLElement>(errorSelector)\n  if (!errorEl) {\n    return\n  }\n\n  if (errorMessages) {\n    addErrorToField(errorEl, errorMessages[0]!)\n  } else {\n    removeErrorFromField(errorEl)\n  }\n}\n\ninterface labelError {\n  name?: string[]\n  description?: string[]\n  color?: string[]\n}\n\nfunction showLabelErrors(form: HTMLFormElement, json: labelError) {\n  showOrHideLabelError('.js-label-name-error', form, json.name)\n  showOrHideLabelError('.js-label-description-error', form, json.description)\n  showOrHideLabelError('.js-label-color-error', form, json.color)\n}\n\nfunction hideLabelErrors(form: HTMLFormElement) {\n  showOrHideLabelError('.js-label-name-error', form, null)\n  showOrHideLabelError('.js-label-description-error', form, null)\n  showOrHideLabelError('.js-label-color-error', form, null)\n}\n\nfunction labelPreviewUrl(\n  baseUrl: string,\n  name: string,\n  color: string,\n  description: string | null,\n  labelID: string | null,\n): string {\n  const url = new URL(`${baseUrl}${encodeURIComponent(name)}`, window.location.origin)\n  const params = new URLSearchParams(url.search.slice(1))\n  params.append('color', color)\n  if (description) {\n    params.append('description', description)\n  }\n  if (labelID) {\n    params.append('id', labelID)\n  }\n  url.search = params.toString()\n  return url.toString()\n}\n\nfunction labelDescriptionFrom(form: HTMLFormElement): string | null {\n  let description = null\n  const descriptionInput = form.querySelector('.js-new-label-description-input')\n  if (descriptionInput instanceof HTMLInputElement && descriptionInput.value.trim().length > 0) {\n    description = descriptionInput.value.trim()\n  }\n  return description\n}\n\nfunction labelColorFrom(form: HTMLFormElement): string {\n  const colorInput = form.querySelector<HTMLInputElement>('.js-new-label-color-input')!\n  if (colorInput.checkValidity()) {\n    return colorInput.value.trim().replace(/^#/, '')\n  }\n  return 'ededed'\n}\n\nfunction labelNameFrom(form: HTMLFormElement, previewArea: HTMLElement): string {\n  const nameInput = form.querySelector<HTMLInputElement>('.js-new-label-name-input')!\n  let name = nameInput.value.trim()\n  if (name.length < 1) {\n    name = previewArea.getAttribute('data-default-name')!\n  }\n  return name\n}\n\nasync function updateLabelPreview(startEl: HTMLElement) {\n  const previewContainer = startEl.closest('.js-label-preview-container')\n  if (!previewContainer) {\n    return\n  }\n\n  const form = startEl.closest<HTMLFormElement>('.js-label-form')!\n  const fullErrorMessageEl = form.querySelector<HTMLElement>('.js-new-label-error')\n  const labelID = form.getAttribute('data-label-id')\n  const previewArea = previewContainer.querySelector<HTMLElement>('.js-label-preview')!\n  const name = labelNameFrom(form, previewArea)\n\n  // Default case of \"Label preview\" is also counted as 'invalid' but we still want to update the preview.\n  if (!form.checkValidity() && name !== 'Label preview') {\n    return\n  }\n\n  const color = labelColorFrom(form)\n  const description = labelDescriptionFrom(form)\n\n  const urlTemplate = previewArea.getAttribute('data-url-template')!\n  const url = labelPreviewUrl(urlTemplate, name, color, description, labelID)\n\n  if (previewContainer.hasAttribute('data-last-preview-url')) {\n    const lastPreviewUrl = previewContainer.getAttribute('data-last-preview-url')!\n    if (url === lastPreviewUrl) {\n      return\n    }\n  }\n\n  let fragment\n  try {\n    fragment = await fetchSafeDocumentFragment(document, url)\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    const json = await error.response.json()\n    showLabelErrors(form, json)\n\n    if (fullErrorMessageEl) {\n      fullErrorMessageEl.textContent = json.message\n      fullErrorMessageEl.hidden = false\n    }\n\n    return\n  }\n\n  if (fullErrorMessageEl) {\n    fullErrorMessageEl.textContent = ''\n    fullErrorMessageEl.hidden = true\n  }\n\n  hideLabelErrors(form)\n\n  previewArea.textContent = ''\n  previewArea.appendChild(fragment)\n  previewContainer.setAttribute('data-last-preview-url', url)\n}\n\nfunction onLabelFormInputChange(event: Event) {\n  updateLabelPreview(event.target as HTMLInputElement)\n}\n\nfunction toggleBlankSlate(el: Element, show: boolean) {\n  const detailsContainer = el.closest<HTMLElement>('.js-details-container')!\n  detailsContainer.classList.toggle('is-empty', show)\n}\n\nfunction updateCount(delta: number) {\n  const counter = document.querySelector<HTMLElement>('.js-labels-count')!\n  const oldCount = Number(counter.textContent!)\n  const newCount = oldCount + delta\n  counter.textContent = newCount.toString()\n\n  const label = document.querySelector<HTMLElement>('.js-labels-label')!\n  label.textContent = label.getAttribute(newCount === 1 ? 'data-singular-string' : 'data-plural-string')\n  return newCount\n}\n\n// Update the preview text of the new label based on what the user types in the\n// label filter input.\nonInput('.js-label-filter-field', function (event) {\n  const filterInput = event.target as HTMLInputElement\n  const container = filterInput.closest<HTMLElement>('details-menu')!\n  const labelNameEl = container.querySelector('.js-new-label-name')\n  if (!labelNameEl) {\n    return\n  }\n  const labelName = filterInput.value.trim()\n  labelNameEl.textContent = labelName\n})\n\n// As the user filters existing labels, make sure the 'Add new label' and 'Edit labels'\n// links are visible as appropriate.\non('filterable:change', '.js-filterable-issue-labels', function (event) {\n  const menu = event.currentTarget.closest<HTMLElement>('details-menu')!\n  const addLabelButton = menu.querySelector<HTMLElement>('.js-add-label-button')\n  if (!addLabelButton) return\n\n  const filterInput = event.detail.inputField\n  const newLabelName = filterInput.value.trim().toLowerCase()\n\n  // TODO This could use namedItems.\n  let matchingExistingLabel = false\n  for (const input of menu.querySelectorAll('input[data-label-name]')) {\n    const labelName = input.getAttribute('data-label-name') || ''\n    if (labelName.toLowerCase() === newLabelName) {\n      matchingExistingLabel = true\n      break\n    }\n  }\n\n  addLabelButton.hidden = newLabelName.length === 0 || matchingExistingLabel\n})\n\n// Show the color swatches when the user focuses the color input field.\nonFocus('.js-new-label-color-input', function (input) {\n  const container = input.closest<HTMLElement>('form')!\n  const swatchesContainer = container.querySelector<HTMLElement>('.js-new-label-swatches')!\n  swatchesContainer.hidden = false\n\n  input.addEventListener(\n    'blur',\n    function () {\n      swatchesContainer.hidden = true\n    },\n    {once: true},\n  )\n})\n\n// Update the color swatch as the user types new hex color codes manually into\n// the input.\nonInput('.js-new-label-color-input', function (event) {\n  const input = event.target as HTMLInputElement\n  let color = input.value.trim()\n  if (color.length < 1) {\n    return\n  }\n\n  if (color.indexOf('#') !== 0) {\n    color = `#${color}`\n    input.value = color\n  }\n\n  if (input.checkValidity()) {\n    input.classList.remove('color-fg-danger')\n    const container = input.closest<HTMLElement>('form')!\n    const colorButton = container.querySelector<HTMLButtonElement>('.js-new-label-color')!\n    setColorSwatch(colorButton, convert.hex.rgb(color))\n  } else {\n    input.classList.add('color-fg-danger')\n  }\n})\n\n// Disable save button as the user types if they enter an invalid hex color code.\nonKey('keyup', '.js-new-label-color-input', function (event) {\n  const input = event.target as HTMLInputElement\n  let color = input.value.trim()\n\n  if (color.indexOf('#') !== 0) {\n    color = `#${color}`\n    input.value = color\n  }\n\n  if (input.checkValidity()) {\n    const container = input.closest<HTMLElement>('form')!\n    const colorButton = container.querySelector<HTMLButtonElement>('.js-new-label-color')!\n    setColorSwatch(colorButton, convert.hex.rgb(color))\n  }\n  fire(input, 'change', false)\n\n  const form = input.closest<HTMLFormElement>('form')!\n  hideLabelErrors(form)\n})\n\nonKey('keyup', '.js-new-label-description-input', function (event) {\n  const input = event.target as HTMLInputElement\n  const form = input.form!\n  hideLabelErrors(form)\n})\n\nonKey('keyup', '.js-new-label-color-input', function (event) {\n  const input = event.target as HTMLInputElement\n  const form = input.form!\n  hideLabelErrors(form)\n})\n\n// Get a random color for the new label when the user hits the button that acts as\n// a preview of the selected color.\non('click', '.js-new-label-color', async function (event) {\n  const colorButton = event.currentTarget as HTMLButtonElement\n  const rgb = randomRGBColor()\n  setInputColorFromButton(colorButton, rgb)\n  updateLabelPreview(colorButton)\n})\n\n// Choose one of the predefined colors when it's clicked.\non('mousedown', '.js-new-label-color-swatch', function (event) {\n  const swatchButton = event.currentTarget as HTMLButtonElement\n  const color = swatchButton.getAttribute('data-color')!\n  setInputColorFromButton(swatchButton, convert.hex.rgb(color))\n  updateLabelPreview(swatchButton)\n\n  const swatchesContainer = swatchButton.closest<HTMLElement>('.js-new-label-swatches')!\n  swatchesContainer.hidden = true\n})\n\non(\n  'toggle',\n  '.js-new-label-modal',\n  function (event) {\n    if ((event.target as Element).hasAttribute('open')) {\n      initLabelModal(event.target as Element)\n    }\n  },\n  {capture: true},\n)\n\n// When the new label form is displayed in the modal, set the label and its color\n// in the form fields. Also update the color of the color swatch.\nasync function initLabelModal(modal: Element) {\n  const labelNameInput = modal.querySelector<HTMLInputElement>('.js-new-label-name-input')\n  if (!labelNameInput) return\n\n  const colorInput = modal.querySelector<HTMLInputElement>('.js-new-label-color-input')!\n  const rgb = randomRGBColor()\n  const hex = `#${convert.rgb.hex(rgb)}`\n  colorInput.value = hex\n  const colorButton = modal.querySelector<HTMLButtonElement>('.js-new-label-color')!\n  setColorSwatch(colorButton, rgb)\n\n  const labelNameEl = document.querySelector<HTMLElement>('.js-new-label-name')!\n  const labelName = labelNameEl.textContent!\n  changeValue(labelNameInput, labelName)\n  updateInputRemainingCharacters(labelNameInput)\n\n  updateLabelPreview(colorButton)\n}\n\n// When the user creates a new label, close the modal containing the 'new label'\n// form. Also update the list of available labels to choose from, so the user\n// can immediately apply their new label.\nremoteForm('.js-new-label-modal-form', async function (form, wants) {\n  const errorEl = form.querySelector<HTMLElement>('.js-new-label-error')!\n\n  let response\n  try {\n    response = await wants.html()\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    const json = error.response.json\n    errorEl.textContent = json.message\n    errorEl.hidden = false\n  }\n\n  if (!response) {\n    return\n  }\n\n  errorEl.hidden = true // Hide error message for the form\n\n  // close modal containing the label form\n  document.querySelector<HTMLElement>('.js-new-label-modal')!.removeAttribute('open')\n\n  const menuContent = document.querySelector<HTMLElement>('.js-issue-labels-menu-content')!\n  const list = menuContent.querySelector<HTMLElement>('.js-filterable-issue-labels')!\n  const input = response.html.querySelector('input')\n  list.prepend(response.html)\n\n  // indicate to the filter-sort-list module that the list content has changed\n  list.classList.add('filter-sort-list-refresh')\n\n  // A selected menu item is inserted programmatically so we need to trigger a\n  // change event, which when trigger a details-menu-selected event.\n  if (input) input.dispatchEvent(new Event('change', {bubbles: true}))\n\n  const field = menuContent.querySelector<HTMLInputElement>('.js-label-filter-field')!\n  field.value = field.defaultValue\n  field.focus()\n})\n\n// New and Edit remote form\n// Click \"Cancel\" leaves \"edit mode\"\non('click', '.js-edit-label-cancel', function (event) {\n  const form = (event.target as Element).closest<HTMLFormElement>('form')!\n  hideLabelErrors(form)\n  form.reset()\n\n  // Grab the color we just resetted to and set the background color of the\n  // refresh button to that color since resetting the form doesn't do that for us\n  const colorInput = form.querySelector<HTMLInputElement>('.js-new-label-color-input')!\n  const color = colorInput.value\n  const refreshButton = form.querySelector<HTMLButtonElement>('.js-new-label-color')!\n  setColorSwatch(refreshButton, convert.hex.rgb(color))\n\n  resetCharactersRemainingCounts(form)\n  updateLabelPreview(colorInput)\n\n  // If editing an existing label, hide the form on Cancel:\n  const item = event.currentTarget.closest('.js-labels-list-item')\n  if (item) {\n    const editForm = item.querySelector<HTMLElement>('.js-update-label')!\n    /* eslint-disable-next-line github/no-d-none */\n    editForm.classList.add('d-none')\n\n    const labelPreview = item.querySelector('.js-label-preview')\n    if (labelPreview) {\n      /* eslint-disable-next-line github/no-d-none */\n      labelPreview.classList.add('d-none')\n\n      const labelLink = item.querySelector<HTMLElement>('.js-label-link')!\n      /* eslint-disable-next-line github/no-d-none */\n      labelLink.classList.remove('d-none')\n    }\n\n    const elementsToShow = item.querySelectorAll<HTMLElement>('.js-hide-on-label-edit')\n    for (const el of elementsToShow) {\n      el.hidden = !el.hidden\n    }\n  }\n})\n\n// Replace item row with contents from server on Edit\nremoteForm('.js-update-label', async function (form, wants) {\n  let response\n\n  try {\n    response = await wants.html()\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    const json = error.response.json\n    showLabelErrors(form, json)\n    return\n  }\n\n  hideLabelErrors(form)\n\n  const item = form.closest<HTMLElement>('.js-labels-list-item')!\n  item.replaceWith(response.html)\n})\n\n// Add new label to list and clear out the form\nremoteForm('.js-create-label', async function (form, wants) {\n  let response\n\n  try {\n    response = await wants.html()\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    const json = error.response.json\n    showLabelErrors(form, json)\n    return\n  }\n\n  form.reset()\n  hideLabelErrors(form)\n\n  document.querySelector<HTMLElement>('.js-label-list')!.prepend(response.html)\n\n  updateCount(+1)\n\n  toggleBlankSlate(form, false)\n\n  const colorButton = form.querySelector<HTMLButtonElement>('.js-new-label-color')!\n  const rgb = randomRGBColor()\n  setInputColorFromButton(colorButton, rgb)\n  updateLabelPreview(form.querySelector<HTMLInputElement>('.js-new-label-name-input')!)\n\n  resetCharactersRemainingCounts(form)\n\n  const detailsContainer = form.closest('.js-details-container')\n  if (detailsContainer instanceof HTMLElement) {\n    toggleDetailsTarget(detailsContainer)\n  }\n})\n\n// Click 'New label' button\non('click', '.js-details-target-new-label', function () {\n  const createForm = document.querySelector<HTMLElement>('.js-create-label')!\n  const nameInput = createForm.querySelector<HTMLInputElement>('.js-new-label-name-input')!\n  nameInput.focus()\n})\n\n// Click \"Edit\" enters \"edit mode\"\non('click', '.js-edit-label', function (event) {\n  const item = event.currentTarget.closest<HTMLElement>('.js-labels-list-item')!\n  const editForm = item.querySelector<HTMLElement>('.js-update-label')!\n  /* eslint-disable-next-line github/no-d-none */\n  editForm.classList.remove('d-none')\n  const nameInput = editForm.querySelector<HTMLInputElement>('.js-new-label-name-input')!\n  nameInput.focus()\n\n  const labelPreview = item.querySelector('.js-label-preview')\n  if (labelPreview) {\n    /* eslint-disable-next-line github/no-d-none */\n    labelPreview.classList.remove('d-none')\n\n    const labelLink = item.querySelector<HTMLElement>('.js-label-link')!\n    /* eslint-disable-next-line github/no-d-none */\n    labelLink.classList.add('d-none')\n  }\n\n  const elementsToHide = item.querySelectorAll<HTMLElement>('.js-hide-on-label-edit')\n  for (const el of elementsToHide) {\n    el.hidden = !el.hidden\n  }\n})\n\n// Delete remote form\nremoteForm('.js-delete-label', async function (form, wants) {\n  const row = form.closest<HTMLElement>('.js-labels-list-item')!\n  row.querySelector<HTMLElement>('.js-label-delete-spinner')!.hidden = false\n  await wants.text()\n  const newCount = updateCount(-1)\n  toggleBlankSlate(form, newCount === 0)\n  row.remove()\n})\n\nconst delayedOnLabelFormInputChange = debounce(onLabelFormInputChange, 500)\n\n// Handle the user typing in label fields:\non('suggester:complete', '.js-new-label-name-input', delayedOnLabelFormInputChange)\nonInput('.js-new-label-name-input', delayedOnLabelFormInputChange)\nonInput('.js-new-label-description-input', delayedOnLabelFormInputChange)\nonInput('.js-new-label-color-input', delayedOnLabelFormInputChange)\n\n// Limit length of label names in the way Rails does with model validations; allows emoji:\nonKey('keypress', '.js-new-label-name-input', function (event) {\n  const input = event.target as HTMLInputElement\n  const limit = parseInt(input.getAttribute('data-maxlength')!)\n\n  if (getUtf8StringLength(input.value) >= limit) {\n    event.preventDefault()\n  }\n})\n\n// Exclude labels on the issues page label filter\non('click', '.js-issues-label-select-menu-item', function (event) {\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n  if (!event.altKey && !event.shiftKey) return\n\n  event.preventDefault()\n  event.stopPropagation()\n\n  if (event.altKey) {\n    window.location.href = event.currentTarget.getAttribute('data-excluded-url')!\n  }\n\n  // Users can shift click to add more labels to a group\n  if (event.shiftKey) {\n    window.location.href = event.currentTarget.getAttribute('data-included-url')!\n  }\n  /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n})\n\nonKey('keydown', '.js-issues-label-select-menu-item', function (event: KeyboardEvent) {\n  // TODO: Refactor to use data-hotkey\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n  if (event.key !== 'Enter') return\n  if (!event.altKey && !event.shiftKey) return\n\n  const anchor = event.currentTarget\n  event.preventDefault()\n  event.stopPropagation()\n  if (anchor instanceof HTMLAnchorElement) {\n    if (event.altKey) {\n      window.location.href = anchor.getAttribute('data-excluded-url')!\n    }\n\n    if (event.shiftKey) {\n      window.location.href = anchor.getAttribute('data-included-url')!\n    }\n  }\n  /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n})\n\non(\n  'click',\n  '.js-open-label-creation-modal',\n  async function (event) {\n    // Prevent menu from closing\n    event.stopImmediatePropagation()\n    const modal = await dialog({\n      content: document.querySelector<HTMLTemplateElement>('.js-label-creation-template')!.content.cloneNode(true),\n      detailsClass: 'js-new-label-modal',\n    })\n    initLabelModal(modal)\n  },\n  {capture: true},\n)\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\n// Show/hide event settings when the user's overall thread subscription option changes.\non('change', '.js-thread-notification-setting', toggleEventSettings)\n\n// Validate event settings when the user's event selection changes.\non('change', '.js-custom-thread-notification-option', toggleEventSettings)\n\n// Show/hide event settings when the user dismisses the form.\non('reset', '.js-custom-thread-settings-form', toggleEventSettings)\n\nfunction toggleEventSettings() {\n  const eventSettingsVisible = document.querySelector<HTMLInputElement>('.js-reveal-custom-thread-settings')!.checked\n  const noEventSelected = !document.querySelector('.js-custom-thread-notification-option:checked')\n\n  const eventSettingsContainer = document.querySelector<HTMLElement>('.js-custom-thread-settings')!\n  const checkbox = document.querySelector<HTMLInputElement>('[data-custom-option-required-text]')!\n  const message =\n    eventSettingsVisible && noEventSelected ? checkbox.getAttribute('data-custom-option-required-text')! : ''\n\n  checkbox.setCustomValidity(message)\n  eventSettingsContainer.hidden = !eventSettingsVisible\n}\n","import {controller, target} from '@github/catalyst'\n\n/**\n * CollapsibleSidebarWidget creates a widget in the sidebar of which\n * content is collapsible and is loaded upon opening.\n *\n * Four classes must be set, they are scoped to the HTML element <collapsible-sidebar-widget>\n *  - .collapsible-sidebar-widget-button (the button toggling open/close state)\n *  - .collapsible-sidebar-widget-content (the inner HTML to load)\n *  - .collapsible-sidebar-widget-loader (the element that is shown while loading)\n *  - .collapsible-sidebar-widget-indicator (the element that indicates open/close)\n *\n * One class is optional\n * - .collapsible-sidebar-widget-active-hidden (hides an element when the content is open)\n *\n * Notice: This is not done in pure CSS, because we need to guard\n * the loading of the content.\n *\n * @example\n * ```html\n * <collapsible-sidebar-widget url=\"/your/url\">\n *  <div>\n *   <button type=\"button\" class=\"collapsible-sidebar-widget-button\" data-action=\"mousedown:collapsible-sidebar-widget#onMouseDown keydown:collapsible-sidebar-widget#onKeyDown\">Open</button>\n *    <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"collapsible-sidebar-widget-indicator\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M12.78 6.22a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06 0L3.22 7.28a.75.75 0 011.06-1.06L8 9.94l3.72-3.72a.75.75 0 011.06 0z\"></path></svg>\n *    <svg class=\"collapsible-sidebar-widget-loader anim-rotate\" viewBox=\"0 0 16 16\" fill=\"none\" width=\"16\" height=\"16\" ><circle cx=\"8\" cy=\"8\" r=\"7\" stroke=\"currentColor\" stroke-opacity=\"0.25\" stroke-width=\"2\" vector-effect=\"non-scaling-stroke\"></circle><path d=\"M15 8a7.002 7.002 0 00-7-7\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" vector-effect=\"non-scaling-stroke\"></path></svg>\n *    <div class=\"collapsible-sidebar-widget-active-hidden\">Hidden content when active</div>\n *   </button>\n *   <div class=\"collapsible-sidebar-widget-content\" data-target=\"collapsible-sidebar-widget.collapsible\">Lorem Ipsum</div>\n *  </div>\n * </collapsible-sidebar-widget>\n * ```\n */\n@controller\nclass CollapsibleSidebarWidgetElement extends HTMLElement {\n  @target collapsible: HTMLElement\n\n  pendingRequest: AbortController | null\n\n  get activeClass(): string {\n    return this.getAttribute('active-class') || 'collapsible-sidebar-widget-active'\n  }\n\n  get loadingClass(): string {\n    return this.getAttribute('loading-class') || 'collapsible-sidebar-widget-loading'\n  }\n\n  get url(): string {\n    return this.getAttribute('url') || ''\n  }\n\n  get isOpen(): boolean {\n    return this.hasAttribute('open')\n  }\n\n  set isOpen(open: boolean) {\n    open ? this.setAttribute('open', '') : this.removeAttribute('open')\n  }\n\n  /* eslint-disable-next-line custom-elements/no-method-prefixed-with-on */\n  onKeyDown(e: KeyboardEvent) {\n    if (e.code === 'Enter' || e.code === 'Space') {\n      e.preventDefault()\n\n      return this.load()\n    }\n  }\n\n  /* eslint-disable-next-line custom-elements/no-method-prefixed-with-on */\n  onMouseDown(e: MouseEvent) {\n    e.preventDefault()\n\n    return this.load()\n  }\n\n  load() {\n    if (this.pendingRequest) {\n      return this.pendingRequest.abort()\n    }\n\n    if (!this.collapsible.hasAttribute('loaded')) {\n      this.setLoading()\n\n      return this.updateCollapsible()\n    }\n\n    if (!this.isOpen) {\n      return this.setOpen()\n    }\n\n    return this.setClose()\n  }\n\n  setLoading() {\n    this.classList.add(this.loadingClass)\n    this.classList.remove(this.activeClass)\n  }\n\n  setOpen() {\n    this.classList.add(this.activeClass)\n    this.classList.remove(this.loadingClass)\n    this.isOpen = true\n  }\n\n  setClose() {\n    this.classList.remove(this.activeClass)\n    this.classList.remove(this.loadingClass)\n    this.isOpen = false\n  }\n\n  handleAbort() {\n    this.pendingRequest = null\n    this.setClose()\n  }\n\n  async updateCollapsible() {\n    try {\n      this.pendingRequest = new AbortController()\n      this.pendingRequest.signal.addEventListener('abort', () => this.handleAbort())\n\n      const response = await fetch(this.url, {\n        signal: this.pendingRequest?.signal,\n        headers: {\n          Accept: 'text/html',\n          'X-Requested-With': 'XMLHttpRequest',\n        },\n      })\n      this.pendingRequest = null\n\n      if (!response.ok) {\n        return this.setClose()\n      }\n\n      const content = await response.text()\n      this.collapsible.innerHTML = content\n      this.collapsible.setAttribute('loaded', '')\n\n      this.setOpen()\n    } catch {\n      // The errors are not yet surfaced.\n      this.pendingRequest = null\n      return this.setClose()\n    }\n  }\n}\n","import {attr, controller, target, targets} from '@github/catalyst'\n\n/**\n * A web component that allows inline editing of <input> fields.\n * The fields work without an outer <form>.\n *\n * @type HTMLElement\n * @example\n * ```html\n * <sidebar-memex-input update-url=\"http://localhost\" csrf-token=\"1234567890\" column-id=\"1\">\n *  <input type=\"date name=\"memexProjectColumnValues[][value]\" value=\"\" data-target=\"sidebar-memex-input.read\" data-action=\" blur:sidebar-memex-input#onBlur keydown:sidebar-memex-input#onKeyDown disabled />\n * </sidebar-memex-input>\n * ```\n */\n@controller\nclass SidebarMemexInputElement extends HTMLElement {\n  static attrPrefix = ''\n  @attr updateUrl = ''\n  @attr csrfToken = ''\n  @attr instrumentType = ''\n  @attr columnId = 1\n\n  @targets inputs: NodeListOf<HTMLInputElement>\n  @target read: HTMLInputElement\n  @target write: HTMLElement\n  @targets parameters: NodeListOf<HTMLInputElement>\n\n  get isDisabled(): boolean {\n    return this.read?.hasAttribute('disabled')\n  }\n\n  set hasErrored(value: boolean) {\n    value ? this.setAttribute('errored', '') : this.removeAttribute('errored')\n  }\n\n  set disabled(value: boolean) {\n    value ? this.setAttribute('disabled', '') : this.removeAttribute('disabled')\n  }\n\n  get hasExpanded(): boolean {\n    return this.read.getAttribute('aria-expanded') === 'true'\n  }\n\n  get detailsElement() {\n    return this.querySelector('details') ?? null\n  }\n\n  connectedCallback() {\n    this.disabled = this.read?.disabled ?? true\n\n    // Resetting disabled attribute of the element to true after closing the dropdown, so that\n    // iteration field still has cursor pointer on the pencil on subsequent hoverings (cursor style is dependant on the `disabled` attribute).\n    // As the filter text input is not focused when opening the iteration field dropdown, `onBlur` does not\n    // run when user closes the menu, so that `disabled` is not reset, like for text-based fields.\n    this.detailsElement?.addEventListener('toggle', () => this.handleSelectMenuToggle())\n  }\n\n  disconnectedCallback() {\n    this.detailsElement?.removeEventListener('toggle', () => this.handleSelectMenuToggle())\n  }\n\n  handleSelectMenuToggle() {\n    if (this.detailsElement && !this.detailsElement?.open) {\n      this.disabled = true\n    } else if (this.detailsElement && this.detailsElement?.open) {\n      this.disabled = false\n    }\n  }\n\n  handleDetailsSelect(e: Event) {\n    const custom = e as CustomEvent\n    const details = e.target as HTMLElement\n    const el = custom.detail?.relatedTarget as HTMLElement\n    const opened = details.closest('details')\n    const button = opened?.querySelector('[data-menu-button]')\n    const summary = opened?.querySelector('summary')\n\n    if (el.getAttribute('aria-checked') === 'true') {\n      el.setAttribute('aria-checked', 'false')\n      e.preventDefault()\n\n      for (const input of this.inputs) {\n        if (el.contains(input)) {\n          this.updateCell(input.name, '')\n\n          if (button?.innerHTML) {\n            button.innerHTML = input.placeholder\n          }\n\n          break\n        }\n      }\n\n      opened?.removeAttribute('open')\n      /**\n       * This function modifies the default behavior of the <details-menu> so that clicking on a\n       *  selected item clears an existing value. This causes focus to be lost from the <summary>\n       * which results in this element being replaced upon live update. Manually refocusing the\n       * summary element here prevents this from happening.\n       */\n      summary?.focus()\n    }\n  }\n\n  handleDetailsSelected(e: Event) {\n    const custom = e as CustomEvent\n    const el = custom.detail?.relatedTarget as HTMLElement\n    for (const input of this.inputs) {\n      if (el.contains(input)) {\n        this.updateCell(input.name, input.value)\n        break\n      }\n    }\n  }\n\n  mouseDownFocus(e: Event) {\n    if (!this.isDisabled) {\n      return\n    }\n    this.onFocus(e)\n  }\n\n  keyDownFocus(e: KeyboardEvent) {\n    if (e.code === 'Enter' || e.code === 'Space') {\n      if (this.detailsElement) {\n        this.onSelectMenuOpen()\n      }\n      if (this.read !== document.activeElement) {\n        this.onFocus(e)\n      }\n    }\n  }\n\n  // to handle the clicks on the header (incl. pencil), so that the general mouseDownFocus doesn't interfere with opening the\n  // dropdown summary\n  mouseDownFocusHeader() {\n    if (this.detailsElement) {\n      this.onSelectMenuOpen()\n    }\n  }\n\n  /* eslint-disable-next-line custom-elements/no-method-prefixed-with-on */\n  onChange(e: Event) {\n    const el = e.target as HTMLElement\n    if (el.getAttribute('type') === 'date') {\n      return\n    }\n\n    this.updateCell(this.read?.name, this.read?.value)\n  }\n\n  /* eslint-disable-next-line custom-elements/no-method-prefixed-with-on */\n  onFocus(e: KeyboardEvent | Event) {\n    e.preventDefault()\n\n    this.disabled = false\n    this.read.disabled = false\n    this.read.focus()\n  }\n\n  /* eslint-disable-next-line custom-elements/no-method-prefixed-with-on */\n  onSelectMenuOpen() {\n    if (this.detailsElement) {\n      this.detailsElement.open = true\n    }\n  }\n\n  /* eslint-disable-next-line custom-elements/no-method-prefixed-with-on */\n  onBlur(e: Event) {\n    if (this.hasExpanded) {\n      e.preventDefault()\n      return\n    }\n\n    const el = e.target as HTMLElement\n    if (el.getAttribute('type') === 'date') {\n      this.updateCell(this.read?.name, this.read?.value)\n    }\n\n    this.read.disabled = true\n    this.disabled = true\n  }\n\n  /* eslint-disable-next-line custom-elements/no-method-prefixed-with-on */\n  onKeyDown(e: KeyboardEvent) {\n    if (e.code === 'Enter' || e.code === 'Tab') {\n      e.preventDefault()\n      e.stopPropagation()\n\n      if (this.hasExpanded) {\n        return\n      }\n\n      // eslint-disable-next-line github/no-blur\n      this.read.blur()\n    }\n  }\n\n  async updateCell(name = '', value = '') {\n    const data = new FormData()\n    data.set(name, value)\n    data.set('ui', this.instrumentType)\n\n    for (const input of this.parameters) {\n      data.set(input.name, input.value)\n    }\n\n    try {\n      // this is an opportunistic update\n      if (this.write) {\n        const update = this.read.value\n        const formatted = this.read.type === 'date' && update ? this.format.format(Date.parse(update)) : update\n        this.write.textContent = update ? formatted : this.read.placeholder\n      }\n\n      const response = await fetch(this.updateUrl, {\n        method: 'PUT',\n        body: data,\n        headers: {\n          Accept: 'application/json',\n          'X-Requested-With': 'XMLHttpRequest',\n          'Scoped-CSRF-Token': `${this.csrfToken}`,\n        },\n      })\n\n      if (!response.ok) {\n        throw new Error('connection error')\n      }\n\n      // if there is no target to update,\n      // break here and leave the opportunistic update of the field\n      if (!this.write) {\n        return\n      }\n\n      // this is the reconciliation\n      const content = await response.json()\n      const column = content['memexProjectItem']['memexProjectColumnValues'].find(\n        (e: Record<string, unknown>) => e['memexProjectColumnId'] === Number(this.columnId),\n      )\n\n      const commit = column['value']\n      const formatted = this.parseAndFormatUpdate(commit)\n      this.write.innerHTML = value ? formatted : this.read.placeholder\n    } catch (e) {\n      this.hasErrored = true\n    }\n  }\n\n  parseAndFormatUpdate(commit: {value?: string; html?: string}) {\n    switch (this.read.type) {\n      case 'date': {\n        const update = commit.value ? Date.parse(commit.value) : undefined\n        return update ? this.format.format(update) : ''\n      }\n      case 'number': {\n        return commit.value == null ? '' : commit.value\n      }\n      default: {\n        return commit.html ?? ''\n      }\n    }\n  }\n\n  private format = Intl.DateTimeFormat('en-US', {\n    month: 'short',\n    day: 'numeric',\n    year: 'numeric',\n    timeZone: 'UTC',\n  })\n}\n","import '../notifications/configure-thread-subscription-dialog'\nimport './sidebar-widget'\nimport './sidebar-memex-input'\n\nimport {getPageID} from '../session-resume-helpers'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {parseHTML} from '@github-ui/parse-html'\nimport {remoteForm} from '@github/remote-form'\nimport {requestSubmit} from '@github-ui/form-utils'\n\nfunction submitForm(form: Element, skipTeamsCheck = false) {\n  if (skipTeamsCheck || !reviewerTeamsCheckRequired(form)) {\n    if (form instanceof HTMLFormElement) {\n      requestSubmit(form)\n    } else {\n      previewSubmit(form)\n    }\n  }\n}\n\nfunction submitOnMenuClose(event: Event) {\n  const currentTarget = event.currentTarget as Element\n  const form = currentTarget.closest('.js-issue-sidebar-form') || currentTarget.querySelector('.js-issue-sidebar-form')\n  submitForm(form!)\n}\n\n// On item selection, submit the form\non(\n  'details-menu-selected',\n  '.js-discussion-sidebar-menu',\n  function (event) {\n    const item = event.detail.relatedTarget\n    const menu = event.currentTarget\n    const form = item.closest('.js-issue-sidebar-form')\n    const multiple = menu.hasAttribute('data-multiple')\n\n    if (item.hasAttribute('data-clear-assignees')) {\n      const selectedInputs = menu.querySelectorAll<HTMLInputElement>('input[name=\"issue[user_assignee_ids][]\"]:checked')\n      for (const el of selectedInputs) {\n        el.disabled = false\n        el.checked = false\n      }\n\n      submitForm(form)\n    } else if (multiple) {\n      menu.closest<HTMLElement>('details')!.addEventListener('toggle', submitOnMenuClose, {once: true})\n    } else {\n      submitForm(form)\n    }\n  },\n  {capture: true},\n)\n\nfunction updateSidebar(container: Element, html: string) {\n  container.replaceWith(parseHTML(document, html))\n}\n\nfunction returnFocusToTrigger(container: HTMLElement, menuTriggerId: string) {\n  const currentSidebarTriggerEl = container.querySelector<HTMLElement>(`[data-menu-trigger=\"${menuTriggerId}\"]`)\n\n  // Returns focus to triggering element after HTML is replaced\n  currentSidebarTriggerEl?.focus()\n}\n\n// TODO Replace with data-replace-remote-form behavior.\nremoteForm('.js-issue-sidebar-form', async function (form, wants) {\n  let error: Error | undefined\n\n  try {\n    const response = await wants.html()\n    // Gets the specific sidebar element (i.e. assignees, labels) before the HTML is replaced inside\n    const currentSidebarItemEl = form.closest<HTMLElement>('.js-discussion-sidebar-item')\n    // Gets the unique ID of the current sidebar element to use to reference the trigger\n    const currentSidebarDetailsId = currentSidebarItemEl?.querySelector<HTMLElement>('.select-menu')?.getAttribute('id')\n    const container = currentSidebarItemEl?.parentElement\n\n    currentSidebarItemEl!.replaceWith(response.html)\n\n    if (container && currentSidebarDetailsId) returnFocusToTrigger(container, currentSidebarDetailsId)\n  } catch (err) {\n    if (err instanceof Error) {\n      error = err\n      throw error\n    }\n  } finally {\n    form.dispatchEvent(new CustomEvent('submit:complete', {bubbles: true, detail: {error}}))\n  }\n})\n\n// Prevent suggested reviewer button on new pull request form from submitting the main form.\non('click', 'div.js-issue-sidebar-form .js-suggested-reviewer', function (event) {\n  const button = event.currentTarget as HTMLButtonElement\n\n  const form = button.closest<HTMLElement>('.js-issue-sidebar-form')!\n  previewSubmit(form, 'post', {name: button.name, value: button.value})\n  event.preventDefault()\n})\n\n// Prevent \"assign yourself\" button on the issue#new form from submitting the main form.\non('click', 'div.js-issue-sidebar-form .js-issue-assign-self', function (event) {\n  const button = event.currentTarget as HTMLButtonElement\n\n  const form = button.closest<HTMLElement>('.js-issue-sidebar-form')!\n  previewSubmit(form, 'post', {name: button.name, value: button.value})\n  button.remove()\n  // do not persist in the UI\n  document.querySelector('form#new_issue .js-submit-button-value')?.remove()\n  event.preventDefault()\n})\n\n// Allow \"unassign me\" to submit form with method DELETE\non('click', '.js-issue-unassign-self', function (event) {\n  const form = event.currentTarget.closest<HTMLElement>('.js-issue-sidebar-form')!\n  previewSubmit(form, 'delete')\n  event.preventDefault()\n})\n\nfunction getCacheKey(el: Element, pageId: string) {\n  const formName = el.getAttribute('data-cache-name')\n  return `${pageId}:sidebar:${formName}`\n}\n\nfunction cacheValues(form: Element, formData: FormData, cacheKey: string) {\n  const formName = form.getAttribute('data-cache-name')\n  if (!formName) return\n\n  const data: Array<[string, FormDataEntryValue]> = []\n  for (const [key, value] of formData.entries()) {\n    if (key.indexOf(formName) === -1) continue\n    data.push([key, value])\n  }\n\n  const updated = data.filter(datum => datum[1] !== '')\n  if (updated.length > 0) {\n    sessionStorage.setItem(cacheKey, JSON.stringify(updated))\n  } else {\n    sessionStorage.removeItem(cacheKey)\n  }\n}\n\nconst hasFired = new Set<string>()\nfunction clearHasFired() {\n  hasFired.clear()\n}\n\nasync function restoreCachedValues(el: Element, cacheKey: string) {\n  const formName = el.getAttribute('data-cache-name')\n  const cache = sessionStorage.getItem(cacheKey)\n  if (!formName || !cache || hasFired.has(formName)) return\n  hasFired.add(formName)\n  const formData: Array<[string, FormDataEntryValue]> = JSON.parse(cache)\n  const inputs: HTMLInputElement[] = []\n  for (const [key, value] of formData) {\n    // Only cache string values\n    if (Object.prototype.toString.call(value) !== '[object String]') continue\n\n    const newInput = document.createElement('input')\n    newInput.type = 'hidden'\n    // The guard clause above ensures that this is a string, but the TS complier doesn't know that.\n    newInput.value = value as string\n    newInput.name = key\n    el.appendChild(newInput)\n    inputs.push(newInput)\n  }\n  try {\n    await requestPreview(el)\n    for (const input of inputs) {\n      input.remove()\n    }\n  } catch (error) {\n    hasFired.delete(formName)\n  }\n}\n\nlet isSubmitting = false\nfunction cacheValuesOnHide(form: Element, cacheKey: string) {\n  if (isSubmitting) return\n\n  const body = scopedFormData(form)\n  cacheValues(form, body, cacheKey)\n  clearHasFired()\n}\n\nobserve('[data-cacher]', {\n  add(el) {\n    const cacheKey = getCacheKey(el, getPageID())\n    restoreCachedValues(el, cacheKey)\n    window.addEventListener('pagehide', () => cacheValuesOnHide(el, cacheKey))\n    window.addEventListener('turbo:before-visit', () => cacheValuesOnHide(el, cacheKey))\n    window.addEventListener(\n      'submit',\n      event => {\n        if (!event.defaultPrevented) {\n          isSubmitting = true\n          // Defer the write operation to the next tick\n          setTimeout(() => {\n            for (const key of Object.keys(sessionStorage)) {\n              if (key.indexOf(cacheKey) === -1) continue\n              sessionStorage.removeItem(key)\n              clearHasFired()\n            }\n          }, 0)\n        }\n      },\n      {capture: true},\n    )\n  },\n})\n\n// Submit dummy sidebar preview \"form\".\n//\n// form - DIV element tagged with .js-issue-sidebar-form\n// extra - Array of extra form data to pass along\nasync function previewSubmit(form: Element, method = 'post', extra?: {name: string; value: string}) {\n  await requestPreview(form, method, extra)\n  // Gets the specific sidebar element (i.e. assignees, labels) before the HTML is replaced inside\n  const currentSidebarItemEl = form.closest<HTMLElement>('.js-discussion-sidebar-item')\n  // Gets the unique ID of the current sidebar element to use to reference the trigger\n  const currentSidebarDetailsId = currentSidebarItemEl?.querySelector<HTMLElement>('.select-menu')?.getAttribute('id')\n  const container = currentSidebarItemEl?.parentElement\n\n  if (container && currentSidebarDetailsId) returnFocusToTrigger(container, currentSidebarDetailsId)\n}\n\nasync function requestPreview(form: Element, method = 'post', extra?: {name: string; value: string}) {\n  const body = scopedFormData(form)\n  if (extra) {\n    body.append(extra.name, extra.value)\n  }\n\n  const url = form.getAttribute('data-url')!\n  if (!url) return\n\n  const token = form.querySelector<HTMLInputElement>('.js-data-url-csrf')!\n\n  const response = await fetch(url, {\n    method,\n    body: method === 'delete' ? '' : body,\n    mode: 'same-origin',\n    headers: {\n      'Scoped-CSRF-Token': token.value,\n      'X-Requested-With': 'XMLHttpRequest',\n    },\n  })\n  if (!response.ok) {\n    return\n  }\n  const html = await response.text()\n  updateSidebar(form.closest<HTMLElement>('.js-discussion-sidebar-item')!, html)\n}\n\n// Returns true (and triggers a reviewer check for \"notification spam\") if the\n// form (or div, in new PRs) contains at least one new review request for a team\nfunction reviewerTeamsCheckRequired(form: Element) {\n  // We only care about reviewers...\n  const url = form.getAttribute('data-reviewers-team-size-check-url')\n  if (!url) return false\n\n  // ...and whether there is at least one newly-selected team\n  const previouslyRequestedTeams = [...document.querySelectorAll<HTMLElement>('.js-reviewer-team')].map(elem =>\n    elem.getAttribute('data-id'),\n  )\n  const formData = form instanceof HTMLFormElement ? new FormData(form) : scopedFormData(form)\n  const allSelectedTeams = new URLSearchParams(formData as FormData & Record<string, string>).getAll(\n    'reviewer_team_ids[]',\n  )\n  const newlySelectedTeams = allSelectedTeams.filter(team => !previouslyRequestedTeams.includes(team))\n  if (newlySelectedTeams.length === 0) return false\n\n  const params = new URLSearchParams(newlySelectedTeams.map(s => ['reviewer_team_ids[]', s]))\n  triggerTeamReviewerCheck(form, `${url}?${params}`)\n  return true\n}\n\n// Asks the server if any of the newly-selected teams is too large;\n// show the dialog if so, move on and request reviews otherwise.\nasync function triggerTeamReviewerCheck(form: Element, reviewerCheckUrl: string) {\n  const response = await fetch(reviewerCheckUrl)\n  if (!response.ok) {\n    return\n  }\n\n  const dialogHtml = await response.text()\n  if (dialogHtml.match(/[^\\w-]js-large-team[^\\w-]/)) {\n    showTeamReviewerConfirmationDialog(form, dialogHtml)\n  } else {\n    submitForm(form, true)\n    return\n  }\n}\n\n// Shows dialog that requests confirmation for review requests to large teams\nfunction showTeamReviewerConfirmationDialog(form: Element, dialogHtml: string) {\n  // Add dialog to DOM\n  const container = form.querySelector<HTMLElement>('.js-large-teams-check-warning-container')!\n  while (container.firstChild) {\n    container.removeChild(container.firstChild)\n  }\n  container.appendChild(parseHTML(document, dialogHtml))\n\n  // Wire dialog actions and open it\n  const dialog = container.querySelector<HTMLDetailsElement>('details')!\n  function dialogAction(event: Event) {\n    if (!(event.target instanceof Element)) return\n    dialog.open = false\n    // Unless the user explicitly confirms, un-select the large teams before submitting\n    if (!event.target.classList.contains('js-large-teams-confirm-button')) {\n      const reviewerInputs = form.querySelectorAll<HTMLInputElement>(\"input[name='reviewer_team_ids[]']\")\n      for (const reviewerInput of reviewerInputs) {\n        if (container.querySelector(`.js-large-team[data-id='${reviewerInput.value}']`)) {\n          reviewerInput.checked = false\n        }\n      }\n    }\n    submitForm(form, true)\n    event.preventDefault()\n  }\n  container\n    .querySelector<HTMLElement>('.js-large-teams-confirm-button')!\n    .addEventListener('click', dialogAction, {once: true})\n  container\n    .querySelector<HTMLElement>('.js-large-teams-cancel-button')!\n    .addEventListener('click', dialogAction, {once: true})\n  dialog.addEventListener('details-dialog-close', dialogAction, {once: true})\n  dialog.open = true\n}\n\non('click', 'div.js-project-column-menu-container .js-project-column-menu-item button', async function (event) {\n  const currentTarget = event.currentTarget\n  updateProjectColumnMenuSummary(currentTarget)\n  const moveUrl = currentTarget.getAttribute('data-url')!\n  const token = currentTarget.parentElement!.querySelector<HTMLInputElement>('.js-data-url-csrf')!\n  const cardId = currentTarget.getAttribute('data-card-id')!\n  const form = new FormData()\n\n  form.append('card_id', cardId)\n  form.append('use_automation_prioritization', 'true')\n\n  event.preventDefault()\n  const response = await fetch(moveUrl, {\n    method: 'PUT',\n    mode: 'same-origin',\n    body: form,\n    headers: {\n      'Scoped-CSRF-Token': token.value,\n      'X-Requested-With': 'XMLHttpRequest',\n    },\n  })\n  if (!response.ok) {\n    return\n  }\n  // blur any active elements if they are contained within the detail\n  // to allow update-content to reload the dropdown\n  const activeElement = document.activeElement as HTMLElement\n  const container = currentTarget.closest<HTMLElement>('.js-project-column-menu-dropdown')!\n  if (activeElement && container.contains(activeElement)) {\n    try {\n      // eslint-disable-next-line github/no-blur\n      activeElement.blur()\n    } catch (e) {\n      // ignore\n    }\n  }\n})\n\nfunction updateProjectColumnMenuSummary(element: Element) {\n  const dropdown = element.closest<HTMLElement>('.js-project-column-menu-dropdown')!\n  const summary = dropdown.querySelector<HTMLElement>('.js-project-column-menu-summary')!\n  const columnName = element.getAttribute('data-column-name')!\n\n  summary.textContent = columnName\n}\n\non('click', '.js-prompt-dismiss', function (event) {\n  event.currentTarget.closest<HTMLElement>('.js-prompt')!.remove()\n})\n\n// Similar to serializeArray, but maybe scoped to a non-form.\n//\n// container - Element contained by a form to serialize the child fields for\nfunction scopedFormData(container: Element): FormData {\n  const form = container.closest<HTMLFormElement>('form')!\n  if (!form) return new FormData()\n  const formData = new FormData(form)\n  const params = formData.entries()\n  const results = new FormData()\n  for (const [name, value] of params) {\n    if (form.contains(findParam(form, name, value.toString()))) {\n      results.append(name, value)\n    }\n  }\n  return results\n}\n\nfunction findParam(form: HTMLFormElement, name: string, value: string): Element | null {\n  for (const el of form.elements) {\n    if (el instanceof HTMLInputElement || el instanceof HTMLTextAreaElement || el instanceof HTMLButtonElement) {\n      if (el.name === name && el.value === value) {\n        return el\n      }\n    }\n  }\n  return null\n}\n\non('click', '.js-convert-to-draft', function (event) {\n  const convertToDraftUrl = event.currentTarget.getAttribute('data-url')!\n  const token = event.currentTarget.parentElement!.querySelector<HTMLInputElement>('.js-data-url-csrf')!\n\n  fetch(convertToDraftUrl, {\n    method: 'POST',\n    mode: 'same-origin',\n    headers: {\n      'Scoped-CSRF-Token': token.value,\n      'X-Requested-With': 'XMLHttpRequest',\n    },\n  })\n})\n\non('click', 'div.js-restore-item', async function (event) {\n  const unarchiveItemUrl = event.currentTarget.getAttribute('data-url')!\n  const projectItemID = event.currentTarget.getAttribute('data-column')!\n  const token = event.currentTarget.querySelector<HTMLInputElement>('.js-data-url-csrf')!\n  const form = new FormData()\n\n  form.set('memexProjectItemIds[]', projectItemID)\n\n  const result = await fetch(unarchiveItemUrl, {\n    method: 'PUT',\n    mode: 'same-origin',\n    body: form,\n    headers: {\n      'Scoped-CSRF-Token': token.value,\n      'X-Requested-With': 'XMLHttpRequest',\n    },\n  })\n\n  if (!result.ok) {\n    throw new Error('connection error')\n  }\n\n  submitOnMenuClose(event)\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('#clear-project-search-button', button => {\n  button?.setAttribute('type', 'button')\n\n  button?.addEventListener('click', () => {\n    const input = document.getElementById('project-search-input') as HTMLInputElement\n    if (input) {\n      input.value = ''\n      input.focus()\n    }\n  })\n})\n","/*\n * Hi! The modules in this file are loaded on **every** page on github.com.\n * Please only add files here if the code does indeed need to be on every page.\n * If the code is needed on only some pages, please load it more sparingly by\n * following the docs at https://thehub.github.com/epd/engineering/dev-practicals/frontend/erb-pvc-catalyst/client-side-behaviors-with-catalyst/\n * To create a dynamically-loaded Catalyst component for your behavior instead.\n *\n */\n\nimport './github/behaviors/ajax-error'\nimport './github/behaviors/ajax-loading'\nimport './github/behaviors/ajax-pagination'\nimport './github/behaviors/analytics-events'\nimport './github/behaviors/animated-image'\nimport './github/behaviors/autocheck'\nimport './github/behaviors/autocomplete'\nimport './github/behaviors/autosearch-form'\nimport './github/behaviors/autoselect'\nimport './github/behaviors/autosubmit'\nimport './github/behaviors/avatar-reset-text'\nimport './github/behaviors/batch-deferred-content'\nimport './github/behaviors/billing-addons'\nimport './github/behaviors/blob-csv'\nimport './github/repositories/blob-header'\nimport './github/behaviors/branch-protection-integration-select'\nimport './github/behaviors/bulk-actions'\nimport './github/behaviors/bundle-download-stats'\nimport './github/behaviors/button-outline'\nimport './github/behaviors/buttons'\nimport './github/behaviors/characters-remaining'\nimport './github/behaviors/check-all'\nimport './github/behaviors/clear-data-on-logout'\nimport './github/behaviors/clipboard-copy'\nimport './github/behaviors/code-nav'\nimport './github/behaviors/commenting/ajax'\nimport './github/behaviors/commenting/close'\nimport './github/behaviors/commenting/edit'\nimport './github/behaviors/commenting/focus'\nimport './github/behaviors/commenting/markdown'\nimport './github/behaviors/commenting/preview'\nimport './github/behaviors/commenting/reaction-suggestion'\nimport './github/behaviors/commits'\nimport './github/behaviors/confirm'\nimport './github/behaviors/company-name-input'\nimport './github/behaviors/company-owned'\nimport './github/behaviors/details'\nimport './github/behaviors/details-element'\nimport './github/behaviors/details-menu'\nimport './github/behaviors/dialog-helpers'\nimport './github/behaviors/disable-with'\nimport './github/behaviors/document-dropzone'\nimport './github/behaviors/encrypt'\nimport './github/behaviors/favicon'\nimport './github/behaviors/feature-preview-indicator'\nimport './github/behaviors/feature-preview-trigger'\nimport './github/behaviors/file-attachment'\nimport './github/behaviors/filter-input'\nimport './github/behaviors/filterable'\nimport './github/behaviors/fixed-offset-fragment-navigation-observer'\nimport './github/behaviors/flash'\nimport './github/behaviors/flash-observer'\nimport './github/behaviors/focus-delay'\nimport './github/behaviors/form-toggle'\nimport './github/behaviors/fuzzy-list'\nimport './github/behaviors/gfm'\nimport './github/behaviors/hash-change'\nimport './github/behaviors/header'\nimport './github/behaviors/hooks'\nimport './github/behaviors/hotkey-map'\nimport './github/behaviors/hovercards'\nimport './github/behaviors/hpc'\nimport './github/behaviors/html-validation'\nimport './github/behaviors/hydro-analytics-pageview'\nimport './github/behaviors/hydro-analytics-tracking'\nimport './github/behaviors/hydro-click-tracking'\nimport './github/behaviors/immediate-updates'\nimport './github/behaviors/image-metric-tracking'\nimport './github/behaviors/include-fragment'\nimport './github/behaviors/indeterminate'\nimport './github/behaviors/jump-to-loader'\nimport './github/behaviors/keyboard-shortcuts'\nimport './github/behaviors/length-limited-input-with-warning'\nimport './github/behaviors/member-search-filter'\nimport './github/behaviors/notice'\nimport './github/behaviors/open-in-github-dev'\nimport './github/behaviors/permalink'\nimport './github/behaviors/permission-menu-form'\nimport './github/behaviors/turbo-timing'\nimport './github/behaviors/print-popup'\nimport './github/behaviors/poll-include-fragment'\nimport './github/behaviors/quick-submit'\nimport './github/behaviors/quote-selection'\nimport './github/behaviors/reactions'\nimport './github/behaviors/remote-form'\nimport './github/behaviors/removed-contents'\nimport './github/behaviors/render-editor'\nimport './github/behaviors/enrichable-markdown-render'\nimport './github/behaviors/replace-remote-form'\nimport './github/behaviors/report-long-tasks'\nimport './github/behaviors/responsive-markdown-toolbar'\nimport './github/behaviors/responsive-underlinenav'\nimport './github/behaviors/saved-replies'\nimport './github/behaviors/scanning'\nimport './github/behaviors/session-resume'\nimport './github/behaviors/side-navigation'\nimport './github/behaviors/site-notifications'\nimport './github/behaviors/site-search'\nimport './github/behaviors/size-to-fit'\nimport './github/behaviors/smooth-scroll-anchor'\nimport './github/behaviors/snippet-clipboard-copy'\nimport './github/behaviors/social'\nimport './github/behaviors/socket-channel'\nimport './github/behaviors/sso-auto-replay'\nimport './github/behaviors/stale-session'\nimport './github/behaviors/statuses'\nimport './github/behaviors/sticky'\nimport './github/behaviors/sudo-required'\nimport './github/behaviors/suggesters/emoji-suggester'\nimport './github/behaviors/suggesters/issue-suggester'\nimport './github/behaviors/suggesters/mention-suggester'\nimport './github/behaviors/survey'\nimport './github/behaviors/sync-details-text'\nimport './github/behaviors/tab-container'\nimport './github/behaviors/tag-input'\nimport './github/behaviors/targetable-elements'\nimport './github/behaviors/task-list'\nimport './github/behaviors/team-members'\nimport './github/behaviors/timeline/marker'\nimport './github/behaviors/timeline/progressive'\nimport './github/behaviors/timeline/timeline-accessibility'\nimport './github/behaviors/timing-stats'\nimport './github/behaviors/toggler'\nimport './github/behaviors/register-service-worker'\nimport '@github-ui/turbo'\nimport './github/behaviors/tz-cookie'\nimport './github/behaviors/sudo-credential-options'\nimport './github/behaviors/unread-comments'\nimport './github/behaviors/unread-item-counter'\nimport './github/behaviors/updatable-content-observer'\nimport './github/behaviors/updatable-content-stale-object'\nimport './github/behaviors/upload-avatar'\nimport './github/behaviors/user-content'\nimport './github/behaviors/user-select-contain-polyfill'\nimport './github/behaviors/user-status-loader'\nimport './github/behaviors/user-lists'\nimport './github/behaviors/warn-unsaved-changes'\nimport './github/behaviors/will-transition-once'\nimport './github/issues/issue-link'\nimport './github/issues/labels'\nimport './github/issues/sidebar'\nimport './github/memex/search'\nimport {setup as setupSoftNav, interceptNavigationUI} from '@github-ui/soft-nav'\nimport {isFeatureEnabled} from '@github-ui/feature-flags'\n\nsetupSoftNav()\n\nif (isFeatureEnabled('NAVIGATION_INTERCEPTS')) {\n  interceptNavigationUI()\n}\n","type AutoFlushingQueueEntry<ElementType> = [ElementType, string]\nclass AutoFlushingQueue<ElementType = HTMLElement> {\n  timeout: number\n  limit: number\n  elements: Array<AutoFlushingQueueEntry<ElementType>> = []\n  timer: number | null = null\n  callbacks: Array<(elementsToFlush: Array<AutoFlushingQueueEntry<ElementType>>) => Promise<void>> = []\n  index: number\n\n  constructor(timeout = 50, limit = 30) {\n    this.timeout = timeout // flush timeout in milliseconds\n    this.limit = limit // max number of elements before autoflushing\n    this.index = 0\n  }\n\n  push(element: ElementType): string {\n    const key = `item-${this.index++}`\n\n    if (this.timer) {\n      window.clearTimeout(this.timer)\n      this.timer = null\n    }\n    if (this.elements.length >= this.limit) {\n      this.flush()\n    }\n\n    this.timer = window.setTimeout(() => {\n      this.timer = null\n      this.flush()\n    }, this.timeout)\n\n    this.elements.push([element, key])\n    return key\n  }\n\n  onFlush(callback: (elementsToFlush: Array<AutoFlushingQueueEntry<ElementType>>) => Promise<void>): void {\n    this.callbacks.push(callback)\n  }\n\n  private async flush(): Promise<void> {\n    const elementsToFlush = this.elements.splice(0, this.limit)\n    if (elementsToFlush.length === 0) return\n\n    await Promise.all(this.callbacks.map(callback => callback(elementsToFlush)))\n  }\n}\n\ninterface HTMLElementWithInputs extends HTMLElement {\n  inputs: HTMLInputElement[]\n}\n\nexport class BatchLoader<ResponseType> {\n  autoFlushingQueue: AutoFlushingQueue<HTMLElementWithInputs>\n  url: string\n  callbacks: Map<string, (value: ResponseType) => void>\n  validate: (value: unknown) => asserts value is ResponseType\n\n  constructor(url: string, validator: (value: unknown) => asserts value is ResponseType) {\n    this.url = url\n    this.callbacks = new Map()\n    this.autoFlushingQueue = new AutoFlushingQueue()\n    this.autoFlushingQueue.onFlush(async elements => {\n      this.load(elements)\n    })\n    this.validate = validator\n  }\n\n  loadInBatch(element: HTMLElementWithInputs): Promise<ResponseType> {\n    const key = this.autoFlushingQueue.push(element)\n    return new Promise(resolve => this.callbacks.set(key, resolve))\n  }\n\n  async load(elements: Array<AutoFlushingQueueEntry<HTMLElementWithInputs>>) {\n    const elementsByKey = new Map<string, HTMLElementWithInputs>()\n\n    for (const [batchElement, key] of elements) {\n      elementsByKey.set(key, batchElement)\n    }\n\n    const consolidatedData = new FormData()\n\n    for (const [key, batchElement] of elementsByKey.entries()) {\n      for (const input of batchElement.inputs) {\n        consolidatedData.append(`items[${key}][${input.name}]`, input.value)\n      }\n    }\n\n    if (Array.from(consolidatedData.values()).length === 0) {\n      return\n    }\n\n    consolidatedData.set('_method', 'GET')\n    const response = await fetch(this.url, {\n      method: 'POST',\n      body: consolidatedData,\n      headers: {\n        Accept: 'application/json',\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n    })\n\n    if (response.ok) {\n      const json = await response.json()\n\n      if (!json || typeof json !== 'object' || Array.isArray(json)) {\n        throw new Error('Malformed batch response')\n      }\n\n      for (const key in json) {\n        const callback = this.callbacks.get(key)\n        if (callback) {\n          const value = json[key]\n          this.validate(value)\n          callback(value)\n        }\n      }\n    }\n  }\n}\n","// Batch Deferred Content Behavior\n//\n// Automatically fetches content for multiple placeholders with a single request.\n// Placeholders are represented as <batch-deferred-content>'s so that per-placeholder arguments can be\n// passed along to the backend for rendering. Once the response is received, each placeholder\n// will be replaced with it's relevant content.\n//\n// Batching is handled by an autoflushing queue. Once an upper limit (default 30) of placeholders\n// are found, or new placeholders stop being added to the queue, after a timeout (default 50ms),\n// a single request will be made to fetch the content for those items.\n//\n// Example Markup\n//\n//   <batch-deferred-content data-url=\"/my/batched/content/endpoint\">\n//     <input data-targets=\"batch-deferred-content.inputs\" type=\"hidden\" name=\"repo_id\" value=\"42\">\n//     <input data-targets=\"batch-deferred-content.inputs\" type=\"hidden\" name=\"commit_oid\" value=\"abcdef0\">\n//   </batch-deferred-content>\n//   \n//   <batch-deferred-content data-url=\"/my/batched/content/endpoint\">\n//     <input data-targets=\"batch-deferred-content.inputs\" type=\"hidden\" name=\"repo_id\" value=\"88\">\n//     <input data-targets=\"batch-deferred-content.inputs\" type=\"hidden\" name=\"commit_oid\" value=\"f000001\">\n//   </batch-deferred-content>\n//\n// Example Request\n//\n//   POST /my/batched/content/endpoint\n//   BODY {\n//     items: {\n//       item-0: {repo_id: 42, commit_oid: \"abcdef0\"},\n//       item-1: {repo_id: 88, commit_oid: \"f000001\"},\n//     }\n//   }\n//\n// Example Response\n//\n//   Content-Type: application/json\n//   BODY {\n//     item-0: \"<div>Some markup</div>\",\n//     item-1: \"<div>More markup</div>\",\n//   }\n\nimport {controller, targets} from '@github/catalyst'\nimport {parseHTML} from '@github-ui/parse-html'\nimport {BatchLoader} from './batch-deferred-content/batch-loader'\n\nexport abstract class BaseBatchDeferredContentElement<ResponseType> extends HTMLElement {\n  inputs: HTMLInputElement[]\n  batchLoaders: Map<string, BatchLoader<ResponseType>>\n\n  abstract update(content: ResponseType): void\n  abstract validate(value: unknown): asserts value is ResponseType\n\n  async connectedCallback() {\n    const content = await this.batchLoader.loadInBatch(this)\n    this.update(content)\n  }\n\n  get batchLoader(): BatchLoader<ResponseType> {\n    const url = this.getAttribute('data-url')\n\n    if (!url) {\n      throw new Error(`${this.tagName} element requires a data-url attribute`)\n    }\n\n    let loader = this.batchLoaders.get(url)\n    if (!loader) {\n      loader = new BatchLoader(url, (value: unknown) => this.validate(value))\n      this.batchLoaders.set(url, loader)\n    }\n    return loader\n  }\n}\n\nconst batchDeferredContentLoaders: Map<string, BatchLoader<string>> = new Map()\n\n@controller\nclass BatchDeferredContentElement extends BaseBatchDeferredContentElement<string> {\n  @targets override inputs: HTMLInputElement[]\n\n  override batchLoaders = batchDeferredContentLoaders\n\n  validate(value: unknown): asserts value is string {\n    if (typeof value !== 'string') {\n      throw new Error('Batch deferred content was not a string')\n    }\n  }\n\n  update(content: string): void {\n    const docFragment = parseHTML(document, content)\n    this.replaceWith(docFragment)\n  }\n}\n","let lastActiveElement: Element | null\nlet currentInputIsMouse = false\n\nfunction setClass() {\n  lastActiveElement = document.activeElement\n  if (document.body) {\n    document.body.classList.toggle('intent-mouse', currentInputIsMouse)\n  }\n}\n\n// Use mousedown event to make sure outline is remove for holding and dragging\ndocument.addEventListener(\n  'mousedown',\n  function () {\n    currentInputIsMouse = true\n    if (lastActiveElement === document.activeElement) setClass()\n  },\n  {capture: true},\n)\n\ndocument.addEventListener(\n  'keydown',\n  function () {\n    currentInputIsMouse = false\n  },\n  {capture: true},\n)\n\ndocument.addEventListener('focusin', setClass, {capture: true})\n","import {getUtf8StringLength} from '@github-ui/text'\nimport {onFocus} from '../onfocus'\n\nfunction showRemainingCharacterCount(value: string, limit: number, field: HTMLTextAreaElement | HTMLInputElement) {\n  const container = field.closest('.js-characters-remaining-container')\n  if (!container) {\n    return\n  }\n\n  const remainingEl = container.querySelector<HTMLElement>('.js-characters-remaining')!\n  const suffix = String(remainingEl.getAttribute('data-suffix'))\n  const valueLength = getUtf8StringLength(value)\n  const remainingCount = limit - valueLength\n\n  if (remainingCount <= 20) {\n    remainingEl.textContent = `${remainingCount} ${suffix}`\n    remainingEl.classList.toggle('color-fg-danger', remainingCount <= 5)\n    remainingEl.setAttribute('role', 'status')\n    remainingEl.hidden = false\n  } else {\n    remainingEl.setAttribute('role', 'none')\n    remainingEl.hidden = true\n  }\n}\n\nfunction getFieldLimit(input: HTMLTextAreaElement | HTMLInputElement): number {\n  if (input.hasAttribute('data-maxlength')) {\n    return parseInt(input.getAttribute('data-maxlength') || '')\n  }\n\n  return input.maxLength\n}\n\nexport function hasExceededCharacterLimit(input: HTMLTextAreaElement | HTMLInputElement): boolean {\n  const limit = getFieldLimit(input)\n  const valueLength = getUtf8StringLength(input.value)\n  const remainingCount = limit - valueLength\n\n  return remainingCount < 0\n}\n\nexport function updateInputRemainingCharacters(input: HTMLTextAreaElement | HTMLInputElement) {\n  const limit = getFieldLimit(input)\n  showRemainingCharacterCount(input.value, limit, input)\n}\n\nexport function resetCharactersRemainingCounts(container: Element) {\n  const charContainers = container.querySelectorAll('.js-characters-remaining-container')\n\n  for (const charContainer of charContainers) {\n    const input = charContainer.querySelector<HTMLInputElement>('.js-characters-remaining-field')!\n    updateInputRemainingCharacters(input)\n  }\n}\n\nonFocus('.js-characters-remaining-field', function (input) {\n  function onInput() {\n    if (input instanceof HTMLInputElement || input instanceof HTMLTextAreaElement) {\n      updateInputRemainingCharacters(input)\n    }\n  }\n  onInput()\n\n  input.addEventListener('input', onInput)\n  input.addEventListener(\n    'blur',\n    () => {\n      input.removeEventListener('input', onInput)\n    },\n    {once: true},\n  )\n})\n","// Confirm\n//\n// Prompts native confirm dialog before activating link.\n//\n// data-confirm - Message to pass to confirm().\n//\n//   <button type=\"submit\" data-confirm=\"Are you sure?\">Delete</a>\n\ndocument.addEventListener(\n  'click',\n  function (event) {\n    if (!(event.target instanceof Element)) return\n\n    const selector =\n      'a[data-confirm], input[type=submit][data-confirm], input[type=checkbox][data-confirm], button[data-confirm]'\n\n    const currentTarget = event.target.closest(selector)\n    if (!currentTarget) return\n\n    const message = currentTarget.getAttribute('data-confirm')\n    if (!message) return\n\n    if (\n      currentTarget instanceof HTMLInputElement &&\n      currentTarget.hasAttribute('data-confirm-checked') &&\n      !currentTarget.checked\n    ) {\n      return\n    }\n\n    if (!confirm(message)) {\n      event.stopImmediatePropagation()\n      event.preventDefault()\n    }\n  },\n  true,\n)\n","import {compose, fromEvent} from '@github-ui/subscription'\nimport IncludeFragmentElement from '@github/include-fragment-element'\nimport hashChange from './hash-change'\nimport {loadDeferredContentByEvent} from './include-fragment'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nlet currentlyOpenedDetailsDropdown: HTMLElement | null = null\n\ndocument.addEventListener('keydown', function (event: KeyboardEvent) {\n  // TODO: Refactor to use data-hotkey\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n  if (!event.defaultPrevented && event.key === 'Escape' && currentlyOpenedDetailsDropdown) {\n    currentlyOpenedDetailsDropdown.removeAttribute('open')\n  }\n  /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n})\n\n// Dismiss open <details> when activating <details> with keyboard.\nobserve('.js-dropdown-details', {\n  subscribe: el => {\n    return compose(fromEvent(el, 'toggle', closeCurrentDetailsDropdown), fromEvent(el, 'toggle', autofocus))\n  },\n})\n\nfunction autofocus({currentTarget}: Event) {\n  const target = currentTarget as HTMLElement\n  if (target.hasAttribute('open')) {\n    const element = target.querySelector<HTMLElement>('[autofocus]')\n    if (element) element.focus()\n  } else {\n    const summary = target.querySelector<HTMLElement>('summary')\n    if (summary) summary.focus()\n  }\n}\n\nfunction closeCurrentDetailsDropdown({currentTarget}: Event) {\n  const target = currentTarget as HTMLElement\n  if (target.hasAttribute('open')) {\n    if (currentlyOpenedDetailsDropdown && currentlyOpenedDetailsDropdown !== target) {\n      currentlyOpenedDetailsDropdown.removeAttribute('open')\n    }\n\n    currentlyOpenedDetailsDropdown = target\n  } else if (target === currentlyOpenedDetailsDropdown) {\n    currentlyOpenedDetailsDropdown = null\n  }\n}\n\nobserve('[data-deferred-details-content-url]:not([data-details-no-preload-on-hover])', {\n  subscribe: el => {\n    const summary = el.querySelector<HTMLElement>('summary')!\n    return fromEvent(summary, 'mouseenter', loadDeferredContentByEvent)\n  },\n})\n\nobserve('[data-deferred-details-content-url]', {\n  subscribe: el => {\n    return fromEvent(el, 'toggle', loadDeferredContentByEvent)\n  },\n})\n\nexport function toggleDetails(details: HTMLElement) {\n  if (details.hasAttribute('open')) {\n    details.removeAttribute('open')\n  } else {\n    details.setAttribute('open', 'open')\n  }\n}\n\n// Additonal button trigger for <details id>\non('click', '[data-toggle-for]', function (event) {\n  const id = event.currentTarget.getAttribute('data-toggle-for') || ''\n  const details = document.getElementById(id)\n  if (!details) return\n  toggleDetails(details)\n})\n\n// Expand collapsed outdated diff if anchor points to it\n//   /github/github/pull/123#discussion-diff-456\n//   /github/github/pull/123#discussion-r345\nhashChange(function ({target}) {\n  if (!target || target.closest('summary')) return\n\n  let node = target.parentElement\n  while (node) {\n    node = node.closest('details')\n    if (node) {\n      if (!node.hasAttribute('open')) {\n        node.setAttribute('open', '')\n      }\n      node = node.parentElement\n    }\n  }\n})\n\n// The details dialog allows users to dismiss the dialog by clicking on the\n// grayed-out background. This additional functionality prohibits dismissing\n// the dialog in this way.\non('details-dialog-close', '[data-disable-dialog-dismiss]', function (event) {\n  event.preventDefault()\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {fire} from 'delegated-events'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\n// Entire document is drop target.\nobserve('.js-document-dropzone', {\n  constructor: HTMLElement,\n  add(el) {\n    document.body.addEventListener('dragstart', onDragstart)\n    document.body.addEventListener('dragend', onDragend)\n    document.body.addEventListener('dragenter', onDragenter)\n    document.body.addEventListener('dragover', onDragenter)\n    document.body.addEventListener('dragleave', onBodyDragleave)\n    el.addEventListener('drop', onDrop)\n  },\n  remove(el) {\n    document.body.removeEventListener('dragstart', onDragstart)\n    document.body.removeEventListener('dragend', onDragend)\n    document.body.removeEventListener('dragenter', onDragenter)\n    document.body.removeEventListener('dragover', onDragenter)\n    document.body.removeEventListener('dragleave', onBodyDragleave)\n    el.removeEventListener('drop', onDrop)\n  },\n})\n\nexport function hasFile(transfer: DataTransfer): boolean {\n  return Array.from(transfer.types).indexOf('Files') >= 0\n}\n\nlet dragging: number | null = null\n\n// Highlight textarea and change drop cursor. Ensure drop target styles\n// are cleared after dragging back outside of window.\nfunction onDragenter(event: DragEvent) {\n  if (ignorePageElementDrag) return\n\n  const target = event.currentTarget as Element\n\n  if (dragging) {\n    window.clearTimeout(dragging)\n  }\n  dragging = window.setTimeout(() => target.classList.remove('dragover'), 200)\n\n  const transfer = event.dataTransfer\n  if (!transfer || !hasFile(transfer)) return\n\n  transfer.dropEffect = 'copy'\n  target.classList.add('dragover')\n\n  event.stopPropagation()\n  event.preventDefault()\n}\n\nfunction onBodyDragleave(event: DragEvent) {\n  // Ignore leave events from children to prevent flicker.\n  if (!(event.target instanceof Element)) return\n  if (event.target.classList.contains('js-document-dropzone')) {\n    const currentTarget = event.currentTarget as Element\n    currentTarget.classList.remove('dragover')\n  }\n}\n\nfunction onDrop(event: DragEvent) {\n  const container = event.currentTarget as Element\n\n  container.classList.remove('dragover')\n  document.body.classList.remove('dragover')\n\n  const transfer = event.dataTransfer\n  if (!transfer || !hasFile(transfer)) return\n\n  fire(container, 'document:drop', {transfer})\n\n  event.stopPropagation()\n  event.preventDefault()\n}\n\n// Ignore image or link drags from within the page itself. Allow them to be\n// dragged onto the desktop, but ignore any drops back onto the page.\nlet ignorePageElementDrag = false\n\nfunction onDragstart() {\n  ignorePageElementDrag = true\n}\n\nfunction onDragend() {\n  ignorePageElementDrag = false\n}\n","import {TemplateInstance} from '@github/template-parts'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\n// Encrypt plain text with a public key.\nexport async function encrypt(publicKey: Uint8Array, value: string): Promise<Uint8Array> {\n  const encoder = new TextEncoder()\n  const messageBytes = encoder.encode(value)\n  const {seal} = await import('../tweetsodium')\n  return seal(messageBytes, publicKey)\n}\n\n// Decode base64 data into a byte array.\nexport function decode(encoded: string): Uint8Array {\n  const bytes = atob(encoded)\n    .split('')\n    .map(x => x.charCodeAt(0))\n  return Uint8Array.from(bytes)\n}\n\n// Encode a byte array as a base64 string.\nexport function encode(bytes: Uint8Array): string {\n  let str = ''\n  for (const byte of bytes) {\n    str += String.fromCharCode(byte)\n  }\n  return btoa(str)\n}\n\non('submit', 'form.js-encrypt-submit', async function (event) {\n  const form = event.currentTarget as HTMLFormElement\n\n  if (event.defaultPrevented || !form.checkValidity()) return\n  const plainText = form.elements.namedItem('secret_value') as HTMLTextAreaElement\n\n  // Prevent serializing plain text value in form submission.\n  plainText.disabled = true\n\n  if (!plainText.value) return\n\n  event.preventDefault()\n\n  // Submit encrypted value in hidden input.\n  const publicKey = decode(form.getAttribute('data-public-key')!)\n\n  ;(form.elements.namedItem('encrypted_value') as HTMLInputElement).value = encode(\n    await encrypt(publicKey, plainText.value),\n  )\n\n  form.submit()\n})\n\n// Submit multiple encrypted values in hidden inputs. If an unencrypted field is empty,\n// its associated hidden encrypted field is disabled.\non('submit', 'form.js-encrypt-bulk-submit', submitBulk(true))\n\n// Submit multiple encrypted values in hidden inputs. If an unencrypted field is empty,\n// its associated hidden encrypted field is not disabled.\non('submit', 'form.js-encrypt-bulk-submit-enable-empty', submitBulk(false))\n\n// Submit multiple encrypted values. If an unencrypted field is empty,\n// its associated hidden encrypted field is enabled or disabled depending on \"disableEmptyValues\".\nfunction submitBulk(disableEmptyValues: boolean) {\n  return async function (event: Event) {\n    const form = event.currentTarget as HTMLFormElement\n\n    if (event.defaultPrevented || !form.checkValidity()) return\n\n    // Submit encrypted value in hidden input.\n    const publicKey = decode(form.getAttribute('data-public-key')!)\n\n    event.preventDefault()\n    for (const element of form.elements) {\n      // Prevent serializing plain text value in form submission.\n      const formElement = element as HTMLInputElement\n      if (formElement.id.endsWith('secret')) {\n        formElement.disabled = true\n\n        if (formElement.required && !formElement.value) {\n          const message = `${formElement.name} is invalid!`\n          const template = document.querySelector<HTMLTemplateElement>('template.js-flash-template')!\n          template.after(new TemplateInstance(template, {className: 'flash-error', message}))\n          return\n        }\n\n        const encryptedValueElementName = `${formElement.name}_encrypted_value`\n        if (!formElement.value) {\n          ;(form.elements.namedItem(encryptedValueElementName) as HTMLInputElement).disabled = disableEmptyValues\n          continue\n        }\n\n        ;(form.elements.namedItem(encryptedValueElementName) as HTMLInputElement).value = encode(\n          await encrypt(publicKey, formElement.value),\n        )\n      }\n    }\n    form.submit()\n  }\n}\n","import {fromEvent} from '@github-ui/subscription'\nimport {loaded} from '@github-ui/document-ready'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {positionedOffset} from '@primer/behaviors'\n\nobserve('.js-responsive-underlinenav', {\n  constructor: HTMLElement,\n  subscribe: nav => {\n    asyncCalculateVisibility(nav)\n    return fromEvent(window, 'resize', () => calculateVisibility(nav))\n  },\n})\n\nexport async function asyncCalculateVisibility(nav: HTMLElement) {\n  await loaded\n  calculateVisibility(nav)\n}\n\nfunction toggleItem(item: HTMLElement, hidden: boolean) {\n  // Set visibility to hidden, instead of .hidden attribute\n  // so we can still calculate distance accurately\n  item.style.visibility = hidden ? 'hidden' : ''\n  // Get tab-item name, if present, so we can match it up with the dropdown menu\n  const itemName = item.getAttribute('data-tab-item')\n  if (itemName) {\n    const itemToHide = document.querySelector<HTMLElement>(`[data-menu-item=${itemName}]`)\n    if (itemToHide instanceof HTMLElement) {\n      itemToHide.hidden = !hidden\n    }\n  }\n}\n\nfunction calculateVisibility(nav: HTMLElement) {\n  const items = nav.querySelectorAll<HTMLElement>('.js-responsive-underlinenav-item')\n  const overflowContainer = nav.querySelector<HTMLElement>('.js-responsive-underlinenav-overflow')!\n  const overflowOffset = positionedOffset(overflowContainer, nav)\n  if (!overflowOffset) {\n    return\n  }\n\n  let anyHidden = false\n  for (const item of items) {\n    const itemOffset = positionedOffset(item, nav)\n    if (itemOffset) {\n      const hidden = itemOffset.left + item.offsetWidth >= overflowOffset.left\n      toggleItem(item, hidden)\n      anyHidden = anyHidden || hidden\n    }\n  }\n  overflowContainer.style.visibility = anyHidden ? '' : 'hidden'\n}\n","import {persistResumableFields, restoreResumableFields, setForm} from '@github/session-resume'\nimport {debounce} from '@github/mini-throttle'\nimport {getPageID} from '../session-resume-helpers'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport safeStorage from '@github-ui/safe-storage'\n\n// For some fields we'll save them to localStorage instead of sessionStorage\nconst safeLocalStorage = safeStorage('localStorage', {\n  ttl: 1000 * 60 * 5,\n  throwQuotaErrorsOnSet: false,\n  sendCacheStats: true,\n})\n\nexport const restoreFieldsFromAllBackends = () => {\n  restoreResumableFields(getPageID())\n  restoreResumableFields(getPageID(), {storage: safeLocalStorage})\n}\n\nconst sessionResumableSelector = '.js-session-resumable'\nconst localStorageResumableSelector = '.js-local-storage-resumable'\n\nconst persistFieldstoAllBackends = () => {\n  persistResumableFields(getPageID(), {selector: sessionResumableSelector})\n  persistResumableFields(getPageID(), {selector: localStorageResumableSelector, storage: safeLocalStorage})\n}\n\nconst debouncedRestoreResumableFields = debounce(function () {\n  restoreFieldsFromAllBackends()\n}, 50)\n\n/**\n * Returns true while turbo is showing a \"preview\" of the route from cache: in other words between\n * the time a route is visited and the time it is loaded\n * @returns boolean\n */\nfunction isTurboRenderingCachePreview(): boolean {\n  return document.querySelector('html')?.hasAttribute('data-turbo-preview') ?? false\n}\n\n// Session Resume.\n//\n// Annotate fields to be persisted on navigation away from the current page.\n// Fields be automatically restored when the user revists the page again in\n// their current browser session (excludes seperate tabs).\n//\n// Not design for persisted crash recovery.\n\n// Listen for all form submit events and to see if their default submission\n// behavior is invoked.\nwindow.addEventListener('submit', setForm, {capture: true})\n\n// Resume field content on regular page loads.\nwindow.addEventListener('pageshow', function () {\n  restoreFieldsFromAllBackends()\n})\n\n// Resume field content on elements that are added later\n// We use a debounced version to avoid repeatedly calling it if multiple\n// fields are added\nobserve('.js-session-resumable', function () {\n  // we don't want to restore fields on turbo-cache previews as that empties the cache\n  // causing the fields to be lost when turbo re-renders with the fetched page\n  if (!isTurboRenderingCachePreview()) {\n    debouncedRestoreResumableFields()\n  }\n})\n\n// Persist resumable fields when page is unloaded\nwindow.addEventListener('pagehide', function () {\n  persistFieldstoAllBackends()\n})\n\n// preserve fields before navigating away\nwindow.addEventListener('turbo:before-fetch-response', function () {\n  persistFieldstoAllBackends()\n})\n\n// restore fields once turbo navigation has finished\nwindow.addEventListener('turbo:load', function () {\n  restoreFieldsFromAllBackends()\n})\n","// Deal with selected_link_to on repository and gist pages\nfunction updateSelectedRepoTab(meta: HTMLMetaElement) {\n  const selection = meta && meta.getAttribute('value')\n\n  if (!selection) return\n\n  for (const item of document.querySelectorAll('.js-sidenav-container-pjax .js-selected-navigation-item')) {\n    const isSelected = (item.getAttribute('data-selected-links') || '').split(' ').indexOf(selection) >= 0\n    isSelected ? item.setAttribute('aria-current', 'page') : item.removeAttribute('aria-current')\n    item.classList.toggle('selected', isSelected)\n  }\n}\n\nconst observer = new MutationObserver(mutations => {\n  for (const mutation of mutations) {\n    for (const node of mutation.addedNodes) {\n      if (!(node instanceof HTMLMetaElement)) continue\n\n      if (node.getAttribute('name') === 'selected-link') {\n        updateSelectedRepoTab(node)\n      }\n    }\n  }\n})\n\nobserver.observe(document.head, {childList: true})\n\n// This is to make sure that the selected tab is updated when using back/forward buttons.\ndocument.addEventListener('turbo:load', () => {\n  const selectedLink = document.head.querySelector<HTMLMetaElement>('meta[name=\"selected-link\"]')\n\n  if (!selectedLink) return\n\n  updateSelectedRepoTab(selectedLink)\n})\n","// Populate a form input from a suggested list of tags.\n//\n// Markup example:\n//\n//    <!-- Tag input container -->\n//    <div class=\"tag-input-container js-tag-input-container\">\n//\n//      <!-- Tag <input> wrapper -->\n//      <div class=\"tag-input js-tag-input-wrapper\">\n//\n//        <!-- List of selected tags -->\n//        <ul class=\"js-tag-input-selected-tags\">\n//\n//          <!-- Template used to generate new selected tags -->\n//          <li class=\"js-tag-input-tag js-template d-none\">\n//            <span class=\"js-placeholder-tag-name\"></span>\n//            <a class=\"remove js-remove\" tabindex=\"-1\">&times;</a>\n//            <input type=\"hidden\" name=\"attribute[]\" value=\"tag-value\">\n//          </li>\n//\n//          <!-- List of pre-selected tags (optional) -->\n//          <li class=\"js-tag-input-tag\">\n//            <span class=\"js-tag-input-tag-name\">ruby-on-rails</span>\n//            <a class=\"remove js-remove\" tabindex=\"-1\">&times;</a>\n//            <input type=\"hidden\" name=\"attribute[]\" value=\"ruby-on-rails\">\n//          </li>\n//        </ul>\n//\n//        <auto-complete src=\"<%= url %>\" for=\"popup\">\n//          <input type=\"text\" class=\"tag-input-inner\" autocomplete=\"off\" autofocus>\n//          <div class=\"js-navigation-container js-active-navigation-container\">\n//            <ul class=\"suggester\" id=\"popup\"></ul>\n//          </div>\n//        </auto-complete>\n//      </div>\n//    </div>\n//\n\nimport type AutocompleteElement from '@github/auto-complete-element'\nimport {eventToHotkeyString} from '@github-ui/hotkey'\n// eslint-disable-next-line no-restricted-imports\nimport {fire} from 'delegated-events'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\ninterface TagInputOptions {\n  container: HTMLElement\n  selections: HTMLElement\n  inputWrap: HTMLElement\n  input: HTMLInputElement\n  tagTemplate: HTMLElement\n  autoComplete: AutocompleteElement\n  multiTagInput: boolean\n}\n\nclass TagInput {\n  container: HTMLElement\n  selections: HTMLElement\n  inputWrap: HTMLElement\n  input: HTMLInputElement\n  form: HTMLFormElement\n  tagTemplate: HTMLElement\n  autoComplete: AutocompleteElement\n  multiTagInput: boolean\n\n  constructor(options: TagInputOptions) {\n    this.container = options.container\n    this.selections = options.selections\n    this.inputWrap = options.inputWrap\n    this.input = options.input\n    this.tagTemplate = options.tagTemplate\n    this.form = this.input.form!\n    this.autoComplete = options.autoComplete\n    this.multiTagInput = options.multiTagInput\n  }\n\n  // Bind a tag input to the DOM.\n  setup() {\n    this.container.addEventListener('click', (event: MouseEvent) => {\n      const target = event.target as Element\n      if (target.closest('.js-remove')) {\n        this.removeTag(event)\n      } else {\n        this.onFocus()\n      }\n    })\n    this.container.addEventListener('keydown', (event: KeyboardEvent) => {\n      // If the event isn't prevented that means the autocomplete is open but the user hasn't selected anything\n      // Handle that like the autocomplete is closed\n      // eslint-disable-next-line @github-ui/ui-commands/no-manual-shortcut-logic\n      if (event.key === 'Enter' && !(event.defaultPrevented || !this.input.value)) {\n        event.preventDefault()\n        this.selectTag(this.input.value)\n        this.autoComplete.open = false\n      }\n    })\n    this.input.addEventListener('focus', this.onFocus.bind(this))\n    this.input.addEventListener('blur', this.onBlur.bind(this))\n    this.input.addEventListener('keydown', this.onKeyDown.bind(this))\n    this.form.addEventListener('submit', this.onSubmit.bind(this))\n\n    this.autoComplete.addEventListener('auto-complete-change', () => {\n      this.selectTag(this.autoComplete.value)\n    })\n  }\n\n  // Make the tag input container look like a focused input.\n  onFocus() {\n    this.inputWrap.classList.add('focus')\n    if (this.input !== document.activeElement) this.input.focus()\n  }\n\n  // Make the tag input container *not* look like a focused input. Also submit\n  // the form if there is text in the input and the suggester is hidden.\n  onBlur() {\n    this.inputWrap.classList.remove('focus')\n    if (!this.autoComplete.open) {\n      this.onSubmit()\n    }\n  }\n\n  // Taggify the last thing the user typed in case they didn't hit Enter, Tab,\n  // or a comma before clicking the form's submit button.\n  onSubmit() {\n    if (this.input.value) {\n      this.selectTag(this.input.value)\n      this.autoComplete.open = false\n    }\n  }\n\n  onKeyDown(event: KeyboardEvent) {\n    switch (eventToHotkeyString(event)) {\n      case 'Backspace':\n        this.onBackspace()\n        break\n      case 'Enter':\n      case 'Tab':\n        this.taggifyValueWhenSuggesterHidden(event)\n        break\n      case ',':\n      case ' ': // (Space)\n        this.taggifyValue(event)\n        break\n    }\n  }\n\n  // Taggifies the entered value when the suggester is not visible. Called after an Enter\n  // or Tab is entered.\n  taggifyValueWhenSuggesterHidden(event: Event) {\n    if (!this.autoComplete.open && this.input.value) {\n      event.preventDefault()\n      this.selectTag(this.input.value)\n    }\n  }\n\n  // Taggifies the entered value if it exists; called after a comma or space is entered.\n  taggifyValue(event: Event) {\n    if (this.input.value) {\n      event.preventDefault()\n      this.selectTag(this.input.value)\n      this.autoComplete.open = false\n    }\n  }\n\n  // Add a new tag to the list of selections if it has not already been added.\n  selectTag(text: string) {\n    const tags = this.normalizeTag(text)\n    const selections = this.selectedTags()\n\n    let tagsAdded = false\n    for (let i = 0; i < tags.length; i++) {\n      const tag = tags[i]!\n      if (selections.indexOf(tag) < 0) {\n        this.selections.appendChild(this.templateTag(tag))\n        tagsAdded = true\n      }\n    }\n\n    if (tagsAdded) {\n      this.input.value = ''\n      fire(this.form, 'tags:changed')\n    }\n  }\n\n  // Remove a tag from the list of selections.\n  removeTag(event: Event) {\n    const target = event.target as Element\n    event.preventDefault()\n    const inputTag = target.closest<HTMLElement>('.js-tag-input-tag')!\n    inputTag.remove()\n    fire(this.form, 'tags:changed')\n  }\n\n  // Generate a new tag Node.\n  templateTag(tag: string): Element {\n    const el = this.tagTemplate.cloneNode(true) as Element\n\n    el.querySelector<HTMLInputElement>('input')!.value = tag\n    const tagName = el.querySelector<HTMLElement>('.js-placeholder-tag-name')!\n    tagName.replaceWith(tag)\n    /* eslint-disable-next-line github/no-d-none */\n    el.classList.remove('d-none', 'js-template')\n\n    return el\n  }\n\n  // Sanitize user input to remove invalid tag characters.\n  normalizeTag(text: string): string[] {\n    const sanitizedText = text.toLowerCase().trim()\n\n    if (!sanitizedText) return []\n    if (this.multiTagInput) return sanitizedText.split(/[\\s,']+/)\n\n    return [sanitizedText.replace(/[\\s,']+/g, '-')]\n  }\n\n  // Remove a tag on backspace if the input is empty.\n  onBackspace() {\n    if (!this.input.value) {\n      const lastSelection = this.selections.querySelector('li:last-child .js-remove')\n      if (lastSelection instanceof HTMLElement) lastSelection.click()\n    }\n  }\n\n  // Map matched input content to a suggester query.\n  selectedTags(): string[] {\n    const inputs = this.selections.querySelectorAll<HTMLInputElement>('input')\n    return Array.from(inputs)\n      .map(el => el.value)\n      .filter(value => value.length > 0)\n  }\n}\n\nobserve('.js-tag-input-container', {\n  constructor: HTMLElement,\n  initialize(el) {\n    new TagInput({\n      container: el,\n      inputWrap: el.querySelector<HTMLElement>('.js-tag-input-wrapper')!,\n      input: el.querySelector<HTMLInputElement>('input[type=\"text\"], input:not([type])')!,\n      selections: el.querySelector<HTMLElement>('.js-tag-input-selected-tags')!,\n      tagTemplate: el.querySelector<HTMLElement>('.js-template')!,\n      autoComplete: el.querySelector<AutocompleteElement>('auto-complete')!,\n      multiTagInput: false,\n    }).setup()\n  },\n})\n\nobserve('.js-multi-tag-input-container', {\n  constructor: HTMLElement,\n  initialize(el) {\n    new TagInput({\n      container: el,\n      inputWrap: el.querySelector<HTMLElement>('.js-tag-input-wrapper')!,\n      input: el.querySelector<HTMLInputElement>('input[type=\"text\"], input:not([type])')!,\n      selections: el.querySelector<HTMLElement>('.js-tag-input-selected-tags')!,\n      tagTemplate: el.querySelector<HTMLElement>('.js-template')!,\n      autoComplete: el.querySelector<AutocompleteElement>('auto-complete')!,\n      multiTagInput: true,\n    }).setup()\n  },\n})\n","function supportsUserSelectContain() {\n  const el = document.createElement('div')\n  el.style.cssText = '-ms-user-select: element; user-select: contain;'\n  return (\n    el.style.getPropertyValue('-ms-user-select') === 'element' ||\n    el.style.getPropertyValue('-ms-user-select') === 'contain' ||\n    el.style.getPropertyValue('user-select') === 'contain'\n  )\n}\nfunction handleUserSelectContain(event: Event) {\n  if (!(event.target instanceof Element)) return\n  const currentTarget = event.target.closest('.user-select-contain')\n  if (!currentTarget) return\n\n  const selection = window.getSelection()\n  if (!selection) return\n  if (!selection.rangeCount) return\n  if (!selection.rangeCount || selection.type !== 'Range') return\n\n  const container = selection.getRangeAt(0).commonAncestorContainer\n  if (currentTarget.contains(container)) return\n  selection.selectAllChildren(currentTarget)\n}\n\nif (!supportsUserSelectContain()) {\n  document.addEventListener('click', handleUserSelectContain)\n}\n","export interface BlobOffset {\n  // Line number\n  // Lines start at 1.\n  line: number\n\n  // Optional column number.\n  // Like lines, columns are 1-indexed.\n  column: number | null\n}\n\nexport interface BlobRange {\n  // Starting offset of range.\n  start: BlobOffset\n\n  // End offset of range.\n  // End offset may be the same as the start. This indicates a collapsed range.\n  // Should always be initialized to a value that is equal or greater than the\n  // start range such the range is always in ascending order. Reversed ranges\n  // have undefined behavior.\n  end: BlobOffset\n}\n\n// Inverse of `formatBlobRange`.\n//\n// Examples\n//\n//   parseBlobRange(\"#L3\")\n//   // => {start: {line: 3}}\n//\n//   parseBlobRange(\"L3-L5\")\n//   // => {start: {line: 3}, end: {line: 5}}\n//\n//   parseBlobRange(\"\")\n//   // => null\nexport function parseBlobRange(str: string): BlobRange | undefined {\n  const lines = str.match(/#?(?:L)(\\d+)((?:C)(\\d+))?/g)\n  if (!lines) {\n    return\n  } else if (lines.length === 1) {\n    const offset = parseBlobOffset(lines[0])\n    if (!offset) return\n    return Object.freeze({start: offset, end: offset})\n  } else if (lines.length === 2) {\n    const startOffset = parseBlobOffset(lines[0])\n    const endOffset = parseBlobOffset(lines[1]!)\n    if (!startOffset || !endOffset) return\n\n    return ascendingBlobRange(\n      Object.freeze({\n        start: startOffset,\n        end: endOffset,\n      }),\n    )\n  } else {\n    return\n  }\n}\n\n// Inverse of `parseBlobRange`.\n//\n// Examples\n//\n//   formatBlobRange({start: {line: 3}})\n//   // => \"L3\"\n//\n//   formatBlobRange({start: {line: 3}, end: {line: 5}})\n//   // => \"L3-L5\"\n//\n//   formatBlobRange({start: {line: 3, column: 1}, end: {line: 5, column: 5}})\n//   // => \"L3C1-L5C5\"\n//\n//   formatBlobRange({start: {line: 3, column: 1}, end: {line: 5,}})\n//   // => \"L3C1-L5\"\nexport function formatBlobRange(blobRange: BlobRange): string {\n  const {start, end} = ascendingBlobRange(blobRange)\n\n  if (start.column != null && end.column != null) {\n    return `L${start.line}C${start.column}-L${end.line}C${end.column}`\n  } else if (start.column != null) {\n    return `L${start.line}C${start.column}-L${end.line}`\n  } else if (end.column != null) {\n    return `L${start.line}-L${end.line}C${end.column}`\n  } else if (start.line === end.line) {\n    return `L${start.line}`\n  } else {\n    return `L${start.line}-L${end.line}`\n  }\n}\n\n// Returns a String containing the file prefix with trailing dash.\n//\n// Examples\n//\n//   parseAnchorPrefix(\"#file-zshrc-L3\")\n//   // => \"file-zshrc-\"\n//\n//   parseAnchorPrefix(\"file-zshrc-L3-L5\")\n//   // => \"file-zshrc-\"\n//\n//   parseAnchorPrefix(\"\")\n//   // => \"\"\nfunction parseAnchorPrefix(str: string): string {\n  const match = str.length < 5000 && str.match(/(file-.+?-)L\\d+?/i)\n  return match ? match[1]! : ''\n}\n\nexport type AnchorInfo = {\n  blobRange: BlobRange\n  anchorPrefix: string\n}\n\n// Examples\n//\n//   parseFileAnchor(\"#file-zshrc-L3\")\n//   // => { blobRange: {start: {line: 3}}, anchorPrefix: \"file-zshrc-\" }\n//\n//   parseFileAnchor(\"file-zshrc-L3-L5\")\n//   // => { blobRange: {start: {line: 3}, end: {line: 5}}, anchorPrefix: \"file-zshrc-\" }\n//\n//   parseFileAnchor(\"\")\n//   // => { blobRange: null, anchorPrefix: undefined }\nexport function parseFileAnchor(str: string): AnchorInfo {\n  const blobRange = parseBlobRange(str)!\n  const anchorPrefix = parseAnchorPrefix(str)\n  return {blobRange, anchorPrefix}\n}\n\n// Formats line number range pair as an anchor String.\n//\n// Examples\n//\n//   formatBlobRangeAnchor({blobRange: {start: {line: 3}}, anchorPrefix: \"\"})\n//   // => \"#L3\"\n//\n//   formatBlobRangeAnchor({blobRange: {start: {line: 3}}, anchorPrefix: \"file-zshrc-\"})\n//   // => \"#file-zshrc-L3\"\n//\n//   formatBlobRangeAnchor({blobRange: {start: {line: 3}, end: {line: 5}}, anchorPrefix: \"\"})\n//   // => \"#L3-L5\"\n//\n//   formatBlobRangeAnchor({blobRange: {start: {line: 3, column: 1}, end: {line: 5, column: 5}}, anchorPrefix: \"\"})\n//   // => \"#L3C1-L5C5\"\n//\n//   formatBlobRangeAnchor({blobRange: {start: {line: 3}, end: {line: 5}}, anchorPrefix: \"file-zshrc-\"})\n//   // => \"#file-zshrc-L3-L5\"\n//\n//   formatBlobRangeAnchor({blobRange: null, anchorPrefix: \"\"})\n//   // => \"#\"\n//\n//   formatBlobRangeAnchor({blobRange: null, anchorPrefix: \"file-zshrc-\"})\n//   // => \"#\"\nexport function formatBlobRangeAnchor({anchorPrefix, blobRange}: AnchorInfo): string {\n  if (!blobRange) return '#'\n  return `#${anchorPrefix}${formatBlobRange(blobRange)}`\n}\n\nfunction parseBlobOffset(str: string): BlobOffset | null {\n  const lineMatch = str.match(/L(\\d+)/)\n  const columnMatch = str.match(/C(\\d+)/)\n  if (lineMatch) {\n    return Object.freeze({\n      line: parseInt(lineMatch[1]!),\n      column: columnMatch ? parseInt(columnMatch[1]!) : null,\n    })\n  } else {\n    return null\n  }\n}\n\nexport function DOMRangeFromBlob(\n  blobRange: BlobRange,\n  getLineElement: (line: number) => Node | null,\n): Range | undefined {\n  const [startContainer, _startOffset] = findRangeOffset(blobRange.start, true, getLineElement)\n  const [endContainer, _endOffset] = findRangeOffset(blobRange.end, false, getLineElement)\n  if (!startContainer || !endContainer) return\n\n  // Treat -1 as full line selection\n  let startOffset = _startOffset\n  let endOffset = _endOffset\n  if (startOffset === -1) startOffset = 0\n  if (endOffset === -1) endOffset = endContainer.childNodes.length\n  if (!startContainer.ownerDocument) throw new Error(`DOMRange needs to be inside document`)\n\n  const range = startContainer.ownerDocument.createRange()\n  range.setStart(startContainer, startOffset)\n  range.setEnd(endContainer, endOffset)\n  return range\n}\n\nfunction findRangeOffset(\n  offset: BlobOffset,\n  lookAhead: boolean,\n  getLineElement: (n: number) => Node | null,\n): [Node | null, number] {\n  const error: [null, number] = [null, 0]\n\n  const lineElement = getLineElement(offset.line)\n  if (!lineElement) return error\n\n  if (offset.column == null) {\n    return [lineElement, -1]\n  }\n\n  let column = offset.column - 1\n\n  const textNodes = getAllTextNodes(lineElement)\n  for (let i = 0; i < textNodes.length; i++) {\n    const textNode = textNodes[i]!\n\n    // TODO: length might be buggy with emoji\n    const nextC = column - (textNode.textContent || '').length\n\n    if (nextC === 0) {\n      const nextTextNode = textNodes[i + 1]\n      if (lookAhead && nextTextNode) {\n        return [nextTextNode, 0]\n      } else {\n        return [textNode, column]\n      }\n    } else if (nextC < 0) {\n      return [textNode, column]\n    }\n\n    column = nextC\n  }\n\n  return error\n}\n\n// Get a flat list of text nodes in depth first order.\nfunction getAllTextNodes(el: Node): Node[] {\n  if (el.nodeType === Node.TEXT_NODE) {\n    return [el]\n  }\n  if (!el.childNodes || !el.childNodes.length) return []\n  let list: Node[] = []\n  for (const node of el.childNodes) {\n    list = list.concat(getAllTextNodes(node))\n  }\n  return list\n}\n\n// Sorts range start and end offsets to be in ascending order.\nfunction ascendingBlobRange(range: BlobRange): BlobRange {\n  const offsets = [range.start, range.end]\n  offsets.sort(compareBlobOffsets)\n\n  if (offsets[0] === range.start && offsets[1] === range.end) {\n    return range\n  } else {\n    return Object.freeze({\n      start: offsets[0]!,\n      end: offsets[1]!,\n    })\n  }\n}\n\n// Compare line offsets. May be used with Array.sort\nfunction compareBlobOffsets(a: BlobOffset, b: BlobOffset): number {\n  if (a.line === b.line && a.column === b.column) {\n    return 0\n  } else if (a.line === b.line && typeof a.column === 'number' && typeof b.column === 'number') {\n    return a.column - b.column\n  } else {\n    return a.line - b.line\n  }\n}\n","import type {CodeEditor} from './editor/code-editor'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nconst codeEditors: WeakMap<HTMLElement, CodeEditor> = new WeakMap()\n\nexport function getCodeEditor(el: HTMLElement): CodeEditor | undefined {\n  return codeEditors.get(el)\n}\n\nexport async function getAsyncCodeEditor(el: HTMLElement): Promise<CodeEditor> {\n  return codeEditors.get(el) || onEditorFromEvent(await nextEvent(el, 'codeEditor:ready'))\n}\n\nfunction onEditorFromEvent(event: Event): CodeEditor {\n  if (!(event instanceof CustomEvent)) throw new Error('assert: event is not a CustomEvent')\n  const editor: CodeEditor = event.detail.editor\n  if (!event.target) throw new Error('assert: event.target is null')\n  codeEditors.set(event.target as HTMLElement, editor)\n  return editor\n}\n\non('codeEditor:ready', '.js-code-editor', onEditorFromEvent)\n\nfunction nextEvent(target: EventTarget, event: string): Promise<Event> {\n  return new Promise(resolve => {\n    target.addEventListener(event, resolve, {once: true})\n  })\n}\n","import {filterMap} from './iterables'\n\ntype Comparator<T> = (a: T, b: T) => number\n\nexport function filterSort<T, K>(items: T[], map: (item: T) => K | null | undefined, compare: Comparator<K>): T[] {\n  const sortKey = (item: T): [T, K] | null => {\n    const key = map(item)\n    return key != null ? [item, key] : null\n  }\n  return [...filterMap(items, sortKey)].sort((a, b) => compare(a[1], b[1])).map(([item]) => item)\n}\n","export function* filterMap<T, U>(items: T[], map: (item: T) => U | null | undefined): Iterable<U> {\n  for (const item of items) {\n    const value = map(item)\n    if (value != null) {\n      yield value\n    }\n  }\n}\n","// Example\n// ```js\n//     fuzzyScore(\"foo.html\", \"foo\")\n//     // => 0.6458333333333334\n// ```\n//\n// ```js\n//     // Compute re once\n//     re = fuzzyRegexp(\"foo\")\n//     fuzzyScore(\"foo.html\", re)\n//     fuzzyScore(\"bar.html\", re)\n//     // => 0.6458333333333334\n// ```\n//\n// Returns a number between 0 and 1. 0 being the worst match and 1\n// being an exact match.\n// You can change the `prefixBonusWeight` variable to alter ordering.\n// Currently fuzzy search for the labels picker uses a weaker prefix bonus to weight heavier full word matches.\nexport function fuzzyScore(string: string, query: string, prefixBonusWeight = 0.1): number {\n  let score = stringScore(string, query, prefixBonusWeight)\n  if (score && query.indexOf('/') === -1) {\n    const basename = string.substring(string.lastIndexOf('/') + 1)\n    score += stringScore(basename, query, prefixBonusWeight)\n  }\n  return score\n}\n\n// Create a regexp that can be used to fuzzy match a given string. Any\n// special regexp characters in the input string will be escaped\n// correctly.\n//\n// A query of \"bar\" becomes /(.*)(b)([^a]*?)(a)([^r]*?)(r)(.*?)/.\n//\n// /\n//  (.*)     whatever's before the first b\n//  (b)      grab the first b of bar\n//  ([^a]*?) take everything up to the a of bar\n//  (a)      take the a of bar\n//  ([^r]*?) take everything up to the r of bar\n//  (r)      take the r of bar\n//  (.*?)    take the rest of the string\n// /\nexport function fuzzyRegexp(query: string): RegExp {\n  const chars = query.toLowerCase().split('')\n\n  let regex = ''\n\n  for (let i = 0; i < chars.length; i++) {\n    const char = chars[i]!\n    // must escape these chars so we match literals\n    const c = char.replace(/[\\\\^$*+?.()|[\\]{}]/g, '\\\\$&')\n    if (i === 0) {\n      // for the first we want to greedily match anything, which pushes\n      // the first match as late as possible in the string\n      regex += `(.*)(${c})`\n    } else {\n      regex += `([^${c}]*?)(${c})`\n    }\n  }\n  return new RegExp(`${regex}(.*?)$`, 'i')\n}\n\nexport function fuzzyHighlightElement(content: Element, text?: string, textRe?: RegExp): void {\n  if (text) {\n    const matches = content.innerHTML.trim().match(textRe || fuzzyRegexp(text))\n    if (!matches) return\n\n    let open = false\n    const html = []\n    for (let i = 1; i < matches.length; ++i) {\n      const m = matches[i]\n      if (!m) continue\n\n      if (i % 2 === 0) {\n        if (!open) {\n          // eslint-disable-next-line github/unescaped-html-literal\n          html.push('<mark>')\n          open = true\n        }\n      } else if (open) {\n        html.push('</mark>')\n        open = false\n      }\n      html.push(m)\n    }\n    content.innerHTML = html.join('')\n  } else {\n    const html = content.innerHTML.trim()\n    const clean = html.replace(/<\\/?mark>/g, '')\n    if (html !== clean) {\n      content.innerHTML = clean\n    }\n  }\n}\n\nconst wordSeparators = new Set([' ', '-', '_'])\n\n// string_score.js: Quicksilver-like string scoring algorithm.\n//  https://raw.github.com/joshaven/string_score/master/coffee/string_score.coffee\n//\n// Copyright (C) 2009-2011 Joshaven Potter <yourtech@gmail.com>\n// Copyright (C) 2010-2011 Yesudeep Mangalapilly <yesudeep@gmail.com>\n// MIT license: http://www.opensource.org/licenses/mit-license.php\n//\n// A string score implementation.\nfunction stringScore(originalString: string, abbreviation: string, prefixBonusWeight = 0.1): number {\n  let string = originalString\n  if (string === abbreviation) {\n    return 1.0\n  }\n  const stringLength = string.length\n  let totalCharacterScore = 0.0\n  let shouldAwardCommonPrefixBonus = 0\n  for (let i = 0; i < abbreviation.length; i++) {\n    const c = abbreviation[i]!\n    const indexCLowercase = string.indexOf(c.toLowerCase())\n    const indexCUppercase = string.indexOf(c.toUpperCase())\n    const minIndex = Math.min(indexCLowercase, indexCUppercase)\n    const indexInString = minIndex > -1 ? minIndex : Math.max(indexCLowercase, indexCUppercase)\n    if (indexInString === -1) {\n      return 0.0\n    }\n    totalCharacterScore += 0.1\n    if (string[indexInString] === c) {\n      totalCharacterScore += 0.1\n    }\n    if (indexInString === 0) {\n      totalCharacterScore += 0.9 - prefixBonusWeight\n      if (i === 0) {\n        shouldAwardCommonPrefixBonus = 1\n      }\n    }\n    if (wordSeparators.has(string.charAt(indexInString - 1))) {\n      totalCharacterScore += 0.9 - prefixBonusWeight\n    }\n    string = string.substring(indexInString + 1, stringLength)\n  }\n  const abbreviationLength = abbreviation.length\n  const abbreviationScore = totalCharacterScore / abbreviationLength\n  let finalScore = (abbreviationScore * (abbreviationLength / stringLength) + abbreviationScore) / 2\n  if (shouldAwardCommonPrefixBonus && finalScore + prefixBonusWeight < 1) {\n    finalScore += prefixBonusWeight\n  }\n  return finalScore\n}\n\nexport type TextScore = {score: number; text: string}\nexport function compare(a: TextScore, b: TextScore): -1 | 0 | 1 {\n  if (a.score > b.score) {\n    return -1\n  } else if (a.score < b.score) {\n    return 1\n  } else if (a.text < b.text) {\n    return -1\n  } else if (a.text > b.text) {\n    return 1\n  } else {\n    return 0\n  }\n}\n","import {score as fuzzyScore, hasMatch, positions} from 'fzy.js'\n\nconst getScore = (value: string, text: string, minScore: number) => {\n  if (!hasMatch(value, text)) return -Infinity\n  const score = fuzzyScore(value, text)\n  if (score < minScore) return -Infinity\n  return score\n}\nconst highlightElement = (node: HTMLElement, value: string, text: string) => {\n  node.textContent = ''\n\n  let lastPosition = 0\n  for (const i of positions(value, text)) {\n    const slice = text.slice(lastPosition, i)\n    if (slice !== '') {\n      node.appendChild(document.createTextNode(text.slice(lastPosition, i)))\n    }\n    lastPosition = i + 1\n    const mark = document.createElement('mark')\n    mark.textContent = text[i]!\n    node.appendChild(mark)\n  }\n\n  node.appendChild(document.createTextNode(text.slice(lastPosition)))\n}\n\ninterface sortAbort {\n  aborted: boolean\n}\nconst sorting: WeakMap<FuzzyListElement, sortAbort> = new WeakMap()\n\ntype FuzzyListLazyRenderCallback = (text: string) => Node\ninterface state {\n  timer: number | null\n  handler: MutationObserver\n  items: Set<Node>\n  lazyItems: Map<string, FuzzyListLazyRenderCallback>\n}\nconst states: WeakMap<FuzzyListElement, state> = new WeakMap()\n\nconst textCache: WeakMap<Node, string> = new WeakMap()\nconst getTextCache = (item: Node) => {\n  if (!textCache.has(item) && item instanceof HTMLElement) {\n    const value = (item.getAttribute('data-value') || item.textContent || '').trim()\n    textCache.set(item, value)\n    return value\n  }\n  return textCache.get(item) || ''\n}\n\nclass FuzzyListElement extends HTMLElement {\n  connectedCallback() {\n    /* eslint-disable-next-line custom-elements/no-dom-traversal-in-connectedcallback */\n    const list = this.querySelector('ul')\n    if (!list) return\n\n    /* eslint-disable-next-line custom-elements/no-dom-traversal-in-connectedcallback */\n    const items = new Set(list.querySelectorAll('li'))\n\n    /* eslint-disable-next-line custom-elements/no-dom-traversal-in-connectedcallback */\n    const inputEl = this.querySelector('input')\n    if (inputEl instanceof HTMLInputElement) {\n      inputEl.addEventListener('input', () => {\n        this.value = inputEl.value\n      })\n    }\n\n    const handler = new MutationObserver(mutations => {\n      let update = false\n      for (const mutation of mutations) {\n        if (mutation.type === 'childList' && mutation.addedNodes.length) {\n          for (const item of mutation.addedNodes) {\n            if (item instanceof HTMLLIElement && !items.has(item)) {\n              const text = getTextCache(item)\n              update = update || hasMatch(this.value, text)\n              items.add(item)\n            }\n          }\n        }\n      }\n      if (update) this.sort()\n    })\n    handler.observe(list, {childList: true})\n\n    const state = {handler, items, lazyItems: new Map(), timer: null}\n    states.set(this, state)\n  }\n\n  disconnectedCallback() {\n    const state = states.get(this)\n    if (state) {\n      state.handler.disconnect()\n      states.delete(this)\n    }\n  }\n\n  addLazyItems(dataset: string[], render: FuzzyListLazyRenderCallback) {\n    const state = states.get(this)\n    if (!state) return\n    const {lazyItems} = state\n    const {value} = this\n    let update = false\n    for (const item of dataset) {\n      lazyItems.set(item, render)\n      update = update || (Boolean(value) && hasMatch(value, item))\n    }\n    if (update) this.sort()\n  }\n\n  sort() {\n    const oldSortAbort = sorting.get(this)\n    if (oldSortAbort) oldSortAbort.aborted = true\n    const sortAbort = {aborted: false}\n    sorting.set(this, sortAbort)\n    const {minScore, markSelector, maxMatches, value} = this\n    const state = states.get(this)\n    if (!state) return\n    if (!this.dispatchEvent(new CustomEvent('fuzzy-list-will-sort', {cancelable: true, detail: value}))) return\n    const {items, lazyItems} = state\n    const shouldMark = this.hasAttribute('mark-selector')\n\n    const list = this.querySelector('ul')\n    if (!list) return\n\n    const itemsToRender: Array<\n      {render: FuzzyListLazyRenderCallback; text: string; score: number} | {item: Node; score: number}\n    > = []\n\n    if (value) {\n      for (const item of items) {\n        const text = getTextCache(item)\n        const score = getScore(value, text, minScore)\n        if (score === -Infinity) continue\n        itemsToRender.push({item, score})\n      }\n      for (const [text, render] of lazyItems) {\n        const score = getScore(value, text, minScore)\n        if (score === -Infinity) continue\n        itemsToRender.push({text, render, score})\n      }\n      itemsToRender.sort((a, b) => b.score - a.score).splice(maxMatches)\n    } else {\n      let i = itemsToRender.length\n      for (const item of items) {\n        if (i >= maxMatches) break\n        itemsToRender.push({item, score: 1})\n        i += 1\n      }\n      for (const [text, render] of lazyItems) {\n        if (i >= maxMatches) break\n        itemsToRender.push({text, render, score: 1})\n        i += 1\n      }\n    }\n\n    requestAnimationFrame(() => {\n      if (sortAbort.aborted) return\n\n      // Store a reference to the checked input (if there is one) as when we\n      // append other (stale) items they could be checked, and we want to keep\n      // the originally checked item as the only checked item\n      const checkedInputBeforeFilter = list.querySelector('input[type=\"radio\"]:checked')\n\n      list.textContent = ''\n      let offset = 0\n\n      const nextBatch = () => {\n        if (sortAbort.aborted) return\n        const end = Math.min(itemsToRender.length, offset + 100)\n        const fragment = document.createDocumentFragment()\n        for (let i = offset; i < end; i += 1) {\n          const itemToRender = itemsToRender[i]!\n          let item = null\n          if ('render' in itemToRender && 'text' in itemToRender) {\n            const {render, text} = itemToRender\n            item = render(text)\n            items.add(item)\n            textCache.set(item, text)\n            lazyItems.delete(text)\n          } else if ('item' in itemToRender) {\n            item = itemToRender.item\n          }\n          if (item instanceof HTMLElement) {\n            if (shouldMark) {\n              highlightElement(\n                markSelector ? item.querySelector(markSelector) || item : item,\n                shouldMark ? value : '',\n                getTextCache(item),\n              )\n            }\n            fragment.appendChild(item)\n          }\n        }\n        offset = end\n\n        // Loop through all items that are about to be rendered - if there are\n        // any radios that are checked that conflict with the one checked item,\n        // then reset them to unchecked state\n        let inputStateReset = false\n        if (checkedInputBeforeFilter instanceof HTMLInputElement) {\n          for (const checkedInput of fragment.querySelectorAll('input[type=\"radio\"]:checked')) {\n            if (checkedInput instanceof HTMLInputElement && checkedInput.value !== checkedInputBeforeFilter.value) {\n              checkedInput.checked = false\n              inputStateReset = true\n            }\n          }\n        }\n\n        if (this.getAttribute('data-tab-only-first')) {\n          // Only make first button tabbable, others are navigable by arrow keys\n          // https://github.com/github/accessibility-audits/issues/6591\n          const buttons = this.querySelectorAll('button.js-emoji-button')\n          for (const button of buttons) {\n            button.setAttribute('tabindex', '-1')\n          }\n          buttons.item(0)?.setAttribute('tabindex', '0')\n        } else {\n          // Make sure that the fragments we're appending are accessible by 'tab'\n          for (const button of fragment.querySelectorAll('button[tabindex=\"-1\"]')) {\n            button.setAttribute('tabindex', '0')\n          }\n        }\n\n        list.appendChild(fragment)\n\n        // If any checked items were changed then a change event should be\n        // fired to let other observers know\n        if (checkedInputBeforeFilter && inputStateReset) {\n          checkedInputBeforeFilter.dispatchEvent(new Event('change', {bubbles: true}))\n        }\n\n        if (end < itemsToRender.length) {\n          requestAnimationFrame(nextBatch)\n        } else {\n          list.hidden = itemsToRender.length === 0\n          const emptyEl = this.querySelector<HTMLElement>('[data-fuzzy-list-show-on-empty]')\n          if (emptyEl) {\n            emptyEl.hidden = itemsToRender.length > 0\n          }\n\n          this.dispatchEvent(new CustomEvent('fuzzy-list-sorted', {detail: itemsToRender.length}))\n        }\n      }\n\n      nextBatch()\n    })\n  }\n\n  get value(): string {\n    return this.getAttribute('value') || ''\n  }\n\n  set value(value: string) {\n    this.setAttribute('value', value)\n  }\n\n  get markSelector(): string {\n    return this.getAttribute('mark-selector') || ''\n  }\n\n  set markSelector(value: string) {\n    if (value) {\n      this.setAttribute('mark-selector', value)\n    } else {\n      this.removeAttribute('mark-selector')\n    }\n  }\n\n  get minScore(): number {\n    return Number(this.getAttribute('min-score') || 0)\n  }\n\n  set minScore(value: number) {\n    if (Number.isNaN(value)) return\n    this.setAttribute('min-score', String(value))\n  }\n\n  get maxMatches(): number {\n    return Number(this.getAttribute('max-matches') || Infinity)\n  }\n\n  set maxMatches(value: number) {\n    if (Number.isNaN(value)) return\n    this.setAttribute('max-matches', String(value))\n  }\n\n  static get observedAttributes(): string[] {\n    return ['value', 'mark-selector', 'min-score', 'max-matches']\n  }\n\n  attributeChangedCallback(name: string, oldValue: string, newValue: string) {\n    if (oldValue === newValue) return\n    const state = states.get(this)\n    if (!state) return\n    if (state.timer) window.clearTimeout(state.timer)\n    state.timer = window.setTimeout(() => this.sort(), 100)\n  }\n}\n\nexport default FuzzyListElement\n\nif (!window.customElements.get('fuzzy-list')) {\n  window.FuzzyListElement = FuzzyListElement\n  window.customElements.define('fuzzy-list', FuzzyListElement)\n}\n\ndeclare global {\n  interface Window {\n    FuzzyListElement: typeof FuzzyListElement\n  }\n}\n","import {sendStats} from '@github-ui/stats'\n\nexport function sendData(hydroEventPayload: string, hydroEventHmac: string, hydroClientContext: string): void {\n  const data = {\n    hydroEventPayload,\n    hydroEventHmac,\n    visitorPayload: '',\n    visitorHmac: '',\n    hydroClientContext,\n  }\n\n  const visitorPayload = document.querySelector('meta[name=visitor-payload]')\n  if (visitorPayload instanceof HTMLMetaElement) {\n    data['visitorPayload'] = visitorPayload.content\n  }\n  const visitorHmac = document.querySelector('meta[name=visitor-hmac]') || ''\n  if (visitorHmac instanceof HTMLMetaElement) {\n    data['visitorHmac'] = visitorHmac.content\n  }\n\n  sendStats(data, true)\n}\n\nexport function trackView(el: HTMLElement) {\n  const payload = el.getAttribute('data-hydro-view') || ''\n  const hmac = el.getAttribute('data-hydro-view-hmac') || ''\n  const hydroClientContext = el.getAttribute('data-hydro-client-context') || ''\n  sendData(payload, hmac, hydroClientContext)\n}\n\nexport function sendHydroEvent(el: HTMLElement) {\n  const payload = el.getAttribute('data-hydro-click-payload') || ''\n  const hmac = el.getAttribute('data-hydro-click-hmac') || ''\n  const hydroClientContext = el.getAttribute('data-hydro-client-context') || ''\n  sendData(payload, hmac, hydroClientContext)\n}\n","import type {PageViews} from './page-views'\n\nconst FEATURE_WEIGHTS = {frequency: 0.6, recency: 0.4}\n\nfunction sortBy<T>(items: T[], map: (item: T) => number): T[] {\n  return items.sort((a, b) => map(a) - map(b))\n}\n\ntype Scorer = (pageKey: string) => number\nexport function scorer(pageViews: PageViews): Scorer {\n  const frequencies = frequencyMap(pageViews)\n  const recencies = recencyMap(pageViews)\n  return function (pageKey: string): number {\n    return score(frequencies.get(pageKey) || 0, recencies.get(pageKey) || 0)\n  }\n}\n\nfunction score(frequency: number, recency: number): number {\n  return frequency * FEATURE_WEIGHTS.frequency + recency * FEATURE_WEIGHTS.recency\n}\n\n// Scores a relative frequency in the interval [0, 1] where higher means more frequent.\nfunction frequencyMap(pageViews: PageViews): Map<string, number> {\n  const totalVisits = [...Object.values(pageViews)].reduce((total, view) => total + view.visitCount, 0)\n  return new Map(Object.keys(pageViews).map(pageKey => [pageKey, pageViews[pageKey]!.visitCount / totalVisits]))\n}\n\n// Scores a relative recency value in the interval [0, 1] where higher means more recent.\nfunction recencyMap(pageViews: PageViews): Map<string, number> {\n  const recencyList = sortBy([...Object.keys(pageViews)], key => pageViews[key]!.lastVisitedAt)\n  const totalUniqueVisits = recencyList.length\n  return new Map(recencyList.map((key, index) => [key, (index + 1) / totalUniqueVisits]))\n}\n","import {scorer} from './ranking'\nexport {scorer} from './ranking'\n\ntype PageViewSummary = {\n  lastVisitedAt: number\n  visitCount: number\n}\n\nexport type PageViews = {[page_key: string]: PageViewSummary}\n\nconst TEAM_PAGE_REGEX = /^\\/orgs\\/([a-z0-9-]+)\\/teams\\/([\\w-]+)/\n\n// Of course this list is incomplete, but it should be good enough for the purposes of this prototype.\nconst REPOSITORY_PAGE_REGEXES = [\n  // This will overcount some things, but since every page view is ultimately compared to entities\n  // we can jump to it should be fine. Of course if we ever tried to add users or orgs to this it\n  // would break.\n  /^\\/([^/]+)\\/([^/]+)\\/?$/,\n\n  /^\\/([^/]+)\\/([^/]+)\\/blob/,\n  /^\\/([^/]+)\\/([^/]+)\\/tree/,\n  /^\\/([^/]+)\\/([^/]+)\\/issues/,\n  /^\\/([^/]+)\\/([^/]+)\\/pulls?/,\n  /^\\/([^/]+)\\/([^/]+)\\/pulse/,\n]\n\nconst PROJECT_PAGE_REGEXES = [\n  ['organization', /^\\/orgs\\/([a-z0-9-]+)\\/projects\\/([0-9-]+)/],\n  ['repository', /^\\/([^/]+)\\/([^/]+)\\/projects\\/([0-9-]+)/],\n]\n\nconst MAX_PAGE_VIEWS_TO_STORE_IN_LOCAL_STORAGE = 100\n\nexport function logPageView(path: string) {\n  const teamPageMatch = path.match(TEAM_PAGE_REGEX)\n  if (teamPageMatch) {\n    logPageViewByKey(buildTeamKey(teamPageMatch[1]!, teamPageMatch[2]!))\n    return\n  }\n\n  let projectPageMatch\n  for (let i = 0, len = PROJECT_PAGE_REGEXES.length; i < len; i++) {\n    const [ownerType, projectRegex] = PROJECT_PAGE_REGEXES[i]!\n    projectPageMatch = path.match(projectRegex!)\n    if (projectPageMatch) {\n      let ownerSlug: string | null = null\n      let number: string | null = null\n      switch (ownerType) {\n        case 'organization':\n          ownerSlug = projectPageMatch[1]!\n          number = projectPageMatch[2]!\n          break\n        case 'repository':\n          ownerSlug = `${projectPageMatch[1]}/${projectPageMatch[2]}`\n          number = projectPageMatch[3]!\n          break\n        default:\n        // Should never get here.\n      }\n      if (ownerSlug && number) {\n        logPageViewByKey(buildProjectKey(ownerSlug, number))\n      }\n      return\n    }\n  }\n\n  let repositoryPageMatch\n  for (let i = 0, len = REPOSITORY_PAGE_REGEXES.length; i < len; i++) {\n    repositoryPageMatch = path.match(REPOSITORY_PAGE_REGEXES[i]!)\n    if (repositoryPageMatch) {\n      logPageViewByKey(buildRepositoryKey(repositoryPageMatch[1]!, repositoryPageMatch[2]!))\n      return\n    }\n  }\n}\n\n// Limits localStorage entries to 100 MAX_PAGE_VIEWS_TO_STORE_IN_LOCAL_STORAGE\nfunction limitedPageViews(pageViews: PageViews) {\n  const keys = Object.keys(pageViews)\n  if (keys.length <= MAX_PAGE_VIEWS_TO_STORE_IN_LOCAL_STORAGE) {\n    return pageViews\n  }\n  const scorePage = scorer(pageViews)\n  const ranked = keys.sort((a, b) => scorePage(b) - scorePage(a)).slice(0, MAX_PAGE_VIEWS_TO_STORE_IN_LOCAL_STORAGE / 2)\n  return Object.fromEntries(ranked.map(key => [key, pageViews[key]!]))\n}\n\nfunction logPageViewByKey(key: string) {\n  const views = getPageViewsMap()\n  const now = currentEpochTimeInSeconds()\n  const hit = views[key] || {lastVisitedAt: now, visitCount: 0}\n  hit.visitCount += 1\n  hit.lastVisitedAt = now\n  views[key] = hit\n  setPageViewsMap(limitedPageViews(views))\n}\n\nfunction currentEpochTimeInSeconds(): number {\n  return Math.floor(Date.now() / 1000)\n}\n\nexport function buildTeamKey(organizationLogin: string, teamSlug: string): string {\n  return `team:${organizationLogin}/${teamSlug}`\n}\n\nexport function buildRepositoryKey(ownerLogin: string, name: string): string {\n  return `repository:${ownerLogin}/${name}`\n}\n\nexport function buildProjectKey(ownerSlug: string, number: string): string {\n  return `project:${ownerSlug}/${number}`\n}\n\nconst PAGE_VIEW_KEY_REGEX = /^(team|repository|project):[^/]+\\/[^/]+(\\/([^/]+))?$/\nconst VIEWS_KEY = 'jump_to:page_views'\n\nfunction setPageViewsMap(views: PageViews) {\n  setItem(VIEWS_KEY, JSON.stringify(views))\n}\n\nexport function getPageViewsMap(): PageViews {\n  const rawData = getItem(VIEWS_KEY)\n  if (!rawData) return {}\n\n  let json\n  try {\n    json = JSON.parse(rawData)\n  } catch {\n    // Clear localStorage since we know it's bad\n    setPageViewsMap({})\n    return {}\n  }\n\n  const pageViewMap: PageViews = {}\n  for (const key in json) {\n    if (key.match(PAGE_VIEW_KEY_REGEX)) {\n      pageViewMap[key] = json[key]\n    }\n  }\n  return pageViewMap\n}\n\nfunction setItem(key: string, value: string) {\n  try {\n    window.localStorage.setItem(key, value)\n  } catch {\n    // Storage quota exceeded.\n  }\n}\n\nfunction getItem(key: string): string | null {\n  try {\n    return window.localStorage.getItem(key)\n  } catch {\n    // Storage unavailable.\n    return null\n  }\n}\n","import {getItem, removeItem, setItem} from '@github-ui/safe-storage/session-storage'\n\ntype ShelfReferrerParams = {\n  notification_referrer_id?: string\n  notifications_before?: string\n  notifications_after?: string\n  notifications_query?: string\n}\n\nconst shelfParams: Array<keyof ShelfReferrerParams> = [\n  'notification_referrer_id',\n  'notifications_before',\n  'notifications_after',\n  'notifications_query',\n]\n\nconst sessionStorageKey = 'notification_shelf'\n\n/*\n * Stores url params for the shelf in session storage if present, and returns\n * search params without any shelf params.\n */\nexport function storeAndStripShelfParams(\n  searchParams: URLSearchParams,\n  pathname: string | null = null,\n): URLSearchParams | null {\n  if (searchParams.has('notification_referrer_id')) {\n    storeShelfParams(searchParams, pathname)\n    return deleteShelfParams(searchParams)\n  }\n  return null\n}\n\n/*\n * Loads the shelf params from sessionStorage if they are there and they match\n * the current pull request page, clear them otherwise.\n */\nexport function getStoredShelfParamsForCurrentPage(pathname: string | null = null): ShelfReferrerParams | null {\n  // If the current page is not a pull request, then the stored data will\n  // not match, so clear it and move on.\n  const currentPullRequestPathname = getCurrentPullRequestPathname(pathname)\n  if (!currentPullRequestPathname) {\n    removeItem(sessionStorageKey)\n    return null\n  }\n\n  try {\n    const str = getItem(sessionStorageKey)\n    if (!str) return null\n\n    const stored = JSON.parse(str)\n    if (!stored || !stored.pathname) throw new Error('Must have a pathname')\n\n    if (stored.pathname !== currentPullRequestPathname) {\n      throw new Error('Stored pathname does not match current pathname.')\n    }\n\n    const result: ShelfReferrerParams = {}\n\n    for (const key of shelfParams) {\n      result[key] = stored[key]\n    }\n\n    return result\n  } catch (e) {\n    removeItem(sessionStorageKey)\n    return null\n  }\n}\n\nfunction storeShelfParams(searchParams: URLSearchParams, pathname: string | null) {\n  const pullRequestPathname = getCurrentPullRequestPathname(pathname)\n  if (!pullRequestPathname) return\n\n  const params: {[key: string]: string} = {\n    pathname: pullRequestPathname,\n  }\n\n  for (const key of shelfParams) {\n    const value = searchParams.get(key)\n    if (value) params[key] = value\n  }\n\n  setItem(sessionStorageKey, JSON.stringify(params))\n}\n\nfunction deleteShelfParams(searchParams: URLSearchParams): URLSearchParams {\n  for (const key of shelfParams) {\n    searchParams.delete(key)\n  }\n  return searchParams\n}\n\n/*\n * Returns the base pathname of the current page if it's a pull request.\n *\n * `/github/github/pull/123/files` -> `/github/github/pull/123`\n */\nfunction getCurrentPullRequestPathname(pathname: string | null): string | null {\n  pathname = pathname || window.location.pathname\n  const pullRequestPathnameRegex = /^(\\/[^/]+\\/[^/]+\\/pull\\/[^/]+)/\n  const match = pathname.match(pullRequestPathnameRegex)\n  if (!match) return null\n\n  return match[0]\n}\n","/*\n * Applies state updates from a form (e.g. Mark as read/archive/unsubscribe/star) to the element\n * that represents the notification (e.g. The notification item in the list view, or the\n * notification shelf on an Issue page).\n */\nexport function updateNotificationStates(element: HTMLElement, form: HTMLFormElement) {\n  const notification = element.closest<HTMLElement>('[data-notification-id]')!\n\n  // Toggles read/unread/archive status\n  if (form.hasAttribute('data-status')) {\n    toggleNotificationStatus(notification, form.getAttribute('data-status')!)\n  }\n\n  // Toggles subscribed/unsubscribed status\n  if (form.hasAttribute('data-subscription-status')) {\n    toggleNotificationSubscriptionStatus(notification, form.getAttribute('data-subscription-status')!)\n  }\n\n  // Toggles starred/unstarred status\n  if (form.hasAttribute('data-starred-status')) {\n    toggleNotificationStarredStatus(notification, form.getAttribute('data-starred-status')!)\n  }\n}\n\nfunction toggleNotificationStatus(notification: HTMLElement, status: string) {\n  notification.classList.toggle('notification-archived', status === 'archived')\n  notification.classList.toggle('notification-unread', status === 'unread')\n  notification.classList.toggle('notification-read', status === 'read')\n}\n\nfunction toggleNotificationSubscriptionStatus(notification: HTMLElement, status: string) {\n  notification.classList.toggle('notification-unsubscribed', status === 'unsubscribed')\n}\n\nfunction toggleNotificationStarredStatus(notification: HTMLElement, status: string) {\n  notification.classList.toggle('notification-starred', status === 'starred')\n}\n","// More robust version of Range.surroundContents().\nexport function surroundContents(range: Range, newNode: Node) {\n  newNode.appendChild(range.extractContents())\n  range.insertNode(newNode)\n}\n","// Gets the current page's id for persisting fields.\n//\n// The value can be overridden by providing a normalized value in a meta tag.\n//\n//   <meta name=\"session-resume-id\" content=\"/github/github/issues/123\">.\n//\n// Defaults to the current url path.\nexport function getPageID(url?: URL): string {\n  const location = url || window.location\n\n  const metaTag = document.head && document.head.querySelector('meta[name=session-resume-id]')\n  const id = metaTag instanceof HTMLMetaElement && metaTag.content\n\n  return id || location.pathname\n}\n","import {TemplateInstance} from '@github/template-parts'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nconst POLL_WAIT_TIME_MS = 3000\nconst flashClassName = `github-mobile-auth-flash`\n\nfunction addFlashMessage(message: string): void {\n  const template = new TemplateInstance(document.querySelector<HTMLTemplateElement>('template.js-flash-template')!, {\n    className: `flash-error ${flashClassName}`,\n    message,\n  })\n  const node = document.importNode(template, true)\n  const flashContainer = document.querySelector<HTMLElement>('#js-flash-container')\n  // make sure we are on a page that has a flash container\n  if (flashContainer) {\n    removeFlash()\n    flashContainer.appendChild(node)\n  }\n}\n\nfunction removeFlash(): void {\n  const flashContainer = document.querySelector<HTMLElement>('#js-flash-container')\n  // make sure we are on a page that has a flash container\n  if (flashContainer) {\n    // make sure we don't show more than one flash message for github mobile auth at the same time\n    for (const child of flashContainer.children) {\n      if (!child.classList.contains('js-flash-template') && child.classList.contains(flashClassName)) {\n        flashContainer.removeChild(child)\n      }\n    }\n  }\n}\n\nexport function hidePromptAndShowErrorMessage(): void {\n  const githubMobileAuthenticatePrompt = document.getElementById('github-mobile-authenticate-prompt')\n  if (githubMobileAuthenticatePrompt) {\n    githubMobileAuthenticatePrompt.hidden = true\n  }\n  const githubMobileAuthenticateErrorAndRetry = document.getElementById('github-mobile-authenticate-error-and-retry')\n  if (githubMobileAuthenticateErrorAndRetry) {\n    githubMobileAuthenticateErrorAndRetry.hidden = false\n  }\n}\n\nexport function resetPrompt(): void {\n  removeFlash()\n  const githubMobileAuthenticatePrompt = document.getElementById('github-mobile-authenticate-prompt')\n  if (githubMobileAuthenticatePrompt) {\n    githubMobileAuthenticatePrompt.hidden = false\n  }\n  const githubMobileAuthenticateErrorAndRetry = document.getElementById('github-mobile-authenticate-error-and-retry')\n  if (githubMobileAuthenticateErrorAndRetry) {\n    githubMobileAuthenticateErrorAndRetry.hidden = true\n  }\n}\n\n// the user has approved the mobile request - reload the page which will trigger the redirects\n//\n// token - An optional parameter - only used during the password reset flow\nfunction approvedHandler(token?: string): void {\n  let url\n  if (token) {\n    // during password reset, when the user approves the mobile request, we need to update the url\n    // to use the new SAT token instead of the old SAT token\n    url = new URL(`password_reset/${encodeURIComponent(token)}`, window.location.origin)\n  } else {\n    url = new URL('', window.location.href)\n  }\n\n  url.searchParams.set('redirect', 'true')\n  window.location.assign(url)\n}\n\n// two_factor_login info erased from session - send them back to login form\nfunction rejectedHandler(): void {\n  document.getElementById('github-mobile-rejected-redirect')!.click()\n}\n\nfunction genericHandler(message: string): void {\n  if (message) {\n    addFlashMessage(message)\n  }\n  hidePromptAndShowErrorMessage()\n}\n\nfunction getErrorAndRetryMessage(attributeName: string): string {\n  return document.getElementById('github-mobile-authenticate-error-and-retry')!.getAttribute(attributeName)!\n}\n\nfunction pollMobileAuthRequestStatus(\n  url: RequestInfo,\n  successCallback?: () => void,\n  failCallback?: (message: string) => void,\n  checkCancelCallback?: () => boolean,\n): Promise<void> {\n  return (async function poll(errorCount: number): Promise<void> {\n    if (checkCancelCallback && checkCancelCallback()) {\n      return\n    }\n\n    let status = 'STATUS_UNKNOWN'\n    let token\n    try {\n      const form = document.getElementById('github-mobile-authenticate-form') as HTMLFormElement\n      const csrfInput = form.querySelector('.js-data-url-csrf') as HTMLInputElement\n      const response = await self.fetch(\n        new Request(url, {\n          method: 'POST',\n          body: new FormData(form),\n          mode: 'same-origin',\n          headers: {\n            Accept: 'application/json',\n            'Scoped-CSRF-Token': csrfInput.value,\n            'X-Requested-With': 'XMLHttpRequest',\n          },\n        }),\n      )\n      if (response.ok) {\n        const responseJSON = await response.json()\n        status = responseJSON.status\n        token = responseJSON.token\n      } else {\n        status = 'STATUS_ERROR'\n      }\n    } catch {\n      status = 'STATUS_ERROR'\n    }\n\n    let message\n\n    switch (status) {\n      case 'STATUS_APPROVED':\n        // stop polling and handle approved case specifically\n        return successCallback ? successCallback() : approvedHandler(token)\n      case 'STATUS_EXPIRED':\n        // stop polling and handle expired case specifically\n        message = getErrorAndRetryMessage('timeout-flash')\n        return failCallback ? failCallback(message) : genericHandler(message)\n      case 'STATUS_ACTIVE':\n      case 'STATUS_ERROR':\n      case 'STATUS_UNKNOWN':\n        // keep polling\n        break\n      case 'STATUS_REJECTED':\n        // stop polling and handle rejected case specifically\n        message = getErrorAndRetryMessage('error-flash')\n        return failCallback ? failCallback(message) : rejectedHandler()\n      case 'STATUS_NOT_FOUND': // not expected, we shouldn't reach the poller if this is the case\n      case 'STATUS_UNSUPPORTED': // not expected, we shouldn't reach the poller if this is the case\n      default:\n        // stop polling and handle these cases generically\n        message = getErrorAndRetryMessage('error-flash')\n        return failCallback ? failCallback(message) : genericHandler(message)\n    }\n\n    // wait between polls\n    await new Promise(resolve => setTimeout(resolve, POLL_WAIT_TIME_MS))\n    poll(errorCount)\n  })(0)\n}\n\nexport async function initializeMobileAuthRequestStatusPoll(\n  el: Element,\n  successCallback?: () => void,\n  failCallback?: (message: string) => void,\n  checkCancelCallback?: () => boolean,\n): Promise<void> {\n  try {\n    await pollMobileAuthRequestStatus(\n      el.getAttribute('data-poll-url')!,\n      successCallback,\n      failCallback,\n      checkCancelCallback,\n    )\n  } catch (e) {\n    // if an error was thrown that we didn't handle properly in the poller\n    // we need to make sure to still update the UI in a meaningful way\n    const message = getErrorAndRetryMessage('error-flash')\n    return genericHandler(message)\n  }\n}\n\nobserve('.js-poll-github-mobile-two-factor-authenticate', function (el) {\n  initializeMobileAuthRequestStatusPoll(el)\n})\n\nobserve('.js-poll-github-mobile-verified-device-authenticate', function (el) {\n  initializeMobileAuthRequestStatusPoll(el)\n})\n\nobserve('.js-poll-github-mobile-two-factor-password-reset-authenticate', function (el) {\n  initializeMobileAuthRequestStatusPoll(el)\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {onInput} from '../onfocus'\nimport {remoteForm} from '@github/remote-form'\nimport {requestSubmit} from '@github-ui/form-utils'\n\nexport function smsSending() {\n  document.body.classList.add('is-sending')\n  document.body.classList.remove('is-sent', 'is-not-sent')\n}\n\nexport function smsSuccess() {\n  document.body.classList.add('is-sent')\n  document.body.classList.remove('is-sending')\n}\n\nfunction smsError(message: string) {\n  if (message) {\n    document.querySelector<HTMLElement>('.js-sms-error')!.textContent = message\n  }\n  document.body.classList.add('is-not-sent')\n  document.body.classList.remove('is-sending')\n}\n\nremoteForm('.js-send-auth-code', async (form, wants) => {\n  smsSending()\n  let response\n  try {\n    response = await wants.text()\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    smsError(error.response.text)\n  }\n  if (response) {\n    smsSuccess()\n  }\n})\n\nremoteForm('.js-two-factor-set-sms-fallback', async (form, wants) => {\n  let response\n  try {\n    response = await wants.text()\n  } catch (error) {\n    const pane1 = form.querySelector<HTMLElement>('.js-configure-sms-fallback')!\n    const pane2 = form.querySelector<HTMLElement>('.js-verify-sms-fallback')!\n    const pane = pane1.hidden ? pane2 : pane1\n    const flash = pane.querySelector<HTMLElement>('.flash')!\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    switch (error.response.status) {\n      case 404:\n      case 422:\n      case 429:\n        // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n        flash.textContent = JSON.parse(error.response.text).error\n        flash.hidden = false\n    }\n  }\n  if (response) {\n    switch (response.status) {\n      case 200:\n      case 201:\n        window.location.reload()\n        break\n      case 202:\n        form.querySelector<HTMLElement>('.js-configure-sms-fallback')!.hidden = true\n        form.querySelector<HTMLElement>('.js-verify-sms-fallback')!.hidden = false\n        form.querySelector<HTMLElement>('.js-fallback-otp')!.focus()\n        break\n    }\n  }\n})\n\nonInput('.js-verification-code-input-auto-submit', function (event: Event) {\n  const target = event.currentTarget as HTMLInputElement\n  const pattern = target.pattern || '[0-9]{6}'\n  if (new RegExp(`^(${pattern})$`).test(target.value)) {\n    requestSubmit(target.form!)\n  }\n})\n\non('click', '.js-toggle-redacted-note-content', async event => {\n  const currentButton = event.currentTarget as HTMLButtonElement\n  const noteContainer = currentButton.closest('.note')!\n  if (noteContainer) {\n    const note = noteContainer.getElementsByClassName('js-note')![0]\n    if (note) {\n      const newContent = currentButton.getAttribute('data-content')!.replace(/</g, '&lt;').replace(/>/g, '&gt;')\n      note.innerHTML = newContent\n    }\n  }\n\n  const toggleElements = noteContainer.getElementsByClassName('js-toggle-redacted-note-content')!\n  for (const elem of toggleElements) {\n    const button = elem as HTMLButtonElement\n    button.hidden = !button.hidden\n  }\n})\n","type TextField = HTMLInputElement | HTMLTextAreaElement\n\n/**\n * Throttled Input event.\n *\n * Delays firing `input` event until user is done typing.\n *\n * Details.\n *\n * Never fires while a key is down, waits for the next keyup.\n *   NOTE: Native OSX text fields won't repeat keys. FF will repeat key while held down.\n *\n * Never fires for selection changes (pressing left or right keys to move the cursor).\n */\n\nconst throttledInputEvents: WeakMap<\n  HTMLElement,\n  {\n    keypressed: boolean\n    inputed: boolean\n    timer: number | null | undefined\n    listener: ThrottledHandler\n    wait: number\n  }\n> = new WeakMap()\n\nfunction schedule(element: TextField) {\n  const events = throttledInputEvents.get(element)\n  if (!events) return\n  if (events.timer != null) clearTimeout(events.timer)\n\n  events.timer = window.setTimeout(() => {\n    if (events.timer != null) events.timer = null\n    events.inputed = false\n    events.listener.call(null, element)\n  }, events.wait)\n}\n\nfunction onKeydownInput(event: Event) {\n  const currentTarget = event.currentTarget as TextField\n  const events = throttledInputEvents.get(currentTarget)\n  if (!events) return\n  events.keypressed = true\n  if (events.timer != null) {\n    clearTimeout(events.timer)\n  }\n}\n\nfunction onKeyupInput(event: Event) {\n  const currentTarget = event.currentTarget as TextField\n  const events = throttledInputEvents.get(currentTarget)\n  if (!events) return\n  events.keypressed = false\n  if (events.inputed) {\n    schedule(currentTarget)\n  }\n}\n\nfunction onInputInput(event: Event) {\n  const currentTarget = event.currentTarget as TextField\n  const events = throttledInputEvents.get(currentTarget)\n  if (!events) return\n  events.inputed = true\n  if (!events.keypressed) {\n    schedule(currentTarget)\n  }\n}\n\ntype ThrottledHandler = (arg0: TextField) => unknown\n\nexport function addThrottledInputEventListener(\n  target: TextField,\n  listener: ThrottledHandler,\n  options: {wait: number | null} = {wait: null},\n) {\n  throttledInputEvents.set(target, {\n    keypressed: false,\n    inputed: false,\n    timer: undefined,\n    listener,\n    wait: options.wait != null ? options.wait : 100,\n  })\n\n  target.addEventListener('keydown', onKeydownInput)\n  target.addEventListener('keyup', onKeyupInput)\n  target.addEventListener('input', onInputInput)\n}\n\nexport function removeThrottledInputEventListener(target: TextField, listener: ThrottledHandler) {\n  target.removeEventListener('keydown', onKeydownInput)\n  target.removeEventListener('keyup', onKeyupInput)\n  target.removeEventListener('input', onInputInput)\n\n  const events = throttledInputEvents.get(target)\n  if (events) {\n    if (events.timer != null && events.listener === listener) {\n      clearTimeout(events.timer)\n    }\n    throttledInputEvents.delete(target)\n  }\n}\n\nexport function dispatchThrottledInputEvent(target: TextField) {\n  const events = throttledInputEvents.get(target)\n  if (events) events.listener.call(null, target)\n}\n","// Due to the way `visible` is implemented, it causes the browser to\n// perform a full page reflow, it lays out all elements again, when called. This\n// is one of the most time consuming operations the browser can perform, so it\n// affects perceived page load times.\n//\n// The preferred way to determine element visibility is check for the presence\n// of the `hidden` attribute: `if (el.hidden) ...` and `el.hidden = false`.\n//\n// More info: https://github.com/github/eslint-plugin-github/blob/master/docs/rules/no-d-none.md.\n//\n// We would ideally like to remove the `visible` function and consistently\n// use the `hidden` attribute.\n//\n// Returns true if the element is hidden.\nfunction hidden(element: HTMLElement): boolean {\n  return element.offsetWidth <= 0 && element.offsetHeight <= 0\n}\n\nexport default function visible(element: HTMLElement): boolean {\n  return !hidden(element)\n}\n","import type {AliveEvent, MetadataUpdate, Notifier, Subscription} from '@github/alive-client'\nimport {PresenceMetadataSet, SubscriptionSet, isPresenceChannel} from '@github/alive-client'\nimport {AliveSession} from './session'\nimport {debounce} from '@github/mini-throttle'\nimport {ready} from '@github-ui/document-ready'\nimport safeStorage from '@github-ui/safe-storage'\nimport {alivePolicy, InvalidSourceRelError} from '@github-ui/trusted-types-policies/alive'\nexport interface Dispatchable {\n  dispatchEvent: (e: Event) => unknown\n}\n\nfunction isSharedWorkerSupported(): boolean {\n  return 'SharedWorker' in window && safeStorage('localStorage').getItem('bypassSharedWorker') !== 'true'\n}\n\nexport function workerSrc(): string | null {\n  const url =\n    document.head.querySelector<HTMLLinkElement>(`link[rel=shared-web-socket-src]`)?.getAttribute('href') ?? ''\n  try {\n    return alivePolicy.createScriptURL(url)\n  } catch (e) {\n    if (e instanceof InvalidSourceRelError) {\n      return null\n    }\n    throw e\n  }\n}\n\nfunction socketUrl(): string | null {\n  return document.head.querySelector<HTMLLinkElement>('link[rel=shared-web-socket]')?.href ?? null\n}\n\nfunction socketRefreshUrl(): string | null {\n  return (\n    document.head.querySelector<HTMLLinkElement>('link[rel=shared-web-socket]')?.getAttribute('data-refresh-url') ??\n    null\n  )\n}\n\nfunction sessionIdentifier(): string | null {\n  return (\n    document.head.querySelector<HTMLLinkElement>('link[rel=shared-web-socket]')?.getAttribute('data-session-id') ?? null\n  )\n}\n\nfunction notify(subscribers: Iterable<Dispatchable>, {channel, type, data}: AliveEvent) {\n  for (const el of subscribers) {\n    el.dispatchEvent(\n      new CustomEvent(`socket:${type}`, {\n        bubbles: false,\n        cancelable: false,\n        detail: {name: channel, data},\n      }),\n    )\n  }\n}\n\nclass AliveSessionProxy {\n  private worker: SharedWorker\n  private subscriptions = new SubscriptionSet<Dispatchable>()\n  private presenceMetadata = new PresenceMetadataSet<Dispatchable>()\n  private notify: Notifier<Dispatchable>\n\n  constructor(src: string, url: string, refreshUrl: string, sessionId: string, notifier: Notifier<Dispatchable>) {\n    this.notify = notifier\n    // eslint-disable-next-line ssr-friendly/no-dom-globals-in-constructor, compat/compat\n    this.worker = new SharedWorker(src, `github-socket-worker-v2-${sessionId}`)\n    this.worker.port.onmessage = ({data}) => this.receive(data)\n    this.worker.port.postMessage({connect: {url, refreshUrl}})\n  }\n\n  subscribe(subs: Array<Subscription<Dispatchable>>) {\n    const added = this.subscriptions.add(...subs)\n    if (added.length) {\n      this.worker.port.postMessage({subscribe: added})\n    }\n\n    // We may be adding a subscription to a presence channel which is already subscribed.\n    // In this case, we need to explicitly ask the SharedWorker to send us the presence data.\n    const addedChannels = new Set(added.map(topic => topic.name))\n    const redundantPresenceChannels = subs.reduce((redundantChannels, subscription) => {\n      const channel = subscription.topic.name\n\n      if (isPresenceChannel(channel) && !addedChannels.has(channel)) {\n        redundantChannels.add(channel)\n      }\n\n      return redundantChannels\n    }, new Set<string>())\n\n    if (redundantPresenceChannels.size) {\n      this.worker.port.postMessage({requestPresence: Array.from(redundantPresenceChannels)})\n    }\n  }\n\n  unsubscribeAll(...subscribers: Dispatchable[]) {\n    const removed = this.subscriptions.drain(...subscribers)\n    if (removed.length) {\n      this.worker.port.postMessage({unsubscribe: removed})\n    }\n\n    const updatedPresenceChannels = this.presenceMetadata.removeSubscribers(subscribers)\n    this.sendPresenceMetadataUpdate(updatedPresenceChannels)\n  }\n\n  updatePresenceMetadata(metadataUpdates: Array<MetadataUpdate<Dispatchable>>) {\n    const updatedChannels = new Set<string>()\n\n    for (const update of metadataUpdates) {\n      // update the local metadata for this specific element\n      this.presenceMetadata.setMetadata(update)\n      updatedChannels.add(update.channelName)\n    }\n\n    // Send the full local metadata for these channels to the SharedWorker\n    this.sendPresenceMetadataUpdate(updatedChannels)\n  }\n\n  sendPresenceMetadataUpdate(channelNames: Set<string>) {\n    if (!channelNames.size) {\n      return\n    }\n\n    const updatesForSharedWorker: Array<Omit<MetadataUpdate<Element>, 'subscriber'>> = []\n\n    for (const channelName of channelNames) {\n      // get all metadata for this channel (from all elements) to send to the SharedWorker\n      updatesForSharedWorker.push({\n        channelName,\n        metadata: this.presenceMetadata.getChannelMetadata(channelName),\n      })\n    }\n\n    // Send the full metadata updates to the SharedWorker\n    this.worker.port.postMessage({updatePresenceMetadata: updatesForSharedWorker})\n  }\n\n  online() {\n    this.worker.port.postMessage({online: true})\n  }\n\n  offline() {\n    this.worker.port.postMessage({online: false})\n  }\n\n  hangup() {\n    this.worker.port.postMessage({hangup: true})\n  }\n\n  private notifyPresenceDebouncedByChannel = new Map<string, Notifier<Dispatchable>>()\n  private receive(event: AliveEvent) {\n    const {channel} = event\n\n    if (event.type === 'presence') {\n      // There are times when we get a flood of messages from the SharedWorker, such as a tab that has been idle for a long time and then comes back to the foreground.\n      // Since each presence message for a channel contains the full list of users, we can debounce the events and only notify subscribers with the last one\n      let debouncedNotify = this.notifyPresenceDebouncedByChannel.get(channel)\n      if (!debouncedNotify) {\n        debouncedNotify = debounce((subscribers, debouncedEvent) => {\n          this.notify(subscribers, debouncedEvent)\n          this.notifyPresenceDebouncedByChannel.delete(channel)\n        }, 100)\n        this.notifyPresenceDebouncedByChannel.set(channel, debouncedNotify)\n      }\n\n      debouncedNotify(this.subscriptions.subscribers(channel), event)\n      return\n    }\n\n    // For non-presence messages, we can send them through immediately since they may contain different messages/data\n    this.notify(this.subscriptions.subscribers(channel), event)\n  }\n}\n\nasync function connect() {\n  const src = workerSrc()\n  if (!src) return\n\n  const url = socketUrl()\n  if (!url) return\n\n  const refreshUrl = socketRefreshUrl()\n  if (!refreshUrl) return\n\n  const sessionId = sessionIdentifier()\n  if (!sessionId) return\n\n  const createSession = () => {\n    if (isSharedWorkerSupported()) {\n      try {\n        return new AliveSessionProxy(src, url, refreshUrl, sessionId, notify)\n      } catch (_) {\n        // ignore errors.  CSP will some times block SharedWorker creation. Fall back to standard AliveSession.\n      }\n    }\n\n    return new AliveSession(url, refreshUrl, false, notify)\n  }\n  const session = createSession()\n\n  window.addEventListener('online', () => session.online())\n  window.addEventListener('offline', () => session.offline())\n  window.addEventListener('pagehide', () => {\n    if ('hangup' in session) session.hangup()\n  })\n\n  return session\n}\n\nasync function connectWhenReady() {\n  await ready\n  return connect()\n}\n\nlet sessionPromise: undefined | ReturnType<typeof connectWhenReady>\n\nexport function getSession() {\n  return (sessionPromise ||= connectWhenReady())\n}\n","import {AliveSession as BaseAliveSession} from '@github/alive-client'\nimport type {Notifier} from '@github/alive-client'\nexport class AliveSession<T> extends BaseAliveSession<T> {\n  constructor(\n    url: string,\n    private refreshUrl: string,\n    shared: boolean,\n    notify: Notifier<T>,\n  ) {\n    super(url, () => this.getUrlFromRefreshUrl(), shared, notify)\n  }\n\n  private getUrlFromRefreshUrl() {\n    return fetchRefreshUrl(this.refreshUrl)\n  }\n}\n\ntype PostUrl = {url?: string; token?: string}\nasync function fetchRefreshUrl(url: string): Promise<string | null> {\n  const data = await fetchJSON<PostUrl>(url)\n  return data && data.url && data.token ? post(data.url, data.token) : null\n}\n\nasync function fetchJSON<T>(url: string): Promise<T | null> {\n  const response = await fetch(url, {headers: {Accept: 'application/json'}})\n  if (response.ok) {\n    return response.json()\n  } else if (response.status === 404) {\n    return null\n  } else {\n    throw new Error('fetch error')\n  }\n}\n\nasync function post(url: string, csrf: string): Promise<string> {\n  const response = await fetch(url, {\n    method: 'POST',\n    mode: 'same-origin',\n    headers: {\n      'Scoped-CSRF-Token': csrf,\n    },\n  })\n  if (response.ok) {\n    return response.text()\n  } else {\n    throw new Error('fetch error')\n  }\n}\n","import {ghTrustedTypes} from '@github-ui/trusted-types'\nimport {isStaff} from '@github-ui/stats'\nimport {TrustedTypesPolicyError, trustedTypesPolicy} from './policy'\n\nconst policyName = 'alive'\n\nexport class InvalidSourceRelError extends TrustedTypesPolicyError {}\nexport const alivePolicy = ghTrustedTypes.createPolicy(policyName, {\n  createScriptURL: (url: string) => {\n    return trustedTypesPolicy.apply({\n      policy: () => {\n        if (!isStaff()) return url\n        if (!url.startsWith('/')) throw new InvalidSourceRelError('Alive worker src URL must start with a slash')\n        return url\n      },\n      policyName,\n      fallback: url,\n      fallbackOnError: true,\n    })\n  },\n})\n","let allowUserContentScrolling = true\n\nexport function setUserContentScrolling(setting: boolean) {\n  allowUserContentScrolling = setting\n}\n\nexport function getUserContentScrolling() {\n  return allowUserContentScrolling\n}\n","import type {CustomEventName, CustomEventDetail} from './types/custom-events'\n\nexport function emitToCodeMirror(event: CustomEventName, editorTarget: Element, detail: CustomEventDetail) {\n  if (!editorTarget) return\n\n  // codemirror 6 watches for events on its content element, not the root editor element\n  const innerEditorTarget = editorTarget.className.includes('cm-content')\n    ? editorTarget\n    : editorTarget.querySelector<HTMLDivElement>('.cm-content')\n\n  if (!innerEditorTarget) return\n\n  innerEditorTarget.dispatchEvent(new CustomEvent(event, {detail}))\n}\n","import {announce} from '@github-ui/aria-live'\nimport {ssrSafeDocument} from '@github-ui/ssr-utils'\n\nexport function setTitle(title: string) {\n  if (!ssrSafeDocument) return\n\n  const oldTitle = ssrSafeDocument.querySelector('title')\n  const newTitle = ssrSafeDocument.createElement('title')\n  newTitle.textContent = title\n\n  if (!oldTitle) {\n    ssrSafeDocument.head.appendChild(newTitle)\n    announce(title)\n  } else if (oldTitle.textContent !== title) {\n    // only replace and announce the title if it's changed\n    oldTitle.replaceWith(newTitle)\n    announce(title)\n  }\n}\n","// This is a simple function that just returns Promise.resolve() It is used in instances when we want to queue a\n// microtask before moving onto the next operation, but want to do so in a very explicit manner: `await microtask`\n// looks a lot clearer in intent than `await void 0` or `await Promise.resolve()`.\n//\n// You would want to use `await microtask()` if you have something that needs to be done very urgently, but still\n// needs to be done asynchronously. This will _not_ yield to the browser for any UI updates or wait for idle, instead\n// it queues a task in the \"microtask\" which is run immediately after the current stack. Use this sparingly. This\n// will likely delay subsequent code for 0-10ms.\nexport function microtask(): Promise<void> {\n  return Promise.resolve()\n}\n\n// This function simply Promisifies requestAnimationFrame so it is awaitable.\n//\n// You would want to use `await animationFrame()` if you're happy to yield to the browser to complete any UI updates\n// before calling your next piece of code. This is useful if - for example - you need to wait for scroll events,\n// or CSS transitions or something. This will likely delay subsequent code for 16ms or so - much longer (30-60ms)\n// if the tab is not focussed.\nexport function animationFrame(): Promise<number> {\n  return new Promise(window.requestAnimationFrame)\n}\n\n// Rejects a promise after a timeout has elapsed. The promise is never\n// successfully fulfilled.\n//\n// Examples\n//\n//   try {\n//     const value = await Promise.race([timeout(100), somethingSlow()])\n//     console.log('Slow operation finished within the timeout', value)\n//   } catch (e) {\n//     console.log('Slow operation did not finish', e)\n//   }\n//\n// Returns a rejected Promise rejected after a timeout.\nexport async function timeout(ms: number, signal?: AbortSignal): Promise<void> {\n  let id\n  const done = new Promise<void>((resolve, reject) => {\n    id = self.setTimeout(() => reject(new Error('timeout')), ms)\n  })\n  if (!signal) return done\n  try {\n    await Promise.race([done, whenAborted(signal)])\n  } catch (e) {\n    self.clearTimeout(id)\n    throw e\n  }\n}\n\n// Fulfills a promise after a timeout has elapsed. The promise is never rejected.\n//\n// Examples\n//\n//   step1()\n//   await wait(100)\n//   step2()\n//\n// Returns a Promise fulfilled after a timeout.\nexport async function wait(ms: number, signal?: AbortSignal): Promise<void> {\n  let id\n  const done = new Promise<void>(resolve => {\n    id = self.setTimeout(resolve, ms)\n  })\n  if (!signal) return done\n  try {\n    await Promise.race([done, whenAborted(signal)])\n  } catch (e) {\n    self.clearTimeout(id)\n    throw e\n  }\n}\n\nfunction whenAborted(signal: AbortSignal): Promise<never> {\n  return new Promise((resolve, reject) => {\n    const error = new Error('aborted')\n    error.name = 'AbortError'\n    if (signal.aborted) {\n      reject(error)\n    } else {\n      signal.addEventListener('abort', () => reject(error))\n    }\n  })\n}\n\nexport function taskQueue<T>(fn: (values: T[]) => unknown): (value: T) => void {\n  const queue: T[] = []\n  return function (value: T) {\n    queue.push(value)\n    if (queue.length === 1) {\n      queueMicrotask(() => {\n        const values = queue.slice(0)\n        queue.length = 0\n        fn(values)\n      })\n    }\n  }\n}\n","// Check if the navigation is only a hash change.\nconst isHashNavigation = (currentUrl: string, targetUrl: string): boolean => {\n  const current = new URL(currentUrl, window.location.origin)\n  const target = new URL(targetUrl, window.location.origin)\n  const hasHash = target.href.includes('#')\n\n  return (\n    hasHash && current.host === target.host && current.pathname === target.pathname && current.search === target.search\n  )\n}\n\nexport default isHashNavigation\n","import {ghTrustedTypes} from '@github-ui/trusted-types'\nimport {trustedTypesPolicy} from './policy'\n\nconst policyName = 'jtml-no-op'\n\n// This is a temporary policy to allow us to migrate to Trusted Types without breaking existing code.\nexport const temporaryPermissiveJtmlPolicy = ghTrustedTypes.createPolicy(policyName, {\n  createHTML: (s: string) => {\n    return trustedTypesPolicy.apply({\n      policy: () => s,\n      policyName,\n      fallback: s,\n      fallbackOnError: true,\n    })\n  },\n})\n","import {temporaryPermissiveJtmlPolicy} from '@github-ui/trusted-types-policies/jtml'\n// eslint-disable-next-line no-restricted-imports\nimport {TemplateResult} from '@github/jtml'\n\n// eslint-disable-next-line no-restricted-imports\nexport {html, unsafeHTML, render} from '@github/jtml'\n\nTemplateResult.setCSPTrustedTypesPolicy(temporaryPermissiveJtmlPolicy)\nexport {TemplateResult}\n","import {dialog} from '@github-ui/details-dialog'\nimport {fetchSafeDocumentFragment} from '@github-ui/fetch-utils'\nimport type {Kicker} from '@github/remote-form'\nimport {remoteForm} from '@github/remote-form'\nimport {webauthnSupportLevel} from '@github-ui/webauthn-support-level'\n\nlet sudoPromptExist = false\n\n/**\n * Take a URL and add webauthn params to it.\n *\n * @param {string} oldURL - The old URL.\n * @returns {string} - The new URL with added params.\n */\nfunction urlWithParams(oldURL: string): string {\n  const newURL = new URL(oldURL, window.location.origin)\n  const params = new URLSearchParams(newURL.search.slice(1))\n  params.set('webauthn-support', webauthnSupportLevel())\n  newURL.search = params.toString()\n  return newURL.toString()\n}\n\nasync function loadPromptTemplate(): Promise<HTMLTemplateElement> {\n  const link = document.querySelector<HTMLLinkElement>('link[rel=sudo-modal]')!\n  const template = document.querySelector('.js-sudo-prompt')\n  if (template instanceof HTMLTemplateElement) {\n    return template\n  } else if (link) {\n    const fragment = await fetchSafeDocumentFragment(document, urlWithParams(link.href))\n    document.body.appendChild(fragment)\n    return document.querySelector<HTMLTemplateElement>('.js-sudo-prompt')!\n  } else {\n    throw new Error(\"couldn't load sudo prompt\")\n  }\n}\n\nlet succeeded = false\n\n/**\n * Provide a sudo prompt, and return when it has been filled in or dismissed.\n *\n * @returns {Promise<boolean>} - Resolves to `true` if the user successfully authed with sudo.\n */\nexport async function sudoPrompt(currentTarget?: HTMLElement): Promise<boolean> {\n  if (sudoPromptExist) return false\n  sudoPromptExist = true\n  succeeded = false\n  const template = await loadPromptTemplate()\n  const content = template.content.cloneNode(true)\n  const prompt = await dialog({content})\n\n  // open/expanded HTML5 <details> can potentially steal focus from the dialog (https://developer.mozilla.org/en-US/docs/Web/HTML/Element/details)\n  // Example bug: https://github.com/github/authentication/issues/2208\n  // close the open details element that triggered this sudo challenge\n  const details = currentTarget?.closest('details[open]') as HTMLElement\n  if (details) {\n    details.removeAttribute('open')\n  }\n\n  await new Promise<void>(resolve => {\n    prompt.addEventListener(\n      'dialog:remove',\n      function () {\n        // re-add the open attribute to the details that we closed above\n        if (details) {\n          details.setAttribute('open', 'open')\n        }\n        sudoPromptExist = false\n        resolve()\n      },\n      {once: true},\n    )\n  })\n  return succeeded\n}\n\nasync function sudoModalErrorOrClose(\n  form: HTMLFormElement,\n  wants: Kicker,\n  unauthorizedError = 'Sudo authentication failed.',\n  tooManyError = 'Too many authentication attemtps. Please try again later.',\n  errorSelector = '.js-sudo-error',\n  inputElementSelector?: string,\n) {\n  try {\n    await wants.text()\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    if (!error.response) throw error\n    let errorMessage\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    switch (error.response.status) {\n      case 401:\n        errorMessage = unauthorizedError\n        break\n      case 429:\n        errorMessage = tooManyError\n        break\n      default:\n        errorMessage = 'An unknown error occurred. Please try again later.'\n    }\n\n    form.querySelector<HTMLElement>(errorSelector)!.textContent = errorMessage\n    form.querySelector<HTMLElement>(errorSelector)!.hidden = false\n    if (inputElementSelector) {\n      form.querySelector<HTMLInputElement>(inputElementSelector)!.value = ''\n    }\n\n    // rethrow error if not expected, only after surfacing it in flash\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    if (error.response.status !== 401 && error.response.status !== 429) {\n      throw error\n    }\n\n    return\n  }\n  succeeded = true\n  form.closest<HTMLElement>('details')!.removeAttribute('open')\n}\n\nremoteForm('.js-sudo-webauthn-form', async function (form, wants) {\n  await sudoModalErrorOrClose(form, wants)\n})\n\nremoteForm('.js-sudo-github-mobile-form', async function (form, wants) {\n  await sudoModalErrorOrClose(form, wants)\n})\n\nremoteForm('.js-sudo-totp-form', async function (form, wants) {\n  await sudoModalErrorOrClose(form, wants, undefined, undefined, '.flash-error', '#totp')\n})\n\nremoteForm('.js-sudo-password-form', async function (form, wants) {\n  await sudoModalErrorOrClose(\n    form,\n    wants,\n    'Incorrect password.',\n    'Too many password attempts. Please wait and try again.',\n    undefined,\n    '.js-sudo-password',\n  )\n})\n\n/**\n * Check if user is in sudo mode. If not, show a sudo prompt.\n *\n * @returns {Promise<boolean>} - Will be `true` if user is in or got in sudo mode after prompt.\n */\nexport default async function triggerSudoPrompt(currentTarget?: HTMLElement): Promise<boolean> {\n  const response = await fetch('/sessions/in_sudo', {\n    headers: {accept: 'application/json', 'X-Requested-With': 'XMLHttpRequest'},\n  })\n  if (response.ok) {\n    const sudoResponse = await response.text()\n    if (sudoResponse === 'true') {\n      return true\n    }\n  }\n  return sudoPrompt(currentTarget)\n}\n\nexport async function fetchSessionInSudo(): Promise<boolean> {\n  const response = await fetch('/sessions/in_sudo', {\n    headers: {accept: 'application/json', 'X-Requested-With': 'XMLHttpRequest'},\n  })\n  if (response.ok) {\n    const sudoResponse = await response.text()\n    if (sudoResponse === 'true') {\n      return true\n    }\n  }\n  return false\n}\n","// Gets the length of code-points from a String.\n//\n// This is different to `string.length` which returns the amount of utf-8\n// bytes, which is a different metric as - for example - the poo emoji is 2\n// utf-8 bytes, but 1 unicode code point.\n//\n// See http://blog.jonnew.com/posts/poo-dot-length-equals-two for more.\nexport function getUtf8StringLength(str: string): number {\n  const joiner = '\\u200D'\n  const split = str.split(joiner)\n  let count = 0\n\n  for (const s of split) {\n    // removing the variation selectors\n    const num = Array.from(s.split(/[\\ufe00-\\ufe0f]/).join('')).length\n    count += num\n  }\n\n  // assuming the joiners are used appropriately\n  return count / split.length\n}\n/**\n * Replace text in a textarea with a new string and\n * place the cursor at the selectionEnd position.\n * @param textarea an `<input>` or `<textarea>` element\n * @param oldText The text to replace\n * @param newText The new text to replace with\n * @param isFocused whether the textarea is currently in focus\n * @returns The new text\n */\nexport function replaceText(\n  textarea: HTMLInputElement | HTMLTextAreaElement,\n  oldText: string,\n  newText: string,\n  isFocused = true,\n): string {\n  let beginning = textarea.value.substring(0, textarea.selectionEnd || 0)\n  let remaining = textarea.value.substring(textarea.selectionEnd || 0)\n  beginning = beginning.replace(oldText, newText)\n  remaining = remaining.replace(oldText, newText)\n\n  setTextareaValueAndCursor(textarea, beginning + remaining, beginning.length, isFocused)\n\n  return newText\n}\n\n/**\n * Replace selected text in a textarea with a new string.\n * If the selection is empty, the old text is replaced by the\n * new text in the whole textarea.\n * @param textarea an `<input>` or `<textarea>` element\n * @param oldText The text to replace\n * @param newText The new text to replace with\n * @returns The new text\n */\nexport function replaceSelection(\n  textarea: HTMLInputElement | HTMLTextAreaElement,\n  oldText: string,\n  newText: string,\n): string {\n  if (textarea.selectionStart === null || textarea.selectionEnd === null) {\n    return replaceText(textarea, oldText, newText)\n  }\n  const beginning = textarea.value.substring(0, textarea.selectionStart)\n  const remaining = textarea.value.substring(textarea.selectionEnd)\n\n  setTextareaValueAndCursor(textarea, beginning + newText + remaining, beginning.length)\n\n  return newText\n}\n\ntype InsertOptions = {\n  appendNewline?: boolean\n}\n/**\n * Inserts text into a text input and moves the cursor appropriately.\n * If the cursor happens to be in the middle of a line, or the textarea isn't empty,\n * we add a newline character before the inserted text. We also advance the cursor\n * appropriately\n * @param textarea an `<input>` or `<textarea>` element\n * @param text The text to add\n * @param appendNewline optionally adds a `\\n` character after `text`\n */\nexport function insertText(\n  textarea: HTMLInputElement | HTMLTextAreaElement,\n  text: string,\n  options: InsertOptions = {},\n): string {\n  const point = textarea.selectionEnd || 0\n  const beginning = textarea.value.substring(0, point)\n  const remaining = textarea.value.substring(point)\n  const newline = textarea.value === '' || beginning.match(/\\n$/) ? '' : '\\n'\n  const trailingNewline = options.appendNewline ? '\\n' : ''\n  const insertedText = newline + text + trailingNewline\n\n  textarea.value = beginning + insertedText + remaining\n  const newPoint = point + insertedText.length\n  textarea.selectionStart = newPoint\n  textarea.selectionEnd = newPoint\n  textarea.dispatchEvent(new CustomEvent('change', {bubbles: true, cancelable: false}))\n  textarea.focus()\n  return insertedText\n}\n\n/**\n * Helper function to set the value of a textarea and move the cursor to a given position.\n * Emits a `change` event.\n * @param textarea an `<input>` or `<textarea>` element\n * @param value The new value\n * @param cursor The position to move the cursor to\n * @param isFocused whether the textarea is currently in focus\n */\nfunction setTextareaValueAndCursor(\n  textarea: HTMLInputElement | HTMLTextAreaElement,\n  value: string,\n  cursor: number,\n  isFocused = true,\n) {\n  textarea.value = value\n\n  if (isFocused) {\n    textarea.selectionStart = cursor\n    textarea.selectionEnd = cursor\n  }\n\n  textarea.dispatchEvent(new CustomEvent('change', {bubbles: true, cancelable: false}))\n}\n\n// Returns the character index for a given byte position, taking character encoding into account\n// Example usage for this method: highlighing text in a textarea that may contain non-UTF8 characters\n//\n// For context, in Javascript, strings are UTF16. However, Codemirror uses simple Javascript\n// indexing, that isn't Unicode aware. This leads to incorrect highlighting.\n//\n// For example, '' is represented as 4 bytes. In Javascript, it has length 2\n// and is composed of a surrogate pair (2 code points). ''.length is 2.\n// Given text string such as 'hello  world', this would be represented in hex as:\n// \n// 00000000 68 65 6c 6c 6f 20 f0 9f  92 a9 20 77 6f 72 6c 64 hello  world\n// \n// The string 'world' appears at byte positions (11, 16), but in Javascript `str.slice(11, 16)` returns 'rld'.\n// The correct position in Javascript, and codemirror, would be: (9, 14).\n//\n// When encoded using `TextEncoder#encodeInto` with '', we'd get an object with\n// the following properties: {written: 4, read: 2}. This discrepancy informs us\n// that we need to offset the start and end positions by 2.\nexport function GetCharIndexFromBytePosition(str: string, pos: number): number {\n  // The string iterator [...str] is unicode aware, and allows us to correctly\n  // iterate over each grapheme in the string. Iterating over `str[i]` would\n  // not work, as it separates the astral symbol into each of its surrogates.\n  const contents = [...str]\n  const encoder = new TextEncoder()\n\n  // Astral code points in Javascript are a surrogate pair of 2 UTF16 code units, or 4 bytes\n  const u8array = new Uint8Array(4)\n\n  for (let i = 0; i < contents.length; i++) {\n    const char = contents[i]!\n    const {written, read} = encoder.encodeInto(char, u8array)!\n    if (!written || !read) {\n      return -1\n    }\n    const diff = written - read\n    if (diff === 0) {\n      continue\n    }\n\n    if (i < pos) {\n      pos -= diff\n    }\n\n    if (i >= pos) {\n      break\n    }\n  }\n\n  return pos\n}\n","import {ghTrustedTypes} from '@github-ui/trusted-types'\nimport {trustedTypesPolicy} from './policy'\n\nconst policyName = 'turbo'\n\nexport const turboPolicy = ghTrustedTypes.createPolicy(policyName, {\n  createHTML: (html: string) => {\n    return trustedTypesPolicy.apply({\n      policy: () => {\n        return html\n      },\n      policyName: `${policyName}-html`,\n      fallback: html,\n      fallbackOnError: true,\n      silenceErrorReporting: true,\n    })\n  },\n  createScript: (script: string) => {\n    return trustedTypesPolicy.apply({\n      policy: () => {\n        return script\n      },\n      policyName: `${policyName}-script`,\n      fallback: script,\n      fallbackOnError: true,\n      silenceErrorReporting: true,\n    })\n  },\n  createScriptURL: (url: string) => {\n    return trustedTypesPolicy.apply({\n      policy: () => {\n        return url\n      },\n      policyName: `${policyName}-url`,\n      fallback: url,\n      fallbackOnError: true,\n      silenceErrorReporting: true,\n    })\n  },\n})\n","import {turboPolicy} from '@github-ui/trusted-types-policies/turbo'\n\nexport interface CacheNode {\n  title: string | null | undefined\n  transients: Element[]\n  bodyClasses: string | null | undefined\n  replacedElements: Element[]\n}\n\nconst DATA_TURBO_LOADED = 'data-turbo-loaded'\n\nexport function markTurboHasLoaded() {\n  document.documentElement.setAttribute(DATA_TURBO_LOADED, '')\n}\n\nexport function hasTurboLoaded() {\n  return document.documentElement.hasAttribute(DATA_TURBO_LOADED)\n}\n\n// Check if an event target is a <turbo-frame>\nexport const isTurboFrame = (el: EventTarget | null): boolean => (el as Element)?.tagName === 'TURBO-FRAME'\n\n// Checks if two urls start with the same \"/owner/repo\" prefix.\nexport function isSameRepo(url1: string, url2: string): boolean {\n  const path1 = url1.split('/', 3).join('/')\n  const path2 = url2.split('/', 3).join('/')\n  return path1 === path2\n}\n\n// Checks if two urls start with the same \"/owner\" prefix.\nexport function isSameProfile(url1: string, url2: string): boolean {\n  const path1 = url1.split('/', 2).join('/')\n  const path2 = url2.split('/', 2).join('/')\n  return path1 === path2\n}\n\n// Wait for all stylesheets to be loaded.\nexport async function waitForStylesheets() {\n  const headStylesheets = document.head.querySelectorAll<HTMLLinkElement>('link[rel=stylesheet]')\n  const loadedStylesheets = new Set([...document.styleSheets].map(stylesheet => stylesheet.href))\n  const promises = []\n\n  for (const stylesheet of headStylesheets) {\n    if (stylesheet.href === '' || loadedStylesheets.has(stylesheet.href)) continue\n    promises.push(waitForLoad(stylesheet))\n  }\n\n  await Promise.all(promises)\n}\n\nconst waitForLoad = (stylesheet: HTMLLinkElement, timeout = 2000): Promise<void> => {\n  return new Promise(resolve => {\n    const onComplete = () => {\n      stylesheet.removeEventListener('error', onComplete)\n      stylesheet.removeEventListener('load', onComplete)\n      resolve()\n    }\n\n    stylesheet.addEventListener('load', onComplete, {once: true})\n    stylesheet.addEventListener('error', onComplete, {once: true})\n    setTimeout(onComplete, timeout)\n  })\n}\n\n// Replaces all elements with `data-turbo-replace` with the ones coming from the Turbo response.\nexport const replaceElements = (html: Document, cachedElements?: Element[]) => {\n  const newElements = cachedElements || html.querySelectorAll('[data-turbo-replace]')\n  const oldElements = [...document.querySelectorAll('[data-turbo-replace]')]\n\n  for (const newElement of newElements) {\n    const oldElement = oldElements.find(el => el.id === newElement.id)\n\n    if (oldElement) {\n      oldElement.replaceWith(newElement.cloneNode(true))\n    }\n  }\n}\n\n// Adds all missing stylesheets that come from the Turbo response.\nexport const addNewStylesheets = (html: Document) => {\n  // Only add stylesheets that aren't already in the page\n  for (const el of html.querySelectorAll<HTMLLinkElement>('link[rel=stylesheet]')) {\n    if (\n      !document.head.querySelector(\n        `link[href=\"${el.getAttribute('href')}\"],\n           link[data-href=\"${el.getAttribute('data-href')}\"]`,\n      )\n    ) {\n      document.head.append(el)\n    }\n  }\n}\n\n// Adds all missing scripts that come from the Turbo response.\nexport const addNewScripts = (html: Document) => {\n  // Only add scripts that aren't already in the page\n  for (const el of html.querySelectorAll<HTMLScriptElement>('script')) {\n    if (!document.head.querySelector(`script[src=\"${el.getAttribute('src')}\"]`)) {\n      executeScriptTag(el)\n    }\n  }\n}\n\n// Load and execute scripts using standard script request.\nexport const copyScriptTag = (script: HTMLScriptElement) => {\n  const {src} = script\n\n  if (!src) {\n    // we can't load a script without a source\n    return\n  }\n\n  // eslint-disable-next-line github/no-dynamic-script-tag\n  const newScript = document.createElement('script')\n  const type = script.getAttribute('type')\n  if (type) newScript.type = type\n\n  const trustedSrc = turboPolicy.createScriptURL(src)\n  newScript.src = trustedSrc\n  return newScript\n}\n\n// Load and execute scripts using standard script request.\nconst executeScriptTag = (script: HTMLScriptElement) => {\n  const newScript = copyScriptTag(script)\n\n  if (document.head && newScript) {\n    document.head.appendChild(newScript)\n  }\n}\n\n// Compares all `data-turbo-track=\"reload\"` reload with the ones coming from the Turbo response.\nexport const getChangedTrackedKeys = (html: Document): string[] => {\n  const changedKeys = []\n  for (const meta of html.querySelectorAll<HTMLMetaElement>('meta[data-turbo-track=\"reload\"]')) {\n    if (\n      document.querySelector<HTMLMetaElement>(`meta[http-equiv=\"${meta.getAttribute('http-equiv')}\"]`)?.content !==\n      meta.content\n    ) {\n      changedKeys.push(formatKeyToError(meta.getAttribute('http-equiv') || ''))\n    }\n  }\n\n  return changedKeys\n}\n\nexport const getTurboCacheNodes = (html: Document): CacheNode => {\n  const head = html.querySelector('[data-turbo-head]') || html.head\n\n  return {\n    title: head.querySelector('title')?.textContent,\n    transients: [...head.querySelectorAll('[data-turbo-transient]')].map(el => el.cloneNode(true) as Element),\n    bodyClasses: html.querySelector<HTMLMetaElement>('meta[name=turbo-body-classes]')?.content,\n    replacedElements: [...html.querySelectorAll('[data-turbo-replace]')].map(el => el.cloneNode(true) as Element),\n  }\n}\n\nexport const getDocumentAttributes = () => [...document.documentElement.attributes]\n\nexport const formatKeyToError = (key: string) => key.replace(/^x-/, '').replaceAll('-', '_')\n\nexport const dispatchTurboReload = (reason: string) =>\n  document.dispatchEvent(new CustomEvent('turbo:reload', {detail: {reason}}))\n\nexport const replaceElementAttributes = (element: HTMLElement, newElement: HTMLElement) => {\n  for (const attr of element.attributes) {\n    if (!newElement.hasAttribute(attr.nodeName) && attr.nodeName !== 'aria-busy') {\n      element.removeAttribute(attr.nodeName)\n    }\n  }\n\n  for (const attr of newElement.attributes) {\n    if (element.getAttribute(attr.nodeName) !== attr.nodeValue) {\n      element.setAttribute(attr.nodeName, attr.nodeValue!)\n    }\n  }\n}\n","import {attr, controller, target, targets} from '@github/catalyst'\nimport {get, parseRequestOptionsFromJSON, supported} from '@github/webauthn-json/browser-ponyfill'\nimport type {CredentialRequestOptionsJSON} from '@github/webauthn-json/browser-ponyfill'\nimport {requestSubmit} from '@github-ui/form-utils'\n\n// An event dispatched by `WebauthnGetElement` when a normal get request is initiated\nconst webauthnGetEvent = 'webauthn-get-prompt'\n// An event dispatched by `WebauthnSubtleElement` when its button is submitted\nconst webauthnSubtleEvent = 'webauthn-subtle-submit'\n\nexport enum State {\n  Initializing = 'initializing',\n  Unsupported = 'unsupported',\n  Ready = 'ready',\n  Waiting = 'waiting',\n  Error = 'error',\n  Submitting = 'submitting',\n}\n\n@controller\nexport class WebauthnGetElement extends HTMLElement {\n  state: State = State.Initializing\n  @target button: HTMLButtonElement\n  @target buttonText: HTMLElement\n  // `messages` contains all the message elements.\n  @targets messages: HTMLElement[]\n  @target capitalizedDescription: HTMLElement\n  @target unsupportedMessage: HTMLElement\n  @target passkeysUnsupportedMessage: HTMLElement\n  @target waitingMessage: HTMLElement\n  @target errorMessage: HTMLElement\n  @target errorText: HTMLElement\n\n  static attrPrefix = ''\n  @attr dataJson = ''\n  @attr subtleLogin = false\n  private originalButtonText: string\n  private hasErrored = false\n  private originalErrorText: string | null\n  private passkeySupport: boolean\n\n  async connectedCallback() {\n    this.originalButtonText = this.getCurrentButtonText()\n    this.originalErrorText = this.errorText.textContent\n    this.setState(supported() ? State.Ready : State.Unsupported)\n    this.passkeySupport = await window.PublicKeyCredential?.isUserVerifyingPlatformAuthenticatorAvailable()\n    // show the passkey unsupported message if it's present on the page (renders when the user has passkeys)\n    // and we're not already showing the webauthn unsupported message\n    if (this.state !== State.Unsupported && !this.passkeySupport && this.passkeysUnsupportedMessage) {\n      this.passkeysUnsupportedMessage.hidden = false\n    }\n    // if this get request is for login and the user doesn't have any passkeys\n    if (this.subtleLogin) {\n      this.handleWebauthnSubtle()\n    } else {\n      this.showWebauthnLoginFragment()\n    }\n  }\n\n  handleWebauthnSubtle(): void {\n    // show the subtle UX. webauthn-get loads last so we don't need to worry about if it isn't already on the page\n    const subtle = document.querySelector<HTMLElement>('.js-webauthn-subtle')!\n    if (!subtle) {\n      return\n    }\n\n    subtle.hidden = false\n    subtle.addEventListener(webauthnSubtleEvent, () => {\n      this.showWebauthnLoginFragment()\n      // if user tries subtle passkey login from an unsupported browser, show the unsupported UX but don't trigger the prompt\n      if (this.state !== State.Unsupported) {\n        this.prompt()\n      }\n    })\n  }\n\n  showWebauthnLoginFragment(): void {\n    // grab and reveal parent login UX that isn't a catalyst component (when we're on the login page)\n    const loginFragment = document.querySelector<HTMLElement>('.js-webauthn-login-section')!\n    if (!loginFragment) {\n      return\n    }\n    loginFragment.hidden = false\n  }\n\n  getCurrentButtonText(): string {\n    return this.buttonText.textContent || ''\n  }\n\n  setCurrentButtonText(text: string): void {\n    this.buttonText.textContent = text\n  }\n\n  setState(state: State): void {\n    // Reset to defaults\n    const retryMessage = this.button.getAttribute('data-retry-message') || this.originalButtonText\n    const buttonText = this.hasErrored ? retryMessage : this.originalButtonText\n    this.setCurrentButtonText(buttonText)\n    this.button.disabled = false\n    this.button.hidden = false\n    this.errorText.textContent = ''\n    for (const elem of this.messages) {\n      elem.hidden = true\n    }\n\n    switch (state) {\n      case State.Initializing:\n        this.button.disabled = true\n        break\n      case State.Unsupported:\n        this.button.disabled = true\n        this.unsupportedMessage.hidden = false\n        // hide the passkey specific error if we're showing the generic one\n        if (this.passkeysUnsupportedMessage) {\n          this.passkeysUnsupportedMessage.hidden = true\n        }\n        break\n      case State.Ready:\n        break\n      case State.Waiting:\n        this.waitingMessage.hidden = false\n        this.button.hidden = true\n        break\n      case State.Error:\n        this.errorMessage.hidden = false\n        this.errorText.textContent = this.originalErrorText\n        break\n      case State.Submitting:\n        this.setCurrentButtonText('Verifying')\n        this.button.disabled = true\n        break\n      default:\n        throw new Error('invalid state')\n    }\n\n    this.state = state\n  }\n\n  // silent_unless_success: don't show waiting or error status. This is for automatically attempting a prompt at\n  // page/modal load time, without showing confusing UI if the browser rejects the attempt due to a missing user\n  // gesture. Most browsers allow at least one such prompt per page load, but we can't rely on it. In theory we could\n  // try to show an error to the user depending on the `get` rejection, but the spec is still in flux and browsers\n  // constantly change their mind (and have bugs). So we err on the side of not showing an error.\n  async prompt(event?: Event, silent_unless_success?: boolean): Promise<void> {\n    event?.preventDefault() // prevent default page form submission\n    this.dispatchEvent(new CustomEvent(webauthnGetEvent))\n    try {\n      if (!silent_unless_success) {\n        this.setState(State.Waiting)\n      }\n\n      const json: CredentialRequestOptionsJSON = JSON.parse(this.dataJson)\n      const signResponse = await get(parseRequestOptionsFromJSON(json))\n      this.setState(State.Submitting)\n\n      // Each `<webauthn-get>` element is currently embedded in a form (not\n      // the other way around), so we have to query for the form outside of it.\n      const form = this.closest<HTMLFormElement>('.js-webauthn-form')!\n      const responseField = form.querySelector<HTMLInputElement>('.js-webauthn-response')!\n      responseField.value = JSON.stringify(signResponse)\n      requestSubmit(form)\n    } catch (error) {\n      if (!silent_unless_success) {\n        this.hasErrored = true\n        this.setState(State.Error)\n        throw error\n      }\n    }\n  }\n}\n","import {supported as webauthnSupported} from '@github/webauthn-json/browser-ponyfill'\n\n// Note: the default feedback value stored in the form is 'unknown', but that\n// should not be used unless the JS fails to run.\ntype WebauthnSupportLevel = 'supported' | 'unsupported'\n\n// Calculates a string value to send to the server.\nexport function webauthnSupportLevel(): WebauthnSupportLevel {\n  return webauthnSupported() ? 'supported' : 'unsupported'\n}\n\n// Calculates a string value to send to the server.\nexport async function iuvpaaSupportLevel(): Promise<WebauthnSupportLevel> {\n  if (await window.PublicKeyCredential?.isUserVerifyingPlatformAuthenticatorAvailable()) {\n    return 'supported'\n  }\n  return 'unsupported'\n}\n"],"names":["resultsTimeout","oldHref","currentTarget","deactivateTimer","queued","activeSelection","previousSelection","visibilityDebounceTimeout","fetchResponse","PNGScanner","AttachmentUpload","Batch","on","event","target","defaultPrevented","classList","add","remove","remoteForm","form","wants","response","container","closest","html","err","status","replaceWith","fire","getItem","safeStorage","ssrSafeDocument","head","querySelector","content","element","analyticsEvent","getAttribute","analyticsEventAttributes","JSON","parse","sendEvent","selector","map","state","join","observe","el","HTMLImageElement","parentElement","HTMLAnchorElement","parent","link","childElementCount","setAttribute","removeAttribute","clone","cloneNode","document","createElement","appendChild","replaceChild","sendStats","incrementKey","requestUrl","window","location","href","notes","WeakMap","reset","input","note","get","innerHTML","tagName","validate","htmlValidate","id","contains","generateId","Math","random","toFixed","ariaDescribedby","addEventListener","set","detail","message","text","HTMLElement","announceFromElement","isOk","append","hidden","activeElement","error","value","successMessage","toggleSubmitButton","completer","button","HTMLButtonElement","disabled","constructor","AutocompleteElement","initialize","previousController","HTMLFormElement","preventDefault","abort","url","URL","action","origin","method","formData","FormData","serialized","combineGetFormSearchParams","body","search","signal","AbortController","request","Request","toString","headers","Accept","fetch","ok","aborted","resultsContainer","getElementById","oldHeight","style","height","getComputedStyle","textContent","undefined","clearTimeout","delayResults","hasAttribute","results","resultsContent","parseHTML","firstElementChild","setTimeout","requestAnimationFrame","replaceState","onFocus","microtask","select","submit","HTMLInputElement","HTMLSelectElement","requestSubmit","debouncedSubmit","debounce","detectGravatar","gravitarUrl","hasGravitar","fetchGravatarInfo","gravatarText","data","json","has_gravatar","subscribe","fromEvent","priceSelectors","updateTotals","itemKey","itemRawCount","params","URLSearchParams","slice","itemMinimum","parseInt","itemMaximum","itemCount","itemDelta","max","contactUs","downgradeButton","downgradeDisabledMessage","transformInput","contact","toggle","planCost","paymentSummary","billing","free","is_enterprise_cloud_trial","upgrade","downgrade","extraSeats","no_additional_seats","seatField","updateSeatFields","numberOfSeats","querySelectorAll","maxSeatForPlan","popover","parentNode","length","minimumSeatsTooltip","seats","ref","selectors","obj","includes","priceCurrencyTag","default_currency","local_currency","history","className","price","span","flipTooltip","inverse","key","Object","entries","from","to","replace","newDuration","seatsField","updateDurationFields","oldDuration","planDurationText","planDurationAdjective","durationLink","planDurationInput","updateSeatFieldURLs","delete","toggleDurationUnitPrices","unitPrice","softNavigate","visible","addThrottledInputEventListener","addonField","selectedRadio","newUrl","capture","onInput","query","toLowerCase","row","trackingData","parsedTrackingData","type","context","currentSelection","item","label","open","updateBulkActions","actionsContainer","isItemSelected","bulkUrl","name","checkedItems","Array","ids","sort","a","b","toggleMembershipTabs","membershipTabs","checked","setLocalJSON","localStorage","setItem","stringify","kind","e","report","urls","gatherBundleURLs","script","getElementsByTagName","match","src","read","getLocalJSON","previousURLs","downloadedBundles","keys","filter","bundle","write","cancelEvent","stopPropagation","loaded","requestIdleCallback","JustLoggedOutCookieName","timerCallback","clipboardCopyElementTimers","toggleCopyButton","copyIcon","checkIcon","getCookies","clearData","storage","sessionStorage","clear","deleteCookie","clipboardCopyElement","originalLabel","direction","currentTimeout","fetchPopoverContents","lang","pos","path","urlStr","codeNavContext","test","updateTarget","altKey","ctrlKey","metaKey","shiftKey","popoverContent","codeNavKind","retryUrl","codeNavUrl","scrollTop","file","activeToken","unsubscribe","popoverHTML","wrapCache","onMouseMove","range","matchFromPoint","regexp","x","y","textNode","offset","caretPositionFromPoint","caret","offsetNode","caretRangeFromPoint","startContainer","startOffset","nodeType","Node","TEXT_NODE","isEmpty","replaceAll","trim","findNearestMatch","str","m","lastIndex","exec","reportError","len","index","matchedRange","createRange","setStart","setEnd","clientX","clientY","rangeElement","commonAncestorContainer","didCheckText","Set","has","fileContainer","getCodeBlockLanguage","codeBlockElement","getRowAndColumn","node","passParent","prev","previousSibling","nodeName","lineNumber","previousElementSibling","wrapper","surroundContents","clickEvent","hidePopover","addPopoverElement","temp","details","dataHydroClick","dataHydroClickHMAC","positionPopover","showPopover","resetScrollTop","onDocumentClick","onKeyup","onResize","token","cRect","repoContainer","getClientRects","rects","rect","position","zIndex","top","bottom","left","scrollY","scrollX","removeEventListener","getElementsByClassName","clearFormError","formError","handleFormError","messageSuffix","errors","isArray","formGroupValidationFormWrapper","field","changeValue","writeTab","inViewPort","isInViewport","getBoundingClientRect","innerHeight","documentElement","clientHeight","right","innerWidth","clientWidth","click","updateContent","replaceContent","console","warn","setButtonText","hasValue","spanText","textTarget","createInputHandler","previousHasValue","newValue","Boolean","toggleFocus","focused","blurred","Element","commentField","handleInput","once","imageDimensions","scanner","fromFile","meta","width","ppi","scan","readLong","inchesRatio","ppuX","ppuY","unit","readChar","round","Promise","resolve","reject","reader","FileReader","onload","result","onerror","readAsArrayBuffer","advance","bytes","readInt","self","dataview","getUint8","getUint16","getUint32","readShort","readString","buf","i","push","String","fromCharCode","fn","resumeAt","call","buffer","DataView","inputCache","CaretPosition","coords","currentChar","lookBack","textArea","substring","checkLine","xDistance","abs","fetchCaretCoords","caretIndex","caretCache","Map","getCaretCoordinates","binaryCursorSearch","lower","upper","mouseX","mouseY","iterations","bestPosition","sameLineCandidates","candidates","c","l","u","mid","floor","midCoords","findCursorPosition","endIndex","uploadedItems","pasteUrlLinksAsPlainText","defaultPlainTextPaste","urlLinks","attachmentPlaceholders","isVideo","attachment","placeholderText","prefix","isImage","disableSubmit","closestForm","submitButton","enableSubmit","onUploadCompleted","setValidityAndLinkText","imageTag","size","findAndReplacePlaceholders","textAreas","placeholder","tagText","replaceText","dimensions","imageSize","alt","parameterizeName","empty","replacementText","removeFailedUpload","textToRemove","setCustomValidity","editor","getEditor","emitToCodeMirror","cursor","getSearchCursor","findNext","validity","fileUploadLoadingText","batch","selectedText","selectionStart","selectionEnd","insertedPlaceholder","replaceSelection","insertText","appendNewline","isFinished","getSelection","getCursor","toReplace","replaceRange","fileUploadMessage","uploaded","codeEditorElement","codeEditor","getCodeEditor","updateCursor","attachmentElement","updateCaret","dragEvent","setCursorPosition","textarea","newPosition","setSelectionRange","coordsChar","pageX","pageY","setCursor","focus","activateTab","tab","isPreview","writeContent","previewBody","minHeight","currentSelectedTabs","fetchPreview","previewForm","startLineNumber","side","startSide","startCommitOid","endCommitOid","baseCommitOid","commentId","dataToken","formTokenRef","elements","namedItem","cachedFetch","commentForm","TabContainerElement","pollForm","toolbar","renderPreview","relatedTarget","isPreviewPanel","skipSizing","previewTab","memoize","uncachedFetch","hash","commentBody","onKey","toUpperCase","blur","dispatchEvent","CustomEvent","bubbles","cancelable","stopImmediatePropagation","plusOneMarker","isReactionLikeComment","matched","line","split","startsWith","toggleReactionSuggestion","eventTarget","reactionSuggestion","suggestionText","clearReactionSuggestion","newCommentTextField","suggestion","isShortcutAllowed","originalEvent","hotkey","corpTOSLink","regTOSLink","hints","hint","hasWording","wording","autoselect","planChoice","corpTos","fireMenuToggleEvent","isOpen","filterableField","menu","resetMenus","inputs","firstItem","HTMLTextAreaElement","RemoteInputElement","activeElementId","focusEl","atLimit","loader","load","dialog","ownerDocument","show","originalText","getButtons","flat","revert","checkValidity","disabledText","afterRemote","updateFavicon","newHref","colorScheme","favicon","faviconFallback","colorSchemeSuffix","substr","lastIndexOf","newFallbackHref","n","indexOf","newFaviconName","prefersDarkColorScheme","matchMedia","matches","updateDarkFavicon","fetchFeaturePreviewIndicator","fetchIndicator","indicators","indicator","show_indicator","SOFT_NAV_STATE","SUCCESS","addListener","markComplete","policy","asset_upload_url","asset_upload_authenticity_token","credentials","upload","delegate","attachmentUploadDidStart","saving","resetState","attachmentUploadDidProgress","percent","attachmentUploadDidComplete","saved","savedAttributes","asset","attachmentUploadDidError","setAttachmentAsFailed","policyErrorState","attachments","uploader","process","policyForm","repoId","subjectType","subject","container_type","container_id","directory","preprocess","all","messaging","trimSizeErrorMessage","code","trigger","newDialog","fetchSafeDocumentFragment","dialogClass","closeDetails","closeHmac","hydroEventPayload","hydroEventHmac","feature","startTime","performance","now","Headers","header","xhr","XMLHttpRequest","upload_url","setRequestHeader","onloadstart","onprogress","lengthComputable","total","uploadForm","same_origin","upload_authenticity_token","send","responseText","endTime","uploadTiming","duration","fileType","success","possibleStates","sum","items","reduce","isSaved","every","failedAttachments","dragAndDropLabel","inputId","count","hasFile","transfer","types","onDocumentDrop","dataTransfer","onDocumentDragover","onFormReset","filterList","list","isVisible","options","limit","Infinity","children","display","announce","resetFilter","filterInput","panel","FilterInputElement","originalOrder","filterSortList","string","allItems","checkedInputBeforeFilter","currentItems","currentItem","removeChild","found","filterSort","sortKey","compare","limited","createDocumentFragment","inputStateReset","checkedInput","Event","dividers","divider","abortController","typeAheadCache","cache","currentQueryForList","getData","queryText","typeAhead","lastSearchResult","suggestions","users","cachedSuggestions","userResultCache","fetchQueryIfNeeded","hasPreRenderedData","getPreRenderedUsers","suggestedUsers","suggestedUser","login","selected","typeAheadData","pathname","trimmedText","lastSearchText","isInitialLoad","inputElement","requestHeaders","searchParams","substringMemoryFilterList","verifySsoSession","showSuggestionsHeaderOnLoad","template","existingElements","existing","cutoffPoint","nextElementSibling","queryTextEmpty","suggestionsDivider","restDivider","addItem","user","containsQueryText","matching","shouldGenerate","createReviewerItem","li","inputKey","fullName","description","avatar","class","anyVisibleNonSelectedSuggestions","selectedSuggestions","nonSelectedSuggestions","preSuggestionsVisibleCount","preUsersVisibleCount","labelsTypeaheadFilterList","labels","toLocaleLowerCase","createLabelItem","resultCache","labelResultCache","color","newStyle","htmlName","labelDescription","getPreRenderedLabels","renderedLabel","queryString","searchQuery","prioText","prioScore","fuzzyScore","score","autocomplete","throttleWaitInMs","onInputChange","wait","removeThrottledInputEventListener","filterable","inputField","toggleForm","filterText","itemExists","scrollTargetIntoViewIfNeeded","root","computeFixedYOffset","scrollToFragmentTarget","hashChange","flash","flashAlertContent","insertNonBreakingSpace","nonBreakingSpace","createTextNode","ALLOWED_FLASH_COOKIES","HTMLTemplateElement","displayFlash","flatMap","atob","decodeURIComponent","after","TemplateInstance","feedback","noticeHandler","chooseEvents","events","eventCheckbox","FuzzyListElement","fuzzyList","replyContainer","checkUrl","invalidNotice","protocol","insecureNotice","sslFields","checkbox","customIsSelected","hookEventsField","hookWildcardEvent","before","responseError","deliveriesDetails","registerInsecureSslVerificationDialog","disallowInsecureRadio","allowInsecureRadio","areCharacterKeyShortcutsEnabled","install","shortcut","validShortcuts","filterOutCharacterKeyShortcuts","shortcuts","isNonCharacterKeyShortcut","s","uninstall","cardContentContainer","cachedFetchSafeDocumentFragment","activatingElement","focusIn","mouseOver","contentClass","suffix","contentClassPrefix","hideCard","activateFn","minimumTimeout","fragment","touchDevice","MouseEvent","hovercardsAreEnabledForType","hovercardType","hovercardUrl","hovercardUrlFromTarget","baseHovercardUrl","subjectTag","determineEnclosingSubject","tag","forcedDelay","r","showCard","cardContent","cardContentBody","child","positionCard","visibility","containerTop","containerLeft","contentClassSuffix","calculatePositions","contentWidth","contentHeight","targetX","targetY","targetHeight","targetWidth","selectRectNearestMouse","foundRect","roomAbove","hangLeft","targetCenterY","caretPaddingX","caretHeight","roomRight","targetCenterX","pageYOffset","pageXOffset","setZIndexOverride","trackingElement","trackView","KeyboardEvent","deactivateFn","keyupFn","cancelDeactivation","onFocusIn","onFocusOut","onMouseLeave","deactivateWithTimeoutFn","targetWas","onMouseOver","onContentsMouseOver","onContentsFocusIn","compose","vitalsToHydro","scheduleSend","initialRenderIsSSR","wasServerRendered","initialRenderIsLazy","isReactLazyPayload","initialRenderIsAlternate","isReactAlternate","hasFetchedGQL","getEntriesByType","some","initiatorType","hasFetchedJS","sendVitals","metric","stat","app","getCurrentReactAppName","isFeatureEnabled","networkConnType","navigator","connection","effectiveType","soft","ssr","mechanism","MECHANISM_MAPPING","lazy","alternate","hpcFound","hpcGqlFetched","gqlFetched","hpcJsFetched","jsFetched","headerRedesign","syntheticTest","synthetic","webVitalTimings","sendStatToHydro","hydroStat","vital","reactApp","react","reactPartials","partial","toPrecision","hpcMechanism","hpcSoft","updateStaffBar","staffBarContainer","metricContainer","sendTimingResults","timing","sendResourceTimings","sendNavigationTimings","resourceTimings","entryType","nextHopProtocol","workerStart","workerTiming","serverTiming","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","secureConnectionStart","requestStart","responseStart","responseEnd","transferSize","encodedBodySize","decodedBodySize","navigationTimings","activationStart","unloadEventStart","unloadEventEnd","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd","redirectCount","onCLS","onFCP","onFID","onLCP","onTTFB","onINP","HPCTimingEvent","start","setLCPasHPC","measure","end","resetHPC","animationFrame","dataHPCanimationFrame","emulatedHPCTimer","hpcStart","hpc","EventTarget","tabHidden","hpcDOMInsertionObserver","MutationObserver","mutations","hasDataHPC","visibleElement","mutation","addedNodes","cancelAnimationFrame","checkVisibility","offsetParent","offsetWidth","offsetHeight","disconnect","childList","subtree","listenerOpts","passive","stop","insertionFound","onDOMContentLoaded","images","Date","stats","image","measureRedirectTiming","transparentRedirectTimings","LOCAL_STORAGE_PATH_REGEX","source","pathRegex","userID","fileGUID","START","FRAME_UPDATE","sendPageView","turbo","getSoftNavMechanism","targetEl","eventType","gaEvent","parts","category","dimensionsList","dimensionPair","payload","hmac","hydroClientContext","sendData","indeterminate","logPageView","shortcutModalShown","showKeyboardShortcuts","metaKeyboardShortcuts","contexts","shortcutModal","labelledBy","displayLengthWarning","maxLength","warningLength","inputValue","inputValueWithNewLinesFix","remainingLength","truncatedInputValue","endsWith","warningText","inputContainer","warningArea","isFormField","eventToHotkeyString","userAgent","shortcutLabel","filterOn","currentValue","regex","currentFilters","notice","showGlobalError","opacity","confirm","lastTurboRequestUrl","turboMeasure","turboStartMark","turboEndMark","trackTurboTiming","getEntriesByName","mark","measures","pop","turboDuration","clearMarks","clearMeasures","print","close","reload","quickSubmit","altButton","isHighlightContainer","filters","PRE","flavor","A","IMG","DIV","p","blockType","blockContent","pre","isTrusted","quote","Quote","collapsed","commentBodyClone","quoteSelectionContainer","ignorableElements","MarkdownQuote","codeBlock","pp","div","insertMarkdownSyntax","nodeIterator","createNodeIterator","NodeFilter","SHOW_ELEMENT","acceptNode","firstChild","FILTER_ACCEPT","FILTER_SKIP","nextNode","reverse","anchorNode","insert","selection","getRangeAt","resizeObserver","ResizeObserver","entry","contentRect","hideReactionOverflow","reactionContainer","availableWidth","reactionButtons","allReactionsPopover","totalButtonWidth","remainingWidth","buttonWidth","debouncedPickReaction","comment","reactionsContainer","reactionsHeader","newReactions","newReactionButton","elementToFocus","showReactionContent","hideReactionContent","defaultText","persistSubmitButtonValue","req","dataType","catch","then","statusText","findPersistedSubmitButtonValue","beforeRemote","verifySso","contents","childNodes","PerformanceObserver","supportedEntryTypes","observer","longTasks","getEntries","entryTypes","selectionEnds","DocumentFragment","dialogEl","getTextarea","ModalDialogElement","savedReplyNumber","Number","reply","replies","ready","fragments","highlightRange","blobRange","snippet","adjustStart","adjustEnd","DOMRangeFromBlob","adjustedStart","GetCharIndexFromBytePosition","adjustedEnd","endContainer","endOffset","parseColumnHighlightRange","startLine","endLine","startColumn","dataEndColumn","column","highlightColumns","startBlobRange","fullBlobRange","endBlobRange","performRequest","removeNotificationParams","urlWithoutNotificationParameters","cleanSearchParams","storeAndStripShelfParams","markNotificationAsRead","toggleSearchScope","enabled","remoteShelfActionForm","shouldRedirect","inboxButton","updateNotificationStates","getStoredShelfParamsForCurrentPage","newParams","includeFragmentEl","IncludeFragmentElement","baseUrl","shelfURL","emptyQuery","blurHandler","isRegularSearchInput","toggleSearchInputHotkey","unobserve","searchBar","toggleAttribute","searchInput","anchor","findFragmentTarget","originalScroll","scrollBehavior","scrollIntoView","behavior","prefersReducedMotion","abortControllers","snippetClipboardCopyTemplate","snippetClipboardCopyTemplateUnpositioned","insertSnippetClipboardCopyButton","clipboardContent","useUnpositioned","documentFragment","clonedZeroClipboardContainer","scrollableElement","timer","handleSocialResponse","newCount","isDeferredTogglerTarget","updateSocialCounts","updatePromises","singularSuffix","pluralSuffix","controller","replaceIncomingFocus","focusOn","confirmationDialog","dialogPayload","confirmationDialogTemplate","templateSelector","confirmCsrfToken","confirmUrl","dialogElement","idleListeners","idle","isPresent","sessionChanged","reason","flashSignedIn","flashSignedOut","flashSwitched","switchedDetail","originalUserId","pageIsHidden","idleListener","watchSocketChannels","session","getSession","queueSubscribe","taskQueue","subs","queueUnsubscribe","els","unsubscribeAll","queueMetadata","updates","updatePresenceMetadata","listener","elementSubscriptions","channels","names","Topic","subscriber","topic","presenceChannels","subscription","channelName","isPresenceChannel","listenerSubscription","latestIdle","latestMetadata","queueMetadataOrIdleChange","metadata","IDLE_METADATA_KEY","Subscription","splice","bc","BroadcastChannel","onmessage","postingMessage","postMessage","storageArea","removeItem","broadcastMsgOnSignOut","updateStatusPosition","containerHeight","menuRect","iconRect","loadStatus","loadingArea","errorArea","onMouseEnter","closeOnToggle","closeStatusPopover","closeOnScroll","scrollEvent","checkSudo","sudoRequired","sudoPassed","sudo","onvalue","getValue","emojiEl","onchange","provide","emojiMenu","onactivate","expander","cachedEmoji","emojiScore","aliases","emojiText","fetchEmoji","searchWithin","re","hashedScore","issueNumberScore","number","title","icons","renderResults","issues","render","icon","unsafeHTML","hideSuggestions","issueMenu","textExpander","dismiss","onclick","onkeydown","specialKeys","searchResults","queryResults","subscriptions","queriesInProgress","queryCache","basicResults","cachedJSON","basicSearchResults","isFinite","refinedResults","refinedPromise","refinedQuery","deferredRefinedResults","refinedQueryUrl","jsonRequest","overage","oldestKeys","liveSuggestions","liveQuery","selectedID","selectedElement","replaceChildren","mentionMenu","usersAndTeams","scorer","fuzzyScorer","queryChars","participant","shortestMatch","indexes","j","starts","allIndexesOf","char","results1","indexesOfChars","chars","startingIndex","desc","question","hiddenInput","includeFragment","members","mentions","tip","sentence","xs","Intl","lists","ListFormat","format","last","concat","addTimelineLastModifiedHeader","isCrossDomain","requestURL","urlError","host","lastModified","getTimelineLastModified","marker","scrollToFocusTimelineEvent","urlAnchor","pullTimeline","focusElement","focusOrLoadElement","shouldLoadElement","loadResolvedComments","commentContainer","findCommentContainer","loadDeferredContent","loadHiddenComments","loadElement","commentContainers","threadCommentIds","commentIds","anchorCommentId","videosReady","videos","videoLoads","v","readyState","HAVE_METADATA","timeout","done","imagesReady","imageLoads","complete","mediaLoaded","expandDetailsIfPresent","detailsContainer","isDetailsTargetExpanded","toggleDetailsTarget","oldValue","newTimelineItem","gid","currentTimelineItem","unregisterAllServiceWorkers","registrations","serviceWorker","getRegistrations","registration","unregister","preservePosition","highlightedElement","existingProgressiveLoader","existingTimelineItems","WeakSet","setExistingTimelineItems","serviceWorkerPath","register","scope","setCSPTrustedTypesPolicy","turboPolicy","setProgressBarDelay","isVisitable","originalTrackedElementsAreIdentical","getOwnPropertyDescriptor","PageRenderer","prototype","getSnapshotSignatures","snapshot","values","detailsByOuterHTML","tracked","HTMLMetaElement","defineProperty","reloadReason","currentTracked","fromEntries","currentHeadSnapshot","changedKeys","newHeadSnapshot","formatKeyToError","patchHistoryApi","oldHistory","unused","skipTurbo","usr","update","turboState","turboUnused","turboUrl","currentTurboCount","turboCount","mergedState","restorationIdentifier","adapter","beginProgressBar","progressBar","setValue","completeProgressBar","hide","turboPageNodes","turboDocumentAttributes","getCachedNode","setCachedNode","setDocumentAttributesCache","getDocumentAttributes","getCachedAttributes","getTurboCacheNodes","responseFailed","errorDocument","ssrSafeWindow","isHashNavigation","startSoftNav","unloadMessage","onbeforeunload","navigate","frame","isTurboFrame","ev","fetchOptions","controllerPrototype","getPrototypeOf","originalRequestErrored","requestErrored","apply","fetchRequest","statusCode","dispatchTurboReload","responseHTML","trustedHTML","createHTML","DOMParser","parseFromString","customDriveRender","waitForStylesheets","resume","replaceElementAttributes","newBody","nextEventLoopTick","currentBody","newScript","copyScriptTag","currentTurboBody","newTurboBody","currentDocument","cachedAttributes","attr","attributes","find","cached","nodeValue","frameNavigation","navigatingBetweenDifferentEntities","frameContainer","userProfileContainer","isSameRepo","isSameProfile","newFrame","responseLocation","parsedHTML","sourceFrame","targetFrames","matchingFrame","getChangedTrackedKeys","addNewStylesheets","addNewScripts","replaceElements","replaceFrameClasses","shouldScrollToTop","scrollTo","replaceBodyClassesFromRequest","replacedElements","replaceBodyClassesFromCachedNodes","replaceTitle","replaceTransientTags","updateFrame","classes","bodyClasses","setTitle","transients","oldFrame","inSoftNav","setSoftNavMechanism","renderedSoftNav","skipIfGoingToReactApp","allowedMechanisms","markTurboHasLoaded","isHardLoad","hasSoftNavFailure","failSoftNav","initSoftNav","succeedSoftNav","endSoftNav","setSoftNavFailReason","END","PROGRESS_BAR","timezone","DateTimeFormat","resolvedOptions","timeZone","setCookie","encodeURIComponent","SudoCredentialOptionsElementState","SudoCredentialOptionsElement","connectedCallback","stateKey","initialState","currentState","reRenderPrompt","initialLoad","resetPrompt","renderWebauthnOption","renderGitHubMobileOption","renderTotpAppOption","renderTotpSmsOption","renderPasswordOption","reRenderNavContainer","handleUnexpectedPromptError","unexpectedError","errorMessage","githubMobileGenericErrorMessage","smsGenericErrorMessage","genericErrorMessage","renderPasswordOptionWithError","showPassword","showErrorMessage","hideErrorMessage","isWebAuthnAvailable","hideWebAuthn","isGitHubMobileAvailable","hideGitHubMobile","isTotpAppAvailable","hideTotpApp","isTotpSmsAvailable","hideTotpSms","hidePassword","safeSetElementVisibility","webauthnContainer","webauthnNav","githubMobileContainer","githubMobileNav","githubMobileLoading","githubMobileLanding","totpAppContainer","totpAppNav","totpSmsContainer","totpSmsLanding","totpSmsNav","totpSmsResendNav","passwordContainer","passwordNav","webauthnGet","setState","supported","State","Ready","Unsupported","resetGitHubMobilePrompt","initiateGitHubMobileAuthRequest","initiateTotpSmsRequest","loginField","passwordField","hasMultipleOptions","webauthnAvailable","githubMobileAvailable","totpAppAvailable","totpSmsAvailable","showWebauthn","showGitHubMobile","showTotpApp","showTotpSms","githubMobileRetry","githubMobilePromptUrl","csrfToken","mobileFailHandler","hasChallenge","challenge","githubMobileNoChallengeMessage","githubMobileChallengeMessage","githubMobileChallengeValue","initializeMobileAuthRequestStatusPoll","mobileApprovedHandler","mobileCancelCheck","resendTotpSms","smsSending","isResend","totpSmsTriggerUrl","smsSuccess","responseJson","showGitHubMobileErrorState","elem","flashErrorMessageText","flashErrorMessageContainer","attrPrefix","unreadCount","IntersectionObserver","isIntersecting","clearUnread","rootMargin","threshold","markThreadAsRead","hasFocus","unreadCounter","titleRe","updateTitle","reapplyPreviouslyUpdatedContent","staleRecords","urlTarget","findByGid","registerStaleRecords","orgId","ownerType","ownerId","detailsClass","cropForm","hashchange","getUserContentScrolling","decodeFragmentValue","normalizedHash","findElementByFragmentName","resetValidation","formGroup","groups","group","clearErrorsFromInput","requestMenuBatchRender","batchUpdateUrl","repositoryIds","postData","repositoryId","updatedMenuContents","updateAllUserListMenus","roots","rootsByRepositoryId","groupRootsByRepositoryId","existingRoots","renderedMenuContents","replaceUserListMenuRoots","updatedMenu","matchingRoots","prepareUnsavedChangesWarning","hasDirtyFields","enableSaveChangesReminder","returnValue","disableSaveChangesReminder","disableSaveChangesReminderOnClosedDialogs","promptOnDialogClosing","confirmed","confirmationForms","onTransitionEnd","issueLabel","isHovercardEnabled","titleUrl","setLabel","originalButtonText","setFlashError","responseBody","targetUrlElement","detailsElement","HTMLDetailsElement","triggerText","didStar","togglerContainer","starCount","socialContainer","menuContentRoot","defaultChecked","didCreate","templateID","editDialog","userListMenuRoot","placeholderName","userListMenuForm","requestUserListMenuFormSubmit","promise","formEvent","urlTargetElement","randomRGBColor","setColorSwatch","colorButton","rgb","hsl","convert","setProperty","setInputColorFromButton","clickedButton","colorInput","hex","showOrHideLabelError","errorSelector","errorMessages","errorEl","addErrorToField","removeErrorFromField","showLabelErrors","hideLabelErrors","updateLabelPreview","startEl","previewContainer","fullErrorMessageEl","labelID","previewArea","labelNameFrom","nameInput","labelColorFrom","labelDescriptionFrom","descriptionInput","urlTemplate","labelPreviewUrl","lastPreviewUrl","toggleBlankSlate","updateCount","delta","counter","oldCount","initLabelModal","modal","labelNameInput","labelNameEl","labelName","updateInputRemainingCharacters","addLabelButton","newLabelName","matchingExistingLabel","swatchesContainer","swatchButton","menuContent","prepend","defaultValue","refreshButton","resetCharactersRemainingCounts","editForm","labelPreview","labelLink","elementsToShow","createForm","elementsToHide","delayedOnLabelFormInputChange","toggleEventSettings","eventSettingsVisible","noEventSelected","eventSettingsContainer","getUtf8StringLength","CollapsibleSidebarWidgetElement","activeClass","loadingClass","onKeyDown","onMouseDown","pendingRequest","collapsible","setClose","setOpen","setLoading","updateCollapsible","handleAbort","SidebarMemexInputElement","isDisabled","hasErrored","hasExpanded","handleSelectMenuToggle","disconnectedCallback","handleDetailsSelect","custom","opened","summary","updateCell","handleDetailsSelected","mouseDownFocus","keyDownFocus","onSelectMenuOpen","mouseDownFocusHeader","onChange","onBlur","instrumentType","parameters","formatted","updateUrl","columnId","commit","parseAndFormatUpdate","month","day","year","targets","submitForm","skipTeamsCheck","reviewerTeamsCheckRequired","previouslyRequestedTeams","scopedFormData","allSelectedTeams","getAll","newlySelectedTeams","team","triggerTeamReviewerCheck","previewSubmit","submitOnMenuClose","returnFocusToTrigger","menuTriggerId","currentSidebarTriggerEl","multiple","selectedInputs","currentSidebarItemEl","currentSidebarDetailsId","Error","hasFired","restoreCachedValues","cacheKey","formName","newInput","requestPreview","isSubmitting","cacheValuesOnHide","cacheValues","updated","datum","extra","mode","updateSidebar","reviewerCheckUrl","dialogHtml","showTeamReviewerConfirmationDialog","dialogAction","reviewerInputs","reviewerInput","findParam","getCacheKey","pageId","getPageID","updateProjectColumnMenuSummary","dropdown","columnName","moveUrl","cardId","convertToDraftUrl","unarchiveItemUrl","projectItemID","setupSoftNav","interceptNavigationUI","AutoFlushingQueue","flush","onFlush","callback","callbacks","elementsToFlush","BatchLoader","loadInBatch","autoFlushingQueue","elementsByKey","batchElement","consolidatedData","validator","BaseBatchDeferredContentElement","batchLoader","batchLoaders","batchDeferredContentLoaders","BatchDeferredContentElement","docFragment","lastActiveElement","currentInputIsMouse","setClass","getFieldLimit","hasExceededCharacterLimit","valueLength","remainingCount","showRemainingCharacterCount","remainingEl","charContainers","charContainer","currentlyOpenedDetailsDropdown","autofocus","closeCurrentDetailsDropdown","toggleDetails","loadDeferredContentByEvent","onDragstart","onDragend","onDragenter","onBodyDragleave","onDrop","dragging","ignorePageElementDrag","dropEffect","encrypt","publicKey","encoder","TextEncoder","messageBytes","encode","seal","decode","encoded","charCodeAt","Uint8Array","byte","btoa","submitBulk","disableEmptyValues","formElement","required","encryptedValueElementName","plainText","asyncCalculateVisibility","nav","calculateVisibility","overflowContainer","overflowOffset","positionedOffset","anyHidden","itemOffset","toggleItem","itemName","itemToHide","safeLocalStorage","ttl","throwQuotaErrorsOnSet","sendCacheStats","restoreFieldsFromAllBackends","restoreResumableFields","persistFieldstoAllBackends","persistResumableFields","debouncedRestoreResumableFields","setForm","updateSelectedRepoTab","isSelected","selectedLink","TagInput","setup","removeTag","selectTag","autoComplete","bind","onSubmit","inputWrap","onBackspace","taggifyValueWhenSuggesterHidden","taggifyValue","tags","normalizeTag","selections","selectedTags","tagsAdded","templateTag","inputTag","tagTemplate","sanitizedText","multiTagInput","lastSelection","supportsUserSelectContain","cssText","getPropertyValue","rangeCount","selectAllChildren","parseBlobRange","lines","parseBlobOffset","freeze","ascendingBlobRange","formatBlobRange","parseFileAnchor","anchorPrefix","parseAnchorPrefix","formatBlobRangeAnchor","lineMatch","columnMatch","getLineElement","_startOffset","findRangeOffset","_endOffset","lookAhead","lineElement","textNodes","getAllTextNodes","nextC","nextTextNode","offsets","compareBlobOffsets","codeEditors","getAsyncCodeEditor","onEditorFromEvent","filterMap","prefixBonusWeight","stringScore","basename","fuzzyHighlightElement","textRe","fuzzyRegexp","clean","wordSeparators","originalString","abbreviation","stringLength","totalCharacterScore","shouldAwardCommonPrefixBonus","indexCLowercase","indexCUppercase","minIndex","min","indexInString","charAt","abbreviationLength","abbreviationScore","finalScore","getScore","minScore","hasMatch","highlightElement","lastPosition","positions","sorting","states","textCache","getTextCache","inputEl","handler","HTMLLIElement","lazyItems","addLazyItems","dataset","oldSortAbort","sortAbort","markSelector","maxMatches","shouldMark","itemsToRender","nextBatch","itemToRender","buttons","emptyEl","isNaN","observedAttributes","attributeChangedCallback","customElements","define","visitorPayload","visitorHmac","sendHydroEvent","pageViews","frequencies","frequencyMap","totalVisits","view","visitCount","pageKey","recencies","recencyMap","recencyList","lastVisitedAt","totalUniqueVisits","frequency","recency","TEAM_PAGE_REGEX","REPOSITORY_PAGE_REGEXES","PROJECT_PAGE_REGEXES","projectPageMatch","repositoryPageMatch","teamPageMatch","logPageViewByKey","buildTeamKey","projectRegex","ownerSlug","buildProjectKey","buildRepositoryKey","views","getPageViewsMap","hit","setPageViewsMap","limitedPageViews","scorePage","ranked","MAX_PAGE_VIEWS_TO_STORE_IN_LOCAL_STORAGE","organizationLogin","teamSlug","ownerLogin","PAGE_VIEW_KEY_REGEX","VIEWS_KEY","rawData","pageViewMap","shelfParams","sessionStorageKey","storeShelfParams","pullRequestPathname","getCurrentPullRequestPathname","deleteShelfParams","currentPullRequestPathname","stored","notification","toggleNotificationSubscriptionStatus","toggleNotificationStarredStatus","newNode","extractContents","insertNode","metaTag","flashClassName","removeFlash","flashContainer","hidePromptAndShowErrorMessage","githubMobileAuthenticatePrompt","githubMobileAuthenticateErrorAndRetry","genericHandler","addFlashMessage","importNode","getErrorAndRetryMessage","attributeName","successCallback","failCallback","checkCancelCallback","poll","errorCount","csrfInput","responseJSON","assign","smsError","pane1","pane2","pane","pattern","currentButton","noteContainer","newContent","toggleElements","throttledInputEvents","schedule","inputed","onKeydownInput","keypressed","onKeyupInput","onInputInput","dispatchThrottledInputEvent","sessionPromise","AliveSession","BaseAliveSession","getUrlFromRefreshUrl","fetchRefreshUrl","refreshUrl","shared","notify","fetchJSON","post","csrf","policyName","InvalidSourceRelError","TrustedTypesPolicyError","alivePolicy","ghTrustedTypes","createPolicy","createScriptURL","trustedTypesPolicy","isStaff","fallback","fallbackOnError","subscribers","channel","AliveSessionProxy","added","worker","port","addedChannels","redundantPresenceChannels","redundantChannels","requestPresence","removed","drain","updatedPresenceChannels","presenceMetadata","removeSubscribers","sendPresenceMetadataUpdate","metadataUpdates","updatedChannels","setMetadata","channelNames","updatesForSharedWorker","getChannelMetadata","online","offline","hangup","receive","debouncedNotify","notifyPresenceDebouncedByChannel","debouncedEvent","sessionId","notifier","SubscriptionSet","PresenceMetadataSet","SharedWorker","connect","workerSrc","createSession","_","connectWhenReady","allowUserContentScrolling","setUserContentScrolling","setting","editorTarget","innerEditorTarget","oldTitle","newTitle","ms","race","queue","queueMicrotask","currentUrl","targetUrl","current","hasHash","temporaryPermissiveJtmlPolicy","TemplateResult","sudoPromptExist","loadPromptTemplate","urlWithParams","oldURL","newURL","webauthnSupportLevel","succeeded","sudoPrompt","prompt","sudoModalErrorOrClose","unauthorizedError","tooManyError","inputElementSelector","triggerSudoPrompt","accept","sudoResponse","fetchSessionInSudo","num","oldText","newText","isFocused","beginning","remaining","setTextareaValueAndCursor","point","newline","trailingNewline","insertedText","newPoint","u8array","written","encodeInto","diff","silenceErrorReporting","createScript","DATA_TURBO_LOADED","hasTurboLoaded","url1","url2","path1","path2","headStylesheets","loadedStylesheets","styleSheets","stylesheet","promises","waitForLoad","onComplete","cachedElements","newElements","oldElements","newElement","oldElement","executeScriptTag","trustedSrc","WebauthnGetElement","getCurrentButtonText","originalErrorText","errorText","passkeySupport","PublicKeyCredential","isUserVerifyingPlatformAuthenticatorAvailable","passkeysUnsupportedMessage","subtleLogin","handleWebauthnSubtle","showWebauthnLoginFragment","subtle","loginFragment","buttonText","setCurrentButtonText","retryMessage","messages","unsupportedMessage","waitingMessage","silent_unless_success","dataJson","signResponse","parseRequestOptionsFromJSON","responseField","webauthnSupported","iuvpaaSupportLevel"],"sourceRoot":""}