{"version":3,"file":"chunk-ui_packages_webauthn-get-element_webauthn-get-element_ts-xxxxxxxxxxxx.js","mappings":"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","sources":["ui/packages/form-utils/form-utils.ts","ui/packages/form-utils/remote-submit.ts","ui/packages/webauthn-get-element/webauthn-get-element.ts","node_modules/@github/webauthn-json/dist/esm/webauthn-json.browser-ponyfill.js"],"sourcesContent":["import {persistSubmitButtonValue} from './remote-submit'\n\ntype TextField = HTMLInputElement | HTMLTextAreaElement\ntype Button = HTMLInputElement | HTMLButtonElement\n\nfunction fire(target: HTMLElement, name: string, cancelable: boolean): boolean {\n  return target.dispatchEvent(\n    new CustomEvent(name, {\n      bubbles: true,\n      cancelable,\n    }),\n  )\n}\n\n// Submit a form while ensuring that `submit` event is also triggered.\n//\n// Calling native `form.submit()` method immediately submits the form without triggering the `submit` event.\n// As a result, code that wants to hook into form submits would never execute.\n//\n// This method first triggers the `submit` event and, if that event wasn't `preventDefault`d, submits the\n// form natively.\nexport function requestSubmit(form: HTMLFormElement, submitter?: Button) {\n  if (submitter) {\n    checkButtonValidity(form, submitter)\n    persistSubmitButtonValue(submitter)\n  }\n  if (fire(form, 'submit', true)) {\n    form.submit()\n  }\n}\n\n// Check submitter validity for form.requestSubmit compatibility.\n// See https://html.spec.whatwg.org/#dom-form-requestsubmit.\nfunction checkButtonValidity(form: HTMLFormElement, submitter: Button) {\n  if (!(form instanceof HTMLFormElement)) throw new TypeError('The specified element is not of type HTMLFormElement.')\n  if (!(submitter instanceof HTMLElement)) throw new TypeError('The specified element is not of type HTMLElement.')\n  if (submitter.type !== 'submit') throw new TypeError('The specified element is not a submit button.')\n  if (!form || form !== submitter.form) throw new Error('The specified element is not owned by the form element.')\n}\n\n// Set a form field value while ensuring that `change` event is also triggered.\n//\n// Having the `change` event fire is important for various behaviors to react, such as form validation.\nexport function changeValue(input: TextField, value: string | boolean) {\n  if (typeof value === 'boolean') {\n    if (input instanceof HTMLInputElement) {\n      input.checked = value\n    } else {\n      throw new TypeError('only checkboxes can be set to boolean value')\n    }\n  } else {\n    if (input.type === 'checkbox') {\n      throw new TypeError(\"checkbox can't be set to string value\")\n    } else {\n      input.value = value\n    }\n  }\n  fire(input, 'change', false)\n}\n\n// Fill multiple form fields by item name.\nexport function fillFormValues(form: HTMLFormElement, fields: {[key: string]: string}) {\n  for (const name in fields) {\n    const value = fields[name]\n    const element = form.elements.namedItem(name)\n\n    if (element instanceof HTMLInputElement) {\n      element.value = value!\n    } else if (element instanceof HTMLTextAreaElement) {\n      element.value = value!\n    }\n  }\n}\n\n// Test if element is a form field.\nexport function isFormField(element: Node): boolean {\n  if (!(element instanceof HTMLElement)) {\n    return false\n  }\n\n  const name = element.nodeName.toLowerCase()\n  const type = (element.getAttribute('type') || '').toLowerCase()\n  return (\n    name === 'select' ||\n    name === 'textarea' ||\n    (name === 'input' && type !== 'submit' && type !== 'reset') ||\n    element.isContentEditable\n  )\n}\n\nfunction searchParamsFromFormData(formData: FormData): URLSearchParams {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  return new URLSearchParams(formData as any)\n}\n\n// Get a `?` search string for a URL for a GET form, using its `action` attribute as well as its other fields.\nexport function combineGetFormSearchParams(formAction: URL, formData: FormData): string {\n  const allSearchParams = new URLSearchParams(formAction.search)\n  const searchParamsFromInputs = searchParamsFromFormData(formData)\n  for (const [key, value] of searchParamsFromInputs) {\n    allSearchParams.append(key, value)\n  }\n  return allSearchParams.toString()\n}\n\n// Serialize form data into string.\nexport function serialize(form: HTMLFormElement): string {\n  return searchParamsFromFormData(new FormData(form)).toString()\n}\n","// Emulates submit button submission values by inserting a hidden input to the form.\n//\n// Submit events can be triggerd in the following ways:\n// - User clicks on a submit button.\n// - User press Enter when focusing on a form field; also known as \"implicit submission\".\n// - Programmatically via requestSubmit helper.\n//\n// On GitHub.com, the submission is either handled by the browser or remoteForm.\n//\n// For submissions triggered by user actions, the name and value of the clicked submit button (also known as\n// \"the submitter\") is passed along in the request, and can be programmatically retrieved with FormData.entries().\n//\n// However, this value will be lost in the following cases:\n// - 1. When the submitter button is disabled, most commonly by [data-disable-with].\n// - 2. When submitting via requestSubmit (from form.js), because the submission does not originated from a submitter.\n// - 3. When submitting with remoteForm, because FormData(form).entries() does not know about the submitter. In Safari\n// the submitter is known during the submission steps, but this behavior is not supported in any other browsers.\n//\n// @see {@link https://github.com/github/form-data-entries/pull/7}.\n//\n// For the exact workarounds, refer to ./form.js and ./remote.js.\nexport function persistSubmitButtonValue(button: HTMLButtonElement | HTMLInputElement) {\n  const form = button.closest('form')\n  if (!(form instanceof HTMLFormElement)) {\n    return\n  }\n\n  let input = findPersistedSubmitButtonValue(form)\n\n  if (button.name) {\n    const defaultValue = button.matches('input[type=submit]') ? 'Submit' : ''\n    const value = button.value || defaultValue\n    if (!input) {\n      input = document.createElement('input')\n      input.type = 'hidden'\n      input.classList.add('js-submit-button-value')\n      form.prepend(input)\n    }\n    input.name = button.name\n    input.value = value\n  } else if (input) {\n    input.remove()\n  }\n}\n\nexport function findPersistedSubmitButtonValue(form: HTMLFormElement): HTMLInputElement | null {\n  const input = form.querySelector('input.js-submit-button-value')\n  return input instanceof HTMLInputElement ? input : null\n}\n","import {attr, controller, target, targets} from '@github/catalyst'\nimport {get, parseRequestOptionsFromJSON, supported} from '@github/webauthn-json/browser-ponyfill'\nimport type {CredentialRequestOptionsJSON} from '@github/webauthn-json/browser-ponyfill'\nimport {requestSubmit} from '@github-ui/form-utils'\n\n// An event dispatched by `WebauthnGetElement` when a normal get request is initiated\nconst webauthnGetEvent = 'webauthn-get-prompt'\n// An event dispatched by `WebauthnSubtleElement` when its button is submitted\nconst webauthnSubtleEvent = 'webauthn-subtle-submit'\n\nexport enum State {\n  Initializing = 'initializing',\n  Unsupported = 'unsupported',\n  Ready = 'ready',\n  Waiting = 'waiting',\n  Error = 'error',\n  Submitting = 'submitting',\n}\n\n@controller\nexport class WebauthnGetElement extends HTMLElement {\n  state: State = State.Initializing\n  @target button: HTMLButtonElement\n  @target buttonText: HTMLElement\n  // `messages` contains all the message elements.\n  @targets messages: HTMLElement[]\n  @target capitalizedDescription: HTMLElement\n  @target unsupportedMessage: HTMLElement\n  @target passkeysUnsupportedMessage: HTMLElement\n  @target waitingMessage: HTMLElement\n  @target errorMessage: HTMLElement\n  @target errorText: HTMLElement\n\n  static attrPrefix = ''\n  @attr dataJson = ''\n  @attr subtleLogin = false\n  private originalButtonText: string\n  private hasErrored = false\n  private originalErrorText: string | null\n  private passkeySupport: boolean\n\n  async connectedCallback() {\n    this.originalButtonText = this.getCurrentButtonText()\n    this.originalErrorText = this.errorText.textContent\n    this.setState(supported() ? State.Ready : State.Unsupported)\n    this.passkeySupport = await window.PublicKeyCredential?.isUserVerifyingPlatformAuthenticatorAvailable()\n    // show the passkey unsupported message if it's present on the page (renders when the user has passkeys)\n    // and we're not already showing the webauthn unsupported message\n    if (this.state !== State.Unsupported && !this.passkeySupport && this.passkeysUnsupportedMessage) {\n      this.passkeysUnsupportedMessage.hidden = false\n    }\n    // if this get request is for login and the user doesn't have any passkeys\n    if (this.subtleLogin) {\n      this.handleWebauthnSubtle()\n    } else {\n      this.showWebauthnLoginFragment()\n    }\n  }\n\n  handleWebauthnSubtle(): void {\n    // show the subtle UX. webauthn-get loads last so we don't need to worry about if it isn't already on the page\n    const subtle = document.querySelector<HTMLElement>('.js-webauthn-subtle')!\n    if (!subtle) {\n      return\n    }\n\n    subtle.hidden = false\n    subtle.addEventListener(webauthnSubtleEvent, () => {\n      this.showWebauthnLoginFragment()\n      // if user tries subtle passkey login from an unsupported browser, show the unsupported UX but don't trigger the prompt\n      if (this.state !== State.Unsupported) {\n        this.prompt()\n      }\n    })\n  }\n\n  showWebauthnLoginFragment(): void {\n    // grab and reveal parent login UX that isn't a catalyst component (when we're on the login page)\n    const loginFragment = document.querySelector<HTMLElement>('.js-webauthn-login-section')!\n    if (!loginFragment) {\n      return\n    }\n    loginFragment.hidden = false\n  }\n\n  getCurrentButtonText(): string {\n    return this.buttonText.textContent || ''\n  }\n\n  setCurrentButtonText(text: string): void {\n    this.buttonText.textContent = text\n  }\n\n  setState(state: State): void {\n    // Reset to defaults\n    const retryMessage = this.button.getAttribute('data-retry-message') || this.originalButtonText\n    const buttonText = this.hasErrored ? retryMessage : this.originalButtonText\n    this.setCurrentButtonText(buttonText)\n    this.button.disabled = false\n    this.button.hidden = false\n    this.errorText.textContent = ''\n    for (const elem of this.messages) {\n      elem.hidden = true\n    }\n\n    switch (state) {\n      case State.Initializing:\n        this.button.disabled = true\n        break\n      case State.Unsupported:\n        this.button.disabled = true\n        this.unsupportedMessage.hidden = false\n        // hide the passkey specific error if we're showing the generic one\n        if (this.passkeysUnsupportedMessage) {\n          this.passkeysUnsupportedMessage.hidden = true\n        }\n        break\n      case State.Ready:\n        break\n      case State.Waiting:\n        this.waitingMessage.hidden = false\n        this.button.hidden = true\n        break\n      case State.Error:\n        this.errorMessage.hidden = false\n        this.errorText.textContent = this.originalErrorText\n        break\n      case State.Submitting:\n        this.setCurrentButtonText('Verifying…')\n        this.button.disabled = true\n        break\n      default:\n        throw new Error('invalid state')\n    }\n\n    this.state = state\n  }\n\n  // silent_unless_success: don't show waiting or error status. This is for automatically attempting a prompt at\n  // page/modal load time, without showing confusing UI if the browser rejects the attempt due to a missing user\n  // gesture. Most browsers allow at least one such prompt per page load, but we can't rely on it. In theory we could\n  // try to show an error to the user depending on the `get` rejection, but the spec is still in flux and browsers\n  // constantly change their mind (and have bugs). So we err on the side of not showing an error.\n  async prompt(event?: Event, silent_unless_success?: boolean): Promise<void> {\n    event?.preventDefault() // prevent default page form submission\n    this.dispatchEvent(new CustomEvent(webauthnGetEvent))\n    try {\n      if (!silent_unless_success) {\n        this.setState(State.Waiting)\n      }\n\n      const json: CredentialRequestOptionsJSON = JSON.parse(this.dataJson)\n      const signResponse = await get(parseRequestOptionsFromJSON(json))\n      this.setState(State.Submitting)\n\n      // Each `<webauthn-get>` element is currently embedded in a form (not\n      // the other way around), so we have to query for the form outside of it.\n      const form = this.closest<HTMLFormElement>('.js-webauthn-form')!\n      const responseField = form.querySelector<HTMLInputElement>('.js-webauthn-response')!\n      responseField.value = JSON.stringify(signResponse)\n      requestSubmit(form)\n    } catch (error) {\n      if (!silent_unless_success) {\n        this.hasErrored = true\n        this.setState(State.Error)\n        throw error\n      }\n    }\n  }\n}\n","// src/webauthn-json/base64url.ts\nfunction base64urlToBuffer(baseurl64String) {\n  const padding = \"==\".slice(0, (4 - baseurl64String.length % 4) % 4);\n  const base64String = baseurl64String.replace(/-/g, \"+\").replace(/_/g, \"/\") + padding;\n  const str = atob(base64String);\n  const buffer = new ArrayBuffer(str.length);\n  const byteView = new Uint8Array(buffer);\n  for (let i = 0; i < str.length; i++) {\n    byteView[i] = str.charCodeAt(i);\n  }\n  return buffer;\n}\nfunction bufferToBase64url(buffer) {\n  const byteView = new Uint8Array(buffer);\n  let str = \"\";\n  for (const charCode of byteView) {\n    str += String.fromCharCode(charCode);\n  }\n  const base64String = btoa(str);\n  const base64urlString = base64String.replace(/\\+/g, \"-\").replace(\n    /\\//g,\n    \"_\"\n  ).replace(/=/g, \"\");\n  return base64urlString;\n}\n\n// src/webauthn-json/convert.ts\nvar copyValue = \"copy\";\nvar convertValue = \"convert\";\nfunction convert(conversionFn, schema, input) {\n  if (schema === copyValue) {\n    return input;\n  }\n  if (schema === convertValue) {\n    return conversionFn(input);\n  }\n  if (schema instanceof Array) {\n    return input.map((v) => convert(conversionFn, schema[0], v));\n  }\n  if (schema instanceof Object) {\n    const output = {};\n    for (const [key, schemaField] of Object.entries(schema)) {\n      if (schemaField.derive) {\n        const v = schemaField.derive(input);\n        if (v !== void 0) {\n          input[key] = v;\n        }\n      }\n      if (!(key in input)) {\n        if (schemaField.required) {\n          throw new Error(`Missing key: ${key}`);\n        }\n        continue;\n      }\n      if (input[key] == null) {\n        output[key] = null;\n        continue;\n      }\n      output[key] = convert(\n        conversionFn,\n        schemaField.schema,\n        input[key]\n      );\n    }\n    return output;\n  }\n}\nfunction derived(schema, derive) {\n  return {\n    required: true,\n    schema,\n    derive\n  };\n}\nfunction required(schema) {\n  return {\n    required: true,\n    schema\n  };\n}\nfunction optional(schema) {\n  return {\n    required: false,\n    schema\n  };\n}\n\n// src/webauthn-json/basic/schema.ts\nvar publicKeyCredentialDescriptorSchema = {\n  type: required(copyValue),\n  id: required(convertValue),\n  transports: optional(copyValue)\n};\nvar simplifiedExtensionsSchema = {\n  appid: optional(copyValue),\n  appidExclude: optional(copyValue),\n  credProps: optional(copyValue)\n};\nvar simplifiedClientExtensionResultsSchema = {\n  appid: optional(copyValue),\n  appidExclude: optional(copyValue),\n  credProps: optional(copyValue)\n};\nvar credentialCreationOptions = {\n  publicKey: required({\n    rp: required(copyValue),\n    user: required({\n      id: required(convertValue),\n      name: required(copyValue),\n      displayName: required(copyValue)\n    }),\n    challenge: required(convertValue),\n    pubKeyCredParams: required(copyValue),\n    timeout: optional(copyValue),\n    excludeCredentials: optional([publicKeyCredentialDescriptorSchema]),\n    authenticatorSelection: optional(copyValue),\n    attestation: optional(copyValue),\n    extensions: optional(simplifiedExtensionsSchema)\n  }),\n  signal: optional(copyValue)\n};\nvar publicKeyCredentialWithAttestation = {\n  type: required(copyValue),\n  id: required(copyValue),\n  rawId: required(convertValue),\n  authenticatorAttachment: optional(copyValue),\n  response: required({\n    clientDataJSON: required(convertValue),\n    attestationObject: required(convertValue),\n    transports: derived(\n      copyValue,\n      (response) => {\n        var _a;\n        return ((_a = response.getTransports) == null ? void 0 : _a.call(response)) || [];\n      }\n    )\n  }),\n  clientExtensionResults: derived(\n    simplifiedClientExtensionResultsSchema,\n    (pkc) => pkc.getClientExtensionResults()\n  )\n};\nvar credentialRequestOptions = {\n  mediation: optional(copyValue),\n  publicKey: required({\n    challenge: required(convertValue),\n    timeout: optional(copyValue),\n    rpId: optional(copyValue),\n    allowCredentials: optional([publicKeyCredentialDescriptorSchema]),\n    userVerification: optional(copyValue),\n    extensions: optional(simplifiedExtensionsSchema)\n  }),\n  signal: optional(copyValue)\n};\nvar publicKeyCredentialWithAssertion = {\n  type: required(copyValue),\n  id: required(copyValue),\n  rawId: required(convertValue),\n  authenticatorAttachment: optional(copyValue),\n  response: required({\n    clientDataJSON: required(convertValue),\n    authenticatorData: required(convertValue),\n    signature: required(convertValue),\n    userHandle: required(convertValue)\n  }),\n  clientExtensionResults: derived(\n    simplifiedClientExtensionResultsSchema,\n    (pkc) => pkc.getClientExtensionResults()\n  )\n};\n\n// src/webauthn-json/basic/api.ts\nfunction createRequestFromJSON(requestJSON) {\n  return convert(base64urlToBuffer, credentialCreationOptions, requestJSON);\n}\nfunction createResponseToJSON(credential) {\n  return convert(\n    bufferToBase64url,\n    publicKeyCredentialWithAttestation,\n    credential\n  );\n}\nfunction getRequestFromJSON(requestJSON) {\n  return convert(base64urlToBuffer, credentialRequestOptions, requestJSON);\n}\nfunction getResponseToJSON(credential) {\n  return convert(\n    bufferToBase64url,\n    publicKeyCredentialWithAssertion,\n    credential\n  );\n}\n\n// src/webauthn-json/basic/supported.ts\nfunction supported() {\n  return !!(navigator.credentials && navigator.credentials.create && navigator.credentials.get && window.PublicKeyCredential);\n}\n\n// src/webauthn-json/browser-ponyfill.ts\nasync function create(options) {\n  const response = await navigator.credentials.create(\n    options\n  );\n  response.toJSON = () => createResponseToJSON(response);\n  return response;\n}\nasync function get(options) {\n  const response = await navigator.credentials.get(\n    options\n  );\n  response.toJSON = () => getResponseToJSON(response);\n  return response;\n}\nexport {\n  create,\n  get,\n  createRequestFromJSON as parseCreationOptionsFromJSON,\n  getRequestFromJSON as parseRequestOptionsFromJSON,\n  supported\n};\n//# sourceMappingURL=webauthn-json.browser-ponyfill.js.map\n"],"names":["fire","target","name","cancelable","dispatchEvent","CustomEvent","bubbles","requestSubmit","form","submitter","checkButtonValidity","HTMLFormElement","HTMLElement","type","persistSubmitButtonValue","submit","changeValue","input","value","HTMLInputElement","checked","fillFormValues","fields","element","elements","namedItem","HTMLTextAreaElement","isFormField","nodeName","toLowerCase","getAttribute","isContentEditable","searchParamsFromFormData","formData","URLSearchParams","combineGetFormSearchParams","formAction","allSearchParams","search","searchParamsFromInputs","key","append","toString","serialize","FormData","button","closest","findPersistedSubmitButtonValue","defaultValue","matches","document","createElement","classList","add","prepend","remove","querySelector","State","WebauthnGetElement","connectedCallback","originalButtonText","getCurrentButtonText","originalErrorText","errorText","textContent","setState","supported","passkeySupport","window","PublicKeyCredential","isUserVerifyingPlatformAuthenticatorAvailable","state","passkeysUnsupportedMessage","hidden","subtleLogin","handleWebauthnSubtle","showWebauthnLoginFragment","subtle","addEventListener","prompt","loginFragment","buttonText","setCurrentButtonText","text","retryMessage","hasErrored","elem","disabled","messages","unsupportedMessage","waitingMessage","errorMessage","event","silent_unless_success","preventDefault","json","JSON","parse","dataJson","signResponse","get","parseRequestOptionsFromJSON","responseField","stringify","error","attrPrefix","targets","attr","controller","base64urlToBuffer","baseurl64String","padding","slice","length","base64String","replace","str","atob","buffer","ArrayBuffer","byteView","Uint8Array","i","charCodeAt","bufferToBase64url","charCode","String","fromCharCode","btoa","base64urlString","copyValue","convertValue","convert","conversionFn","schema","Array","map","v","Object","output","schemaField","entries","derive","required","derived","optional","publicKeyCredentialDescriptorSchema","id","transports","simplifiedExtensionsSchema","appid","appidExclude","credProps","simplifiedClientExtensionResultsSchema","credentialCreationOptions","publicKey","rp","user","displayName","challenge","pubKeyCredParams","timeout","excludeCredentials","authenticatorSelection","attestation","extensions","signal","publicKeyCredentialWithAttestation","rawId","authenticatorAttachment","response","clientDataJSON","attestationObject","_a","getTransports","call","clientExtensionResults","pkc","getClientExtensionResults","credentialRequestOptions","mediation","rpId","allowCredentials","userVerification","publicKeyCredentialWithAssertion","authenticatorData","signature","userHandle","createRequestFromJSON","requestJSON","getRequestFromJSON","navigator","credentials","create","options","toJSON"],"sourceRoot":""}