{"version":3,"file":"vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_github_alive-client_dist-bf5aa2-xxxxxxxxxxxx.js","mappings":"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","sources":["node_modules/@github/mini-throttle/dist/index.js","node_modules/@github/alive-client/dist/alive-session.js","node_modules/@github/alive-client/dist/eventloop-tasks.js","node_modules/@github/alive-client/dist/iterables.js","node_modules/@github/alive-client/dist/presence-metadata.js","node_modules/@github/alive-client/dist/presence.js","node_modules/@github/alive-client/dist/subscription-set.js","node_modules/@github/alive-client/dist/topic.js","node_modules/@github/multimap/dist/index.js","node_modules/@github/stable-socket/dist/index.js"],"sourcesContent":["export function throttle(callback, wait = 0, { start = true, middle = true, once = false } = {}) {\n    let last = 0;\n    let timer;\n    let cancelled = false;\n    function fn(...args) {\n        if (cancelled)\n            return;\n        const delta = Date.now() - last;\n        last = Date.now();\n        if (start) {\n            start = false;\n            callback.apply(this, args);\n            if (once)\n                fn.cancel();\n        }\n        else if ((middle && delta < wait) || !middle) {\n            clearTimeout(timer);\n            timer = setTimeout(() => {\n                last = Date.now();\n                callback.apply(this, args);\n                if (once)\n                    fn.cancel();\n            }, !middle ? wait : wait - delta);\n        }\n    }\n    fn.cancel = () => {\n        clearTimeout(timer);\n        cancelled = true;\n    };\n    return fn;\n}\nexport function debounce(callback, wait = 0, { start = false, middle = false, once = false } = {}) {\n    return throttle(callback, wait, { start, middle, once });\n}\n","import { AlivePresence, getPresenceKey, isPresenceChannel } from './presence.js';\nimport { IDLE_METADATA_KEY, PresenceMetadataSet } from './presence-metadata.js';\nimport { StableSocket } from '@github/stable-socket';\nimport { SubscriptionSet } from './subscription-set.js';\nimport { eachSlice } from './iterables.js';\nimport { retry } from './eventloop-tasks.js';\nvar SocketDisconnectReasons;\n(function (SocketDisconnectReasons) {\n    SocketDisconnectReasons[\"Deploy\"] = \"Alive Redeploy\";\n    SocketDisconnectReasons[\"Reconnect\"] = \"Alive Reconnect\";\n})(SocketDisconnectReasons || (SocketDisconnectReasons = {}));\nfunction generatePresenceId() {\n    return `${Math.round(Math.random() * (Math.pow(2, 31) - 1))}_${Math.round(Date.now() / 1000)}`;\n}\nfunction getUserIdFromSocketUrl(url) {\n    const match = url.match(/\\/u\\/(\\d+)\\/ws/);\n    return match ? +match[1] : 0;\n}\nexport class AliveSession {\n    constructor(url, getUrl, inSharedWorker, notify, maxReconnectBackoff = 600000) {\n        this.url = url;\n        this.getUrl = getUrl;\n        this.inSharedWorker = inSharedWorker;\n        this.notify = notify;\n        this.maxReconnectBackoff = maxReconnectBackoff;\n        this.subscriptions = new SubscriptionSet();\n        this.state = 'online';\n        this.retrying = null;\n        this.connectionCount = 0;\n        this.presence = new AlivePresence();\n        this.presenceMetadata = new PresenceMetadataSet();\n        this.intentionallyDisconnected = false;\n        this.lastCameOnline = 0;\n        this.userId = getUserIdFromSocketUrl(url);\n        this.presenceId = generatePresenceId();\n        this.presenceKey = getPresenceKey(this.userId, this.presenceId);\n        this.socket = this.connect();\n    }\n    subscribe(subscriptions) {\n        const added = this.subscriptions.add(...subscriptions);\n        this.sendSubscribe(added);\n        for (const subscription of subscriptions) {\n            const channel = subscription.topic.name;\n            if (!isPresenceChannel(channel)) {\n                continue;\n            }\n            this.notifyCachedPresence(subscription.subscriber, channel);\n        }\n    }\n    unsubscribe(subscriptions) {\n        const removed = this.subscriptions.delete(...subscriptions);\n        this.sendUnsubscribe(removed);\n    }\n    unsubscribeAll(...subscribers) {\n        const removed = this.subscriptions.drain(...subscribers);\n        this.sendUnsubscribe(removed);\n        const updatedPresenceChannels = this.presenceMetadata.removeSubscribers(subscribers);\n        this.sendPresenceMetadataUpdate(updatedPresenceChannels);\n    }\n    requestPresence(subscriber, channels) {\n        for (const channel of channels) {\n            this.notifyCachedPresence(subscriber, channel);\n        }\n    }\n    notifyCachedPresence(subscriber, channel) {\n        const presenceItems = this.presence.getChannelItems(channel);\n        if (presenceItems.length === 0) {\n            return;\n        }\n        this.notifyPresenceChannel(channel, presenceItems);\n    }\n    updatePresenceMetadata(metadataUpdates) {\n        const updatedChannels = new Set();\n        for (const update of metadataUpdates) {\n            this.presenceMetadata.setMetadata(update);\n            updatedChannels.add(update.channelName);\n        }\n        this.sendPresenceMetadataUpdate(updatedChannels);\n    }\n    sendPresenceMetadataUpdate(channelNames) {\n        if (!channelNames.size) {\n            return;\n        }\n        const topics = [];\n        for (const channelName of channelNames) {\n            const topic = this.subscriptions.topic(channelName);\n            if (topic) {\n                topics.push(topic);\n            }\n        }\n        this.sendSubscribe(topics);\n    }\n    online() {\n        var _a;\n        this.lastCameOnline = Date.now();\n        this.state = 'online';\n        (_a = this.retrying) === null || _a === void 0 ? void 0 : _a.abort();\n        this.socket.open();\n    }\n    offline() {\n        var _a;\n        this.state = 'offline';\n        (_a = this.retrying) === null || _a === void 0 ? void 0 : _a.abort();\n        this.socket.close();\n    }\n    shutdown() {\n        if (this.inSharedWorker) {\n            self.close();\n        }\n    }\n    get reconnectWindow() {\n        const wasRecentlyOffline = Date.now() - this.lastCameOnline < 60 * 1000;\n        if (this.connectionCount === 0 || this.intentionallyDisconnected || wasRecentlyOffline) {\n            return 0;\n        }\n        return 10 * 1000;\n    }\n    socketDidOpen() {\n        this.intentionallyDisconnected = false;\n        this.connectionCount++;\n        this.socket.url = this.getUrlWithPresenceId();\n        this.sendSubscribe(this.subscriptions.topics());\n    }\n    socketDidClose(socket, code, reason) {\n        if (this.redeployEarlyReconnectTimeout !== undefined) {\n            clearTimeout(this.redeployEarlyReconnectTimeout);\n        }\n        if (reason === \"Alive Reconnect\") {\n            this.intentionallyDisconnected = true;\n        }\n        else if (reason === \"Alive Redeploy\") {\n            this.intentionallyDisconnected = true;\n            const reconnectDelayMinutes = 3 + Math.random() * 22;\n            const reconnectDelay = reconnectDelayMinutes * 60 * 1000;\n            this.redeployEarlyReconnectTimeout = setTimeout(() => {\n                this.intentionallyDisconnected = true;\n                this.socket.close(1000, 'Alive Redeploy Early Client Reconnect');\n            }, reconnectDelay);\n        }\n    }\n    socketDidFinish() {\n        if (this.state === 'offline')\n            return;\n        this.reconnect();\n    }\n    socketDidReceiveMessage(_, message) {\n        const payload = JSON.parse(message);\n        switch (payload.e) {\n            case 'ack': {\n                this.handleAck(payload);\n                break;\n            }\n            case 'msg': {\n                this.handleMessage(payload);\n                break;\n            }\n        }\n    }\n    handleAck(ack) {\n        for (const topic of this.subscriptions.topics()) {\n            topic.offset = ack.off;\n        }\n    }\n    handleMessage(msg) {\n        const channel = msg.ch;\n        const topic = this.subscriptions.topic(channel);\n        if (!topic)\n            return;\n        topic.offset = msg.off;\n        if ('e' in msg.data) {\n            const presenceItems = this.presence.handleMessage(channel, msg.data);\n            this.notifyPresenceChannel(channel, presenceItems);\n            return;\n        }\n        if (!msg.data.wait)\n            msg.data.wait = 0;\n        this.notify(this.subscriptions.subscribers(channel), {\n            channel,\n            type: 'message',\n            data: msg.data\n        });\n    }\n    notifyPresenceChannel(channel, presenceItems) {\n        var _a, _b;\n        const userPresenceById = new Map();\n        for (const presenceItem of presenceItems) {\n            const { userId, metadata, presenceKey } = presenceItem;\n            const userPresence = userPresenceById.get(userId) || { userId, isOwnUser: userId === this.userId, metadata: [] };\n            if (presenceKey === this.presenceKey) {\n                continue;\n            }\n            for (const data of metadata) {\n                if (IDLE_METADATA_KEY in data) {\n                    if (userPresence.isIdle !== false) {\n                        userPresence.isIdle = Boolean(data[IDLE_METADATA_KEY]);\n                    }\n                    continue;\n                }\n                userPresence.metadata.push(data);\n            }\n            userPresenceById.set(userId, userPresence);\n        }\n        for (const subscriber of this.subscriptions.subscribers(channel)) {\n            const userId = this.userId;\n            const otherUsers = Array.from(userPresenceById.values()).filter(user => user.userId !== userId);\n            const ownUserRemoteMetadata = (_b = (_a = userPresenceById.get(this.userId)) === null || _a === void 0 ? void 0 : _a.metadata) !== null && _b !== void 0 ? _b : [];\n            const ownUserLocalMetadata = this.presenceMetadata.getChannelMetadata(channel, {\n                subscriber,\n                markAllAsLocal: !this.inSharedWorker\n            });\n            this.notify([subscriber], {\n                channel,\n                type: 'presence',\n                data: [\n                    {\n                        userId,\n                        isOwnUser: true,\n                        metadata: [...ownUserRemoteMetadata, ...ownUserLocalMetadata]\n                    },\n                    ...otherUsers\n                ]\n            });\n        }\n    }\n    async reconnect() {\n        if (this.retrying)\n            return;\n        try {\n            this.retrying = new AbortController();\n            const url = await retry(this.getUrl, Infinity, this.maxReconnectBackoff, this.retrying.signal);\n            if (url) {\n                this.url = url;\n                this.socket = this.connect();\n            }\n            else {\n                this.shutdown();\n            }\n        }\n        catch (e) {\n            if (e.name !== 'AbortError')\n                throw e;\n        }\n        finally {\n            this.retrying = null;\n        }\n    }\n    getUrlWithPresenceId() {\n        const liveUrl = new URL(this.url, self.location.origin);\n        liveUrl.searchParams.set('shared', this.inSharedWorker.toString());\n        liveUrl.searchParams.set('p', `${this.presenceId}.${this.connectionCount}`);\n        return liveUrl.toString();\n    }\n    connect() {\n        const socket = new StableSocket(this.getUrlWithPresenceId(), this, { timeout: 4000, attempts: 7 });\n        socket.open();\n        return socket;\n    }\n    sendSubscribe(topics) {\n        const entries = Array.from(topics);\n        for (const slice of eachSlice(entries, 25)) {\n            const subscribe = {};\n            for (const topic of slice) {\n                if (isPresenceChannel(topic.name)) {\n                    subscribe[topic.signed] = JSON.stringify(this.presenceMetadata.getChannelMetadata(topic.name));\n                }\n                else {\n                    subscribe[topic.signed] = topic.offset;\n                }\n            }\n            this.socket.send(JSON.stringify({ subscribe }));\n        }\n    }\n    sendUnsubscribe(topics) {\n        const signed = Array.from(topics, t => t.signed);\n        for (const slice of eachSlice(signed, 25)) {\n            this.socket.send(JSON.stringify({ unsubscribe: slice }));\n        }\n        for (const topic of topics) {\n            if (isPresenceChannel(topic.name)) {\n                this.presence.clearChannel(topic.name);\n            }\n        }\n    }\n}\n","function whenAborted(signal) {\n    return new Promise((resolve, reject) => {\n        const error = new Error('aborted');\n        error.name = 'AbortError';\n        if (signal.aborted) {\n            reject(error);\n        }\n        else {\n            signal.addEventListener('abort', () => reject(error));\n        }\n    });\n}\nexport async function wait(ms, signal) {\n    let id;\n    const done = new Promise(resolve => {\n        id = self.setTimeout(resolve, ms);\n    });\n    if (!signal)\n        return done;\n    try {\n        await Promise.race([done, whenAborted(signal)]);\n    }\n    catch (e) {\n        self.clearTimeout(id);\n        throw e;\n    }\n}\nfunction rand(max) {\n    return Math.floor(Math.random() * Math.floor(max));\n}\nexport async function retry(fn, attempts, maxDelay = Infinity, signal) {\n    const aborted = signal ? whenAborted(signal) : null;\n    for (let i = 0; i < attempts; i++) {\n        try {\n            const op = aborted ? Promise.race([fn(), aborted]) : fn();\n            return await op;\n        }\n        catch (e) {\n            if (e.name === 'AbortError')\n                throw e;\n            if (i === attempts - 1)\n                throw e;\n            const ms = Math.pow(2, i) * 1000;\n            const vary = rand(ms * 0.1);\n            await wait(Math.min(maxDelay, ms + vary), signal);\n        }\n    }\n    throw new Error('retry failed');\n}\n","export function* eachSlice(values, size) {\n    for (let i = 0; i < values.length; i += size) {\n        yield values.slice(i, i + size);\n    }\n}\n","export const IDLE_METADATA_KEY = '_i';\nfunction markMetadataAsLocal(metadata) {\n    return Object.assign(Object.assign({}, metadata), { isLocal: true });\n}\nclass PresenceMetadataForChannel {\n    constructor() {\n        this.subscriberMetadata = new Map();\n    }\n    setMetadata(subscriber, value) {\n        this.subscriberMetadata.set(subscriber, value);\n    }\n    removeSubscribers(subscribers) {\n        let found = false;\n        for (const subscriber of subscribers) {\n            found = this.subscriberMetadata.delete(subscriber) || found;\n        }\n        return found;\n    }\n    getMetadata(localizationOptions) {\n        if (!localizationOptions) {\n            const allMetadata = [];\n            let idle;\n            for (const subscriberMetadata of this.subscriberMetadata.values()) {\n                for (const metadata of subscriberMetadata) {\n                    if (IDLE_METADATA_KEY in metadata) {\n                        const subscriberIsIdle = Boolean(metadata[IDLE_METADATA_KEY]);\n                        idle = idle === undefined ? subscriberIsIdle : subscriberIsIdle && idle;\n                    }\n                    else {\n                        allMetadata.push(metadata);\n                    }\n                }\n            }\n            if (idle !== undefined) {\n                allMetadata.push({ [IDLE_METADATA_KEY]: idle ? 1 : 0 });\n            }\n            return allMetadata;\n        }\n        const metadata = [];\n        const { subscriber, markAllAsLocal } = localizationOptions;\n        for (const [fromSubscriber, subscriberMetadata] of this.subscriberMetadata) {\n            const shouldLocalizeMetadata = markAllAsLocal || fromSubscriber === subscriber;\n            const metadataToAdd = shouldLocalizeMetadata ? subscriberMetadata.map(markMetadataAsLocal) : subscriberMetadata;\n            metadata.push(...metadataToAdd);\n        }\n        return metadata;\n    }\n    hasSubscribers() {\n        return this.subscriberMetadata.size > 0;\n    }\n}\nexport class PresenceMetadataSet {\n    constructor() {\n        this.metadataByChannel = new Map();\n    }\n    setMetadata({ subscriber, channelName, metadata }) {\n        let channelMetadata = this.metadataByChannel.get(channelName);\n        if (!channelMetadata) {\n            channelMetadata = new PresenceMetadataForChannel();\n            this.metadataByChannel.set(channelName, channelMetadata);\n        }\n        channelMetadata.setMetadata(subscriber, metadata);\n    }\n    removeSubscribers(subscribers) {\n        const channelsWithSubscribers = new Set();\n        for (const [channelName, channelMetadata] of this.metadataByChannel) {\n            const channelHadSubscriber = channelMetadata.removeSubscribers(subscribers);\n            if (channelHadSubscriber) {\n                channelsWithSubscribers.add(channelName);\n            }\n            if (!channelMetadata.hasSubscribers()) {\n                this.metadataByChannel.delete(channelName);\n            }\n        }\n        return channelsWithSubscribers;\n    }\n    getChannelMetadata(channelName, localizationOptions) {\n        const channelMetadata = this.metadataByChannel.get(channelName);\n        return (channelMetadata === null || channelMetadata === void 0 ? void 0 : channelMetadata.getMetadata(localizationOptions)) || [];\n    }\n}\n","export function getPresenceKey(userId, presenceId) {\n    return `${userId}:${presenceId}`;\n}\nexport function decompressItem(data) {\n    const [presenceId, connectionCount] = data.p.split('.');\n    return {\n        userId: data.u,\n        presenceKey: getPresenceKey(data.u, presenceId),\n        connectionCount: Number(connectionCount),\n        metadata: data.m || []\n    };\n}\nconst presenceChannelPrefix = 'presence-';\nexport function isPresenceChannel(channelName) {\n    return channelName.startsWith(presenceChannelPrefix);\n}\nclass PresenceChannel {\n    constructor() {\n        this.presenceItems = new Map();\n    }\n    shouldUsePresenceItem(item) {\n        const existingItem = this.presenceItems.get(item.presenceKey);\n        return !existingItem || existingItem.connectionCount <= item.connectionCount;\n    }\n    addPresenceItem(item) {\n        if (!this.shouldUsePresenceItem(item)) {\n            return;\n        }\n        this.presenceItems.set(item.presenceKey, item);\n    }\n    removePresenceItem(item) {\n        if (!this.shouldUsePresenceItem(item)) {\n            return;\n        }\n        this.presenceItems.delete(item.presenceKey);\n    }\n    replacePresenceItems(items) {\n        this.presenceItems.clear();\n        for (const item of items) {\n            this.addPresenceItem(item);\n        }\n    }\n    getPresenceItems() {\n        return Array.from(this.presenceItems.values());\n    }\n}\nexport class AlivePresence {\n    constructor() {\n        this.presenceChannels = new Map();\n    }\n    getPresenceChannel(channelName) {\n        const channel = this.presenceChannels.get(channelName) || new PresenceChannel();\n        this.presenceChannels.set(channelName, channel);\n        return channel;\n    }\n    handleMessage(channelName, data) {\n        const channel = this.getPresenceChannel(channelName);\n        switch (data.e) {\n            case 'pf':\n                channel.replacePresenceItems(data.d.map(decompressItem));\n                break;\n            case 'pa':\n                channel.addPresenceItem(decompressItem(data.d));\n                break;\n            case 'pr':\n                channel.removePresenceItem(decompressItem(data.d));\n                break;\n        }\n        return this.getChannelItems(channelName);\n    }\n    getChannelItems(channelName) {\n        const channel = this.getPresenceChannel(channelName);\n        return channel.getPresenceItems();\n    }\n    clearChannel(channelName) {\n        this.presenceChannels.delete(channelName);\n    }\n}\n","import MultiMap from '@github/multimap';\nexport class SubscriptionSet {\n    constructor() {\n        this.subscriptions = new MultiMap();\n        this.signatures = new Map();\n    }\n    add(...subscriptions) {\n        const added = [];\n        for (const { subscriber, topic } of subscriptions) {\n            if (!this.subscriptions.has(topic.name)) {\n                added.push(topic);\n                this.signatures.set(topic.name, topic);\n            }\n            this.subscriptions.set(topic.name, subscriber);\n        }\n        return added;\n    }\n    delete(...subscriptions) {\n        const removed = [];\n        for (const { subscriber, topic } of subscriptions) {\n            const deleted = this.subscriptions.delete(topic.name, subscriber);\n            if (deleted && !this.subscriptions.has(topic.name)) {\n                removed.push(topic);\n                this.signatures.delete(topic.name);\n            }\n        }\n        return removed;\n    }\n    drain(...subscribers) {\n        const removed = [];\n        for (const subscriber of subscribers) {\n            for (const name of this.subscriptions.drain(subscriber)) {\n                const topic = this.signatures.get(name);\n                this.signatures.delete(name);\n                removed.push(topic);\n            }\n        }\n        return removed;\n    }\n    topics() {\n        return this.signatures.values();\n    }\n    topic(name) {\n        return this.signatures.get(name) || null;\n    }\n    subscribers(topic) {\n        return this.subscriptions.get(topic).values();\n    }\n}\n","export class Topic {\n    constructor(name, signed) {\n        this.name = name;\n        this.signed = signed;\n        this.offset = '';\n    }\n    static parse(data) {\n        const [content, signature] = data.split('--');\n        if (!content || !signature)\n            return null;\n        const sub = JSON.parse(atob(content));\n        if (!sub.c || !sub.t)\n            return null;\n        return new Topic(sub.c, data);\n    }\n}\n","export default class MultiMap {\n    constructor(iterable) {\n        this.map = new Map();\n        if (iterable) {\n            for (const [k, v] of iterable) {\n                this.set(k, v);\n            }\n        }\n    }\n    get(key) {\n        const values = this.map.get(key);\n        return values ? values : new Set();\n    }\n    set(key, value) {\n        let values = this.map.get(key);\n        if (!values) {\n            values = new Set();\n            this.map.set(key, values);\n        }\n        values.add(value);\n        return this;\n    }\n    has(key) {\n        return this.map.has(key);\n    }\n    delete(key, value) {\n        const values = this.map.get(key);\n        if (!values)\n            return false;\n        if (!value)\n            return this.map.delete(key);\n        const deleted = values.delete(value);\n        if (!values.size)\n            this.map.delete(key);\n        return deleted;\n    }\n    drain(value) {\n        const empty = [];\n        for (const key of this.keys()) {\n            if (this.delete(key, value) && !this.has(key)) {\n                empty.push(key);\n            }\n        }\n        return empty;\n    }\n    keys() {\n        return this.map.keys();\n    }\n    values() {\n        return this.map.values();\n    }\n    entries() {\n        return this.map.entries();\n    }\n    [Symbol.iterator]() {\n        return this.entries();\n    }\n    clear() {\n        this.map.clear();\n    }\n    get size() {\n        return this.map.size;\n    }\n}\n","async function timeout(ms, signal) {\n    let id;\n    const done = new Promise((resolve, reject) => {\n        id = self.setTimeout(() => reject(new Error('timeout')), ms);\n    });\n    if (!signal)\n        return done;\n    try {\n        await Promise.race([done, whenAborted(signal)]);\n    }\n    catch (e) {\n        self.clearTimeout(id);\n        throw e;\n    }\n}\nasync function wait(ms, signal) {\n    let id;\n    const done = new Promise(resolve => {\n        id = self.setTimeout(resolve, ms);\n    });\n    if (!signal)\n        return done;\n    try {\n        await Promise.race([done, whenAborted(signal)]);\n    }\n    catch (e) {\n        self.clearTimeout(id);\n        throw e;\n    }\n}\nasync function retry(fn, attempts, maxDelay = Infinity, signal) {\n    const aborted = signal ? whenAborted(signal) : null;\n    for (let i = 0; i < attempts; i++) {\n        try {\n            const op = aborted ? Promise.race([fn(), aborted]) : fn();\n            return await op;\n        }\n        catch (e) {\n            if (e.name === 'AbortError')\n                throw e;\n            if (i === attempts - 1)\n                throw e;\n            const ms = Math.pow(2, i) * 1000;\n            const vary = rand(ms * 0.1);\n            await wait(Math.min(maxDelay, ms + vary), signal);\n        }\n    }\n    throw new Error('retry failed');\n}\nfunction whenAborted(signal) {\n    return new Promise((resolve, reject) => {\n        const error = new Error('aborted');\n        error.name = 'AbortError';\n        if (signal.aborted) {\n            reject(error);\n        }\n        else {\n            signal.addEventListener('abort', () => reject(error));\n        }\n    });\n}\nfunction rand(max) {\n    return Math.floor(Math.random() * Math.floor(max));\n}\n\nasync function connect(url, ms, signal) {\n    const socket = new WebSocket(url);\n    const opened = whenOpen(socket);\n    try {\n        await Promise.race([opened, timeout(ms, signal)]);\n        return socket;\n    }\n    catch (e) {\n        shutdown(opened);\n        throw e;\n    }\n}\nasync function shutdown(opened) {\n    try {\n        const socket = await opened;\n        socket.close();\n    }\n    catch (_a) {\n    }\n}\nfunction connectWithRetry(url, policy) {\n    const fn = () => connect(url, policy.timeout, policy.signal);\n    return retry(fn, policy.attempts, policy.maxDelay, policy.signal);\n}\nfunction whenOpen(socket) {\n    return new Promise((resolve, reject) => {\n        if (socket.readyState === WebSocket.OPEN) {\n            resolve(socket);\n        }\n        else {\n            socket.onerror = () => {\n                socket.onerror = null;\n                socket.onopen = null;\n                reject(new Error('connect failed'));\n            };\n            socket.onopen = () => {\n                socket.onerror = null;\n                socket.onopen = null;\n                resolve(socket);\n            };\n        }\n    });\n}\n\nclass StableSocket {\n    constructor(url, delegate, policy) {\n        this.socket = null;\n        this.opening = null;\n        this.url = url;\n        this.delegate = delegate;\n        this.policy = policy;\n    }\n    async open() {\n        if (this.opening || this.socket)\n            return;\n        this.opening = new AbortController();\n        const policy = Object.assign(Object.assign({}, this.policy), { signal: this.opening.signal });\n        try {\n            this.socket = await connectWithRetry(this.url, policy);\n        }\n        catch (_a) {\n            this.delegate.socketDidFinish(this);\n            return;\n        }\n        finally {\n            this.opening = null;\n        }\n        this.socket.onclose = (event) => {\n            this.socket = null;\n            this.delegate.socketDidClose(this, event.code, event.reason);\n            const fatal = this.delegate.socketShouldRetry\n                ? !this.delegate.socketShouldRetry(this, event.code)\n                : isFatal(event.code);\n            if (fatal) {\n                this.delegate.socketDidFinish(this);\n            }\n            else {\n                setTimeout(() => this.open(), rand$1(100, 100 + (this.delegate.reconnectWindow || 50)));\n            }\n        };\n        this.socket.onmessage = (event) => {\n            this.delegate.socketDidReceiveMessage(this, event.data);\n        };\n        this.delegate.socketDidOpen(this);\n    }\n    close(code, reason) {\n        if (this.opening) {\n            this.opening.abort();\n            this.opening = null;\n        }\n        else if (this.socket) {\n            this.socket.onclose = null;\n            this.socket.close(code, reason);\n            this.socket = null;\n            this.delegate.socketDidClose(this, code, reason);\n            this.delegate.socketDidFinish(this);\n        }\n    }\n    send(data) {\n        if (this.socket) {\n            this.socket.send(data);\n        }\n    }\n    isOpen() {\n        return !!this.socket;\n    }\n}\nfunction rand$1(min, max) {\n    return Math.random() * (max - min) + min;\n}\nfunction isFatal(code) {\n    return code === POLICY_VIOLATION || code === INTERNAL_ERROR;\n}\nconst POLICY_VIOLATION = 1008;\nconst INTERNAL_ERROR = 1011;\n\nclass BufferedSocket {\n    constructor(socket) {\n        this.buf = [];\n        this.socket = socket;\n        this.delegate = socket.delegate;\n        socket.delegate = this;\n    }\n    open() {\n        return this.socket.open();\n    }\n    close(code, reason) {\n        this.socket.close(code, reason);\n    }\n    send(data) {\n        if (this.socket.isOpen()) {\n            this.flush();\n            this.socket.send(data);\n        }\n        else {\n            this.buf.push(data);\n        }\n    }\n    isOpen() {\n        return this.socket.isOpen();\n    }\n    flush() {\n        for (const data of this.buf) {\n            this.socket.send(data);\n        }\n        this.buf.length = 0;\n    }\n    socketDidOpen(socket) {\n        this.flush();\n        this.delegate.socketDidOpen(socket);\n    }\n    socketDidClose(socket, code, reason) {\n        this.delegate.socketDidClose(socket, code, reason);\n    }\n    socketDidFinish(socket) {\n        this.delegate.socketDidFinish(socket);\n    }\n    socketDidReceiveMessage(socket, message) {\n        this.delegate.socketDidReceiveMessage(socket, message);\n    }\n    socketShouldRetry(socket, code) {\n        return this.delegate.socketShouldRetry ? this.delegate.socketShouldRetry(socket, code) : !isFatal(code);\n    }\n}\n\nexport { BufferedSocket, StableSocket, connect, connectWithRetry };\n"],"names":["throttle","callback","wait","start","middle","once","timer","last","cancelled","fn","args","delta","Date","now","apply","cancel","clearTimeout","setTimeout","debounce","SocketDisconnectReasons","AliveSession","constructor","url","getUrl","inSharedWorker","notify","maxReconnectBackoff","subscriptions","state","retrying","connectionCount","presence","presenceMetadata","intentionallyDisconnected","lastCameOnline","userId","getUserIdFromSocketUrl","match","presenceId","Math","round","random","presenceKey","socket","connect","subscribe","added","add","subscription","sendSubscribe","channel","topic","name","notifyCachedPresence","subscriber","unsubscribe","removed","delete","sendUnsubscribe","unsubscribeAll","subscribers","drain","updatedPresenceChannels","removeSubscribers","sendPresenceMetadataUpdate","requestPresence","channels","presenceItems","getChannelItems","length","notifyPresenceChannel","updatePresenceMetadata","metadataUpdates","updatedChannels","Set","update","setMetadata","channelName","channelNames","size","topics","push","online","_a","abort","open","offline","close","shutdown","self","reconnectWindow","wasRecentlyOffline","socketDidOpen","getUrlWithPresenceId","socketDidClose","code","reason","undefined","redeployEarlyReconnectTimeout","reconnectDelayMinutes","socketDidFinish","reconnect","socketDidReceiveMessage","_","message","payload","JSON","parse","e","handleAck","handleMessage","ack","offset","off","msg","ch","data","type","_b","userPresenceById","Map","presenceItem","metadata","userPresence","get","isOwnUser","isIdle","Boolean","set","otherUsers","Array","from","values","filter","user","ownUserRemoteMetadata","ownUserLocalMetadata","getChannelMetadata","markAllAsLocal","AbortController","Infinity","signal","liveUrl","URL","location","origin","searchParams","toString","timeout","attempts","entries","slice","signed","stringify","send","t","clearChannel","whenAborted","Promise","resolve","reject","error","aborted","addEventListener","ms","id","done","race","retry","maxDelay","i","op","pow","vary","floor","min","eachSlice","IDLE_METADATA_KEY","markMetadataAsLocal","Object","assign","isLocal","PresenceMetadataForChannel","subscriberMetadata","value","found","getMetadata","localizationOptions","idle","allMetadata","subscriberIsIdle","fromSubscriber","shouldLocalizeMetadata","metadataToAdd","map","hasSubscribers","PresenceMetadataSet","metadataByChannel","channelMetadata","channelsWithSubscribers","channelHadSubscriber","getPresenceKey","decompressItem","p","split","u","Number","m","isPresenceChannel","startsWith","PresenceChannel","shouldUsePresenceItem","item","existingItem","addPresenceItem","removePresenceItem","replacePresenceItems","items","clear","getPresenceItems","AlivePresence","presenceChannels","getPresenceChannel","d","SubscriptionSet","signatures","has","deleted","Topic","content","signature","sub","atob","c","MultiMap","iterable","k","v","key","empty","keys","Symbol","iterator","WebSocket","opened","readyState","OPEN","onerror","onopen","StableSocket","delegate","policy","opening","onclose","event","fatal","socketShouldRetry","POLICY_VIOLATION","INTERNAL_ERROR","max","onmessage","isOpen"],"sourceRoot":""}